[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13262#discussion_r188950020"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13262"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188950020"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, space after `if`.",
      "commit_id" : "ecb2e207c3277421f9d3bfbfca9dda0201582839",
      "created_at" : "2018-05-17T13:08:05Z",
      "diff_hunk" : "@@ -990,6 +990,21 @@ bool CWallet::AddToWallet(const CWalletTx& wtxIn, bool fFlushOnClose)\n         t.detach(); // thread runs free\n     }\n \n+    {\n+        // update the latest transaction id in case it has changed\n+        std::lock_guard<std::mutex> lock(m_cs_txadd);\n+        if(!wtxOrdered.empty()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13262#discussion_r188950020",
      "id" : 188950020,
      "original_commit_id" : "3899ae1aee0a6d051b93509d5709a07beae34eeb",
      "original_position" : 7,
      "path" : "src/wallet/wallet.cpp",
      "position" : 7,
      "pull_request_review_id" : 121031108,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13262",
      "updated_at" : "2018-05-17T13:29:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188950020",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13262#discussion_r188950501"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13262"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188950501"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can this be `nullptr`? Could `assert(pwtx)` instead?",
      "commit_id" : "ecb2e207c3277421f9d3bfbfca9dda0201582839",
      "created_at" : "2018-05-17T13:09:40Z",
      "diff_hunk" : "@@ -990,6 +990,21 @@ bool CWallet::AddToWallet(const CWalletTx& wtxIn, bool fFlushOnClose)\n         t.detach(); // thread runs free\n     }\n \n+    {\n+        // update the latest transaction id in case it has changed\n+        std::lock_guard<std::mutex> lock(m_cs_txadd);\n+        if(!wtxOrdered.empty()) {\n+            CWalletTx *pwtx = (--wtxOrdered.end())->second.first;\n+            if (pwtx) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13262#discussion_r188950501",
      "id" : 188950501,
      "original_commit_id" : "3899ae1aee0a6d051b93509d5709a07beae34eeb",
      "original_position" : 9,
      "path" : "src/wallet/wallet.cpp",
      "position" : 9,
      "pull_request_review_id" : 121031108,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13262",
      "updated_at" : "2018-05-17T13:29:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188950501",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13262#discussion_r188953202"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13262"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188953202"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Could keep `wtxOrdered` back iterator instead:\r\n```\r\nTxItems::const_iterator m_latest_wtx = wtxOrdered.rbegin();\r\n```\r\nThen above could be:\r\n```cpp\r\nif (m_latest_wtxid != wtxOrdered.rbegin()) {\r\n    ...\r\n}\r\n",
      "commit_id" : "ecb2e207c3277421f9d3bfbfca9dda0201582839",
      "created_at" : "2018-05-17T13:18:29Z",
      "diff_hunk" : "@@ -1180,6 +1180,11 @@ class CWallet final : public CCryptoKeyStore, public CValidationInterface\n \n     /** Whether a given output is spendable by this wallet */\n     bool OutputEligibleForSpending(const COutput& output, const CoinEligibilityFilter& eligibility_filter) const;\n+\n+    /** mutex, container and condition variable for updating the latest transaction id */\n+    std::mutex m_cs_txadd;\n+    std::condition_variable m_cond_txadd;\n+    uint256 m_latest_wtxid;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13262#discussion_r188953202",
      "id" : 188953202,
      "original_commit_id" : "3899ae1aee0a6d051b93509d5709a07beae34eeb",
      "original_position" : 8,
      "path" : "src/wallet/wallet.h",
      "position" : 8,
      "pull_request_review_id" : 121031108,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13262",
      "updated_at" : "2018-05-17T13:29:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188953202",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13262#discussion_r188953584"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13262"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188953584"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```cpp\r\n... = wtxOrdered.rbegin()->second.first;\r\n```",
      "commit_id" : "ecb2e207c3277421f9d3bfbfca9dda0201582839",
      "created_at" : "2018-05-17T13:19:39Z",
      "diff_hunk" : "@@ -990,6 +990,21 @@ bool CWallet::AddToWallet(const CWalletTx& wtxIn, bool fFlushOnClose)\n         t.detach(); // thread runs free\n     }\n \n+    {\n+        // update the latest transaction id in case it has changed\n+        std::lock_guard<std::mutex> lock(m_cs_txadd);\n+        if(!wtxOrdered.empty()) {\n+            CWalletTx *pwtx = (--wtxOrdered.end())->second.first;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13262#discussion_r188953584",
      "id" : 188953584,
      "original_commit_id" : "3899ae1aee0a6d051b93509d5709a07beae34eeb",
      "original_position" : 8,
      "path" : "src/wallet/wallet.cpp",
      "position" : 8,
      "pull_request_review_id" : 121031108,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13262",
      "updated_at" : "2018-05-17T13:29:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188953584",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13262#discussion_r188953826"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13262"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188953826"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Missing notify on `m_cond_txadd`?",
      "commit_id" : "ecb2e207c3277421f9d3bfbfca9dda0201582839",
      "created_at" : "2018-05-17T13:20:23Z",
      "diff_hunk" : "@@ -1009,6 +1024,10 @@ bool CWallet::LoadToWallet(const CWalletTx& wtxIn)\n             }\n         }\n     }\n+    if (!wtxOrdered.empty()) {\n+        std::lock_guard<std::mutex> lock(m_cs_txadd);\n+        m_latest_wtxid = wtxOrdered.rbegin()->second.first->GetHash();\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13262#discussion_r188953826",
      "id" : 188953826,
      "original_commit_id" : "3899ae1aee0a6d051b93509d5709a07beae34eeb",
      "original_position" : 29,
      "path" : "src/wallet/wallet.cpp",
      "position" : 29,
      "pull_request_review_id" : 121031108,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13262",
      "updated_at" : "2018-05-17T13:29:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188953826",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13262#discussion_r188954400"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13262"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188954400"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`txid` is required, should be out of `( )`.",
      "commit_id" : "ecb2e207c3277421f9d3bfbfca9dda0201582839",
      "created_at" : "2018-05-17T13:22:14Z",
      "diff_hunk" : "@@ -2117,6 +2117,81 @@ static UniValue listaccounts(const JSONRPCRequest& request)\n     return ret;\n }\n \n+static UniValue listsincetx(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n+        throw std::runtime_error(\n+            \"listsincetx ( \\\"txid\\\" poll )\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13262#discussion_r188954400",
      "id" : 188954400,
      "original_commit_id" : "016d27a6260fb0d1a62e4da869ba480c0fec1193",
      "original_position" : 13,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 13,
      "pull_request_review_id" : 121031108,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13262",
      "updated_at" : "2018-05-17T13:29:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188954400",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13262#discussion_r188954971"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13262"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188954971"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should be\r\n```cpp\r\nthrow JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid or non-wallet transaction id\");\r\n```\r\nwhich is the error used in other calls.",
      "commit_id" : "ecb2e207c3277421f9d3bfbfca9dda0201582839",
      "created_at" : "2018-05-17T13:24:01Z",
      "diff_hunk" : "@@ -2117,6 +2117,81 @@ static UniValue listaccounts(const JSONRPCRequest& request)\n     return ret;\n }\n \n+static UniValue listsincetx(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n+        throw std::runtime_error(\n+            \"listsincetx ( \\\"txid\\\" poll )\\n\"\n+            \"\\nGet all transactions since a specific transaction [txid].\\n\"\n+            \"This call can be used as longpoll notification channel if follow-up transactions from the latest transaction-id are requested and [polltime] is greater then zero.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"txid\\\"               (string, required) The txid to list transactions since\\n\"\n+            \"1. \\\"polltime\\\"           (numeric, optional) If greater then zero, wait with a timeout of <polltime> seconds for new transactions. It will response immediately when new transactions arrive (default is 0)\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"listsincetx\", \"\")\n+            + HelpExampleCli(\"listsincetx\", \"\\\"66f1e20f43780a67762fa00524e0c4ce0416339aa84e830d90e8dc636cd836e4\\\" 10\")\n+            + HelpExampleRpc(\"listsincetx\", \"\\\"66f1e20f43780a67762fa00524e0c4ce0416339aa84e830d90e8dc636cd836e4\\\", 10\")\n+        );\n+\n+    // Make sure the results are valid at least up to the most recent block\n+    // the user could have gotten from another RPC command prior to now\n+    pwallet->BlockUntilSyncedToCurrentChain();\n+\n+    // we assume that pwallet gets never deconstructed at this point\n+    uint256 hash;\n+    hash.SetHex(request.params[0].get_str());\n+    auto it_find = pwallet->mapWallet.find(hash);\n+    if (it_find == pwallet->mapWallet.end()) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"transaction not found\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13262#discussion_r188954971",
      "id" : 188954971,
      "original_commit_id" : "016d27a6260fb0d1a62e4da869ba480c0fec1193",
      "original_position" : 34,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 34,
      "pull_request_review_id" : 121031108,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13262",
      "updated_at" : "2018-05-17T13:29:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188954971",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13262#discussion_r188955071"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13262"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188955071"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit move up",
      "commit_id" : "ecb2e207c3277421f9d3bfbfca9dda0201582839",
      "created_at" : "2018-05-17T13:24:20Z",
      "diff_hunk" : "@@ -2117,6 +2117,81 @@ static UniValue listaccounts(const JSONRPCRequest& request)\n     return ret;\n }\n \n+static UniValue listsincetx(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n+        throw std::runtime_error(\n+            \"listsincetx ( \\\"txid\\\" poll )\\n\"\n+            \"\\nGet all transactions since a specific transaction [txid].\\n\"\n+            \"This call can be used as longpoll notification channel if follow-up transactions from the latest transaction-id are requested and [polltime] is greater then zero.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"txid\\\"               (string, required) The txid to list transactions since\\n\"\n+            \"1. \\\"polltime\\\"           (numeric, optional) If greater then zero, wait with a timeout of <polltime> seconds for new transactions. It will response immediately when new transactions arrive (default is 0)\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"listsincetx\", \"\")\n+            + HelpExampleCli(\"listsincetx\", \"\\\"66f1e20f43780a67762fa00524e0c4ce0416339aa84e830d90e8dc636cd836e4\\\" 10\")\n+            + HelpExampleRpc(\"listsincetx\", \"\\\"66f1e20f43780a67762fa00524e0c4ce0416339aa84e830d90e8dc636cd836e4\\\", 10\")\n+        );\n+\n+    // Make sure the results are valid at least up to the most recent block\n+    // the user could have gotten from another RPC command prior to now\n+    pwallet->BlockUntilSyncedToCurrentChain();\n+\n+    // we assume that pwallet gets never deconstructed at this point\n+    uint256 hash;\n+    hash.SetHex(request.params[0].get_str());\n+    auto it_find = pwallet->mapWallet.find(hash);\n+    if (it_find == pwallet->mapWallet.end()) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"transaction not found\");\n+    }\n+\n+    UniValue transactions(UniValue::VARR);\n+\n+    // construct a function to populate the output array\n+    auto addTransactionsSince = [&transactions, &pwallet](uint256 wtxid_since) {\n+        LOCK2(cs_main, pwallet->cs_wallet); // we only lock at this point to allow non blocking long polling\n+        isminefilter filter = ISMINE_SPENDABLE;\n+        bool list = false;\n+        // reverse iterate over the ordere transaction map\n+        for (CWallet::TxItems::const_iterator it = pwallet->wtxOrdered.begin(); it != pwallet->wtxOrdered.end(); ++it)\n+        {\n+            CWalletTx *const pwtx = (*it).second.first;\n+            if (pwtx != nullptr && !list && wtxid_since == pwtx->GetHash()) {\n+                // transaction found;\n+                list = true;\n+                continue;\n+            }\n+            else if (list && pwtx != nullptr) {\n+                ListTransactions(pwallet, *pwtx, \"*\", 0, true, transactions, filter);\n+            }\n+        }\n+    };\n+\n+    // find transaction and eventually populate the array with follow-up transactions\n+    addTransactionsSince(it_find->first);\n+\n+    // in case nothing has been found (means newest transaction has been requested) and requested txid is valid, longpoll if requested\n+    if (transactions.empty() && request.params[1].isNum() && request.params[1].get_int() > 0)\n+    {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13262#discussion_r188955071",
      "id" : 188955071,
      "original_commit_id" : "016d27a6260fb0d1a62e4da869ba480c0fec1193",
      "original_position" : 64,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 64,
      "pull_request_review_id" : 121031108,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13262",
      "updated_at" : "2018-05-17T13:29:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188955071",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13262#discussion_r188955222"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13262"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188955222"
         }
      },
      "author_association" : "MEMBER",
      "body" : "arg name should be `poll`?",
      "commit_id" : "ecb2e207c3277421f9d3bfbfca9dda0201582839",
      "created_at" : "2018-05-17T13:24:46Z",
      "diff_hunk" : "@@ -2117,6 +2117,81 @@ static UniValue listaccounts(const JSONRPCRequest& request)\n     return ret;\n }\n \n+static UniValue listsincetx(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n+        throw std::runtime_error(\n+            \"listsincetx ( \\\"txid\\\" poll )\\n\"\n+            \"\\nGet all transactions since a specific transaction [txid].\\n\"\n+            \"This call can be used as longpoll notification channel if follow-up transactions from the latest transaction-id are requested and [polltime] is greater then zero.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"txid\\\"               (string, required) The txid to list transactions since\\n\"\n+            \"1. \\\"polltime\\\"           (numeric, optional) If greater then zero, wait with a timeout of <polltime> seconds for new transactions. It will response immediately when new transactions arrive (default is 0)\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13262#discussion_r188955222",
      "id" : 188955222,
      "original_commit_id" : "016d27a6260fb0d1a62e4da869ba480c0fec1193",
      "original_position" : 18,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 18,
      "pull_request_review_id" : 121031108,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13262",
      "updated_at" : "2018-05-17T13:29:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188955222",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13262#discussion_r188955379"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13262"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188955379"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Remove this invalid usage?",
      "commit_id" : "ecb2e207c3277421f9d3bfbfca9dda0201582839",
      "created_at" : "2018-05-17T13:25:16Z",
      "diff_hunk" : "@@ -2117,6 +2117,81 @@ static UniValue listaccounts(const JSONRPCRequest& request)\n     return ret;\n }\n \n+static UniValue listsincetx(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() < 1 || request.params.size() > 2)\n+        throw std::runtime_error(\n+            \"listsincetx ( \\\"txid\\\" poll )\\n\"\n+            \"\\nGet all transactions since a specific transaction [txid].\\n\"\n+            \"This call can be used as longpoll notification channel if follow-up transactions from the latest transaction-id are requested and [polltime] is greater then zero.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"txid\\\"               (string, required) The txid to list transactions since\\n\"\n+            \"1. \\\"polltime\\\"           (numeric, optional) If greater then zero, wait with a timeout of <polltime> seconds for new transactions. It will response immediately when new transactions arrive (default is 0)\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"listsincetx\", \"\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13262#discussion_r188955379",
      "id" : 188955379,
      "original_commit_id" : "016d27a6260fb0d1a62e4da869ba480c0fec1193",
      "original_position" : 20,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 20,
      "pull_request_review_id" : 121031108,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13262",
      "updated_at" : "2018-05-17T13:29:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188955379",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
