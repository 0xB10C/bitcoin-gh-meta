[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r601057629"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601057629"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think there's any need to `SetupAddressRelay` here, and doing so would cause you to continue choosing inbounds that are treating you as block-relay-only instead of ignoring them as a black hole.",
      "commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "created_at" : "2021-03-25T05:32:50Z",
      "diff_hunk" : "@@ -2625,7 +2625,11 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n             pfrom.fDisconnect = true;\n             return;\n         }\n-        pfrom.m_wants_addrv2 = true;\n+\n+        if (SetupAddressRelay(pfrom)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r601057629",
      "id" : 601057629,
      "line" : 2629,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTA1NzYyOQ==",
      "original_commit_id" : "cd55b53800ec63b516bdca46bfee0d57e34e3af6",
      "original_line" : 2629,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 52,
      "pull_request_review_id" : 620728925,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T21:03:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601057629",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21515 (Erlay: bandwidth-efficient transaction relay protocol by naumenkogs)\n* #21236 (Net processing: Extract `addr` send functionality into MaybeSendAddr() by jnewbery)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-03-25T08:54:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#issuecomment-806477418",
      "id" : 806477418,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21528",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNjQ3NzQxOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-30T01:32:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/806477418",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r601317221"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601317221"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This isn't thread safe. By accessing `m_addr_known` from outside the message handler thread (eg an rpc worker thread or qt), this opens race conditions where `m_addr_known` is being set by the message handler thread and read by an rpc thread concurrently. In such cases, the thread reading the value could see the old value, the new value or garbage.",
      "commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "created_at" : "2021-03-25T10:21:59Z",
      "diff_hunk" : "@@ -611,6 +611,8 @@ void CNode::copyStats(CNodeStats &stats, const std::vector<bool> &m_asmap)\n     stats.addrLocal = addrLocalUnlocked.IsValid() ? addrLocalUnlocked.ToString() : \"\";\n \n     X(m_conn_type);\n+\n+    stats.addr_relay_enabled = RelayAddrsWithConn();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r601317221",
      "id" : 601317221,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTMxNzIyMQ==",
      "original_commit_id" : "ea30030216e1a3456ff609bba7c4d2087940478a",
      "original_line" : 615,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 620941721,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T21:03:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601317221",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r601327487"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601327487"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think it matters much either way. The only peers this affects are inbound block-relay-only connections from v0.21 peers, which (incorrectly) send `sendaddrv2` to us. Inbound block-relay-only peers on v22 won't send `sendaddrv2` because of the change in commit _Stop sending SENDADDRV2 message to block relay only peers_.",
      "commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "created_at" : "2021-03-25T10:30:26Z",
      "diff_hunk" : "@@ -2625,7 +2625,11 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n             pfrom.fDisconnect = true;\n             return;\n         }\n-        pfrom.m_wants_addrv2 = true;\n+\n+        if (SetupAddressRelay(pfrom)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r601327487",
      "id" : 601327487,
      "in_reply_to_id" : 601057629,
      "line" : 2629,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTMyNzQ4Nw==",
      "original_commit_id" : "cd55b53800ec63b516bdca46bfee0d57e34e3af6",
      "original_line" : 2629,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 52,
      "pull_request_review_id" : 620941721,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T21:03:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601327487",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r601328295"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601328295"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I suggest you drop these tidy-up changes in _Add some documentation and small style fixes_. They don't seem very related to the rest of the PR :see_no_evil: ",
      "commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "created_at" : "2021-03-25T10:31:11Z",
      "diff_hunk" : "@@ -4243,12 +4279,17 @@ bool PeerManagerImpl::SendMessages(CNode* pto)\n                     }\n                 }\n             }\n+\n             pto->vAddrToSend.clear();\n-            if (!vAddr.empty())\n+\n+            if (!vAddr.empty()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r601328295",
      "id" : 601328295,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMTMyODI5NQ==",
      "original_commit_id" : "ea30030216e1a3456ff609bba7c4d2087940478a",
      "original_line" : 4285,
      "original_position" : 121,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 620941721,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T21:03:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/601328295",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think that an approach like this was first suggested by AJ in https://github.com/bitcoin/bitcoin/pull/15759#issuecomment-527012757:\r\n\r\n> I think since we AdvertiseLocal regularly to our non-block-relay peers, we could just set a flag on the peer if we've ever seen an ADDR message from them, and only choose nodes with that flag in RelayAddress?\r\n\r\nI think it's a good idea, since it stops us relaying addrs to both inbound block-relay-only peers _and_ other kinds of black holes.",
      "created_at" : "2021-03-25T10:36:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#issuecomment-806541067",
      "id" : 806541067,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21528",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNjU0MTA2Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-25T10:36:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/806541067",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r603710494"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603710494"
         }
      },
      "author_association" : "MEMBER",
      "body" : "ergh, its annoying that v0.21 peers will send us the `sendaddrv2` message, but I'm not sure if this warrants removing this conditional. some thoughts:\r\n- in terms of protocol & logical coherence, I'd expect `sendaddrv2` to indicate desire that the node wants to participate in addr relay\r\n- in this patch, calling `SetupAddressRelay` for the node mimics the behavior of current master. so I think of calling as the default (rather than the other way around)\r\n- in terms of safety, it seems better to have a blackhole than exclude a peer from address relay.   I think... a blackhole means an address, or set of addresses will not propagate as well this time, but excluding a peer from address relay (esp if programmatically / many peers exclude) means that peer could be at a higher risk of being eclipsed? \r\n\r\nI thought I was on the fence, but writing out this reasoning makes me realize I'd like to leave as is.\r\n\r\nthoughts? ",
      "commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "created_at" : "2021-03-30T01:05:47Z",
      "diff_hunk" : "@@ -2625,7 +2625,11 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n             pfrom.fDisconnect = true;\n             return;\n         }\n-        pfrom.m_wants_addrv2 = true;\n+\n+        if (SetupAddressRelay(pfrom)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r603710494",
      "id" : 603710494,
      "in_reply_to_id" : 601057629,
      "line" : 2629,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzcxMDQ5NA==",
      "original_commit_id" : "cd55b53800ec63b516bdca46bfee0d57e34e3af6",
      "original_line" : 2629,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 52,
      "pull_request_review_id" : 623763694,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T21:03:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603710494",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r603711802"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603711802"
         }
      },
      "author_association" : "MEMBER",
      "body" : "ayo, good catch. it feels like overkill to introduce a lock just to expose a boolean, so I've dropped this commit for now. will some of your addr-in-net-processing refactor will make it so we can do this safely? ",
      "commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "created_at" : "2021-03-30T01:09:14Z",
      "diff_hunk" : "@@ -611,6 +611,8 @@ void CNode::copyStats(CNodeStats &stats, const std::vector<bool> &m_asmap)\n     stats.addrLocal = addrLocalUnlocked.IsValid() ? addrLocalUnlocked.ToString() : \"\";\n \n     X(m_conn_type);\n+\n+    stats.addr_relay_enabled = RelayAddrsWithConn();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r603711802",
      "id" : 603711802,
      "in_reply_to_id" : 601317221,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzcxMTgwMg==",
      "original_commit_id" : "ea30030216e1a3456ff609bba7c4d2087940478a",
      "original_line" : 615,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 623764905,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T21:03:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603711802",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r603713142"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603713142"
         }
      },
      "author_association" : "MEMBER",
      "body" : "sorry I'm not sorry!! I abhor two line if statements, they are great footguns. these changes are pretty trivial, I don't think they would make sense as a stand-alone PR, or that they increase the complexity of review, so I'd rather leave them in.",
      "commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "created_at" : "2021-03-30T01:13:48Z",
      "diff_hunk" : "@@ -4243,12 +4279,17 @@ bool PeerManagerImpl::SendMessages(CNode* pto)\n                     }\n                 }\n             }\n+\n             pto->vAddrToSend.clear();\n-            if (!vAddr.empty())\n+\n+            if (!vAddr.empty()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r603713142",
      "id" : 603713142,
      "in_reply_to_id" : 601328295,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzcxMzE0Mg==",
      "original_commit_id" : "ea30030216e1a3456ff609bba7c4d2087940478a",
      "original_line" : 4285,
      "original_position" : 121,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 623766503,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T21:03:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603713142",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "fixed tests & added a test. patch is ready, but leaving as a draft until I gain more confidence that this would not break any other software on the network. ",
      "created_at" : "2021-03-30T04:53:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#issuecomment-809906430",
      "id" : 809906430,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21528",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwOTkwNjQzMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-30T04:53:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/809906430",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r603867126"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603867126"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> will some of your addr-in-net-processing refactor will make it so we can do this safely?\r\n\r\nHopefully, yes!",
      "commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "created_at" : "2021-03-30T07:56:46Z",
      "diff_hunk" : "@@ -611,6 +611,8 @@ void CNode::copyStats(CNodeStats &stats, const std::vector<bool> &m_asmap)\n     stats.addrLocal = addrLocalUnlocked.IsValid() ? addrLocalUnlocked.ToString() : \"\";\n \n     X(m_conn_type);\n+\n+    stats.addr_relay_enabled = RelayAddrsWithConn();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r603867126",
      "id" : 603867126,
      "in_reply_to_id" : 601317221,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzg2NzEyNg==",
      "original_commit_id" : "ea30030216e1a3456ff609bba7c4d2087940478a",
      "original_line" : 615,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 623952119,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T21:03:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603867126",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r603872782"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603872782"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I agree that two line if statements are undesirable. If you were already touching these lines, then I'd agree that you should improve them. However, these are the only changes you make to `SendMessages()` and are unrelated to the rest of the changes in this PR.\r\n\r\nI refactor this entire chunk of logic in #21236. Without this tidy-up commit, the two PRs don't conflict and can be merged in either order. If you include these changes, then the PRs conflict and one will have to be rebased when the other is merged.",
      "commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "created_at" : "2021-03-30T08:05:19Z",
      "diff_hunk" : "@@ -4243,12 +4279,17 @@ bool PeerManagerImpl::SendMessages(CNode* pto)\n                     }\n                 }\n             }\n+\n             pto->vAddrToSend.clear();\n-            if (!vAddr.empty())\n+\n+            if (!vAddr.empty()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r603872782",
      "id" : 603872782,
      "in_reply_to_id" : 601328295,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzg3Mjc4Mg==",
      "original_commit_id" : "ea30030216e1a3456ff609bba7c4d2087940478a",
      "original_line" : 4285,
      "original_position" : 121,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 623959766,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T21:03:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603872782",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r603974606"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603974606"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: is it worth replacing `if (... && !pfrom.IsBlockOnlyConn())` with `if (... && SetupAddrssRelay(pfrom))` since it already checks if the peer is block-relay-only?",
      "commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "created_at" : "2021-03-30T10:27:09Z",
      "diff_hunk" : "@@ -2437,6 +2437,8 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n         }\n \n         if (!pfrom.IsInboundConn() && !pfrom.IsBlockOnlyConn()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r603974606",
      "id" : 603974606,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzk3NDYwNg==",
      "original_commit_id" : "9db8ab25b0aee97cad56e98200918fdf3cf849fb",
      "original_line" : 2439,
      "original_position" : 3,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 624095110,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T21:03:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603974606",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/18324680?v=4",
         "events_url" : "https://api.github.com/users/ccdle12/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ccdle12/followers",
         "following_url" : "https://api.github.com/users/ccdle12/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ccdle12/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ccdle12",
         "id" : 18324680,
         "login" : "ccdle12",
         "node_id" : "MDQ6VXNlcjE4MzI0Njgw",
         "organizations_url" : "https://api.github.com/users/ccdle12/orgs",
         "received_events_url" : "https://api.github.com/users/ccdle12/received_events",
         "repos_url" : "https://api.github.com/users/ccdle12/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ccdle12/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ccdle12/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ccdle12"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r603974781"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603974781"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nice tests, would it would be overkill to also test for the outbound case?",
      "commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "created_at" : "2021-03-30T10:27:23Z",
      "diff_hunk" : "@@ -101,6 +115,25 @@ def relay_tests(self):\n \n         self.nodes[0].disconnect_p2ps()\n \n+    def blackhole_tests(self):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r603974781",
      "id" : 603974781,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzk3NDc4MQ==",
      "original_commit_id" : "8e2bcc0cb68ef2f43c22d686010fde2c2b54080a",
      "original_line" : 118,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "test/functional/p2p_addr_relay.py",
      "position" : null,
      "pull_request_review_id" : 624095310,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T21:03:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603974781",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/18324680?v=4",
         "events_url" : "https://api.github.com/users/ccdle12/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ccdle12/followers",
         "following_url" : "https://api.github.com/users/ccdle12/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ccdle12/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ccdle12",
         "id" : 18324680,
         "login" : "ccdle12",
         "node_id" : "MDQ6VXNlcjE4MzI0Njgw",
         "organizations_url" : "https://api.github.com/users/ccdle12/orgs",
         "received_events_url" : "https://api.github.com/users/ccdle12/received_events",
         "repos_url" : "https://api.github.com/users/ccdle12/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ccdle12/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ccdle12/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ccdle12"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r604430768"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604430768"
         }
      },
      "author_association" : "MEMBER",
      "body" : "ok! reverted :) ",
      "commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "created_at" : "2021-03-30T21:04:33Z",
      "diff_hunk" : "@@ -4243,12 +4279,17 @@ bool PeerManagerImpl::SendMessages(CNode* pto)\n                     }\n                 }\n             }\n+\n             pto->vAddrToSend.clear();\n-            if (!vAddr.empty())\n+\n+            if (!vAddr.empty()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r604430768",
      "id" : 604430768,
      "in_reply_to_id" : 601328295,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNDQzMDc2OA==",
      "original_commit_id" : "ea30030216e1a3456ff609bba7c4d2087940478a",
      "original_line" : 4285,
      "original_position" : 121,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 624702659,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T21:04:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604430768",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r604431246"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604431246"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nice idea, done!",
      "commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "created_at" : "2021-03-30T21:05:24Z",
      "diff_hunk" : "@@ -2437,6 +2437,8 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n         }\n \n         if (!pfrom.IsInboundConn() && !pfrom.IsBlockOnlyConn()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r604431246",
      "id" : 604431246,
      "in_reply_to_id" : 603974606,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNDQzMTI0Ng==",
      "original_commit_id" : "9db8ab25b0aee97cad56e98200918fdf3cf849fb",
      "original_line" : 2439,
      "original_position" : 3,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 624703297,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T21:05:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604431246",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r604432892"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604432892"
         }
      },
      "author_association" : "MEMBER",
      "body" : "definitely not overkill, the inbound vs outbound behavior is different- inbounds we wait to hear an `addr` message before considering the peer eligible for relay, but with outbounds we setup relay, send `getaddr` & self-announce (unless its a block-relay-only connection). I added some tests to check these behaviors. ",
      "commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "created_at" : "2021-03-30T21:08:17Z",
      "diff_hunk" : "@@ -101,6 +115,25 @@ def relay_tests(self):\n \n         self.nodes[0].disconnect_p2ps()\n \n+    def blackhole_tests(self):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r604432892",
      "id" : 604432892,
      "in_reply_to_id" : 603974781,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNDQzMjg5Mg==",
      "original_commit_id" : "8e2bcc0cb68ef2f43c22d686010fde2c2b54080a",
      "original_line" : 118,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "test/functional/p2p_addr_relay.py",
      "position" : null,
      "pull_request_review_id" : 624705469,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T21:08:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604432892",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r604439165"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604439165"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n     *  announcements. Reasons peers might not support addr relay on the link\r\n     *  include that they connected to us as a block-relay-only peer or as a light\r\n     *  client.\r\n```",
      "commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "created_at" : "2021-03-30T21:19:40Z",
      "diff_hunk" : "@@ -546,6 +543,20 @@ class CNode\n \n     // flood relay\n     std::vector<CAddress> vAddrToSend;\n+\n+    /** Bloom filter to track recent addr messages relayed with this peer.\n+     *\n+     *  We initialize this filter for outbound peers (other than\n+     *  block-relay-only connections) or when an inbound peer sends us an\n+     *  address related message (ADDR, ADDRV2, GETADDR, SENDADDRV2).\n+     *\n+     *  We use the presence of this filter to decide whether a peer is eligible\n+     *  for trickle relay of addr messages. This avoids relaying to peers that\n+     *  are unlikely to forward them, effectively blackholing self\n+     *  announcements. Reasons peers might not support addr relay on the link\n+     *  is if they connected to us as a block-relay-only peer or as a light\n+     *  client.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r604439165",
      "id" : 604439165,
      "line" : 558,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNDQzOTE2NQ==",
      "original_commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "original_line" : 558,
      "original_position" : 32,
      "original_start_line" : 556,
      "path" : "src/net.h",
      "position" : 32,
      "pull_request_review_id" : 624713468,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528",
      "side" : "RIGHT",
      "start_line" : 556,
      "start_side" : "RIGHT",
      "updated_at" : "2021-03-30T22:57:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604439165",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r604450797"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604450797"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Since peers are chosen randomly, does it make sense to run `self.inbound_blackhole_tests()` a few extra times, just to assert it's not because the node didn't pick `blackhole_peer` by chance?",
      "commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "created_at" : "2021-03-30T21:41:49Z",
      "diff_hunk" : "@@ -82,6 +130,49 @@ def run_test(self):\n         ipv4_branching_factor = 2\n         assert_equal(total_ipv4_received, num_ipv4_addrs * ipv4_branching_factor)\n \n+        self.nodes[0].disconnect_p2ps()\n+\n+    def inbound_blackhole_tests(self):\n+        self.log.info('Check that we only relay addresses to inbound peers who have previously sent us addr related messages')\n+\n+        addr_source = self.nodes[0].add_p2p_connection(P2PInterface())\n+        receiver_peer = self.nodes[0].add_p2p_connection(AddrReceiver())\n+        blackhole_peer = self.nodes[0].add_p2p_connection(AddrBlackhole())\n+\n+        msg = self.setup_addr_msg(2)\n+        self.send_addr_msg(addr_source, msg, [receiver_peer, blackhole_peer])\n+\n+        assert_equal(receiver_peer.num_ipv4_received, 2)\n+        assert_equal(blackhole_peer.num_ipv4_received, 0)\n+\n+        self.nodes[0].disconnect_p2ps()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r604450797",
      "id" : 604450797,
      "line" : 148,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNDQ1MDc5Nw==",
      "original_commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "original_line" : 148,
      "original_position" : 153,
      "original_start_line" : 135,
      "path" : "test/functional/p2p_addr_relay.py",
      "position" : 153,
      "pull_request_review_id" : 624713468,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528",
      "side" : "RIGHT",
      "start_line" : 135,
      "start_side" : "RIGHT",
      "updated_at" : "2021-03-30T22:57:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604450797",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r604456653"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604456653"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think this test could also be improved by asserting that, after `blackhole_peer` does send an `addr`/`addrv2`/`getaddrs`/`sendaddrv2` message, it can get selected for addr propagation.",
      "commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "created_at" : "2021-03-30T21:53:40Z",
      "diff_hunk" : "@@ -82,6 +130,49 @@ def run_test(self):\n         ipv4_branching_factor = 2\n         assert_equal(total_ipv4_received, num_ipv4_addrs * ipv4_branching_factor)\n \n+        self.nodes[0].disconnect_p2ps()\n+\n+    def inbound_blackhole_tests(self):\n+        self.log.info('Check that we only relay addresses to inbound peers who have previously sent us addr related messages')\n+\n+        addr_source = self.nodes[0].add_p2p_connection(P2PInterface())\n+        receiver_peer = self.nodes[0].add_p2p_connection(AddrReceiver())\n+        blackhole_peer = self.nodes[0].add_p2p_connection(AddrBlackhole())\n+\n+        msg = self.setup_addr_msg(2)\n+        self.send_addr_msg(addr_source, msg, [receiver_peer, blackhole_peer])\n+\n+        assert_equal(receiver_peer.num_ipv4_received, 2)\n+        assert_equal(blackhole_peer.num_ipv4_received, 0)\n+\n+        self.nodes[0].disconnect_p2ps()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r604456653",
      "id" : 604456653,
      "in_reply_to_id" : 604450797,
      "line" : 148,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNDQ1NjY1Mw==",
      "original_commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "original_line" : 148,
      "original_position" : 153,
      "original_start_line" : 135,
      "path" : "test/functional/p2p_addr_relay.py",
      "position" : 153,
      "pull_request_review_id" : 624713468,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528",
      "side" : "RIGHT",
      "start_line" : 135,
      "start_side" : "RIGHT",
      "updated_at" : "2021-03-30T22:57:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604456653",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r604458405"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604458405"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Another thought - for the blackhole peer, I think could be helpful to assert bytes received for addr-related messages = 0 using `getpeerinfo()`",
      "commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "created_at" : "2021-03-30T21:57:04Z",
      "diff_hunk" : "@@ -82,6 +130,49 @@ def run_test(self):\n         ipv4_branching_factor = 2\n         assert_equal(total_ipv4_received, num_ipv4_addrs * ipv4_branching_factor)\n \n+        self.nodes[0].disconnect_p2ps()\n+\n+    def inbound_blackhole_tests(self):\n+        self.log.info('Check that we only relay addresses to inbound peers who have previously sent us addr related messages')\n+\n+        addr_source = self.nodes[0].add_p2p_connection(P2PInterface())\n+        receiver_peer = self.nodes[0].add_p2p_connection(AddrReceiver())\n+        blackhole_peer = self.nodes[0].add_p2p_connection(AddrBlackhole())\n+\n+        msg = self.setup_addr_msg(2)\n+        self.send_addr_msg(addr_source, msg, [receiver_peer, blackhole_peer])\n+\n+        assert_equal(receiver_peer.num_ipv4_received, 2)\n+        assert_equal(blackhole_peer.num_ipv4_received, 0)\n+\n+        self.nodes[0].disconnect_p2ps()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r604458405",
      "id" : 604458405,
      "in_reply_to_id" : 604450797,
      "line" : 148,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNDQ1ODQwNQ==",
      "original_commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "original_line" : 148,
      "original_position" : 153,
      "original_start_line" : 135,
      "path" : "test/functional/p2p_addr_relay.py",
      "position" : 153,
      "pull_request_review_id" : 624713468,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528",
      "side" : "RIGHT",
      "start_line" : 135,
      "start_side" : "RIGHT",
      "updated_at" : "2021-03-30T22:57:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604458405",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r604477534"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604477534"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Side question: why do we clear this list here instead of appending to it, given that `PushAddress` and `SendMessages` filter for duplicates?",
      "commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "created_at" : "2021-03-30T22:41:05Z",
      "diff_hunk" : "@@ -3569,6 +3584,8 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n         }\n         pfrom.fSentAddr = true;\n \n+        SetupAddressRelay(pfrom);\n+\n         pfrom.vAddrToSend.clear();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r604477534",
      "id" : 604477534,
      "line" : 3589,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNDQ3NzUzNA==",
      "original_commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "original_line" : 3589,
      "original_position" : 78,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 78,
      "pull_request_review_id" : 624713468,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-30T22:57:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604477534",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r604497976"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604497976"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Since peers are chosen randomly..\r\n\r\nyes, peers are chosen randomly, but this test is set up to not be random- ipv4 addresses will be relayed to 2 peers that are not the source of the addr message. so both `receiver_peer` and `blackhole_peer` would receive the addr if they were eligible. definitely wouldn't want a flaky test there :) \r\n\r\n> I think this test could also be improved.. \r\n\r\nthats a great idea! I've added locally, will include in next push. \r\n\r\n> assert bytes received for addr-related messages = 0\r\n\r\nhm, `blackhole_peer` is a p2p connection, so we can't call `getpeerinfo()` on it to get the bytes received directly. that said, we could check `bytessent_per_msg` on the node to see that no bytes have been sent for an `addr` message. however, I its a bit brittle & the p2p connection is capturing directly receiving the addr message, so I don't think that's adding much value to the test. let me know if you think it'd add test coverage :) ",
      "commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "created_at" : "2021-03-30T23:35:10Z",
      "diff_hunk" : "@@ -82,6 +130,49 @@ def run_test(self):\n         ipv4_branching_factor = 2\n         assert_equal(total_ipv4_received, num_ipv4_addrs * ipv4_branching_factor)\n \n+        self.nodes[0].disconnect_p2ps()\n+\n+    def inbound_blackhole_tests(self):\n+        self.log.info('Check that we only relay addresses to inbound peers who have previously sent us addr related messages')\n+\n+        addr_source = self.nodes[0].add_p2p_connection(P2PInterface())\n+        receiver_peer = self.nodes[0].add_p2p_connection(AddrReceiver())\n+        blackhole_peer = self.nodes[0].add_p2p_connection(AddrBlackhole())\n+\n+        msg = self.setup_addr_msg(2)\n+        self.send_addr_msg(addr_source, msg, [receiver_peer, blackhole_peer])\n+\n+        assert_equal(receiver_peer.num_ipv4_received, 2)\n+        assert_equal(blackhole_peer.num_ipv4_received, 0)\n+\n+        self.nodes[0].disconnect_p2ps()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21528#discussion_r604497976",
      "id" : 604497976,
      "in_reply_to_id" : 604450797,
      "line" : 148,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNDQ5Nzk3Ng==",
      "original_commit_id" : "0c194ffafd1ed23a9a65ca6f38a2388e34884388",
      "original_line" : 148,
      "original_position" : 153,
      "original_start_line" : 135,
      "path" : "test/functional/p2p_addr_relay.py",
      "position" : 153,
      "pull_request_review_id" : 624783523,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21528",
      "side" : "RIGHT",
      "start_line" : 135,
      "start_side" : "RIGHT",
      "updated_at" : "2021-03-30T23:35:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604497976",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   }
]
