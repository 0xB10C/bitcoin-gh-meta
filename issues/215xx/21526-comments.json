[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21009 (Remove RewindBlockIndex logic by dhruv)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-03-24T21:36:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21526#issuecomment-806201724",
      "id" : 806201724,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21526",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNjIwMTcyNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-24T21:36:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/806201724",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/21526#issue-600020266\r\n\r\n> * Don't run `UpdateTip` for background validation chainstates.\r\n\r\nDoes this prevent bugs in the future when there can be a background validation chainstate? It would help to say what would happen without this change. It could also be helpful to say more about the motivation for this set of changes, and maybe summarize the current state of things for forgetful people like me who somewhat lost the thread on assumeutxo :tropical_fish: \r\n\r\n> * Modify `LoadBlockIndex()` to populate the \"faked\" nChainTx value when using a yet-unvalidated snapshot chainstate. This allows assumeutxo sync-to-tip to offer normal progress estimates on the basis of having nChainTx without the associated block data.\r\n\r\nIIUC, the faking isn't new, and the value was faked before this change, but startup code is now fixed  so things work if the node is restarted before the assumeutxo snapshot is validated? Again could help to say what bad things would happen without this.\r\n\r\n> * In `LoadBlockIndex()`, ensure that assumed-valid CBlockIndex entries aren't added to the background validation chainstate's setBlockIndexCandidates (since we want that chainstate to actually validate those entries at some point).\r\n\r\nWondering also what bad things happen without this change, and why it's in the same commit as the last change. Is it just that both changes affect the `LoadBlockIndex()` function?\r\n\r\n> * Prevent `RewindBlockIndex()` from rewinding past the assumeutxo base on the snapshot chainstate.\r\n\r\nI'm a little confused by this code (also the existing pruning code here). It says the purpose of the break is to prevent the DisconnectTip call immediately below from failing. But don't we want to fail in these cases? It seems like now if rewind isn't possible, this just flushes some things and returns true. I'm also wondering if there's a reason this change is in the same commit as the other changes, which seem tangentially related.\r\n\r\nAlso, there's no test coverage here. Maybe is the best we can do when adding dead code to older functions that weren't really designed to be unit-tested. But are there at least future tests in #15606 that would fail without these different fixes?\r\n\r\nThanks for any clarifications, and great to see assumeutxo work moving along again!",
      "created_at" : "2021-03-29T01:41:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21526#issuecomment-809009595",
      "id" : 809009595,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21526",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwOTAwOTU5NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-29T01:43:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/809009595",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
