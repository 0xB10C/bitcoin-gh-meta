[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11398#discussion_r141087275"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11398"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141087275"
         }
      },
      "author_association" : "MEMBER",
      "body" : "why not combine `['reject']['status']` with `['active']` below? Once these buried softforks are pinned, an active ISM softfork is equivalent to an active BIP9 softfork.",
      "commit_id" : "947d28a3aa2599d4e5ab848f33a20035aedaacdd",
      "created_at" : "2017-09-26T15:10:50Z",
      "diff_hunk" : "@@ -1137,12 +1128,15 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"  \\\"chainwork\\\": \\\"xxxx\\\"     (string) total amount of work in active chain, in hexadecimal\\n\"\n             \"  \\\"pruned\\\": xx,             (boolean) if the blocks are subject to pruning\\n\"\n             \"  \\\"pruneheight\\\": xxxxxx,    (numeric) lowest-height complete block stored\\n\"\n-            \"  \\\"softforks\\\": [            (array) status of softforks in progress\\n\"\n+            \"  \\\"softforks\\\": [            (array) status of buried softfork deployments\\n\"\n             \"     {\\n\"\n             \"        \\\"id\\\": \\\"xxxx\\\",        (string) name of softfork\\n\"\n-            \"        \\\"version\\\": xx,         (numeric) block version\\n\"\n-            \"        \\\"reject\\\": {            (object) progress toward rejecting pre-softfork blocks\\n\"\n+            \"        \\\"height\\\": \\\"xxxxxx\\\",  (numeric) height of the first block which the rules are enforced\\n\"\n+            \"        \\\"type\\\": \\\"xxxx\\\",      (string) original activation mechanism (\\\"ism\\\" or \\\"bip9\\\")\\n\"\n+            \"        \\\"version\\\": xx,         (numeric) block version (only for \\\"ism\\\" type)\\n\"\n+            \"        \\\"reject\\\": {            (object) progress toward rejecting pre-softfork blocks (only for \\\"ism\\\" type)\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11398#discussion_r141087275",
      "id" : 141087275,
      "original_commit_id" : "947d28a3aa2599d4e5ab848f33a20035aedaacdd",
      "original_position" : 62,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 62,
      "pull_request_review_id" : 65251122,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11398",
      "updated_at" : "2017-09-26T15:31:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141087275",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11398#discussion_r141087565"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11398"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141087565"
         }
      },
      "author_association" : "MEMBER",
      "body" : "assert is a statement, not a function. This should be:\r\n\r\n`assert get_buried_softforks_status(self.nodes[0], 'csv')`",
      "commit_id" : "947d28a3aa2599d4e5ab848f33a20035aedaacdd",
      "created_at" : "2017-09-26T15:11:46Z",
      "diff_hunk" : "@@ -368,12 +368,12 @@ def test_bip68_not_consensus(self):\n         assert_equal(self.nodes[0].getbestblockhash(), block.hash)\n \n     def activateCSV(self):\n-        # activation should happen at block height 432 (3 periods)\n-        min_activation_height = 432\n+        # activation should happen at block height 576 (4 periods)\n+        min_activation_height = 576\n         height = self.nodes[0].getblockcount()\n         assert(height < min_activation_height)\n         self.nodes[0].generate(min_activation_height-height)\n-        assert(get_bip9_status(self.nodes[0], 'csv')['status'] == 'active')\n+        assert(get_buried_softforks_status(self.nodes[0], 'csv'))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11398#discussion_r141087565",
      "id" : 141087565,
      "original_commit_id" : "947d28a3aa2599d4e5ab848f33a20035aedaacdd",
      "original_position" : 21,
      "path" : "test/functional/bip68-sequence.py",
      "position" : 21,
      "pull_request_review_id" : 65251122,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11398",
      "updated_at" : "2017-09-26T15:31:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141087565",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11398#discussion_r141087838"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11398"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141087838"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: prefer a name like `buried_softfork_active()`, since this is returning a bool (True if the softfork is active)",
      "commit_id" : "947d28a3aa2599d4e5ab848f33a20035aedaacdd",
      "created_at" : "2017-09-26T15:12:27Z",
      "diff_hunk" : "@@ -308,6 +308,15 @@ def get_bip9_status(node, key):\n     info = node.getblockchaininfo()\n     return info['bip9_softforks'][key]\n \n+def get_buried_softforks_status(node, key):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11398#discussion_r141087838",
      "id" : 141087838,
      "original_commit_id" : "947d28a3aa2599d4e5ab848f33a20035aedaacdd",
      "original_position" : 4,
      "path" : "test/functional/test_framework/util.py",
      "position" : 4,
      "pull_request_review_id" : 65251122,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11398",
      "updated_at" : "2017-09-26T15:31:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141087838",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11398#discussion_r141088460"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11398"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141088460"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't understand what this is supposed to be doing. This will always assert if we drop down to this line (a string has truthiness `True`, so `not \"string\"` is always `False`)",
      "commit_id" : "947d28a3aa2599d4e5ab848f33a20035aedaacdd",
      "created_at" : "2017-09-26T15:14:19Z",
      "diff_hunk" : "@@ -308,6 +308,15 @@ def get_bip9_status(node, key):\n     info = node.getblockchaininfo()\n     return info['bip9_softforks'][key]\n \n+def get_buried_softforks_status(node, key):\n+    for fork in node.getblockchaininfo()['softforks']:\n+        if fork['id'] == key:\n+            if fork['type'] == \"ism\":\n+                return fork['reject']['status']\n+            else:\n+                return fork['active']\n+    assert(not \"unknown softfork\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11398#discussion_r141088460",
      "id" : 141088460,
      "original_commit_id" : "947d28a3aa2599d4e5ab848f33a20035aedaacdd",
      "original_position" : 11,
      "path" : "test/functional/test_framework/util.py",
      "position" : 11,
      "pull_request_review_id" : 65251122,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11398",
      "updated_at" : "2017-09-26T15:31:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/141088460",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
