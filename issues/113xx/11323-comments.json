[
   {
      "author_association" : "MEMBER",
      "body" : "Mega concept ACK!\r\n\r\nTested ACK 1817398b397afebcc857c40a16d201c84878cb89. I've run the extended test suite over this locally and it passes. It makes any test using the p2p interface much faster.\r\n\r\nTravis has intermittent timing issues, so we'd need to make sure this is well tested in that environment before merging.",
      "created_at" : "2017-09-13T20:05:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11323#issuecomment-329281364",
      "id" : 329281364,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11323",
      "updated_at" : "2017-09-13T20:05:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/329281364",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11323#discussion_r138798787"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11323"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/138798787"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: `if not self.sendbuf and not pushbuf:`. From PEP8: \"For sequences, (strings, lists, tuples), use the fact that empty sequences are false.\"",
      "commit_id" : "1817398b397afebcc857c40a16d201c84878cb89",
      "created_at" : "2017-09-14T05:16:32Z",
      "diff_hunk" : "@@ -1792,7 +1793,14 @@ def send_message(self, message, pushbuf=False):\n             tmsg += h[:4]\n         tmsg += data\n         with mininode_lock:\n-            self.sendbuf += tmsg\n+            if (len(self.sendbuf) == 0 and not pushbuf):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11323#discussion_r138798787",
      "id" : 138798787,
      "original_commit_id" : "1817398b397afebcc857c40a16d201c84878cb89",
      "original_position" : 13,
      "path" : "test/functional/test_framework/mininode.py",
      "position" : 13,
      "pull_request_review_id" : 62641661,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11323",
      "updated_at" : "2017-09-14T05:16:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/138798787",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/881253?v=4",
         "events_url" : "https://api.github.com/users/jimpo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jimpo/followers",
         "following_url" : "https://api.github.com/users/jimpo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jimpo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jimpo",
         "id" : 881253,
         "login" : "jimpo",
         "organizations_url" : "https://api.github.com/users/jimpo/orgs",
         "received_events_url" : "https://api.github.com/users/jimpo/received_events",
         "repos_url" : "https://api.github.com/users/jimpo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jimpo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jimpo"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Cory is being modest as usual. Let's run this over just the tests that use the p2p network thread.\r\n\r\nmaster:\r\n\r\n```\r\nÃ¢ÂÂ ./test_runner.py $(grep -l NetworkThread *py | tr '\\n' ' ')\r\nTemporary test directory at /tmp/user/1000/bitcoin_test_runner_20170915_153854\r\n.............\r\nTEST                       | STATUS    | DURATION\r\n\r\nassumevalid.py             | Ã¢ÂÂ Passed  | 12 s\r\nbip65-cltv-p2p.py          | Ã¢ÂÂ Passed  | 7 s\r\nbip68-112-113-p2p.py       | Ã¢ÂÂ Passed  | 21 s\r\nbip9-softforks.py          | Ã¢ÂÂ Passed  | 49 s\r\nbipdersig-p2p.py           | Ã¢ÂÂ Passed  | 6 s\r\nexample_test.py            | Ã¢ÂÂ Passed  | 3 s\r\ninvalidblockrequest.py     | Ã¢ÂÂ Passed  | 4 s\r\ninvalidtxrequest.py        | Ã¢ÂÂ Passed  | 3 s\r\nmaxuploadtarget.py         | Ã¢ÂÂ Passed  | 149 s\r\nnulldummy.py               | Ã¢ÂÂ Passed  | 3 s\r\np2p-acceptblock.py         | Ã¢ÂÂ Passed  | 6 s\r\np2p-compactblocks.py       | Ã¢ÂÂ Passed  | 29 s\r\np2p-feefilter.py           | Ã¢ÂÂ Passed  | 32 s\r\np2p-fullblocktest.py       | Ã¢ÂÂ Passed  | 108 s\r\np2p-leaktests.py           | Ã¢ÂÂ Passed  | 8 s\r\np2p-mempool.py             | Ã¢ÂÂ Passed  | 3 s\r\np2p-segwit.py              | Ã¢ÂÂ Passed  | 67 s\r\np2p-timeouts.py            | Ã¢ÂÂ Passed  | 65 s\r\np2p-versionbits-warning.py | Ã¢ÂÂ Passed  | 8 s\r\nsendheaders.py             | Ã¢ÂÂ Passed  | 24 s\r\n\r\nALL                        | Ã¢ÂÂ Passed  | 607 s (accumulated) \r\nRuntime: 166 s\r\n```\r\n\r\nthis branch:\r\n\r\n```\r\nTEST                       | STATUS    | DURATION\r\n\r\nassumevalid.py             | Ã¢ÂÂ Passed  | 12 s\r\nbip65-cltv-p2p.py          | Ã¢ÂÂ Passed  | 7 s\r\nbip68-112-113-p2p.py       | Ã¢ÂÂ Passed  | 13 s\r\nbip9-softforks.py          | Ã¢ÂÂ Passed  | 52 s\r\nbipdersig-p2p.py           | Ã¢ÂÂ Passed  | 6 s\r\nexample_test.py            | Ã¢ÂÂ Passed  | 3 s\r\ninvalidblockrequest.py     | Ã¢ÂÂ Passed  | 3 s\r\ninvalidtxrequest.py        | Ã¢ÂÂ Passed  | 3 s\r\nmaxuploadtarget.py         | Ã¢ÂÂ Passed  | 64 s\r\nnulldummy.py               | Ã¢ÂÂ Passed  | 3 s\r\np2p-acceptblock.py         | Ã¢ÂÂ Passed  | 6 s\r\np2p-compactblocks.py       | Ã¢ÂÂ Passed  | 20 s\r\np2p-feefilter.py           | Ã¢ÂÂ Passed  | 21 s\r\np2p-fullblocktest.py       | Ã¢ÂÂ Passed  | 99 s\r\np2p-leaktests.py           | Ã¢ÂÂ Passed  | 8 s\r\np2p-mempool.py             | Ã¢ÂÂ Passed  | 3 s\r\np2p-segwit.py              | Ã¢ÂÂ Passed  | 51 s\r\np2p-timeouts.py            | Ã¢ÂÂ Passed  | 64 s\r\np2p-versionbits-warning.py | Ã¢ÂÂ Passed  | 8 s\r\nsendheaders.py             | Ã¢ÂÂ Passed  | 14 s\r\n\r\nALL                        | Ã¢ÂÂ Passed  | 460 s (accumulated) \r\n\r\nRuntime: 139 s\r\n```\r\n\r\nThat's a ~25% reduction in cumulative test time, with particularly impressive reduction in `maxuploadtarget.py`",
      "created_at" : "2017-09-15T18:55:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11323#issuecomment-329870417",
      "id" : 329870417,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11323",
      "updated_at" : "2017-09-15T18:55:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/329870417",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "utACK 1817398b397afebcc857c40a16d201c84878cb89, wanna fix @jimpo's style nit?",
      "created_at" : "2017-09-15T21:59:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11323#issuecomment-329914223",
      "id" : 329914223,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11323",
      "updated_at" : "2017-09-15T21:59:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/329914223",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   }
]
