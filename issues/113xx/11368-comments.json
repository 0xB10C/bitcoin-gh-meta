[
   {
      "author_association" : "MEMBER",
      "body" : "Duplicate of https://github.com/bitcoin/bitcoin/issues/11322?",
      "created_at" : "2017-09-19T10:22:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11368#issuecomment-330496512",
      "id" : 330496512,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11368",
      "updated_at" : "2017-09-19T10:22:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330496512",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Not sure, these are valid queries ... not invalid ones. RPC queue gets filled up. Getting responses back ... ",
      "created_at" : "2017-09-19T10:23:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11368#issuecomment-330496846",
      "id" : 330496846,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11368",
      "updated_at" : "2017-09-19T10:23:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330496846",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/15045051?v=4",
         "events_url" : "https://api.github.com/users/KanoczTomas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/KanoczTomas/followers",
         "following_url" : "https://api.github.com/users/KanoczTomas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/KanoczTomas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/KanoczTomas",
         "id" : 15045051,
         "login" : "KanoczTomas",
         "organizations_url" : "https://api.github.com/users/KanoczTomas/orgs",
         "received_events_url" : "https://api.github.com/users/KanoczTomas/received_events",
         "repos_url" : "https://api.github.com/users/KanoczTomas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/KanoczTomas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/KanoczTomas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/KanoczTomas"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "and I forgot, tested on rest interface as well, managed to kill it with the same procedure ... \r\ncalling GET /rest/tx/TX-HASH.json instead of getrawtransaction ... \r\nmaybe it helps ... ",
      "created_at" : "2017-09-19T10:34:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11368#issuecomment-330499065",
      "id" : 330499065,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11368",
      "updated_at" : "2017-09-19T10:41:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330499065",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/15045051?v=4",
         "events_url" : "https://api.github.com/users/KanoczTomas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/KanoczTomas/followers",
         "following_url" : "https://api.github.com/users/KanoczTomas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/KanoczTomas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/KanoczTomas",
         "id" : 15045051,
         "login" : "KanoczTomas",
         "organizations_url" : "https://api.github.com/users/KanoczTomas/orgs",
         "received_events_url" : "https://api.github.com/users/KanoczTomas/received_events",
         "repos_url" : "https://api.github.com/users/KanoczTomas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/KanoczTomas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/KanoczTomas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/KanoczTomas"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "[Hello,](url)\r\n\r\nHere is a small script to reproduce in nodejs.\r\n\r\n```javascript\r\n'use strict';\r\nvar request = require('request-promise');\r\nvar zmq = require('zeromq');\r\nvar sock = zmq.socket('sub');\r\nsock.connect('tcp://127.0.0.1:28332');\r\nsock.subscribe('hashtx');\r\n\r\nsock.on('message', function(topic, message) {\r\n    var uri = 'http://127.0.0.1:8332/rest/tx/' + message.toString('hex') + '.json'; \r\n    request(uri)\r\n    .then(function (res){\r\n        console.log(res);\r\n    })\r\n    .error(function (err){\r\n        console.error(err);\r\n        process.exit(1);\r\n    })\r\n});\r\n```\r\nbitcoind config:\r\n```\r\nprune=550\r\nwalletbroadcast=0\r\ndaemon=1\r\nserver=1\r\nrest=1\r\nzmqpubhashtx=tcp://127.0.0.1:28332\r\nrpcworkqueue=100\r\n```\r\n\r\nIt takes some time to kill bitcoind, the time varies, could not figure out what influences the time variance.\r\n\r\nbitcoind crashes and all I see in the logs is this:\r\n```\r\n<lot of similar output>\r\n2017-09-26 09:55:42 WARNING: request rejected because http work queue depth exceeded, it can be increased with the -rpcworkqueue= setting\r\n2017-09-26 09:55:44 Error reading from database: Database I/O error\r\n```",
      "created_at" : "2017-09-27T06:12:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11368#issuecomment-332419482",
      "id" : 332419482,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11368",
      "updated_at" : "2017-09-27T06:13:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/332419482",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/15045051?v=4",
         "events_url" : "https://api.github.com/users/KanoczTomas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/KanoczTomas/followers",
         "following_url" : "https://api.github.com/users/KanoczTomas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/KanoczTomas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/KanoczTomas",
         "id" : 15045051,
         "login" : "KanoczTomas",
         "organizations_url" : "https://api.github.com/users/KanoczTomas/orgs",
         "received_events_url" : "https://api.github.com/users/KanoczTomas/received_events",
         "repos_url" : "https://api.github.com/users/KanoczTomas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/KanoczTomas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/KanoczTomas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/KanoczTomas"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Your reproduction is using the `/rest/tx/...`, not RPC?",
      "created_at" : "2017-11-01T09:06:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11368#issuecomment-341043192",
      "id" : 341043192,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11368",
      "updated_at" : "2017-11-01T09:06:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/341043192",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/413395?v=4",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Hi,\r\n\r\ncalling the RPC directly behaves the same. Same error, same behavior as in the example log output above. When talking to @gmaxwell on #bitcoin I recall he mentioned they use the same internals in the background.\r\n\r\nGood catch though, I was testing if the rest API behaves the same and copied that here, was not really thinking it should have been RPC there to make the point - my bad!\r\n\r\nWorking with a queue to not overwhelm bitcoind helps, it does not kill it, but I think it should not be so easily crashed! The crash happens only if RPC/rest calls are not policed/shaped ... ",
      "created_at" : "2017-11-02T12:14:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11368#issuecomment-341403042",
      "id" : 341403042,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11368",
      "updated_at" : "2017-11-02T12:14:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/341403042",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/15045051?v=4",
         "events_url" : "https://api.github.com/users/KanoczTomas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/KanoczTomas/followers",
         "following_url" : "https://api.github.com/users/KanoczTomas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/KanoczTomas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/KanoczTomas",
         "id" : 15045051,
         "login" : "KanoczTomas",
         "organizations_url" : "https://api.github.com/users/KanoczTomas/orgs",
         "received_events_url" : "https://api.github.com/users/KanoczTomas/received_events",
         "repos_url" : "https://api.github.com/users/KanoczTomas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/KanoczTomas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/KanoczTomas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/KanoczTomas"
      }
   }
]
