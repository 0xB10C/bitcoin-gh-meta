[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "If #11359 gets in it might be nice to have the prune hwm in there too, but I didn't want to add the dependency.",
      "created_at" : "2017-09-19T08:54:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11367#issuecomment-330474562",
      "id" : 330474562,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11367",
      "updated_at" : "2017-09-19T08:54:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330474562",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7999704?v=4",
         "events_url" : "https://api.github.com/users/esotericnonsense/events{/privacy}",
         "followers_url" : "https://api.github.com/users/esotericnonsense/followers",
         "following_url" : "https://api.github.com/users/esotericnonsense/following{/other_user}",
         "gists_url" : "https://api.github.com/users/esotericnonsense/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/esotericnonsense",
         "id" : 7999704,
         "login" : "esotericnonsense",
         "organizations_url" : "https://api.github.com/users/esotericnonsense/orgs",
         "received_events_url" : "https://api.github.com/users/esotericnonsense/received_events",
         "repos_url" : "https://api.github.com/users/esotericnonsense/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/esotericnonsense/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/esotericnonsense/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/esotericnonsense"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r139772263"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/139772263"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: perhaps `disk_usage` or `size_on_disk`?\r\n\r\nAlso consider placing this above `pruned` so all of the pruning-related fields are grouped.",
      "commit_id" : "071879a6263aa286e166f9cf07f409e6df35bc02",
      "created_at" : "2017-09-19T18:08:23Z",
      "diff_hunk" : "@@ -1137,6 +1137,8 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"  \\\"chainwork\\\": \\\"xxxx\\\"     (string) total amount of work in active chain, in hexadecimal\\n\"\n             \"  \\\"pruned\\\": xx,             (boolean) if the blocks are subject to pruning\\n\"\n             \"  \\\"pruneheight\\\": xxxxxx,    (numeric) lowest-height complete block stored\\n\"\n+            \"  \\\"disk_size\\\": xxxxxx,    (numeric) the estimated size of the block and undo files on disk\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r139772263",
      "id" : 139772263,
      "original_commit_id" : "a2d851fff5e71a08e596b4713ddbad7176acfdbb",
      "original_position" : 4,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 63751850,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367",
      "updated_at" : "2017-09-22T18:22:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/139772263",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r139835587"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/139835587"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Also align description.",
      "commit_id" : "071879a6263aa286e166f9cf07f409e6df35bc02",
      "created_at" : "2017-09-19T22:35:32Z",
      "diff_hunk" : "@@ -1137,6 +1137,8 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"  \\\"chainwork\\\": \\\"xxxx\\\"     (string) total amount of work in active chain, in hexadecimal\\n\"\n             \"  \\\"pruned\\\": xx,             (boolean) if the blocks are subject to pruning\\n\"\n             \"  \\\"pruneheight\\\": xxxxxx,    (numeric) lowest-height complete block stored\\n\"\n+            \"  \\\"disk_size\\\": xxxxxx,    (numeric) the estimated size of the block and undo files on disk\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r139835587",
      "id" : 139835587,
      "in_reply_to_id" : 139772263,
      "original_commit_id" : "a2d851fff5e71a08e596b4713ddbad7176acfdbb",
      "original_position" : 4,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 63823568,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367",
      "updated_at" : "2017-09-22T18:22:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/139835587",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r139835927"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/139835927"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "IMO we should test the response result. In this case, at least, check that the key exists and value is a number. cc @jnewbery ",
      "commit_id" : "071879a6263aa286e166f9cf07f409e6df35bc02",
      "created_at" : "2017-09-19T22:37:30Z",
      "diff_hunk" : "@@ -1137,6 +1137,8 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"  \\\"chainwork\\\": \\\"xxxx\\\"     (string) total amount of work in active chain, in hexadecimal\\n\"\n             \"  \\\"pruned\\\": xx,             (boolean) if the blocks are subject to pruning\\n\"\n             \"  \\\"pruneheight\\\": xxxxxx,    (numeric) lowest-height complete block stored\\n\"\n+            \"  \\\"disk_size\\\": xxxxxx,    (numeric) the estimated size of the block and undo files on disk\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r139835927",
      "id" : 139835927,
      "in_reply_to_id" : 139772263,
      "original_commit_id" : "a2d851fff5e71a08e596b4713ddbad7176acfdbb",
      "original_position" : 4,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 63823568,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367",
      "updated_at" : "2017-09-22T18:22:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/139835927",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r139837089"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/139837089"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ah, @jnewbery already recommended a test! Ã°ÂÂÂ ",
      "commit_id" : "071879a6263aa286e166f9cf07f409e6df35bc02",
      "created_at" : "2017-09-19T22:44:48Z",
      "diff_hunk" : "@@ -1137,6 +1137,8 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"  \\\"chainwork\\\": \\\"xxxx\\\"     (string) total amount of work in active chain, in hexadecimal\\n\"\n             \"  \\\"pruned\\\": xx,             (boolean) if the blocks are subject to pruning\\n\"\n             \"  \\\"pruneheight\\\": xxxxxx,    (numeric) lowest-height complete block stored\\n\"\n+            \"  \\\"disk_size\\\": xxxxxx,    (numeric) the estimated size of the block and undo files on disk\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r139837089",
      "id" : 139837089,
      "in_reply_to_id" : 139772263,
      "original_commit_id" : "a2d851fff5e71a08e596b4713ddbad7176acfdbb",
      "original_position" : 4,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 63825238,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367",
      "updated_at" : "2017-09-22T18:22:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/139837089",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r139837161"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/139837161"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Missing lock of `cs_LastBlockFile`.",
      "commit_id" : "071879a6263aa286e166f9cf07f409e6df35bc02",
      "created_at" : "2017-09-19T22:45:13Z",
      "diff_hunk" : "@@ -1180,6 +1182,7 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n     obj.push_back(Pair(\"verificationprogress\",  GuessVerificationProgress(Params().TxData(), chainActive.Tip())));\n     obj.push_back(Pair(\"chainwork\",             chainActive.Tip()->nChainWork.GetHex()));\n     obj.push_back(Pair(\"pruned\",                fPruneMode));\n+    obj.push_back(Pair(\"disk_size\",             CalculateCurrentUsage()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r139837161",
      "id" : 139837161,
      "original_commit_id" : "a2d851fff5e71a08e596b4713ddbad7176acfdbb",
      "original_position" : 13,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 63825318,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367",
      "updated_at" : "2017-09-22T18:22:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/139837161",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Test for `getblockchaininfo` added in #11370.",
      "created_at" : "2017-09-20T06:48:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11367#issuecomment-330760846",
      "id" : 330760846,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11367",
      "updated_at" : "2017-09-20T06:48:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330760846",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "A few mishaps with the commit message there, sorry.\r\n\r\nI have merged this with #11366 and closed #11366.",
      "created_at" : "2017-09-20T15:05:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11367#issuecomment-330881165",
      "id" : 330881165,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11367",
      "updated_at" : "2017-09-20T15:05:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/330881165",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7999704?v=4",
         "events_url" : "https://api.github.com/users/esotericnonsense/events{/privacy}",
         "followers_url" : "https://api.github.com/users/esotericnonsense/followers",
         "following_url" : "https://api.github.com/users/esotericnonsense/following{/other_user}",
         "gists_url" : "https://api.github.com/users/esotericnonsense/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/esotericnonsense",
         "id" : 7999704,
         "login" : "esotericnonsense",
         "organizations_url" : "https://api.github.com/users/esotericnonsense/orgs",
         "received_events_url" : "https://api.github.com/users/esotericnonsense/received_events",
         "repos_url" : "https://api.github.com/users/esotericnonsense/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/esotericnonsense/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/esotericnonsense/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/esotericnonsense"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r140073685"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140073685"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The help text for `pruneheight` should also include \"(only present if pruning is enabled)\"",
      "commit_id" : "071879a6263aa286e166f9cf07f409e6df35bc02",
      "created_at" : "2017-09-20T19:48:16Z",
      "diff_hunk" : "@@ -1135,8 +1135,10 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"  \\\"mediantime\\\": xxxxxx,     (numeric) median time for the current best block\\n\"\n             \"  \\\"verificationprogress\\\": xxxx, (numeric) estimate of verification progress [0..1]\\n\"\n             \"  \\\"chainwork\\\": \\\"xxxx\\\"     (string) total amount of work in active chain, in hexadecimal\\n\"\n+            \"  \\\"size_on_disk\\\": xxxxxx,   (numeric) the estimated size of the block and undo files on disk\\n\"\n             \"  \\\"pruned\\\": xx,             (boolean) if the blocks are subject to pruning\\n\"\n             \"  \\\"pruneheight\\\": xxxxxx,    (numeric) lowest-height complete block stored\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r140073685",
      "id" : 140073685,
      "original_commit_id" : "ae3cbb994cc29ef1c921da6aa8a0732073280099",
      "original_position" : 6,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 64094597,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367",
      "updated_at" : "2017-09-22T18:22:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140073685",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r140121000"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140121000"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "4a61af9",
      "commit_id" : "071879a6263aa286e166f9cf07f409e6df35bc02",
      "created_at" : "2017-09-20T23:53:24Z",
      "diff_hunk" : "@@ -1135,8 +1135,10 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"  \\\"mediantime\\\": xxxxxx,     (numeric) median time for the current best block\\n\"\n             \"  \\\"verificationprogress\\\": xxxx, (numeric) estimate of verification progress [0..1]\\n\"\n             \"  \\\"chainwork\\\": \\\"xxxx\\\"     (string) total amount of work in active chain, in hexadecimal\\n\"\n+            \"  \\\"size_on_disk\\\": xxxxxx,   (numeric) the estimated size of the block and undo files on disk\\n\"\n             \"  \\\"pruned\\\": xx,             (boolean) if the blocks are subject to pruning\\n\"\n             \"  \\\"pruneheight\\\": xxxxxx,    (numeric) lowest-height complete block stored\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r140121000",
      "id" : 140121000,
      "in_reply_to_id" : 140073685,
      "original_commit_id" : "ae3cbb994cc29ef1c921da6aa8a0732073280099",
      "original_position" : 6,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 64148405,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367",
      "updated_at" : "2017-09-22T18:22:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140121000",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7999704?v=4",
         "events_url" : "https://api.github.com/users/esotericnonsense/events{/privacy}",
         "followers_url" : "https://api.github.com/users/esotericnonsense/followers",
         "following_url" : "https://api.github.com/users/esotericnonsense/following{/other_user}",
         "gists_url" : "https://api.github.com/users/esotericnonsense/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/esotericnonsense",
         "id" : 7999704,
         "login" : "esotericnonsense",
         "organizations_url" : "https://api.github.com/users/esotericnonsense/orgs",
         "received_events_url" : "https://api.github.com/users/esotericnonsense/received_events",
         "repos_url" : "https://api.github.com/users/esotericnonsense/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/esotericnonsense/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/esotericnonsense/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/esotericnonsense"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r140122508"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140122508"
         }
      },
      "author_association" : "OWNER",
      "body" : "I'd rather not expose more variables that are private to validation to the outside world.\r\n\r\nPerhaps you can instead create a wrapper around `CalculateCurrentUsage`, which just grabs `cs_LastBlockFile` and calls the internal one, and expose that? That way the RPC code wouldn't need to know about the existence of that lock eve.",
      "commit_id" : "071879a6263aa286e166f9cf07f409e6df35bc02",
      "created_at" : "2017-09-21T00:05:33Z",
      "diff_hunk" : "@@ -156,6 +156,7 @@ struct BlockHasher\n \n extern CScript COINBASE_FLAGS;\n extern CCriticalSection cs_main;\n+extern CCriticalSection cs_LastBlockFile;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r140122508",
      "id" : 140122508,
      "original_commit_id" : "4a61af9666e214b95151e20fd87388e87ea881d8",
      "original_position" : 4,
      "path" : "src/validation.h",
      "position" : null,
      "pull_request_review_id" : 64150104,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367",
      "updated_at" : "2017-09-22T18:22:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140122508",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r140186259"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140186259"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Why not just lock `cs_LastBlockFile` in `CalculateCurrentUsage`? It's a recursive mutex and IMO should be locked where it's needed (BTW the same for remaining locks...).",
      "commit_id" : "071879a6263aa286e166f9cf07f409e6df35bc02",
      "created_at" : "2017-09-21T09:03:42Z",
      "diff_hunk" : "@@ -156,6 +156,7 @@ struct BlockHasher\n \n extern CScript COINBASE_FLAGS;\n extern CCriticalSection cs_main;\n+extern CCriticalSection cs_LastBlockFile;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r140186259",
      "id" : 140186259,
      "in_reply_to_id" : 140122508,
      "original_commit_id" : "4a61af9666e214b95151e20fd87388e87ea881d8",
      "original_position" : 4,
      "path" : "src/validation.h",
      "position" : null,
      "pull_request_review_id" : 64220215,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367",
      "updated_at" : "2017-09-22T18:22:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140186259",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r140186375"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140186375"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`CBlockIndex* block = ...`;",
      "commit_id" : "071879a6263aa286e166f9cf07f409e6df35bc02",
      "created_at" : "2017-09-21T09:04:16Z",
      "diff_hunk" : "@@ -1179,7 +1181,18 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n     obj.push_back(Pair(\"mediantime\",            (int64_t)chainActive.Tip()->GetMedianTimePast()));\n     obj.push_back(Pair(\"verificationprogress\",  GuessVerificationProgress(Params().TxData(), chainActive.Tip())));\n     obj.push_back(Pair(\"chainwork\",             chainActive.Tip()->nChainWork.GetHex()));\n+    obj.push_back(Pair(\"size_on_disk\",          CalculateCurrentUsage()));\n     obj.push_back(Pair(\"pruned\",                fPruneMode));\n+    if (fPruneMode) {\n+        CBlockIndex *block = chainActive.Tip();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r140186375",
      "id" : 140186375,
      "original_commit_id" : "4a61af9666e214b95151e20fd87388e87ea881d8",
      "original_position" : 28,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 64220215,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367",
      "updated_at" : "2017-09-22T18:22:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140186375",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r140414272"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140414272"
         }
      },
      "author_association" : "MEMBER",
      "body" : "As @sipa already commented, `CalculateCurrentUsage()` should be responsible for concurrency locking (not the calling code part).",
      "commit_id" : "071879a6263aa286e166f9cf07f409e6df35bc02",
      "created_at" : "2017-09-22T05:24:59Z",
      "diff_hunk" : "@@ -1168,7 +1170,7 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             + HelpExampleRpc(\"getblockchaininfo\", \"\")\n         );\n \n-    LOCK(cs_main);\n+    LOCK2(cs_main, cs_LastBlockFile); // cs_LastBlockFile for CalculateCurrentUsage()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r140414272",
      "id" : 140414272,
      "original_commit_id" : "4a61af9666e214b95151e20fd87388e87ea881d8",
      "original_position" : 17,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 64484805,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367",
      "updated_at" : "2017-09-22T18:22:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140414272",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r140414350"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140414350"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Indentation seems wrong (others need to space-up).",
      "commit_id" : "071879a6263aa286e166f9cf07f409e6df35bc02",
      "created_at" : "2017-09-22T05:25:51Z",
      "diff_hunk" : "@@ -1135,8 +1135,10 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"  \\\"mediantime\\\": xxxxxx,     (numeric) median time for the current best block\\n\"\n             \"  \\\"verificationprogress\\\": xxxx, (numeric) estimate of verification progress [0..1]\\n\"\n             \"  \\\"chainwork\\\": \\\"xxxx\\\"     (string) total amount of work in active chain, in hexadecimal\\n\"\n+            \"  \\\"size_on_disk\\\": xxxxxx,   (numeric) the estimated size of the block and undo files on disk\\n\"\n             \"  \\\"pruned\\\": xx,             (boolean) if the blocks are subject to pruning\\n\"\n-            \"  \\\"pruneheight\\\": xxxxxx,    (numeric) lowest-height complete block stored\\n\"\n+            \"  \\\"pruneheight\\\": xxxxxx,    (numeric) lowest-height complete block stored (only present if pruning is enabled)\\n\"\n+            \"  \\\"prune_target_size\\\": xxxxxx,  (numeric) the target size used by pruning (only present if pruning is enabled)\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r140414350",
      "id" : 140414350,
      "original_commit_id" : "4a61af9666e214b95151e20fd87388e87ea881d8",
      "original_position" : 8,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 8,
      "pull_request_review_id" : 64484900,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367",
      "updated_at" : "2017-09-22T18:22:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140414350",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2017-09-22T05:26:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11367#issuecomment-331353386",
      "id" : 331353386,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11367",
      "updated_at" : "2017-09-22T05:26:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/331353386",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r140564032"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140564032"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I followed the example of 'verificationprogress'; can indent the others further if you think that makes sense.",
      "commit_id" : "071879a6263aa286e166f9cf07f409e6df35bc02",
      "created_at" : "2017-09-22T18:24:18Z",
      "diff_hunk" : "@@ -1135,8 +1135,10 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n             \"  \\\"mediantime\\\": xxxxxx,     (numeric) median time for the current best block\\n\"\n             \"  \\\"verificationprogress\\\": xxxx, (numeric) estimate of verification progress [0..1]\\n\"\n             \"  \\\"chainwork\\\": \\\"xxxx\\\"     (string) total amount of work in active chain, in hexadecimal\\n\"\n+            \"  \\\"size_on_disk\\\": xxxxxx,   (numeric) the estimated size of the block and undo files on disk\\n\"\n             \"  \\\"pruned\\\": xx,             (boolean) if the blocks are subject to pruning\\n\"\n-            \"  \\\"pruneheight\\\": xxxxxx,    (numeric) lowest-height complete block stored\\n\"\n+            \"  \\\"pruneheight\\\": xxxxxx,    (numeric) lowest-height complete block stored (only present if pruning is enabled)\\n\"\n+            \"  \\\"prune_target_size\\\": xxxxxx,  (numeric) the target size used by pruning (only present if pruning is enabled)\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11367#discussion_r140564032",
      "id" : 140564032,
      "in_reply_to_id" : 140414350,
      "original_commit_id" : "4a61af9666e214b95151e20fd87388e87ea881d8",
      "original_position" : 8,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 8,
      "pull_request_review_id" : 64661115,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11367",
      "updated_at" : "2017-09-22T18:24:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/140564032",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7999704?v=4",
         "events_url" : "https://api.github.com/users/esotericnonsense/events{/privacy}",
         "followers_url" : "https://api.github.com/users/esotericnonsense/followers",
         "following_url" : "https://api.github.com/users/esotericnonsense/following{/other_user}",
         "gists_url" : "https://api.github.com/users/esotericnonsense/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/esotericnonsense",
         "id" : 7999704,
         "login" : "esotericnonsense",
         "organizations_url" : "https://api.github.com/users/esotericnonsense/orgs",
         "received_events_url" : "https://api.github.com/users/esotericnonsense/received_events",
         "repos_url" : "https://api.github.com/users/esotericnonsense/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/esotericnonsense/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/esotericnonsense/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/esotericnonsense"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased on master, moved the lock into CalculateCurrentUsage, `CBlockIndex *block` => `CBlockIndex* block`.\r\n\r\nTravis failed on one platform (iirc linux64) on a timeout in p2p-segwit last time. Not sure why. We'll see how it goes. edit: looks good.",
      "created_at" : "2017-09-22T18:25:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11367#issuecomment-331524788",
      "id" : 331524788,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11367",
      "updated_at" : "2017-09-22T19:42:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/331524788",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7999704?v=4",
         "events_url" : "https://api.github.com/users/esotericnonsense/events{/privacy}",
         "followers_url" : "https://api.github.com/users/esotericnonsense/followers",
         "following_url" : "https://api.github.com/users/esotericnonsense/following{/other_user}",
         "gists_url" : "https://api.github.com/users/esotericnonsense/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/esotericnonsense",
         "id" : 7999704,
         "login" : "esotericnonsense",
         "organizations_url" : "https://api.github.com/users/esotericnonsense/orgs",
         "received_events_url" : "https://api.github.com/users/esotericnonsense/received_events",
         "repos_url" : "https://api.github.com/users/esotericnonsense/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/esotericnonsense/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/esotericnonsense/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/esotericnonsense"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "utACK 071879a6263aa286e166f9cf07f409e6df35bc02",
      "created_at" : "2017-09-22T18:53:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11367#issuecomment-331531586",
      "id" : 331531586,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11367",
      "updated_at" : "2017-09-22T18:53:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/331531586",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've just tested this with `-prune=1` and I get the bizarre result:\r\n\r\n```\r\nÃ¢ÂÂ bitcoin-cli getblockchaininfo\r\n{\r\n...\r\n  \"prune_target_size\": 18446744073709551615,\r\n```\r\n\r\nThat's because of this section in `init.cpp`:\r\n\r\n```\r\n    nPruneTarget = (uint64_t) nPruneArg * 1024 * 1024;\r\n    if (nPruneArg == 1) {  // manual pruning: -prune=1\r\n        LogPrintf(\"Block pruning enabled.  Use RPC call pruneblockchain(height) to manually prune block and undo files.\\n\");\r\n        nPruneTarget = std::numeric_limits<uint64_t>::max();\r\n        fPruneMode = true;\r\n...\r\n```\r\n\r\nReturning the max int for `prune_target_size` is meaningless and confusing. I recommend you don't return `prune_target_size` if bitcoind is configured for manual pruning (ie if `-prune=1`) (and perhaps also add *another* field `pruning_mode` that returns whether pruning is automatic or manual).",
      "created_at" : "2017-09-22T20:27:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11367#issuecomment-331552341",
      "id" : 331552341,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11367",
      "updated_at" : "2017-09-22T20:27:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/331552341",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
