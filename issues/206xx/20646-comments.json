[
   {
      "author_association" : "MEMBER",
      "body" : "Checking the other implementations, https://github.com/btcsuite/btcd/pull/1536 tagged as \"low priority\" is open in btcd to implement signet. I didn't see other signet proposals in bcoin, bitcoinj, or libbitcoin.",
      "created_at" : "2020-12-13T22:40:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744080800",
      "id" : 744080800,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDA4MDgwMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-13T22:40:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744080800",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "If we're going to change the software, just making it ignore the message if received post-VERACK (for compatibility with earlier drafts of the BIP and hence rc2) seems simpler than adding special cases.\r\n\r\nDeliberately disconnecting nodes for behaving in ways we know is not harmful seems very backwards to me.",
      "created_at" : "2020-12-14T07:20:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744229869",
      "id" : 744229869,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDIyOTg2OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-14T07:20:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744229869",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tend toward NACK. There are 20.99 nodes on signet without addrv2 support and will keep a connection just fine. If your addrman is populated with those (or with rc3/final/master nodes), you won't have any issues either. The issue #20637 is purely about a vanilla start with empty addrman and the only seed being the node that is run by @ajtowns or @kallewoof (I don't remember). The solution is to update that node, not to introduce more branches in net processing.\r\n\r\nEven if people want to go forward with patching the source code, the current patch is too broad. The only thing changes should be the disconnection, not the way how addrv2 messages are recognized.",
      "created_at" : "2020-12-14T07:32:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744236355",
      "id" : 744236355,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDIzNjM1NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-14T07:32:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744236355",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yes, this is a reluctant fallback. It's better if the signet launch can go smoothly without it.ï¿¼ï¿¼ï¿¼",
      "created_at" : "2020-12-14T09:12:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744297359",
      "id" : 744297359,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDI5NzM1OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-14T09:12:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744297359",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> the current patch is too broad. The only thing changes should be the disconnection, not the way how addrv2 messages are recognized\r\n\r\nThis does only change the disconnection?",
      "created_at" : "2020-12-14T09:20:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744301979",
      "id" : 744301979,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDMwMTk3OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-14T09:20:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744301979",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> This does only change the disconnection?\r\n\r\nIt will run `pfrom.m_wants_addrv2 = true;` on signet, which will not be run on mainnet. The whole goal of signet was to be exactly like mainet, except for the pow.",
      "created_at" : "2020-12-14T09:27:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744306427",
      "id" : 744306427,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDMwNjQyNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-14T09:27:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744306427",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Well, adding a test for the signet chain pretty much guarantees different behaviour on signet than mainnet... (And should probably be `if (m_chainparams.GetConsensus().signet_blocks)` anyway, if it were desirable)\r\n\r\nI think just being deliberately compatible with (or at least tolerant of) implementations of earlier versions of the BIP would make much more sense, so either:\r\n\r\n```c++\r\nif (pfrom->m_wants_addrv2) {\r\n    LogPrintf(BCLog::NET, \"peer=%d sent SENDADDRV2 twice; disconnecting\\n\", pfrom->GetId());\r\n    pfrom->fDisconnect = 1;\r\n    return;\r\n}\r\npfrom->m_wants_addrv2 = true;\r\nreturn;\r\n```\r\n\r\nor just:\r\n\r\n```c++\r\nif (pfrom.fSuccessfullyConnected) return; // ignore sendaddrv2 received too late\r\npfrom->m_wants_addrv2 = true;\r\nreturn;\r\n```\r\n\r\n(or both, even).",
      "created_at" : "2020-12-14T09:59:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744325959",
      "id" : 744325959,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDMyNTk1OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-14T09:59:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744325959",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Deliberately disconnecting nodes for behaving in ways we know is not harmful seems very backwards to me.\r\n\r\nTell that to your past self. The disconnection logic has been suggested by you for wtxid, and as such carried over to addv2 ;) \r\n\r\nhttps://github.com/bitcoin/bitcoin/pull/18044/files#r446755938",
      "created_at" : "2020-12-14T10:15:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744336593",
      "id" : 744336593,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDMzNjU5Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-14T10:15:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744336593",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > Deliberately disconnecting nodes for behaving in ways we know is not harmful seems very backwards to me.\r\n> \r\n> Tell that to your past self. The disconnection logic has been suggested by you for wtxid, and as such carried over to addv2 ;)\r\n> \r\n> https://github.com/bitcoin/bitcoin/pull/18044/files#r446755938\r\n\r\nIf there had already been nodes on the network sending wtxid relay mesages after verack, disconnecting them would have also been a bad idea.",
      "created_at" : "2020-12-14T10:29:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744344543",
      "id" : 744344543,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDM0NDU0Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-14T10:29:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744344543",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> should probably be `if (m_chainparams.GetConsensus().signet_blocks)`\n\nThanks! I was telling myself there was surely a better way of checking for it.",
      "created_at" : "2020-12-14T10:29:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744345096",
      "id" : 744345096,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDM0NTA5Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-14T10:29:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744345096",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated to propose each of the 3 suggestions that resolve #20637. Will remove/squash commits per reviewer preference.",
      "created_at" : "2020-12-14T15:31:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744518250",
      "id" : 744518250,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDUxODI1MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-14T15:31:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744518250",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20646#discussion_r542482193"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20646"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/542482193"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is not more harmful than an unknown message, so beside being dead code in practise, it is also not protecting against anything.",
      "commit_id" : "f26e5ebc60ea2f41b959bc8b136719e250fe8761",
      "created_at" : "2020-12-14T15:38:32Z",
      "diff_hunk" : "@@ -2522,10 +2521,16 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n         return;\n     }\n \n+    // BIP155 defines feature negotiation of addrv2 and sendaddrv2, which must happen\n+    // between VERSION and VERACK.\n     if (msg_type == NetMsgType::SENDADDRV2) {\n         if (pfrom.fSuccessfullyConnected) {\n-            // Disconnect peers that send SENDADDRV2 message after VERACK; this\n-            // must be negotiated between VERSION and VERACK.\n+            // Ignore peers that send a SENDADDRV2 message after VERACK.\n+            return;\n+        }\n+        if (pfrom.m_wants_addrv2) {\n+            // Disconnect peers that send SENDADDRV2 twice.\n+            LogPrint(BCLog::NET, \"peer=%d sent SENDADDRV2 twice; disconnecting\\n\", pfrom.GetId());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#discussion_r542482193",
      "id" : 542482193,
      "line" : 2533,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ4MjE5Mw==",
      "original_commit_id" : "f26e5ebc60ea2f41b959bc8b136719e250fe8761",
      "original_line" : 2533,
      "original_position" : 31,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 31,
      "pull_request_review_id" : 551490580,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20646",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-14T15:38:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/542482193",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "~0 on this, I'd prefer to keep it as is if remotely possible, and not change mainnet logic for a temporary signet issue at the least.\r\n\r\n> Deliberately disconnecting nodes for behaving in ways we know is not harmful seems very backwards to me.\r\n\r\nIt's not harmful but also, it's unclear what to do in that case? Should we ignore the message? Should be back-patch addrv2 support into the existing connection?\r\n\r\nThe reason for adding the disconnection is that at `verack` time the protocol negotiation is finalized. This might allow for some kinds of optimizations, as well as knowing for sure whether a peer supports addrv1 or not at a clear point in time. This is useful if in the future there are plans to phase out addrv1.",
      "created_at" : "2020-12-14T15:39:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744523314",
      "id" : 744523314,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDUyMzMxNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-14T15:39:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744523314",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I'd prefer to keep it as is if remotely possible, and not change mainnet logic\r\n\r\nYes, this was my thinking behind e59309407a8d5d72f1e3c34024f04957b6aaefc6 that only changes behavior for signet, temporarily.\r\n",
      "created_at" : "2020-12-14T15:54:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744532703",
      "id" : 744532703,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDUzMjcwMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-14T15:54:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744532703",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   }
]
