[
   {
      "author_association" : "MEMBER",
      "body" : "Checking the other implementations, https://github.com/btcsuite/btcd/pull/1536 tagged as \"low priority\" is open in btcd to implement signet. I didn't see other signet proposals in bcoin, bitcoinj, or libbitcoin.",
      "created_at" : "2020-12-13T22:40:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744080800",
      "id" : 744080800,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDA4MDgwMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-13T22:40:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744080800",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "If we're going to change the software, just making it ignore the message if received post-VERACK (for compatibility with earlier drafts of the BIP and hence rc2) seems simpler than adding special cases.\r\n\r\nDeliberately disconnecting nodes for behaving in ways we know is not harmful seems very backwards to me.",
      "created_at" : "2020-12-14T07:20:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744229869",
      "id" : 744229869,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDIyOTg2OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-14T07:20:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744229869",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tend toward NACK. There are 20.99 nodes on signet without addrv2 support and will keep a connection just fine. If your addrman is populated with those (or with rc3/final/master nodes), you won't have any issues either. The issue #20637 is purely about a vanilla start with empty addrman and the only seed being the node that is run by @ajtowns or @kallewoof (I don't remember). The solution is to update that node, not to introduce more branches in net processing.\r\n\r\nEven if people want to go forward with patching the source code, the current patch is too broad. The only thing changes should be the disconnection, not the way how addrv2 messages are recognized.",
      "created_at" : "2020-12-14T07:32:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744236355",
      "id" : 744236355,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDIzNjM1NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-14T07:32:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744236355",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yes, this is a reluctant fallback. It's better if the signet launch can go smoothly without it.ï¿¼ï¿¼ï¿¼",
      "created_at" : "2020-12-14T09:12:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744297359",
      "id" : 744297359,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDI5NzM1OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-14T09:12:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744297359",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> the current patch is too broad. The only thing changes should be the disconnection, not the way how addrv2 messages are recognized\r\n\r\nThis does only change the disconnection?",
      "created_at" : "2020-12-14T09:20:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744301979",
      "id" : 744301979,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDMwMTk3OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-14T09:20:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744301979",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> This does only change the disconnection?\r\n\r\nIt will run `pfrom.m_wants_addrv2 = true;` on signet, which will not be run on mainnet. The whole goal of signet was to be exactly like mainet, except for the pow.",
      "created_at" : "2020-12-14T09:27:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744306427",
      "id" : 744306427,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDMwNjQyNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-14T09:27:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744306427",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Well, adding a test for the signet chain pretty much guarantees different behaviour on signet than mainnet... (And should probably be `if (m_chainparams.GetConsensus().signet_blocks)` anyway, if it were desirable)\r\n\r\nI think just being deliberately compatible with (or at least tolerant of) implementations of earlier versions of the BIP would make much more sense, so either:\r\n\r\n```c++\r\nif (pfrom->m_wants_addrv2) {\r\n    LogPrintf(BCLog::NET, \"peer=%d sent SENDADDRV2 twice; disconnecting\\n\", pfrom->GetId());\r\n    pfrom->fDisconnect = 1;\r\n    return;\r\n}\r\npfrom->m_wants_addrv2 = true;\r\nreturn;\r\n```\r\n\r\nor just:\r\n\r\n```c++\r\nif (pfrom.fSuccessfullyConnected) return; // ignore sendaddrv2 received too late\r\npfrom->m_wants_addrv2 = true;\r\nreturn;\r\n```\r\n\r\n(or both, even).",
      "created_at" : "2020-12-14T09:59:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744325959",
      "id" : 744325959,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDMyNTk1OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-14T09:59:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744325959",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Deliberately disconnecting nodes for behaving in ways we know is not harmful seems very backwards to me.\r\n\r\nTell that to your past self. The disconnection logic has been suggested by you for wtxid, and as such carried over to addv2 ;) \r\n\r\nhttps://github.com/bitcoin/bitcoin/pull/18044/files#r446755938",
      "created_at" : "2020-12-14T10:15:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744336593",
      "id" : 744336593,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDMzNjU5Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-14T10:15:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744336593",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > Deliberately disconnecting nodes for behaving in ways we know is not harmful seems very backwards to me.\r\n> \r\n> Tell that to your past self. The disconnection logic has been suggested by you for wtxid, and as such carried over to addv2 ;)\r\n> \r\n> https://github.com/bitcoin/bitcoin/pull/18044/files#r446755938\r\n\r\nIf there had already been nodes on the network sending wtxid relay mesages after verack, disconnecting them would have also been a bad idea.",
      "created_at" : "2020-12-14T10:29:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744344543",
      "id" : 744344543,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDM0NDU0Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-14T10:29:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744344543",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> should probably be `if (m_chainparams.GetConsensus().signet_blocks)`\n\nThanks! I was telling myself there was surely a better way of checking for it.",
      "created_at" : "2020-12-14T10:29:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20646#issuecomment-744345096",
      "id" : 744345096,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20646",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDM0NTA5Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-14T10:29:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744345096",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   }
]
