[
   {
      "body" : "Rebased on top of #1295 (check return values of TxnBegin, TxnCommit)\n",
      "created_at" : "2012-05-14T05:17:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1293#issuecomment-5682814",
      "id" : 5682814,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1293",
      "updated_at" : "2012-05-14T05:17:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5682814",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "DEPENDENCY UPDATE: this sits on top of #1300, in addition to #1295\n",
      "created_at" : "2012-05-14T16:53:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1293#issuecomment-5695470",
      "id" : 5695470,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1293",
      "updated_at" : "2012-05-14T16:53:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5695470",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1293#discussion_r819824"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1293"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/819824"
         }
      },
      "body" : "Does mapFileUseCount need to remain global?",
      "commit_id" : "ffe8b77a617efd802a9d4ba7e42b163fbd9a250b",
      "created_at" : "2012-05-14T21:57:14Z",
      "diff_hunk" : "@@ -13,7 +13,6 @@\n \n static uint64 nAccountingEntryNumber = 0;\n \n-extern CCriticalSection cs_db;\n extern map<string, int> mapFileUseCount;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1293#discussion_r819824",
      "id" : 819824,
      "original_commit_id" : "c7ab7e596e10ee5ad21a6a67a1f98b2feca45cf6",
      "original_position" : 5,
      "path" : "src/walletdb.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1293",
      "updated_at" : "2012-05-20T00:52:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/819824",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1293#discussion_r819928"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1293"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/819928"
         }
      },
      "body" : "No, that and mapFiles[] could be moved into CDBEnv as well.",
      "commit_id" : "ffe8b77a617efd802a9d4ba7e42b163fbd9a250b",
      "created_at" : "2012-05-14T22:17:01Z",
      "diff_hunk" : "@@ -13,7 +13,6 @@\n \n static uint64 nAccountingEntryNumber = 0;\n \n-extern CCriticalSection cs_db;\n extern map<string, int> mapFileUseCount;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1293#discussion_r819928",
      "id" : 819928,
      "original_commit_id" : "c7ab7e596e10ee5ad21a6a67a1f98b2feca45cf6",
      "original_position" : 5,
      "path" : "src/walletdb.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1293",
      "updated_at" : "2012-05-20T00:52:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/819928",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Moved mapDb and mapFileUseCount into class CDBEnv.  mapFileUseCount had to remain public for the moment, until some wrappers may be written that eliminates the need for walletdb and CDB::Rewrite() to directly access these internals.\n\nIt doesn't help that we use this reference counting scheme *sometimes*, and other times we wish to immediately close regardless of reference count.",
      "created_at" : "2012-05-15T02:55:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1293#issuecomment-5707392",
      "id" : 5707392,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1293",
      "updated_at" : "2012-05-15T02:55:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5707392",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "This seems stable in testing, though the encapsulation isn't the best.  Some of the mapFileUseCount[] stuff is rather delicate, and relies on implicit behavior.  Best left to complete the encapsulation of that to a separate commit, IMO.  Once done, that will fit naturally inside CDBEnv::OpenDb(), which would be split out from CDB::CDB().",
      "created_at" : "2012-05-19T19:14:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1293#issuecomment-5804113",
      "id" : 5804113,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1293",
      "updated_at" : "2012-05-19T19:14:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5804113",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "ACK",
      "created_at" : "2012-05-22T21:00:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1293#issuecomment-5858762",
      "id" : 5858762,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1293",
      "updated_at" : "2012-05-22T21:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5858762",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
