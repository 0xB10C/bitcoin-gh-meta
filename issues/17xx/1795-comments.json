[
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/bd93f61c2abe5b19e77030fa5859bc370c789a3a for binaries and test log.",
      "created_at" : "2012-09-08T04:32:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-8384474",
      "id" : 8384474,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2012-09-08T04:32:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8384474",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "Very exciting.\n\nDid you see this:\n  http://matthias.vallentin.net/blog/2011/06/a-garden-variety-of-bloom-filters/\n\nHe has a really interesting looking C++11 headers-only implementation here at github that might give you inspiration (e.g. I think he uses boost to do the hashing; he seems to get a ton done in a very small number of lines of code).\n   https://github.com/mavam/libbf\n",
      "created_at" : "2012-09-18T23:19:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-8674203",
      "id" : 8674203,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2012-09-18T23:19:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8674203",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "implementation ACK, I like it a lot.  This seems to match the initial sketch from @mikehearn and myself on IRC.\n",
      "created_at" : "2012-09-27T01:09:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-8915356",
      "id" : 8915356,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2012-09-27T01:09:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8915356",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Poke, let's get some additional review on this.",
      "created_at" : "2012-10-03T21:25:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-9122833",
      "id" : 9122833,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2012-10-03T21:25:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9122833",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Hey Matt, could you rebase this on top of ultraprune? I'm ready to start merging the bitcoinj side but want to test this with the latest code. Will do a review now-ish.",
      "created_at" : "2012-10-24T13:11:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-9738630",
      "id" : 9738630,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2012-10-24T13:11:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9738630",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "ACK on this. Most of my comments are purely cosmetic except for the unit test commit being in the wrong place (it wouldn't compile in the order given).\r\n\r\nI guess we'll need a BIP? I'll start on one that documents what we've come up with.",
      "created_at" : "2012-10-24T13:45:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-9739753",
      "id" : 9739753,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2012-10-24T13:45:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/9739753",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "Thanks mike for the good review (as usual).  I updated the code to addresses most of the issues you mentioned.\r\nChanges:\r\n* many additional comments\r\n* filteradd is now limited to 1MB, any larger and the node gets a Misbehaving(100).\r\n* fRelayTxn now defaults to false - this means we will no longer relay tx inv message before receiving the remote peer's version message, if this irks anyone it can be discussed.\r\nMore changes to come (sipa's new merkle block stuff, more unit tests and a seed twiddle value for bloom filters)",
      "created_at" : "2012-11-02T20:45:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-10029681",
      "id" : 10029681,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2012-11-02T20:46:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10029681",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@mikehearn there are a few comments which note what the protocol defines as spec (these are obviously up for discussion):\r\n* there is no formal definition for filter parameters for a filteradd command if no filter is loaded - it is up to the serving node (if the client doest care, why should the spec determine the parameters?)\r\n* as noted above, 1MB limit to filteradd\r\n* txes in MSG_FILTERED_BLOCK can be relayed even when a node already has seen it (the current code does this) however it MUST always forward txn that the node has not seen (I think the bip says this, but its not really clearly worded imho, I updated the BIP to make this more clear)",
      "created_at" : "2012-11-02T20:58:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-10030079",
      "id" : 10030079,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2012-11-02T21:06:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10030079",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Automatic sanity-testing: FAILED BUILD/TEST, see http://jenkins.bluematt.me/pull-tester/1860b72e356f0d4279b25bf1ca562ac00511eded for binaries and test log.\n\nThis could happen for one of several reasons:\n1. It chanages paths in makefile.linux-mingw or otherwise changes build scripts in a way that made them incompatible with the automated testing scripts\n2. It does not build on either Linux i386 or Win32 (via MinGW cross compile)\n3. The test suite fails on either Linux i386 or Win32\n4. The block test-cases failed (lookup the first bNN identifier which failed in https://github.com/TheBlueMatt/test-scripts/blob/master/FullBlockTestGenerator.java)\n",
      "created_at" : "2012-11-02T21:12:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-10030478",
      "id" : 10030478,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2012-11-02T21:12:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10030478",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "@BitcoinPullTester hey, I wasnt done yet!",
      "created_at" : "2012-11-02T21:18:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-10030614",
      "id" : 10030614,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2012-11-02T21:18:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10030614",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/5be9d251b5901399c6f70b99f1c2bddc4e14e7ec for binaries and test log.",
      "created_at" : "2012-11-03T11:23:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-10038439",
      "id" : 10038439,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2012-11-03T11:23:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10038439",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "Added the requested nTweak value and merged sipa's work on partial merkle tree representations.  The BIP now needs rewritten and this is ready for second (third?) round reviews.",
      "created_at" : "2012-11-12T00:01:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-10274345",
      "id" : 10274345,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2012-11-12T00:01:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10274345",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Mostly ACK;\r\n* I'd prefer to have the Murmurhash3 implementation separate from CBloomFilter\r\n* The 0xFFFFFFFF/(n-1)*i seed value seems intended to result in large bit differences between the different hash function's seeds. Together with the tweak, however, the first and the last now get seeds tweak and tweak-1. I think something simpler like k1*i+k2*n+tweak is better (with k1 and k2 arbitrary large odd 32-bit integers).\r\n* I feel uneasy about the arbitrary filter parameters used for the implicitly created filter when sending filteradd without filterload. The server cannot be expected to make a reasonable guess how the client is going to use the filter, and the client still has to track how large the server-side filter grows anyway. I'd prefer to make this simply illegal (DoS 100): filteradd always requires an active filter. Maybe the actual filter data in filterload can be made optional: if it is omitted, it's assumed to be all zeroes (though that would mean the size has to be specified).\r\n",
      "created_at" : "2012-11-18T19:55:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-10490567",
      "id" : 10490567,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2012-11-18T19:55:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10490567",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Automatic sanity-testing: FAILED MERGE, see http://jenkins.bluematt.me/pull-tester/21e780e05c7b18ab318e57bd9e24961a34378e2d for test log.\n\nThis pull does not merge cleanly onto current master",
      "created_at" : "2012-11-27T18:56:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-10771393",
      "id" : 10771393,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2012-11-27T18:56:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10771393",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/a5a72aa691296af6de92658ff998da120c4b34d8 for binaries and test log.",
      "created_at" : "2012-12-18T09:09:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-11478680",
      "id" : 11478680,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2012-12-18T09:09:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/11478680",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1795#discussion_r2549483"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2549483"
         }
      },
      "body" : "If vData is too large, it will still be added to the filter. There needs to be an else block here.",
      "commit_id" : "c51694eb9b9db915beb1da8d76667d94f4f74c75",
      "created_at" : "2013-01-04T13:27:01Z",
      "diff_hunk" : "@@ -3297,6 +3356,51 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv)\n     }\n \n \n+    else if (strCommand == \"filterload\")\n+    {\n+        CBloomFilter filter;\n+        vRecv >> filter;\n+\n+        if (!filter.IsWithinSizeConstraints())\n+            // There is no excuse for sending a too-large filter\n+            pfrom->Misbehaving(100);\n+        else\n+        {\n+            LOCK(pfrom->cs_filter);\n+            delete pfrom->pfilter;\n+            pfrom->pfilter = new CBloomFilter(filter);\n+        }\n+        pfrom->fRelayTxes = true;\n+    }\n+\n+\n+    else if (strCommand == \"filteradd\")\n+    {\n+        vector<unsigned char> vData;\n+        vRecv >> vData;\n+\n+        // Nodes must NEVER send a data item > 520 bytes (the max size for a script data object,\n+        // and thus, the maximum size any matched object can have) in a filteradd message\n+        if (vData.size() > 520)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#discussion_r2549483",
      "id" : 2549483,
      "original_commit_id" : "a5a72aa691296af6de92658ff998da120c4b34d8",
      "original_position" : 138,
      "path" : "src/main.cpp",
      "position" : 281,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1795",
      "updated_at" : "2013-01-16T19:34:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2549483",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1795#discussion_r2549484"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2549484"
         }
      },
      "body" : "Maybe a log message here would be appropriate?",
      "commit_id" : "c51694eb9b9db915beb1da8d76667d94f4f74c75",
      "created_at" : "2013-01-04T13:27:16Z",
      "diff_hunk" : "@@ -3297,6 +3356,51 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv)\n     }\n \n \n+    else if (strCommand == \"filterload\")\n+    {\n+        CBloomFilter filter;\n+        vRecv >> filter;\n+\n+        if (!filter.IsWithinSizeConstraints())\n+            // There is no excuse for sending a too-large filter\n+            pfrom->Misbehaving(100);\n+        else\n+        {\n+            LOCK(pfrom->cs_filter);\n+            delete pfrom->pfilter;\n+            pfrom->pfilter = new CBloomFilter(filter);\n+        }\n+        pfrom->fRelayTxes = true;\n+    }\n+\n+\n+    else if (strCommand == \"filteradd\")\n+    {\n+        vector<unsigned char> vData;\n+        vRecv >> vData;\n+\n+        // Nodes must NEVER send a data item > 520 bytes (the max size for a script data object,\n+        // and thus, the maximum size any matched object can have) in a filteradd message\n+        if (vData.size() > 520)\n+            pfrom->Misbehaving(100);\n+\n+        LOCK(pfrom->cs_filter);\n+        if (pfrom->pfilter)\n+            pfrom->pfilter->insert(vData);\n+        else\n+            pfrom->Misbehaving(100);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#discussion_r2549484",
      "id" : 2549484,
      "original_commit_id" : "a5a72aa691296af6de92658ff998da120c4b34d8",
      "original_position" : 145,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1795",
      "updated_at" : "2013-01-16T19:34:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2549484",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1795#discussion_r2561068"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2561068"
         }
      },
      "body" : "yep, fixed.",
      "commit_id" : "c51694eb9b9db915beb1da8d76667d94f4f74c75",
      "created_at" : "2013-01-07T00:39:09Z",
      "diff_hunk" : "@@ -3297,6 +3356,51 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv)\n     }\n \n \n+    else if (strCommand == \"filterload\")\n+    {\n+        CBloomFilter filter;\n+        vRecv >> filter;\n+\n+        if (!filter.IsWithinSizeConstraints())\n+            // There is no excuse for sending a too-large filter\n+            pfrom->Misbehaving(100);\n+        else\n+        {\n+            LOCK(pfrom->cs_filter);\n+            delete pfrom->pfilter;\n+            pfrom->pfilter = new CBloomFilter(filter);\n+        }\n+        pfrom->fRelayTxes = true;\n+    }\n+\n+\n+    else if (strCommand == \"filteradd\")\n+    {\n+        vector<unsigned char> vData;\n+        vRecv >> vData;\n+\n+        // Nodes must NEVER send a data item > 520 bytes (the max size for a script data object,\n+        // and thus, the maximum size any matched object can have) in a filteradd message\n+        if (vData.size() > 520)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#discussion_r2561068",
      "id" : 2561068,
      "original_commit_id" : "a5a72aa691296af6de92658ff998da120c4b34d8",
      "original_position" : 138,
      "path" : "src/main.cpp",
      "position" : 281,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1795",
      "updated_at" : "2013-01-16T19:34:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2561068",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1795#discussion_r2561070"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2561070"
         }
      },
      "body" : "Misbehaving already logs info on who/how much, it would be kinda nice to pass it a why/where in code param, but that should be in a separate pull.",
      "commit_id" : "c51694eb9b9db915beb1da8d76667d94f4f74c75",
      "created_at" : "2013-01-07T00:39:18Z",
      "diff_hunk" : "@@ -3297,6 +3356,51 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv)\n     }\n \n \n+    else if (strCommand == \"filterload\")\n+    {\n+        CBloomFilter filter;\n+        vRecv >> filter;\n+\n+        if (!filter.IsWithinSizeConstraints())\n+            // There is no excuse for sending a too-large filter\n+            pfrom->Misbehaving(100);\n+        else\n+        {\n+            LOCK(pfrom->cs_filter);\n+            delete pfrom->pfilter;\n+            pfrom->pfilter = new CBloomFilter(filter);\n+        }\n+        pfrom->fRelayTxes = true;\n+    }\n+\n+\n+    else if (strCommand == \"filteradd\")\n+    {\n+        vector<unsigned char> vData;\n+        vRecv >> vData;\n+\n+        // Nodes must NEVER send a data item > 520 bytes (the max size for a script data object,\n+        // and thus, the maximum size any matched object can have) in a filteradd message\n+        if (vData.size() > 520)\n+            pfrom->Misbehaving(100);\n+\n+        LOCK(pfrom->cs_filter);\n+        if (pfrom->pfilter)\n+            pfrom->pfilter->insert(vData);\n+        else\n+            pfrom->Misbehaving(100);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#discussion_r2561070",
      "id" : 2561070,
      "original_commit_id" : "a5a72aa691296af6de92658ff998da120c4b34d8",
      "original_position" : 145,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1795",
      "updated_at" : "2013-01-16T19:34:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2561070",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Can you add a new feature that lets clients opt out of auto-adding? Sipa points out that it's only necessary for wallets that contain outputs which don't require predictable data in the corresponding inputs, which (for now) is most of them. This should resolve the excessive expansion issues.",
      "created_at" : "2013-01-09T14:34:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-12046488",
      "id" : 12046488,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2013-01-09T14:34:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12046488",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "@mikehearn  Kind of an an unfortunate privacy loss for ones who do set it, and it still leaves the feature potentially useless for any who set it.  (But I agree on having the option, if for nothing else because it makes the load-balancing lark I suggested viable)",
      "created_at" : "2013-01-09T14:47:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-12047118",
      "id" : 12047118,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2013-01-09T14:47:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12047118",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Well not really, you can still set the FP rate to whatever you want. If all\nyour outputs are pay-to-address then it's a no-op functionality-wise, the\nauto-adding didn't buy you anything. For the case where you have\npay-to-pubkey or other scripts, the client has to refresh the filter every\nso often .... it can be implemented in bcj later.",
      "created_at" : "2013-01-09T15:11:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-12048198",
      "id" : 12048198,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2013-01-09T15:11:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12048198",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "Setting that bit or not is still another anonymity set reduction, but I'm splitting hairs there ignore it.  I guess I don't have a good feel for how fast the filter fails and needs to be reset. If it's too fast periodic refreshes won't be sufficient (E.g. will the size of the refresh plus the unwanted data end up being more than just not using the filter).\r\n",
      "created_at" : "2013-01-09T18:09:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-12058432",
      "id" : 12058432,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2013-01-09T18:09:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12058432",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "I think we can explore different algorithms later. The exact choices will\r\ndepend on the users privacy preferences and device situation anyway.\r\n\r\n\r\nOn Wed, Jan 9, 2013 at 7:09 PM, Gregory Maxwell <notifications@github.com>wrote:\r\n\r\n> Setting that bit or not is still another anonymity set reduction, but I'm\r\n> splitting hairs there ignore it. I guess I don't have a good feel for how\r\n> fast the filter fails and needs to be reset. If it's too fast periodic\r\n> refreshes won't be sufficient (E.g. will the size of the refresh plus the\r\n> unwanted data end up being more than just not using the filter).\r\n>\r\n> Ã¢ÂÂ\r\n> Reply to this email directly or view it on GitHub<https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-12058432>.\r\n>\r\n>",
      "created_at" : "2013-01-09T19:18:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-12061642",
      "id" : 12061642,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2013-01-09T19:18:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12061642",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "Added a nFlags to let the peer pick how/when it wants the filter updated...also added a second two commits to make it possible to match an arbitrary script template as a discussion point (that second part is not yet tested).\r\nWould like comments.",
      "created_at" : "2013-01-11T03:44:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-12130821",
      "id" : 12130821,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2013-01-11T03:44:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12130821",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1795#discussion_r2622459"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2622459"
         }
      },
      "body" : "Wouldn't it be nice if that 520 was a constant somewhere or a define? So it could be used for the ``max size for a script data object`` and in here.",
      "commit_id" : "c51694eb9b9db915beb1da8d76667d94f4f74c75",
      "created_at" : "2013-01-11T19:28:47Z",
      "diff_hunk" : "@@ -3297,6 +3356,51 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv)\n     }\n \n \n+    else if (strCommand == \"filterload\")\n+    {\n+        CBloomFilter filter;\n+        vRecv >> filter;\n+\n+        if (!filter.IsWithinSizeConstraints())\n+            // There is no excuse for sending a too-large filter\n+            pfrom->Misbehaving(100);\n+        else\n+        {\n+            LOCK(pfrom->cs_filter);\n+            delete pfrom->pfilter;\n+            pfrom->pfilter = new CBloomFilter(filter);\n+        }\n+        pfrom->fRelayTxes = true;\n+    }\n+\n+\n+    else if (strCommand == \"filteradd\")\n+    {\n+        vector<unsigned char> vData;\n+        vRecv >> vData;\n+\n+        // Nodes must NEVER send a data item > 520 bytes (the max size for a script data object,\n+        // and thus, the maximum size any matched object can have) in a filteradd message\n+        if (vData.size() > 520)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#discussion_r2622459",
      "id" : 2622459,
      "original_commit_id" : "a5a72aa691296af6de92658ff998da120c4b34d8",
      "original_position" : 138,
      "path" : "src/main.cpp",
      "position" : 281,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1795",
      "updated_at" : "2013-01-16T19:34:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2622459",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Code review notes:\r\n\r\nI don't like the entire implementation of CPartialMerkleTree being stuffed into main.h, it should be its own .cpp/.h\r\n\r\nMessage handling looks good from a potential vulnerability point of view.\r\n\r\nNACK on the script.cpp / script.h changes -- they are unused (yes? I don't see where MatchesTemplate is used outside of script.cpp/.h) and I don't see unit tests for the new features like OP_OPCODE.\r\n\r\n",
      "created_at" : "2013-01-16T16:19:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-12326080",
      "id" : 12326080,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2013-01-16T16:19:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12326080",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "@gavinandresen Yes, after discussion I believe we are currently targeting skipping the 2 MatchesTemplate commits for 0.8 and maybe skipping those entirely depending on what we may need in the future.",
      "created_at" : "2013-01-16T16:58:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-12328294",
      "id" : 12328294,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2013-01-16T16:58:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12328294",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/e1a4f3778cb90ba9f0d4e736752f78dad1703caa for binaries and test log.",
      "created_at" : "2013-01-16T19:49:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-12336347",
      "id" : 12336347,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2013-01-16T19:49:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12336347",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "@gavinandresen moved it to main.cpp, is that ok for you?",
      "created_at" : "2013-01-16T19:52:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-12336539",
      "id" : 12336539,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2013-01-16T19:52:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12336539",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "ACK, looks good.\r\n",
      "created_at" : "2013-01-16T20:59:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-12339708",
      "id" : 12339708,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2013-01-16T20:59:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/12339708",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "So.. what was the BIP for these protocol changes? It would be nice if it could be referenced in the pull requests.",
      "created_at" : "2013-03-27T09:45:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-15513639",
      "id" : 15513639,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2013-03-27T09:45:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/15513639",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1795#discussion_r3547370"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1795"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/3547370"
         }
      },
      "body" : "Somehow this doesn't feel like the best way to implement this....",
      "commit_id" : "c51694eb9b9db915beb1da8d76667d94f4f74c75",
      "created_at" : "2013-03-27T09:51:51Z",
      "diff_hunk" : "@@ -2815,6 +2969,10 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv)\n             vRecv >> pfrom->strSubVer;\n         if (!vRecv.empty())\n             vRecv >> pfrom->nStartingHeight;\n+        if (!vRecv.empty())\n+            vRecv >> pfrom->fRelayTxes; // set to true after we get the first filter* message",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#discussion_r3547370",
      "id" : 3547370,
      "original_commit_id" : "c51694eb9b9db915beb1da8d76667d94f4f74c75",
      "original_position" : 166,
      "path" : "src/main.cpp",
      "position" : 166,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1795",
      "updated_at" : "2013-03-27T09:51:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/3547370",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "https://en.bitcoin.it/wiki/BIP_0037 as was discussed on the mailing list.  Regardless, this code was already merged and shipped months ago, it's a bit late to be commenting on it now. You can always open up new pull reqs if you want to change how the protocol works.",
      "created_at" : "2013-03-27T10:26:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1795#issuecomment-15515778",
      "id" : 15515778,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1795",
      "updated_at" : "2013-03-27T10:26:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/15515778",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   }
]
