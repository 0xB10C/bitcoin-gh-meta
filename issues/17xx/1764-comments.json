[
   {
      "body" : "Code change looks OK to my 1am brain.  Commit description seems lame.  I would say something like:\n\n\"Using a byte-for-byte comparison excludes valid nHeight encodings.  Replace with standard script method for decoding integer values on the script stack.\"",
      "created_at" : "2012-08-31T05:40:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1764#issuecomment-8183155",
      "id" : 8183155,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1764",
      "updated_at" : "2012-08-31T05:40:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8183155",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Comment updated, also fixed a bug in the error message",
      "created_at" : "2012-08-31T05:42:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1764#issuecomment-8183176",
      "id" : 8183176,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1764",
      "updated_at" : "2012-08-31T05:42:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8183176",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "ACK... assuming it tests OK\n",
      "created_at" : "2012-08-31T05:45:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1764#issuecomment-8183200",
      "id" : 8183200,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1764",
      "updated_at" : "2012-08-31T05:45:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8183200",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "NACK. The format should be strict/canonical. Changing the BIP to make that clear is the right fix, in my humble opinion.\n",
      "created_at" : "2012-08-31T12:27:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1764#issuecomment-8190386",
      "id" : 8190386,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1764",
      "updated_at" : "2012-08-31T12:27:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8190386",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Encoding 24-bit heights instead of 32-bit isn't exactly cheap everywhere. :(",
      "created_at" : "2012-08-31T14:13:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1764#issuecomment-8193218",
      "id" : 8193218,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1764",
      "updated_at" : "2012-08-31T14:13:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8193218",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "&lt;shrug&gt;  Satoshi created CastToBigNum() precisely for reasons like this...\n",
      "created_at" : "2012-08-31T15:10:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1764#issuecomment-8195023",
      "id" : 8195023,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1764",
      "updated_at" : "2012-08-31T15:10:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8195023",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "I was under the impression we were gearing up to put a lot of effort into forcing scripts to be canonical, I dont see why we would not do that here, too.",
      "created_at" : "2012-08-31T17:02:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1764#issuecomment-8198420",
      "id" : 8198420,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1764",
      "updated_at" : "2012-08-31T17:02:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8198420",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Right. This should be forced to be canonical and the BIP should be fixed to make it clear that it's specifying that. (Gavin pointed out that it already does; but it only does so in a fairly vague manner).  I'm glad that Luke caught the lack of clarity though.\n\n\n",
      "created_at" : "2012-08-31T17:15:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1764#issuecomment-8198785",
      "id" : 8198785,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1764",
      "updated_at" : "2012-08-31T17:15:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8198785",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Well-formed scripts in the coinbase means it is parseable -- which is not the issue here in this thread.  These scripts are parseable in both luke-jr's and gavin's cases.\n\nBigNums may have multiple encodings, which is perfectly normal and accepted and supported in script for script stack values.  Thus, universal use of CastToBool and CastToBigNum before calculating with a stack value.\n\nNot-well-formed coinbase scripts are ones which include invalid opcodes and other garbage.  Well-formed coinbase scripts may have OP_PUSHDATA<garbage> but not simply <garbage>.  That's not at issue here.",
      "created_at" : "2012-08-31T17:16:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1764#issuecomment-8198819",
      "id" : 8198819,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1764",
      "updated_at" : "2012-08-31T17:19:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8198819",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "I ask that everyone reconsider their position based on a new reason: Bitcoin script number format is rather complicated, and could easily be vulnerable to subtle implementation bugs.\n\nMy attempt to explain the format in the shortest possible terms:\n- Zero is special-cased to serialize to 00 regardless of everything else herein.\n- All numbers with a multiple of 8 bits are padded with an extra 8 bits to give them a sign bit, even if the number is unsigned; numbers with non-multiples-of-8 bits are simply padded to a multiple of 8.\n- If a number is signed, the absolute MSB (ie, including padding bits) is set.\n\nAnd hopefully I didn't miss anything in that rather complicated explanation of the number format. :(",
      "created_at" : "2012-08-31T19:47:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1764#issuecomment-8203051",
      "id" : 8203051,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1764",
      "updated_at" : "2012-08-31T19:47:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8203051",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr  that is a major reason to impose a strict canonicality requirement. If there is only one way to encode/decode each value then it is relatively simple and reliable to write tests cases that that show two implementations agree.  If there are multiple ways then an attacker can exploit them to create network splits if there are subtle bugs in some implementation.",
      "created_at" : "2012-08-31T19:51:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1764#issuecomment-8203127",
      "id" : 8203127,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1764",
      "updated_at" : "2012-08-31T19:51:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8203127",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Guess I didn't look at it from that perspective :)\n\nFair enough, closing this.",
      "created_at" : "2012-08-31T19:57:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1764#issuecomment-8203288",
      "id" : 8203288,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1764",
      "updated_at" : "2012-08-31T19:57:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8203288",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Just to correct it if anyone else reads this thread and implements based on it:\nzero is not special-cased to 00, its a zero-length vector.\nSee: the script test-cases which include a number of specific number tests.",
      "created_at" : "2012-08-31T20:00:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1764#issuecomment-8203353",
      "id" : 8203353,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1764",
      "updated_at" : "2012-08-31T20:00:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8203353",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Right, by 00 I meant as a serialized script; ie, OP_0",
      "created_at" : "2012-08-31T20:03:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1764#issuecomment-8203423",
      "id" : 8203423,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1764",
      "updated_at" : "2012-08-31T20:03:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8203423",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   }
]
