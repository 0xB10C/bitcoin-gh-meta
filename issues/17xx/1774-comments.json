[
   {
      "body" : "ACK. makes valgrind happy again.\n",
      "created_at" : "2012-09-01T22:22:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1774#issuecomment-8217135",
      "id" : 8217135,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1774",
      "updated_at" : "2012-09-01T22:22:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8217135",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1774#discussion_r1513072"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1774"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1513072"
         }
      },
      "body" : "Don't you mean .clear()?",
      "commit_id" : "ddb709e9de1490afcfa1af045517d2228d5b864c",
      "created_at" : "2012-09-02T06:35:53Z",
      "diff_hunk" : "@@ -306,7 +305,7 @@ bool CWallet::EncryptWallet(const SecureString& strWalletPassphrase)\n         CWalletTx* wtx = &((*it).second);\n         txOrdered.insert(make_pair(wtx->nOrderPos, TxPair(wtx, (CAccountingEntry*)0)));\n     }\n-    list<CAccountingEntry> acentries;\n+    acentries.empty();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1774#discussion_r1513072",
      "id" : 1513072,
      "original_commit_id" : "b153ff0776b24b75f9dd333b72708eaa2d96e0a2",
      "original_position" : 15,
      "path" : "src/wallet.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1774",
      "updated_at" : "2012-09-02T08:02:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1513072",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "I agree that this would solve the immediate problem. std::list (unlike std::vector) does not invalidate iterators when items are added, so it is safe to keep pointers to items in it.\n\nI do think the solution is a bit strange, but maybe it's just me. Why not return a type from OrderedTxItems that has the actual CAccountingEntry instead of one that has pointers to another (temporary) structure, which is being built at the same time? \n",
      "created_at" : "2012-09-02T06:44:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1774#issuecomment-8219467",
      "id" : 8219467,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1774",
      "updated_at" : "2012-09-02T06:44:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8219467",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/1774#discussion_r1513125"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1774"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1513125"
         }
      },
      "body" : "Yes, oops.",
      "commit_id" : "ddb709e9de1490afcfa1af045517d2228d5b864c",
      "created_at" : "2012-09-02T07:33:12Z",
      "diff_hunk" : "@@ -306,7 +305,7 @@ bool CWallet::EncryptWallet(const SecureString& strWalletPassphrase)\n         CWalletTx* wtx = &((*it).second);\n         txOrdered.insert(make_pair(wtx->nOrderPos, TxPair(wtx, (CAccountingEntry*)0)));\n     }\n-    list<CAccountingEntry> acentries;\n+    acentries.empty();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1774#discussion_r1513125",
      "id" : 1513125,
      "original_commit_id" : "b153ff0776b24b75f9dd333b72708eaa2d96e0a2",
      "original_position" : 15,
      "path" : "src/wallet.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/1774",
      "updated_at" : "2012-09-02T08:02:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1513125",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@laanwj It does feel strange to me, but I failed to think up a better way short of trying to rewrite it in some other paradigm. Maybe boost::variant would work better (most of the CAccountingEntry pointers are NULL), but I'm not comfortable with adding that into the mix myself this late in the release cycle.",
      "created_at" : "2012-09-02T07:36:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1774#issuecomment-8219723",
      "id" : 8219723,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1774",
      "updated_at" : "2012-09-02T07:36:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8219723",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Yes, this is the simplest solution for now, that's for sure. Maybe add a (doxygen) comment to CWallet::OrderedTxItems that warns of the dangers, instead of only at the callsite in wallet.h.\n",
      "created_at" : "2012-09-02T07:42:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1774#issuecomment-8219756",
      "id" : 8219756,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1774",
      "updated_at" : "2012-09-02T07:42:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8219756",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Like that?",
      "created_at" : "2012-09-02T08:02:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1774#issuecomment-8219849",
      "id" : 8219849,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1774",
      "updated_at" : "2012-09-02T08:02:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8219849",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Yes. ACK",
      "created_at" : "2012-09-02T10:22:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1774#issuecomment-8220626",
      "id" : 8220626,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1774",
      "updated_at" : "2012-09-02T10:22:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8220626",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "ACK. (oops. clicked the wrong button)\n",
      "created_at" : "2012-09-02T17:36:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/1774#issuecomment-8224051",
      "id" : 8224051,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/1774",
      "updated_at" : "2012-09-02T17:36:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/8224051",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   }
]
