[
   {
      "author_association" : "MEMBER",
      "body" : "I'm unable to build (with clang 13, CI seems to agree). The first commit compiles; testing. \r\n\r\n<details><summary>build output</summary><p>\r\n\r\n```\r\nbench/addrman.cpp:76:18: error: no matching constructor for initialization of 'CAddrMan'\r\n        CAddrMan addrman{/* deterministic */ false, /* consistency_check_ratio */ 0};\r\n                 ^      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n./addrman.h:181:7: note: candidate constructor (the implicit copy constructor) not viable: requires 1 argument, but 2 were provided\r\nclass CAddrMan\r\n      ^\r\n./addrman.h:458:14: note: candidate constructor not viable: requires 3 arguments, but 2 were provided\r\n    explicit CAddrMan(std::vector<bool>* asmap, bool deterministic, int32_t consistency_check_ratio);\r\n             ^\r\nbench/addrman.cpp:83:14: error: no matching constructor for initialization of 'CAddrMan'\r\n    CAddrMan addrman(/* deterministic */ false, /* consistency_check_ratio */ 0);\r\n             ^                           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n./addrman.h:181:7: note: candidate constructor (the implicit copy constructor) not viable: requires 1 argument, but 2 were provided\r\nclass CAddrMan\r\n      ^\r\n./addrman.h:458:14: note: candidate constructor not viable: requires 3 arguments, but 2 were provided\r\n    explicit CAddrMan(std::vector<bool>* asmap, bool deterministic, int32_t consistency_check_ratio);\r\n             ^\r\nbench/addrman.cpp:95:14: error: no matching constructor for initialization of 'CAddrMan'\r\n    CAddrMan addrman(/* deterministic */ false, /* consistency_check_ratio */ 0);\r\n             ^                           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n./addrman.h:181:7: note: candidate constructor (the implicit copy constructor) not viable: requires 1 argument, but 2 were provided\r\nclass CAddrMan\r\n      ^\r\n./addrman.h:458:14: note: candidate constructor not viable: requires 3 arguments, but 2 were provided\r\n    explicit CAddrMan(std::vector<bool>* asmap, bool deterministic, int32_t consistency_check_ratio);\r\n             ^\r\n```\r\n</p></details>\r\n",
      "created_at" : "2021-08-24T13:34:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22791#issuecomment-904647597",
      "id" : 904647597,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22791",
      "node_id" : "IC_kwDOABII584169Ot",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-24T13:51:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/904647597",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I'm unable to build (with clang 13, CI seems to agree)\r\n\r\nOops. I don't build with bench locally to save a bit of time. Now fixed.",
      "created_at" : "2021-08-24T13:43:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22791#issuecomment-904654593",
      "id" : 904654593,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22791",
      "node_id" : "IC_kwDOABII58416-8B",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-24T13:43:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/904654593",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "First commit: the addrman checks pass throughout, but I lose 18k addresses on startup and then see parsing errors with the asmap file (and same on bitcoind restart, which fails).\r\n```\r\n2021-08-24T13:39:14Z [init] Opened asmap file \"/home/jon/projects/bitcoin/asmap/demo.map\" (932999 bytes) from disk\r\n2021-08-24T13:39:15Z [init] Using asmap version 7ead927689f884bc4021618017cc1438d9328578779edd2adfbed044fb52928e for IP bucketing\r\n2021-08-24T13:39:15Z [init] init message: Loading P2P addressesâ¦\r\n2021-08-24T13:39:16Z [init] Bucketing method was updated, re-bucketing addrman entries from disk\r\n2021-08-24T13:39:25Z [init] addrman lost 18599 new and 1 tried addresses due to collisions or invalid addresses\r\n2021-08-24T13:39:25Z [init] Addrman checks started: new 26373, tried 72, total 26445\r\n2021-08-24T13:39:25Z [init] Addrman checks completed successfully\r\n2021-08-24T13:39:25Z [init] Loaded 26445 addresses from peers.dat  9577ms\r\n...\r\nError: Error reading configuration file: parse error on line 334: 2021-08-24T13:39:14Z [init] Opened asmap file \"/home/jon/projects/bitcoin/asmap/demo.map\" (932999 bytes) from disk\r\n```\r\n\r\n<details><summary>tested with these config args</summary><p>\r\n\r\n```\r\n2021-08-24T13:41:49Z [init] Config file arg: blockfilterindex=\"1\"\r\n2021-08-24T13:41:49Z [init] Config file arg: checkaddrman=\"1\"\r\n2021-08-24T13:41:49Z [init] Config file arg: checkblocks=\"12\"\r\n2021-08-24T13:41:49Z [init] Config file arg: checklevel=\"4\"\r\n2021-08-24T13:41:49Z [init] Config file arg: checkmempool=\"1\"\r\n2021-08-24T13:41:49Z [init] Config file arg: coinstatsindex=\"1\"\r\n2021-08-24T13:41:49Z [init] Config file arg: debug=\"tor\"\r\n2021-08-24T13:41:49Z [init] Config file arg: debug=\"i2p\"\r\n2021-08-24T13:41:49Z [init] Config file arg: debug=\"addrman\"\r\n2021-08-24T13:41:49Z [init] Config file arg: i2psam=\"127.0.0.1:7656\"\r\n2021-08-24T13:41:49Z [init] Config file arg: logips=\"1\"\r\n2021-08-24T13:41:49Z [init] Config file arg: logthreadnames=\"1\"\r\n2021-08-24T13:41:49Z [init] Config file arg: par=\"1\"\r\n2021-08-24T13:41:49Z [init] Config file arg: peerbloomfilters=\"1\"\r\n2021-08-24T13:41:49Z [init] Config file arg: persistmempool=\"1\"\r\n2021-08-24T13:41:49Z [init] Config file arg: txindex=\"1\"\r\n2021-08-24T13:41:49Z [init] Config file arg: walletbroadcast=\"1\"\r\n2021-08-24T13:41:49Z [init] Config file arg: [main] asmap=\"/home/jon/projects/bitcoin/asmap/demo.map\"\r\n```\r\n</p></details>\r\n",
      "created_at" : "2021-08-24T13:45:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22791#issuecomment-904656625",
      "id" : 904656625,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22791",
      "node_id" : "IC_kwDOABII58416_bx",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-24T13:55:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/904656625",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   }
]
