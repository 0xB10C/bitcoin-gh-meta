[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "While testing the GUI I noticed that after reloading a blank HD wallet or a key less wallet the icons\r\nare displayed not blanked 50%, and also not the correct strike thru HD icon.\r\n\r\nWhen we create the wallet that is handled correct since we init IsHDEnabled there with 0. (false)",
      "created_at" : "2021-08-23T17:19:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22781#issuecomment-903963942",
      "id" : 903963942,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22781",
      "node_id" : "IC_kwDOABII58414WUm",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-23T17:19:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/903963942",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/34917548?v=4",
         "events_url" : "https://api.github.com/users/Saibato/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Saibato/followers",
         "following_url" : "https://api.github.com/users/Saibato/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Saibato/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Saibato",
         "id" : 34917548,
         "login" : "Saibato",
         "node_id" : "MDQ6VXNlcjM0OTE3NTQ4",
         "organizations_url" : "https://api.github.com/users/Saibato/orgs",
         "received_events_url" : "https://api.github.com/users/Saibato/received_events",
         "repos_url" : "https://api.github.com/users/Saibato/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Saibato/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Saibato/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Saibato"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.\r\n\r\n@jarolrod and me were discussing the same issue with `CWallet::IsHDEnabled` while working on https://github.com/bitcoin-core/gui/pull/403.",
      "created_at" : "2021-08-23T20:24:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22781#issuecomment-904096624",
      "id" : 904096624,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22781",
      "node_id" : "IC_kwDOABII584142tw",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-23T20:24:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/904096624",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22781#discussion_r694285906"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22781"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/694285906"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n        if (!spk_man->IsHDEnabled()) return false;\r\n        result = true;\r\n```",
      "commit_id" : "0310f704f9cce23048fda5dde962f1b6da72d3a8",
      "created_at" : "2021-08-23T20:28:33Z",
      "diff_hunk" : "@@ -1364,9 +1364,13 @@ CAmount CWallet::GetDebit(const CTransaction& tx, const isminefilter& filter) co\n bool CWallet::IsHDEnabled() const\n {\n     // All Active ScriptPubKeyMans must be HD for this to be true\n-    bool result = true;\n+    bool result = false;\n     for (const auto& spk_man : GetActiveScriptPubKeyMans()) {\n-        result &= spk_man->IsHDEnabled();\n+        if (spk_man->IsHDEnabled()) {\n+            result = true;\n+        } else {\n+            return false;\n+        }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22781#discussion_r694285906",
      "id" : 694285906,
      "line" : 1373,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5NDI4NTkwNg==",
      "original_commit_id" : "0310f704f9cce23048fda5dde962f1b6da72d3a8",
      "original_line" : 1373,
      "original_position" : 12,
      "original_start_line" : 1369,
      "path" : "src/wallet/wallet.cpp",
      "position" : 12,
      "pull_request_review_id" : 736537157,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22781",
      "side" : "RIGHT",
      "start_line" : 1369,
      "start_side" : "RIGHT",
      "updated_at" : "2021-08-23T20:28:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/694285906",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22781#discussion_r694288443"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22781"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/694288443"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Or, even better:\r\n```diff\r\n--- a/src/wallet/wallet.cpp\r\n+++ b/src/wallet/wallet.cpp\r\n@@ -1364,11 +1364,11 @@ CAmount CWallet::GetDebit(const CTransaction& tx, const isminefilter& filter) co\r\n bool CWallet::IsHDEnabled() const\r\n {\r\n     // All Active ScriptPubKeyMans must be HD for this to be true\r\n-    bool result = true;\r\n+    if (GetActiveScriptPubKeyMans().empty()) return false;\r\n     for (const auto& spk_man : GetActiveScriptPubKeyMans()) {\r\n-        result &= spk_man->IsHDEnabled();\r\n+        if (!spk_man->IsHDEnabled()) return false;\r\n     }\r\n-    return result;\r\n+    return true;\r\n }\r\n \r\n bool CWallet::CanGetAddresses(bool internal) const\r\n```\r\n?",
      "commit_id" : "0310f704f9cce23048fda5dde962f1b6da72d3a8",
      "created_at" : "2021-08-23T20:32:54Z",
      "diff_hunk" : "@@ -1364,9 +1364,13 @@ CAmount CWallet::GetDebit(const CTransaction& tx, const isminefilter& filter) co\n bool CWallet::IsHDEnabled() const\n {\n     // All Active ScriptPubKeyMans must be HD for this to be true\n-    bool result = true;\n+    bool result = false;\n     for (const auto& spk_man : GetActiveScriptPubKeyMans()) {\n-        result &= spk_man->IsHDEnabled();\n+        if (spk_man->IsHDEnabled()) {\n+            result = true;\n+        } else {\n+            return false;\n+        }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22781#discussion_r694288443",
      "id" : 694288443,
      "in_reply_to_id" : 694285906,
      "line" : 1373,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5NDI4ODQ0Mw==",
      "original_commit_id" : "0310f704f9cce23048fda5dde962f1b6da72d3a8",
      "original_line" : 1373,
      "original_position" : 12,
      "original_start_line" : 1369,
      "path" : "src/wallet/wallet.cpp",
      "position" : 12,
      "pull_request_review_id" : 736540662,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22781",
      "side" : "RIGHT",
      "start_line" : 1369,
      "start_side" : "RIGHT",
      "updated_at" : "2021-08-23T20:32:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/694288443",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   }
]
