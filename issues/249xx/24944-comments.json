[
   {
      "author_association" : "MEMBER",
      "body" : "> Closes https://github.com/bitcoin/bitcoin/issues/24943.\r\n\r\nPretty sure the changes here have nothing to do with the issue. The issue report is about bitcoin-cli. Here, you are modifying the server code.",
      "created_at" : "2022-04-22T11:19:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24944#issuecomment-1106415064",
      "id" : 1106415064,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24944",
      "node_id" : "IC_kwDOABII585B8o3Y",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1106415064/reactions"
      },
      "updated_at" : "2022-04-22T11:19:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1106415064",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24944#discussion_r856188462"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856188462"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`get_int64` should already throw, so maybe the error string of `get_int64` can be adjusted instead? Otherwise, I'd suggest to do this in `RPCHelpMan` somehow automatically instead of forcing reviewers and devs to do it manually.",
      "commit_id" : "a926025ca822ae1fe480c6b1a2c480d1d4641c06",
      "created_at" : "2022-04-22T12:38:42Z",
      "diff_hunk" : "@@ -439,6 +439,11 @@ static RPCHelpMan getblockfrompeer()\n         },\n         [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n {\n+    RPCTypeCheck(request.params, {\n+        UniValue::VSTR, // blockhash\n+        UniValue::VNUM, // peer_id\n+    }, true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24944#discussion_r856188462",
      "id" : 856188462,
      "line" : 445,
      "node_id" : "PRRC_kwDOABII584zCGYu",
      "original_commit_id" : "a926025ca822ae1fe480c6b1a2c480d1d4641c06",
      "original_line" : 445,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 7,
      "pull_request_review_id" : 950026195,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24944",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856188462/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-22T12:38:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856188462",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24944#discussion_r857437282"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857437282"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It throws with the internal-style error seen in the previously referenced issue, but we do the same standard type check and user-friendly error message in many RPCs:\r\n\r\nscantxoutset\r\nsendrawtransaction\r\ntestmempoolaccept\r\nestimatesmartfee\r\nestimaterawfee\r\ngetdescriptorinfo\r\nderiveaddresses\r\nsetmocktime\r\nmockscheduler\r\naddconnection\r\ncreaterawtransaction\r\ndecodescript\r\nsignrawtransactionwithkey\r\ndecodepsbt\r\ncombinepsbt\r\nfinalizepsbt\r\ncreatepsbt\r\nconverttopsbt\r\nutxoupdatepsbt\r\njoinpsbts\r\nanalyzepsbt\r\nupgradewallet\r\nimportmulti\r\nimportdescriptors\r\nlockunspent\r\ngetunconfirmedbalance\r\nwalletcreatefundedpsbt\r\nwalletprocesspsbt\r\nsend\r\nfundrawtransaction\r\nbumpfee\r\npsbtbumpfee\r\n\r\n...and the new sendall RPC.\r\n\r\nSo it seems correct to do it here as well (and the change is trivial to review). If you disagree, can you clarify further? Alternatively, could just drop the second commit and add test coverage only.",
      "commit_id" : "a926025ca822ae1fe480c6b1a2c480d1d4641c06",
      "created_at" : "2022-04-25T09:34:59Z",
      "diff_hunk" : "@@ -439,6 +439,11 @@ static RPCHelpMan getblockfrompeer()\n         },\n         [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n {\n+    RPCTypeCheck(request.params, {\n+        UniValue::VSTR, // blockhash\n+        UniValue::VNUM, // peer_id\n+    }, true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24944#discussion_r857437282",
      "id" : 857437282,
      "in_reply_to_id" : 856188462,
      "line" : 445,
      "node_id" : "PRRC_kwDOABII584zG3Ri",
      "original_commit_id" : "a926025ca822ae1fe480c6b1a2c480d1d4641c06",
      "original_line" : 445,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 7,
      "pull_request_review_id" : 951594203,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24944",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857437282/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-25T09:37:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857437282",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24944#discussion_r857440767"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857440767"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yeah, I think it should be removed in the other RPCs as well.",
      "commit_id" : "a926025ca822ae1fe480c6b1a2c480d1d4641c06",
      "created_at" : "2022-04-25T09:39:01Z",
      "diff_hunk" : "@@ -439,6 +439,11 @@ static RPCHelpMan getblockfrompeer()\n         },\n         [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n {\n+    RPCTypeCheck(request.params, {\n+        UniValue::VSTR, // blockhash\n+        UniValue::VNUM, // peer_id\n+    }, true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24944#discussion_r857440767",
      "id" : 857440767,
      "in_reply_to_id" : 856188462,
      "line" : 445,
      "node_id" : "PRRC_kwDOABII584zG4H_",
      "original_commit_id" : "a926025ca822ae1fe480c6b1a2c480d1d4641c06",
      "original_line" : 445,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 7,
      "pull_request_review_id" : 951598883,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24944",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857440767/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-25T09:39:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857440767",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24944#discussion_r857452054"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857452054"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ok, that seems to be a discussion for another pull. This one adds test coverage and harmonizes getblockfrompeer with the other RPCs listed. LMK if you'd prefer the second commit be dropped.",
      "commit_id" : "a926025ca822ae1fe480c6b1a2c480d1d4641c06",
      "created_at" : "2022-04-25T09:52:08Z",
      "diff_hunk" : "@@ -439,6 +439,11 @@ static RPCHelpMan getblockfrompeer()\n         },\n         [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n {\n+    RPCTypeCheck(request.params, {\n+        UniValue::VSTR, // blockhash\n+        UniValue::VNUM, // peer_id\n+    }, true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24944#discussion_r857452054",
      "id" : 857452054,
      "in_reply_to_id" : 856188462,
      "line" : 445,
      "node_id" : "PRRC_kwDOABII584zG64W",
      "original_commit_id" : "a926025ca822ae1fe480c6b1a2c480d1d4641c06",
      "original_line" : 445,
      "original_position" : 7,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 7,
      "pull_request_review_id" : 951614031,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24944",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857452054/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-25T09:52:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857452054",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   }
]
