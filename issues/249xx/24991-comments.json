[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`111bec2fdc...bbbb1755da`: remove `;` from python code ð¤¦\r\n\r\n`111b`, `bbbb1`, wow! today is my lucky day!",
      "created_at" : "2022-04-26T09:48:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24991#issuecomment-1109588407",
      "id" : 1109588407,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24991",
      "node_id" : "IC_kwDOABII585CIvm3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1109588407/reactions"
      },
      "updated_at" : "2022-04-26T09:48:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1109588407",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24991#discussion_r858635116"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858635116"
         }
      },
      "author_association" : "MEMBER",
      "body" : "naming suggestion (or just inline it without a local variable, as a comment is also added here)\r\n\r\n```diff\r\n-        const bool maybe_later = args.GetBoolArg(\"-listenonion\", DEFAULT_LISTEN_ONION);\r\n-        if (onlynet_used_with_onion && !maybe_later) {\r\n+        const bool listen_onion_disabled{!args.GetBoolArg(\"-listenonion\", DEFAULT_LISTEN_ONION)};\r\n+        if (onlynet_used_with_onion && listen_onion_disabled) {\r\n```\r\n",
      "commit_id" : "bbbb1755daf7b8c98a8f565a1d9f82599313b3c8",
      "created_at" : "2022-04-26T12:09:11Z",
      "diff_hunk" : "@@ -1361,11 +1368,14 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     if (onion_proxy.IsValid()) {\n         SetProxy(NET_ONION, onion_proxy);\n     } else {\n-        if (args.IsArgSet(\"-onlynet\") && IsReachable(NET_ONION)) {\n+        // If -listenonion is set, then we will (try to) connect to the Tor control port\n+        // later from the torcontrol thread and may retrieve the onion proxy from there.\n+        const bool maybe_later = args.GetBoolArg(\"-listenonion\", DEFAULT_LISTEN_ONION);\n+        if (onlynet_used_with_onion && !maybe_later) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24991#discussion_r858635116",
      "id" : 858635116,
      "line" : 1374,
      "node_id" : "PRRC_kwDOABII584zLbts",
      "original_commit_id" : "bbbb1755daf7b8c98a8f565a1d9f82599313b3c8",
      "original_line" : 1374,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 29,
      "pull_request_review_id" : 953266071,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24991",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858635116/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-26T12:20:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858635116",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24991#discussion_r858643418"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858643418"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe consider something like this as a more helpful error message:\r\n```diff\r\n-                _(\"Outbound connections restricted to Tor (-onlynet=onion) but the proxy for \"\r\n-                  \"reaching the Tor network is not provided: none of -proxy, -onion or \"\r\n-                  \"-listenonion is given\"));\r\n+                _(\"The -onlynet=onion configuration option was passed to restrict outbound\"\r\n+                  \" connections to Tor, but the proxy for reaching the Tor network was not\"\r\n+                  \" provided: none of -proxy, -onion or -listenonion was given\"));\r\n```\r\n",
      "commit_id" : "bbbb1755daf7b8c98a8f565a1d9f82599313b3c8",
      "created_at" : "2022-04-26T12:18:11Z",
      "diff_hunk" : "@@ -1361,11 +1368,14 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     if (onion_proxy.IsValid()) {\n         SetProxy(NET_ONION, onion_proxy);\n     } else {\n-        if (args.IsArgSet(\"-onlynet\") && IsReachable(NET_ONION)) {\n+        // If -listenonion is set, then we will (try to) connect to the Tor control port\n+        // later from the torcontrol thread and may retrieve the onion proxy from there.\n+        const bool maybe_later = args.GetBoolArg(\"-listenonion\", DEFAULT_LISTEN_ONION);\n+        if (onlynet_used_with_onion && !maybe_later) {\n             return InitError(\n                 _(\"Outbound connections restricted to Tor (-onlynet=onion) but the proxy for \"\n-                  \"reaching the Tor network is not provided (no -proxy= and no -onion= given) or \"\n-                  \"it is explicitly forbidden (-onion=0)\"));\n+                  \"reaching the Tor network is not provided: none of -proxy, -onion or \"\n+                  \"-listenonion is given\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24991#discussion_r858643418",
      "id" : 858643418,
      "line" : 1378,
      "node_id" : "PRRC_kwDOABII584zLdva",
      "original_commit_id" : "bbbb1755daf7b8c98a8f565a1d9f82599313b3c8",
      "original_line" : 1378,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 35,
      "pull_request_review_id" : 953266071,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24991",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858643418/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-26T12:20:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858643418",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24991#discussion_r858644855"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858644855"
         }
      },
      "author_association" : "MEMBER",
      "body" : "maybe keep the test without explicit listenonion=0 (not sure, didn't review deeply yet)\r\n```diff\r\n-        self.log.info(\"Test passing -onlynet=onion without -proxy, -onion or -listenonion raises expected init error\")\r\n-        self.nodes[1].extra_args = [\"-onlynet=onion\", \"-listenonion=0\"]\r\n         msg = (\r\n             \"Error: Outbound connections restricted to Tor (-onlynet=onion) but \"\r\n             \"the proxy for reaching the Tor network is not provided: \"\r\n             \"none of -proxy, -onion or -listenonion is given\"\r\n         )\r\n+\r\n+        self.log.info(\"Test passing -onlynet=onion without -proxy or -onion raises expected init error\")\r\n+        self.nodes[1].extra_args = [\"-onlynet=onion\", \"-listen\"]\r\n+        self.nodes[1].assert_start_raises_init_error(expected_msg=msg)\r\n+\r\n+        self.log.info(\"Test passing -onlynet=onion and -listen, without -proxy or -onion, and with -listenonion disabled raises expected init error\")\r\n+        self.nodes[1].extra_args = [\"-onlynet=onion\", \"-listen\", \"-listenonion=0\"]\r\n         self.nodes[1].assert_start_raises_init_error(expected_msg=msg)\r\n```\r\n",
      "commit_id" : "bbbb1755daf7b8c98a8f565a1d9f82599313b3c8",
      "created_at" : "2022-04-26T12:19:50Z",
      "diff_hunk" : "@@ -335,20 +335,29 @@ def networks_dict(d):\n         msg = \"Error: Invalid -i2psam address or hostname: 'def:xyz'\"\n         self.nodes[1].assert_start_raises_init_error(expected_msg=msg)\n \n+        self.log.info(\"Test passing -onlynet=onion with -onion=0/-noonion raises expected init error\")\n         msg = (\n             \"Error: Outbound connections restricted to Tor (-onlynet=onion) but \"\n-            \"the proxy for reaching the Tor network is not provided (no -proxy= \"\n-            \"and no -onion= given) or it is explicitly forbidden (-onion=0)\"\n+            \"the proxy for reaching the Tor network is explicitly forbidden: -onion=0\"\n         )\n-        self.log.info(\"Test passing -onlynet=onion without -proxy or -onion raises expected init error\")\n-        self.nodes[1].extra_args = [\"-onlynet=onion\"]\n-        self.nodes[1].assert_start_raises_init_error(expected_msg=msg)\n-\n-        self.log.info(\"Test passing -onlynet=onion with -onion=0/-noonion raises expected init error\")\n         for arg in [\"-onion=0\", \"-noonion\"]:\n             self.nodes[1].extra_args = [\"-onlynet=onion\", arg]\n             self.nodes[1].assert_start_raises_init_error(expected_msg=msg)\n \n+        self.log.info(\"Test passing -onlynet=onion without -proxy, -onion or -listenonion raises expected init error\")\n+        self.nodes[1].extra_args = [\"-onlynet=onion\", \"-listenonion=0\"]\n+        msg = (\n+            \"Error: Outbound connections restricted to Tor (-onlynet=onion) but \"\n+            \"the proxy for reaching the Tor network is not provided: \"\n+            \"none of -proxy, -onion or -listenonion is given\"\n+        )\n+        self.nodes[1].assert_start_raises_init_error(expected_msg=msg)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24991#discussion_r858644855",
      "id" : 858644855,
      "line" : 354,
      "node_id" : "PRRC_kwDOABII584zLeF3",
      "original_commit_id" : "bbbb1755daf7b8c98a8f565a1d9f82599313b3c8",
      "original_line" : 354,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "test/functional/feature_proxy.py",
      "position" : 27,
      "pull_request_review_id" : 953266071,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24991",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858644855/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-26T13:56:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/858644855",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\n> `111bec2fdc...bbbb1755da`: remove `;` from python code ð¤¦\r\n> \r\n> `111b`, `bbbb1`, wow! today is my lucky day!\r\n\r\nNice!",
      "created_at" : "2022-04-26T16:51:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24991#issuecomment-1110029246",
      "id" : 1110029246,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24991",
      "node_id" : "IC_kwDOABII585CKbO-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1110029246/reactions"
      },
      "updated_at" : "2022-04-26T16:51:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1110029246",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3072149?v=4",
         "events_url" : "https://api.github.com/users/dunxen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dunxen/followers",
         "following_url" : "https://api.github.com/users/dunxen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dunxen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dunxen",
         "id" : 3072149,
         "login" : "dunxen",
         "node_id" : "MDQ6VXNlcjMwNzIxNDk=",
         "organizations_url" : "https://api.github.com/users/dunxen/orgs",
         "received_events_url" : "https://api.github.com/users/dunxen/received_events",
         "repos_url" : "https://api.github.com/users/dunxen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dunxen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dunxen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dunxen"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "tACK bbbb175\r\n\r\n`./src/bitcoind -signet -onlynet=onion -listenonion=1` will not fail to start up. Node starts connecting to onion peers and runs normally.\r\n\r\n`./src/bitcoind -signet -onlynet=onion -listenonion=0` will kill init with:\r\n```\r\n2022-04-28T07:09:12Z Error: Outbound connections restricted to Tor (-onlynet=onion) but the proxy for reaching the Tor network is not provided: none of -proxy, -onion or -listenonion is given\r\nError: Outbound connections restricted to Tor (-onlynet=onion) but the proxy for reaching the Tor network is not provided: none of -proxy, -onion or -listenonion is given\r\n```",
      "created_at" : "2022-04-28T07:10:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24991#issuecomment-1111829590",
      "id" : 1111829590,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24991",
      "node_id" : "IC_kwDOABII585CRSxW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111829590/reactions"
      },
      "updated_at" : "2022-04-28T07:10:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111829590",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3072149?v=4",
         "events_url" : "https://api.github.com/users/dunxen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dunxen/followers",
         "following_url" : "https://api.github.com/users/dunxen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dunxen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dunxen",
         "id" : 3072149,
         "login" : "dunxen",
         "node_id" : "MDQ6VXNlcjMwNzIxNDk=",
         "organizations_url" : "https://api.github.com/users/dunxen/orgs",
         "received_events_url" : "https://api.github.com/users/dunxen/received_events",
         "repos_url" : "https://api.github.com/users/dunxen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dunxen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dunxen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dunxen"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@midnightmagic Can you confirm this solves your issue?",
      "created_at" : "2022-04-28T08:33:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24991#issuecomment-1111902036",
      "id" : 1111902036,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24991",
      "node_id" : "IC_kwDOABII585CRkdU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111902036/reactions"
      },
      "updated_at" : "2022-04-28T08:33:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111902036",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "`bbbb1755da...c313568a97`: address suggestions",
      "created_at" : "2022-04-29T13:21:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24991#issuecomment-1113303666",
      "id" : 1113303666,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24991",
      "node_id" : "IC_kwDOABII585CW6py",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113303666/reactions"
      },
      "updated_at" : "2022-04-29T13:21:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113303666",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24991#discussion_r861795947"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861795947"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done.",
      "commit_id" : "c313568a97bbac41d7f372f62594e440a515e1f5",
      "created_at" : "2022-04-29T13:21:26Z",
      "diff_hunk" : "@@ -1361,11 +1368,14 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     if (onion_proxy.IsValid()) {\n         SetProxy(NET_ONION, onion_proxy);\n     } else {\n-        if (args.IsArgSet(\"-onlynet\") && IsReachable(NET_ONION)) {\n+        // If -listenonion is set, then we will (try to) connect to the Tor control port\n+        // later from the torcontrol thread and may retrieve the onion proxy from there.\n+        const bool maybe_later = args.GetBoolArg(\"-listenonion\", DEFAULT_LISTEN_ONION);\n+        if (onlynet_used_with_onion && !maybe_later) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24991#discussion_r861795947",
      "id" : 861795947,
      "in_reply_to_id" : 858635116,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zXfZr",
      "original_commit_id" : "bbbb1755daf7b8c98a8f565a1d9f82599313b3c8",
      "original_line" : 1374,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 957724065,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24991",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861795947/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-29T13:21:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861795947",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24991#discussion_r861796090"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861796090"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done.",
      "commit_id" : "c313568a97bbac41d7f372f62594e440a515e1f5",
      "created_at" : "2022-04-29T13:21:38Z",
      "diff_hunk" : "@@ -1361,11 +1368,14 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     if (onion_proxy.IsValid()) {\n         SetProxy(NET_ONION, onion_proxy);\n     } else {\n-        if (args.IsArgSet(\"-onlynet\") && IsReachable(NET_ONION)) {\n+        // If -listenonion is set, then we will (try to) connect to the Tor control port\n+        // later from the torcontrol thread and may retrieve the onion proxy from there.\n+        const bool maybe_later = args.GetBoolArg(\"-listenonion\", DEFAULT_LISTEN_ONION);\n+        if (onlynet_used_with_onion && !maybe_later) {\n             return InitError(\n                 _(\"Outbound connections restricted to Tor (-onlynet=onion) but the proxy for \"\n-                  \"reaching the Tor network is not provided (no -proxy= and no -onion= given) or \"\n-                  \"it is explicitly forbidden (-onion=0)\"));\n+                  \"reaching the Tor network is not provided: none of -proxy, -onion or \"\n+                  \"-listenonion is given\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24991#discussion_r861796090",
      "id" : 861796090,
      "in_reply_to_id" : 858643418,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zXfb6",
      "original_commit_id" : "bbbb1755daf7b8c98a8f565a1d9f82599313b3c8",
      "original_line" : 1378,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 957724307,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24991",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861796090/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-29T13:21:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861796090",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24991#discussion_r861798766"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861798766"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Since now the behavior depends on the `-listenonion` value, I added two tests - one with `1` and one with `0`. Leaving the test without an explicit `-listenonion` would mean relying on some parameter interaction or that the testing framework uses a specific value. This could result in a test failure if it is changed.",
      "commit_id" : "c313568a97bbac41d7f372f62594e440a515e1f5",
      "created_at" : "2022-04-29T13:24:45Z",
      "diff_hunk" : "@@ -335,20 +335,29 @@ def networks_dict(d):\n         msg = \"Error: Invalid -i2psam address or hostname: 'def:xyz'\"\n         self.nodes[1].assert_start_raises_init_error(expected_msg=msg)\n \n+        self.log.info(\"Test passing -onlynet=onion with -onion=0/-noonion raises expected init error\")\n         msg = (\n             \"Error: Outbound connections restricted to Tor (-onlynet=onion) but \"\n-            \"the proxy for reaching the Tor network is not provided (no -proxy= \"\n-            \"and no -onion= given) or it is explicitly forbidden (-onion=0)\"\n+            \"the proxy for reaching the Tor network is explicitly forbidden: -onion=0\"\n         )\n-        self.log.info(\"Test passing -onlynet=onion without -proxy or -onion raises expected init error\")\n-        self.nodes[1].extra_args = [\"-onlynet=onion\"]\n-        self.nodes[1].assert_start_raises_init_error(expected_msg=msg)\n-\n-        self.log.info(\"Test passing -onlynet=onion with -onion=0/-noonion raises expected init error\")\n         for arg in [\"-onion=0\", \"-noonion\"]:\n             self.nodes[1].extra_args = [\"-onlynet=onion\", arg]\n             self.nodes[1].assert_start_raises_init_error(expected_msg=msg)\n \n+        self.log.info(\"Test passing -onlynet=onion without -proxy, -onion or -listenonion raises expected init error\")\n+        self.nodes[1].extra_args = [\"-onlynet=onion\", \"-listenonion=0\"]\n+        msg = (\n+            \"Error: Outbound connections restricted to Tor (-onlynet=onion) but \"\n+            \"the proxy for reaching the Tor network is not provided: \"\n+            \"none of -proxy, -onion or -listenonion is given\"\n+        )\n+        self.nodes[1].assert_start_raises_init_error(expected_msg=msg)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24991#discussion_r861798766",
      "id" : 861798766,
      "in_reply_to_id" : 858644855,
      "line" : 354,
      "node_id" : "PRRC_kwDOABII584zXgFu",
      "original_commit_id" : "bbbb1755daf7b8c98a8f565a1d9f82599313b3c8",
      "original_line" : 354,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "test/functional/feature_proxy.py",
      "position" : 27,
      "pull_request_review_id" : 957728322,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24991",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861798766/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-29T13:24:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861798766",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Does this issue prevent incoming connections via Tor, if `--torcontrol` is used in combination with `--listenonion=1`? I've been running version 23.0 for days, and I've not got a single incoming connection via Tor. All are outgoing.",
      "created_at" : "2022-05-01T21:38:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24991#issuecomment-1114342625",
      "id" : 1114342625,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24991",
      "node_id" : "IC_kwDOABII585Ca4Th",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114342625/reactions"
      },
      "updated_at" : "2022-05-01T21:38:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114342625",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/743306?v=4",
         "events_url" : "https://api.github.com/users/schildbach/events{/privacy}",
         "followers_url" : "https://api.github.com/users/schildbach/followers",
         "following_url" : "https://api.github.com/users/schildbach/following{/other_user}",
         "gists_url" : "https://api.github.com/users/schildbach/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/schildbach",
         "id" : 743306,
         "login" : "schildbach",
         "node_id" : "MDQ6VXNlcjc0MzMwNg==",
         "organizations_url" : "https://api.github.com/users/schildbach/orgs",
         "received_events_url" : "https://api.github.com/users/schildbach/received_events",
         "repos_url" : "https://api.github.com/users/schildbach/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/schildbach/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/schildbach/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/schildbach"
      }
   }
]
