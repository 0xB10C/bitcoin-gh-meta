[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "It doesn't seem like there is much interest in merging this change. If nobody really chimes up about wanting this, then I'll close it in a week or so.",
      "created_at" : "2022-06-07T10:42:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24957#issuecomment-1148499250",
      "id" : 1148499250,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24957",
      "node_id" : "IC_kwDOABII585EdLUy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1148499250/reactions"
      },
      "updated_at" : "2022-06-07T10:42:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1148499250",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=4",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "node_id" : "MDQ6VXNlcjY0NDA0MzA=",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. I think this should be reopened, as it's a small diff and a good change. I can review more thoroughly next week.",
      "created_at" : "2022-06-17T20:52:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24957#issuecomment-1159219292",
      "id" : 1159219292,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24957",
      "node_id" : "IC_kwDOABII585FGEhc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1159219292/reactions"
      },
      "updated_at" : "2022-06-17T20:52:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1159219292",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yeah, concept ACK\r\n(adding up for grabs label just in case)",
      "created_at" : "2022-06-17T20:55:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24957#issuecomment-1159220878",
      "id" : 1159220878,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24957",
      "node_id" : "IC_kwDOABII585FGE6O",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1159220878/reactions"
      },
      "updated_at" : "2022-06-17T20:56:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1159220878",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I closed this to garbage collect because I thought it was dead. But, since there's interest I've reopened it. Thanks!",
      "created_at" : "2022-06-18T09:41:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24957#issuecomment-1159410604",
      "id" : 1159410604,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24957",
      "node_id" : "IC_kwDOABII585FGzOs",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1159410604/reactions"
      },
      "updated_at" : "2022-06-18T09:41:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1159410604",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=4",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "node_id" : "MDQ6VXNlcjY0NDA0MzA=",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Reopening since I have time to usher this to completion now.\r\nSame patch, just rebased onto current master.",
      "created_at" : "2022-10-27T14:01:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24957#issuecomment-1293572736",
      "id" : 1293572736,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24957",
      "node_id" : "IC_kwDOABII585NGlqA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1293572736/reactions"
      },
      "updated_at" : "2022-10-27T14:03:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1293572736",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=4",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "node_id" : "MDQ6VXNlcjY0NDA0MzA=",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24957#discussion_r1009529073"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24957"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1009529073"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n                    // reliable for the purpose of pruning while importing.\r\n```",
      "commit_id" : "2f62704430b8baeb5684786435a17bb34f4312b6",
      "created_at" : "2022-10-31T15:06:28Z",
      "diff_hunk" : "@@ -4461,6 +4461,21 @@ void Chainstate::LoadExternalBlockFile(\n                     }\n                 }\n \n+                if (fPruneMode && !fReindex) {\n+                    // must update the tip for pruning to work while importing with -loadblock.\n+                    // this is a tradeoff to conserve disk space at the expense of time\n+                    // spent updating the tip to be able to prune.\n+                    // otherwise, ActivateBestChain won't be called by the import process\n+                    // until after all of the block files are loaded. ActivateBestChain can be\n+                    // called by concurrent network message processing. but, that is not\n+                    // reliable for the puspose of pruning while importing.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24957#discussion_r1009529073",
      "id" : 1009529073,
      "line" : 4471,
      "node_id" : "PRRC_kwDOABII5848LDDx",
      "original_commit_id" : "2f62704430b8baeb5684786435a17bb34f4312b6",
      "original_line" : 4471,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 11,
      "pull_request_review_id" : 1162043171,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24957",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1009529073/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-31T16:37:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1009529073",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm not sure how to test this? \r\nI let a fresh bitcoind node sync (enough to generate 20 blk.dat files) and tried importing on another fresh bitcoind node these blk files using `./src/bitcoind -debug -logthreadnames -datadir=/tmp/btc -prune=550 -loadblock=/tmp/btc1/blocks/blk{00000..00020}.dat`\r\n\r\nwhere `/tmp/btc1` contains the 20 blk.dat files\r\n\r\nbut I get these logs for every block (both on master and this PR):\r\n```\r\n2022-10-31T16:30:15Z [loadblk] [reindex] LoadExternalBlockFile: Out of order block 000000000000061a9e7540272dd4cb607350b5f704d89bf87d4757078e0d2aa5, parent 0000000000000627a077a5b46189adeb9b345d3f5b9a4c8cfd847f5ba67af26c not known\r\n...\r\n2022-10-31T16:30:16Z [loadblk] Loaded 0 blocks from external file in 1135ms\r\n```",
      "created_at" : "2022-10-31T16:36:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24957#issuecomment-1297363209",
      "id" : 1297363209,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24957",
      "node_id" : "IC_kwDOABII585NVDEJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1297363209/reactions"
      },
      "updated_at" : "2022-10-31T16:36:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1297363209",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/22493292?v=4",
         "events_url" : "https://api.github.com/users/aureleoules/events{/privacy}",
         "followers_url" : "https://api.github.com/users/aureleoules/followers",
         "following_url" : "https://api.github.com/users/aureleoules/following{/other_user}",
         "gists_url" : "https://api.github.com/users/aureleoules/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/aureleoules",
         "id" : 22493292,
         "login" : "aureleoules",
         "node_id" : "MDQ6VXNlcjIyNDkzMjky",
         "organizations_url" : "https://api.github.com/users/aureleoules/orgs",
         "received_events_url" : "https://api.github.com/users/aureleoules/received_events",
         "repos_url" : "https://api.github.com/users/aureleoules/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/aureleoules/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/aureleoules/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/aureleoules"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@aureleoules thanks for looking into this. your block files have blocks out of order. it's nothing that you did wrong. it's just that with the `-loadblock` option, there is no unknown-parent tracking like there is with `-reindex`. i forget the historical reason for why that is at the moment. but, that's how it is. for reference:\r\nhttps://github.com/bitcoin/bitcoin/blob/master/src/node/blockstorage.cpp#L885\r\nhttps://github.com/bitcoin/bitcoin/blob/master/src/validation.cpp#L4431-L4439\r\n\r\nThere is a tool to make some block files for testing where the blocks are in order and loadable with `-loadblock` at https://github.com/bitcoin/bitcoin/tree/master/contrib/linearize\r\n\r\nIf I remember correctly, another snag you'll come across is that you need to have at least 100,000 blocks for mainnet due to `nPruneAfterHeight` see https://github.com/bitcoin/bitcoin/blob/master/src/chainparams.cpp#L109\r\n\r\nI'll make a todo item for myself to see how I can make testing this easier via a follow-up comment, and maybe a set of test input block files or something.",
      "created_at" : "2022-10-31T18:40:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24957#issuecomment-1297513642",
      "id" : 1297513642,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24957",
      "node_id" : "IC_kwDOABII585NVnyq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1297513642/reactions"
      },
      "updated_at" : "2022-10-31T18:40:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1297513642",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=4",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "node_id" : "MDQ6VXNlcjY0NDA0MzA=",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24957#discussion_r1009746158"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24957"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1009746158"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "ah, thanks. will update with my next push.",
      "commit_id" : "2f62704430b8baeb5684786435a17bb34f4312b6",
      "created_at" : "2022-10-31T18:41:18Z",
      "diff_hunk" : "@@ -4461,6 +4461,21 @@ void Chainstate::LoadExternalBlockFile(\n                     }\n                 }\n \n+                if (fPruneMode && !fReindex) {\n+                    // must update the tip for pruning to work while importing with -loadblock.\n+                    // this is a tradeoff to conserve disk space at the expense of time\n+                    // spent updating the tip to be able to prune.\n+                    // otherwise, ActivateBestChain won't be called by the import process\n+                    // until after all of the block files are loaded. ActivateBestChain can be\n+                    // called by concurrent network message processing. but, that is not\n+                    // reliable for the puspose of pruning while importing.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24957#discussion_r1009746158",
      "id" : 1009746158,
      "in_reply_to_id" : 1009529073,
      "line" : 4471,
      "node_id" : "PRRC_kwDOABII5848L4Du",
      "original_commit_id" : "2f62704430b8baeb5684786435a17bb34f4312b6",
      "original_line" : 4471,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : 11,
      "pull_request_review_id" : 1162369341,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24957",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1009746158/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-31T18:41:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1009746158",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=4",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "node_id" : "MDQ6VXNlcjY0NDA0MzA=",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@aureleoules I put a set of linearized block files that are useful for testing this at:\r\n\r\nhttps://github.com/mruddy/test_blk_files\r\n\r\nA way to use the files and be able to watch what is going on in the debugger is with:\r\n\r\n```\r\nmkdir -p /tmp/btc && gdb --tui --args ./src/qt/bitcoin-qt -debug -logthreadnames -datadir=/tmp/btc -prune=550 -loadblock=/readonly/btc/main/blk{00000..00014}.dat -connect=0\r\n```\r\n\r\nThe debug log will log related messages and can be found easily with grep like the following examples:\r\n\r\n```\r\ngrep 'removed 1 blk/rev pairs' /tmp/btc/debug.log\r\n2022-11-01T14:50:40Z [loadblk] [prune] target=550MiB actual=388MiB diff=161MiB max_prune_height=140633 removed 1 blk/rev pairs\r\n\r\ngrep 'unlink pruned files' /tmp/btc/debug.log\r\n2022-11-01T14:50:46Z [loadblk] [bench] FlushStateToDisk: unlink pruned files started\r\n2022-11-01T14:50:46Z [loadblk] [bench] FlushStateToDisk: unlink pruned files completed (28.22ms)\r\n```\r\n\r\nDepending on what you're looking to understand, various breakpoints can be set within gdb, for example:\r\n```\r\nb ThreadImport\r\nb LoadExternalBlockFile\r\nb FlushStateToDisk\r\nb FindFilesToPrune\r\nb PruneOneBlockFile\r\n```",
      "created_at" : "2022-11-01T14:59:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24957#issuecomment-1298635100",
      "id" : 1298635100,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24957",
      "node_id" : "IC_kwDOABII585NZ5lc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1298635100/reactions"
      },
      "updated_at" : "2022-11-01T14:59:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1298635100",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6440430?v=4",
         "events_url" : "https://api.github.com/users/mruddy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mruddy/followers",
         "following_url" : "https://api.github.com/users/mruddy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mruddy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mruddy",
         "id" : 6440430,
         "login" : "mruddy",
         "node_id" : "MDQ6VXNlcjY0NDA0MzA=",
         "organizations_url" : "https://api.github.com/users/mruddy/orgs",
         "received_events_url" : "https://api.github.com/users/mruddy/received_events",
         "repos_url" : "https://api.github.com/users/mruddy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mruddy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mruddy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mruddy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "In the future, please don't rebase for no reason",
      "created_at" : "2022-11-03T22:21:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24957#issuecomment-1302740490",
      "id" : 1302740490,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24957",
      "node_id" : "IC_kwDOABII585Npj4K",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1302740490/reactions"
      },
      "updated_at" : "2022-11-03T22:21:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1302740490",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   }
]
