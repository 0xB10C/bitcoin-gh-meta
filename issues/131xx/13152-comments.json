[
   {
      "author_association" : "OWNER",
      "body" : "Concept ACK, this would indeed be useful.",
      "created_at" : "2018-05-02T13:04:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13152#issuecomment-385970579",
      "id" : 385970579,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13152",
      "updated_at" : "2018-05-02T13:04:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/385970579",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13152#discussion_r185489034"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13152"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/185489034"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nit, space after `for`.",
      "commit_id" : "c83ccf76b0df2aceedddc23c8e081e877e5a878d",
      "created_at" : "2018-05-02T13:08:29Z",
      "diff_hunk" : "@@ -624,6 +624,58 @@ UniValue setnetworkactive(const JSONRPCRequest& request)\n     return g_connman->GetNetworkActive();\n }\n \n+UniValue getaddress(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() > 1) {\n+        throw std::runtime_error(\n+            \"getaddress ( count )\\n\"\n+            \"\\nReturn known addresses which can potentially be used to find new nodes in the network\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"count\\\"    (numeric, optional) How many addresses to return, if available (default = 1)\\n\"\n+            \"\\nResult:\\n\"\n+            \"[\\n\"\n+            \"  {\\n\"\n+            \"    \\\"time\\\": ttt,                        (numeric) Address timestamp in seconds since epoch (Jan 1 1970 GMT)\\n\"\n+            \"    \\\"services\\\": n,                      (numeric) The services offered\\n\"\n+            \"    \\\"servicesHex\\\": \\\"xxxxxxxxxxxxxxxx\\\",  (string) The hex string of services offered\\n\"\n+            \"    \\\"addr\\\": \\\"host\\\",                     (string) The IP address of the peer\\n\"\n+            \"    \\\"port\\\": n                           (numeric) The port of the peer\\n\"\n+            \"  }\\n\"\n+            \"  ,....\\n\"\n+            \"]\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getaddress\", \"8\")\n+            + HelpExampleRpc(\"getaddress\", \"8\")\n+        );\n+    }\n+    if (!g_connman) {\n+        throw JSONRPCError(RPC_CLIENT_P2P_DISABLED, \"Error: Peer-to-peer functionality missing or disabled\");\n+    }\n+\n+    int count = 1;\n+    if (!request.params[0].isNull()) {\n+        count = request.params[0].get_int();\n+    }\n+\n+    // returns a shuffled list of CAddress\n+    std::vector<CAddress> vAddr = g_connman->GetAddresses();\n+    UniValue ret(UniValue::VARR);\n+\n+    int address_return_count = std::min(count, (int)vAddr.size());\n+    for(int i = 0; i < address_return_count; ++i) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13152#discussion_r185489034",
      "id" : 185489034,
      "original_commit_id" : "a5e0fc8eafcffa8b77e80e88ec9bd02f0c77900c",
      "original_position" : 42,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 116887034,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13152",
      "updated_at" : "2018-05-02T15:30:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/185489034",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13152#discussion_r185489689"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13152"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/185489689"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why not return all?",
      "commit_id" : "c83ccf76b0df2aceedddc23c8e081e877e5a878d",
      "created_at" : "2018-05-02T13:10:50Z",
      "diff_hunk" : "@@ -624,6 +624,58 @@ UniValue setnetworkactive(const JSONRPCRequest& request)\n     return g_connman->GetNetworkActive();\n }\n \n+UniValue getaddress(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() > 1) {\n+        throw std::runtime_error(\n+            \"getaddress ( count )\\n\"\n+            \"\\nReturn known addresses which can potentially be used to find new nodes in the network\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"count\\\"    (numeric, optional) How many addresses to return, if available (default = 1)\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13152#discussion_r185489689",
      "id" : 185489689,
      "original_commit_id" : "a5e0fc8eafcffa8b77e80e88ec9bd02f0c77900c",
      "original_position" : 11,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 116887034,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13152",
      "updated_at" : "2018-05-02T15:30:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/185489689",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Please advise me on the best approach for writing an automated test\r\n\r\nAt least it can test arguments (valid and invalid) and result format and fields (their presence and types).",
      "created_at" : "2018-05-02T13:14:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13152#issuecomment-385973503",
      "id" : 385973503,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13152",
      "updated_at" : "2018-05-02T13:14:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/385973503",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "I think this call should be called differently. `getaddress` is too easy to confuse with a bitcoin address (e.g. `getnewaddress`). Maybe `getnodeaddresses`?\r\n\r\n> Why not extend getpeerinfo?\r\n\r\nYou misunderstand what this does. It doesn't return currently conneced nodes, but potentially connectable addresses.\r\n",
      "created_at" : "2018-05-02T13:23:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13152#issuecomment-385975827",
      "id" : 385975827,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13152",
      "updated_at" : "2018-05-02T13:23:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/385975827",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Renamed to `getnodeaddresses` and fixed nits.\r\n\r\nLooks like something went wrong with the rebase and now other people's commits are involved too. Does anyone know how I can fix this. (edit: fixed)\r\n\r\n> At least it can test arguments (valid and invalid) and result format and fields (their presence and types).\r\n\r\nI think in the test suite the node won't know about any other addresses, so this RPC will return an empty json object, so it can't be tested. What would be the best way around this? Maybe to populate the `vAddr` somehow.",
      "created_at" : "2018-05-02T14:16:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13152#issuecomment-385993137",
      "id" : 385993137,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13152",
      "updated_at" : "2018-05-02T15:34:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/385993137",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8398185?v=4",
         "events_url" : "https://api.github.com/users/chris-belcher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/chris-belcher/followers",
         "following_url" : "https://api.github.com/users/chris-belcher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/chris-belcher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/chris-belcher",
         "id" : 8398185,
         "login" : "chris-belcher",
         "organizations_url" : "https://api.github.com/users/chris-belcher/orgs",
         "received_events_url" : "https://api.github.com/users/chris-belcher/received_events",
         "repos_url" : "https://api.github.com/users/chris-belcher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/chris-belcher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/chris-belcher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/chris-belcher"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Fixed git weirdness (thanks to viasil).\r\n",
      "created_at" : "2018-05-02T15:32:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13152#issuecomment-386020149",
      "id" : 386020149,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13152",
      "updated_at" : "2018-05-02T15:35:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/386020149",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8398185?v=4",
         "events_url" : "https://api.github.com/users/chris-belcher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/chris-belcher/followers",
         "following_url" : "https://api.github.com/users/chris-belcher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/chris-belcher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/chris-belcher",
         "id" : 8398185,
         "login" : "chris-belcher",
         "organizations_url" : "https://api.github.com/users/chris-belcher/orgs",
         "received_events_url" : "https://api.github.com/users/chris-belcher/received_events",
         "repos_url" : "https://api.github.com/users/chris-belcher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/chris-belcher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/chris-belcher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/chris-belcher"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13152#discussion_r185540844"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13152"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/185540844"
         }
      },
      "author_association" : "NONE",
      "body" : "Returning all would typically result in a massive json array with thousands of entries, about 2500 or so depending. Normally applications only need to connect to a few nodes, they don't need anywhere near that many.",
      "commit_id" : "c83ccf76b0df2aceedddc23c8e081e877e5a878d",
      "created_at" : "2018-05-02T15:35:37Z",
      "diff_hunk" : "@@ -624,6 +624,58 @@ UniValue setnetworkactive(const JSONRPCRequest& request)\n     return g_connman->GetNetworkActive();\n }\n \n+UniValue getaddress(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() > 1) {\n+        throw std::runtime_error(\n+            \"getaddress ( count )\\n\"\n+            \"\\nReturn known addresses which can potentially be used to find new nodes in the network\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"count\\\"    (numeric, optional) How many addresses to return, if available (default = 1)\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13152#discussion_r185540844",
      "id" : 185540844,
      "in_reply_to_id" : 185489689,
      "original_commit_id" : "a5e0fc8eafcffa8b77e80e88ec9bd02f0c77900c",
      "original_position" : 11,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 116950728,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13152",
      "updated_at" : "2018-05-02T15:35:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/185540844",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8398185?v=4",
         "events_url" : "https://api.github.com/users/chris-belcher/events{/privacy}",
         "followers_url" : "https://api.github.com/users/chris-belcher/followers",
         "following_url" : "https://api.github.com/users/chris-belcher/following{/other_user}",
         "gists_url" : "https://api.github.com/users/chris-belcher/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/chris-belcher",
         "id" : 8398185,
         "login" : "chris-belcher",
         "organizations_url" : "https://api.github.com/users/chris-belcher/orgs",
         "received_events_url" : "https://api.github.com/users/chris-belcher/received_events",
         "repos_url" : "https://api.github.com/users/chris-belcher/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/chris-belcher/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/chris-belcher/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/chris-belcher"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Please rename PR.",
      "created_at" : "2018-05-02T16:02:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13152#issuecomment-386030266",
      "id" : 386030266,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13152",
      "updated_at" : "2018-05-02T16:02:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/386030266",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
