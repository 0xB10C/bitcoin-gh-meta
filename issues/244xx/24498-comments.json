[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#24479](https://github.com/bitcoin/bitcoin/pull/24479) (Bugfix: util: Correctly handle Number value types in GetArg/GetBoolArg by luke-jr)\n* [#15936](https://github.com/bitcoin/bitcoin/pull/15936) (Unify bitcoin-qt and bitcoind persistent settings by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-03-07T23:52:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24498#issuecomment-1061260642",
      "id" : 1061260642,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24498",
      "node_id" : "IC_kwDOABII584_QY1i",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1061260642/reactions"
      },
      "updated_at" : "2022-03-07T23:52:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1061260642",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated 81adab4ac31e6ebaf1e835168d33c7862cc904b3 -> 560431097d52b1eaacdef803b99cdd4c9d9dbd6a ([`pr/setint.1`](https://github.com/ryanofsky/bitcoin/commits/pr/setint.1) -> [`pr/setint.2`](https://github.com/ryanofsky/bitcoin/commits/pr/setint.2), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/setint.1..pr/setint.2)) just splitting into two commits with new tests in separate commit, so this is easier to review",
      "created_at" : "2022-03-08T17:13:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24498#issuecomment-1062010208",
      "id" : 1062010208,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24498",
      "node_id" : "IC_kwDOABII584_TP1g",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1062010208/reactions"
      },
      "updated_at" : "2022-03-08T17:36:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1062010208",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24498#discussion_r821950082"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24498"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/821950082"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This also returns \"\" for an Object or Array. Is that desirable?",
      "commit_id" : "560431097d52b1eaacdef803b99cdd4c9d9dbd6a",
      "created_at" : "2022-03-08T18:26:21Z",
      "diff_hunk" : "@@ -591,7 +591,7 @@ bool ArgsManager::IsArgNegated(const std::string& strArg) const\n std::string ArgsManager::GetArg(const std::string& strArg, const std::string& strDefault) const\n {\n     const util::SettingsValue value = GetSetting(strArg);\n-    return value.isNull() ? strDefault : value.isFalse() ? \"0\" : value.isTrue() ? \"1\" : value.get_str();\n+    return value.isNull() ? strDefault : value.isFalse() ? \"0\" : value.isTrue() ? \"1\" : value.getValStr();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24498#discussion_r821950082",
      "id" : 821950082,
      "line" : 594,
      "node_id" : "PRRC_kwDOABII584w_faC",
      "original_commit_id" : "560431097d52b1eaacdef803b99cdd4c9d9dbd6a",
      "original_line" : 594,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/util/system.cpp",
      "position" : 5,
      "pull_request_review_id" : 903416193,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24498",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/821950082/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-08T18:26:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/821950082",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24498#discussion_r822001243"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24498"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/822001243"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> This also returns \"\" for an Object or Array. Is that desirable?\r\n\r\nGood point, it does seem better not to change that behavior here, since the goal of this PR is just to prevent the GUI crashing if someone has a settings.json file with a valid int setting.\r\n\r\nI'll update the PR to avoid changing array/object behavior here and add test coverage for it.\r\n\r\nAfter this, it's probably debatable what behavior would be best. The `ArgsManager::GetSetting` method always lets you get the raw json value, but `ArgsManager::Get(Int,Bool,Path)Arg` methods are supposed to be convenient helper methods for handling default values and type coercion. If an object or array value is set and scalar value is requested, potential options seem to be:\r\n\r\n1. Trigger an assert or exception (current behavior)\r\n2. Return sentinel values like `\"\"` or `0` or `false`\r\n3. Return the default value, treat as if setting was not set\r\n4. Do something more fancy like return the first or last value in the array, or return the object as a string.\r\n\r\nAfter listing these, 1 does actually seem like the best option to me, but I wouldn't be surprised if maybe there are cases where something like 3 or 4 could make more sense.",
      "commit_id" : "cfbcdd3001e0601a55ef4a4e9eed64e9d67e03ee",
      "created_at" : "2022-03-08T19:32:40Z",
      "diff_hunk" : "@@ -591,7 +591,7 @@ bool ArgsManager::IsArgNegated(const std::string& strArg) const\n std::string ArgsManager::GetArg(const std::string& strArg, const std::string& strDefault) const\n {\n     const util::SettingsValue value = GetSetting(strArg);\n-    return value.isNull() ? strDefault : value.isFalse() ? \"0\" : value.isTrue() ? \"1\" : value.get_str();\n+    return value.isNull() ? strDefault : value.isFalse() ? \"0\" : value.isTrue() ? \"1\" : value.getValStr();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24498#discussion_r822001243",
      "id" : 822001243,
      "in_reply_to_id" : 821950082,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584w_r5b",
      "original_commit_id" : "560431097d52b1eaacdef803b99cdd4c9d9dbd6a",
      "original_line" : 594,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/util/system.cpp",
      "position" : null,
      "pull_request_review_id" : 903486751,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24498",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/822001243/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-08T19:32:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/822001243",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated 560431097d52b1eaacdef803b99cdd4c9d9dbd6a -> e584e1e32f4b1d20e9289c1364fff7cbb8a57c73 ([`pr/setint.2`](https://github.com/ryanofsky/bitcoin/commits/pr/setint.2) -> [`pr/setint.3`](https://github.com/ryanofsky/bitcoin/commits/pr/setint.3), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/setint.2..pr/setint.3)) avoiding change in behavior if an array or object is specified in settings.json (still makes GUI abort with an error if a scalar value was expected). Also added test coverage for these cases.",
      "created_at" : "2022-03-08T20:05:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24498#issuecomment-1062161035",
      "id" : 1062161035,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24498",
      "node_id" : "IC_kwDOABII584_T0qL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1062161035/reactions"
      },
      "updated_at" : "2022-03-08T20:06:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1062161035",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated e584e1e32f4b1d20e9289c1364fff7cbb8a57c73 -> cfbcdd3001e0601a55ef4a4e9eed64e9d67e03ee ([`pr/setint.3`](https://github.com/ryanofsky/bitcoin/commits/pr/setint.3) -> [`pr/setint.4`](https://github.com/ryanofsky/bitcoin/commits/pr/setint.4), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/setint.3..pr/setint.4)) adding more tests to deal cover more cases: zero values, nulls, empty strings, and floats\r\n",
      "created_at" : "2022-03-08T20:56:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24498#issuecomment-1062200859",
      "id" : 1062200859,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24498",
      "node_id" : "IC_kwDOABII584_T-Yb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1062200859/reactions"
      },
      "updated_at" : "2022-03-08T20:56:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1062200859",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
