[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-02-21T23:10:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24410#issuecomment-1047287840",
      "id" : 1047287840,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24410",
      "node_id" : "IC_kwDOABII584-bFgg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047287840/reactions"
      },
      "updated_at" : "2022-02-21T23:10:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047287840",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Pushed a7883ac7a4 -> c46aafaf11\r\n- Rebased over master\r\n- Made the scripted-diff actually work",
      "created_at" : "2022-04-28T16:50:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24410#issuecomment-1112436660",
      "id" : 1112436660,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24410",
      "node_id" : "IC_kwDOABII585CTm-0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1112436660/reactions"
      },
      "updated_at" : "2022-04-28T16:50:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1112436660",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Would an alternative be to treat assumeutxo as not part of the kernel for now (and completely move it out?)",
      "created_at" : "2022-04-28T18:13:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24410#issuecomment-1112516341",
      "id" : 1112516341,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24410",
      "node_id" : "IC_kwDOABII585CT6b1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1112516341/reactions"
      },
      "updated_at" : "2022-04-28T18:13:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1112516341",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke \r\n\r\n> Would an alternative be to treat assumeutxo as not part of the kernel for now (and completely move it out?)\r\n\r\nSure, but I don't prefer that alternative. I think it would actually be more work to extract assumeutxo from the kernel, plus if you look at the `GetUTXOStats` function and friends prior to this PR, it needed quite some cleaning up, which is done in this PR.",
      "created_at" : "2022-04-28T19:02:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24410#issuecomment-1112556891",
      "id" : 1112556891,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24410",
      "node_id" : "IC_kwDOABII585CUEVb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1112556891/reactions"
      },
      "updated_at" : "2022-04-28T19:02:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1112556891",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2022-04-28T19:11:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24410#issuecomment-1112564268",
      "id" : 1112564268,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24410",
      "node_id" : "IC_kwDOABII585CUGIs",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1112564268/reactions"
      },
      "updated_at" : "2022-04-28T19:11:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1112564268",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#24897](https://github.com/bitcoin/bitcoin/pull/24897) ([Draft / POC] Silent Payments by w0xlt)\n* [#13462](https://github.com/bitcoin/bitcoin/pull/13462) (Make SER_GETHASH implicit for CHashWriter and SerializeHash by Empact)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-04-29T01:00:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24410#issuecomment-1112789149",
      "id" : 1112789149,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24410",
      "node_id" : "IC_kwDOABII585CU9Cd",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1112789149/reactions"
      },
      "updated_at" : "2022-04-29T01:00:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1112789149",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Perhaps it's just my system, but the `feature_coinstatsindex.py` bitcoind does not get terminated after a successful run. This causes my script running tests against each commit to fail. All the other tests terminate just fine, and this happens running all tests and the test individually.\r\n\r\nThe logs appear to show the test and node sutting down, but this does not appear to be the case in practice.\r\n\r\n```log\r\n[I] [11:19] ubuntu:bitcoin (2022-02-libbitcoinkernel-p2-coinstats-minimal) | â¿ test/functional/feature_coinstatsindex.py\r\n2022-04-29T10:20:14.316000Z TestFramework (INFO): Initializing test directory /tmp/bitcoin_func_test_so5w4sxf\r\n2022-04-29T10:20:15.704000Z TestFramework (INFO): Test that gettxoutsetinfo() output is consistent with or without coinstatsindex option\r\n2022-04-29T10:20:15.758000Z TestFramework (INFO): Test that gettxoutsetinfo() can get fetch data on specific heights with index\r\n2022-04-29T10:20:15.850000Z TestFramework (INFO): Test gettxoutsetinfo() with index and verbose flag\r\n2022-04-29T10:20:15.963000Z TestFramework (INFO): Test that the index is robust across restarts\r\n2022-04-29T10:20:16.419000Z TestFramework (INFO): Test that the index works with -reindex\r\n2022-04-29T10:20:17.198000Z TestFramework (INFO): Test that -reindex-chainstate is disallowed with coinstatsindex\r\n2022-04-29T10:20:17.363000Z TestFramework (INFO): Test use_index option for nodes running the index\r\n2022-04-29T10:20:17.450000Z TestFramework (INFO): Test that index can handle reorgs\r\n> /home/will/src/bitcoin/test/functional/feature_coinstatsindex.py(55)run_test()\r\n-> self._test_index_rejects_hash_serialized()\r\n(Pdb) l\r\n 50             self.wallet = MiniWallet(self.nodes[0])\r\n 51             self._test_coin_stats_index()\r\n 52             self._test_use_index_option()\r\n 53             self._test_reorg_index()\r\n 54             import pdb; pdb.set_trace()\r\n 55  ->         self._test_index_rejects_hash_serialized()\r\n 56\r\n 57         def block_sanity_check(self, block_info):\r\n 58             block_subsidy = 50\r\n 59             assert_equal(\r\n 60                 block_info['prevout_spent'] + block_subsidy,\r\n(Pdb) n\r\n2022-04-29T10:20:38.130000Z TestFramework (INFO): Test that the rpc raises if the legacy hash is passed with the index\r\n--Return--\r\n> /home/will/src/bitcoin/test/functional/feature_coinstatsindex.py(55)run_test()->None\r\n-> self._test_index_rejects_hash_serialized()\r\n(Pdb) n\r\n> /home/will/src/bitcoin/test/functional/test_framework/test_framework.py(156)main()\r\n-> exit_code = self.shutdown()\r\n(Pdb) n\r\n2022-04-29T10:20:43.555000Z TestFramework (INFO): Stopping nodes\r\n2022-04-29T10:20:43.657000Z TestFramework (INFO): Cleaning up /tmp/bitcoin_func_test_so5w4sxf on exit\r\n2022-04-29T10:20:43.657000Z TestFramework (INFO): Tests successful\r\n> /home/will/src/bitcoin/test/functional/test_framework/test_framework.py(157)main()\r\n-> sys.exit(exit_code)\r\n(Pdb) n\r\nSystemExit: 0\r\n> /home/will/src/bitcoin/test/functional/test_framework/test_framework.py(157)main()\r\n-> sys.exit(exit_code)\r\n(Pdb) c\r\n[I] [11:20] ubuntu:bitcoin (2022-02-libbitcoinkernel-p2-coinstats-minimal) | â¿ ps -Af | rg bitcoind\r\nwill        6695    3480  0 Apr28 ?        00:14:46 bitcoind\r\nwill      586063    3480  0 11:20 pts/8    00:00:00 /home/will/src/bitcoin/src/bitcoind -datadir=/tmp/bitcoin_func_test_so5w4sxf/node1 -logtimemicros -debug -debugexclude=libevent -debugexclude=leveldb -uacomment=testnode1 -logthreadnames -logsourcelocations -coinstatsindex -reindex\r\n```",
      "created_at" : "2022-04-29T10:28:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24410#issuecomment-1113152684",
      "id" : 1113152684,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24410",
      "node_id" : "IC_kwDOABII585CWVys",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113152684/reactions"
      },
      "updated_at" : "2022-04-29T10:28:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113152684",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   }
]
