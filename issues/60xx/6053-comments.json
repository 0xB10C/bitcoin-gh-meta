[
   {
      "body" : "Agree on the simplification here, some comments:\r\n- How will this interact with `-onlynet=ipv6`? I hope we don't end up disabling proxying of names, or connecting to names, when IPv4 is disabled?\r\n- Please define a `NET_NAME` or such constant, and alias it to `NET_IPV4`. This makes it clearer that we use the `[NET_IPV4]`  proxy for (not further specified) names as well\r\n",
      "created_at" : "2015-04-23T15:28:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6053#issuecomment-95625355",
      "id" : 95625355,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6053",
      "updated_at" : "2015-04-23T15:46:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/95625355",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6053#discussion_r28973796"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6053"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/28973796"
         }
      },
      "body" : "Could completely bypass this lookup in the case that a proxy is used, after all we always pass the name to the proxy. e.g.\r\n```\r\nProxyType proxy;\r\nif(GetProxy(NET_NAME, proxy))\r\n{\r\n    addr = CService(\"0.0.0.0:0\"); \r\n    return ConnectThroughProxy(proxy, strDest, port, hSocketRet, nTimeout, outProxyConnectionFailed);\r\n}\r\nCService addrResolved(CNetAddr(strDest, fNameLookup), port);\r\nif (!addrResolved.IsValid())\r\n    return false;\r\naddr = addrResolved;\r\nreturn ConnectSocket(addr, hSocketRet, nTimeout);\r\n```\r\nThis can even further simplify the code.",
      "commit_id" : "c7f969c836e049a211aedbabbbae7af471d6db7a",
      "created_at" : "2015-04-23T15:33:37Z",
      "diff_hunk" : "@@ -605,10 +588,7 @@ bool ConnectSocketByName(CService &addr, SOCKET& hSocketRet, const char *pszDest\n \n     SplitHostPort(string(pszDest), port, strDest);\n \n-    proxyType nameProxy;\n-    GetNameProxy(nameProxy);\n-\n-    CService addrResolved(CNetAddr(strDest, fNameLookup && !HaveNameProxy()), port);\n+    CService addrResolved(CNetAddr(strDest, fNameLookup && !HaveProxy(NET_IPV4)), port);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6053#discussion_r28973796",
      "id" : 28973796,
      "original_commit_id" : "c7f969c836e049a211aedbabbbae7af471d6db7a",
      "original_position" : 44,
      "path" : "src/netbase.cpp",
      "position" : 44,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6053",
      "updated_at" : "2015-04-23T15:36:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/28973796",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj Should I just alias NET_IPV4 and NET_NAME or should NET_NAME be an own proxy, which could potentially be user-configured (not scope of this pull)?",
      "created_at" : "2015-04-24T06:44:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6053#issuecomment-95822866",
      "id" : 95822866,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6053",
      "updated_at" : "2015-04-24T06:44:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/95822866",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "I'd say just alias it to `NET_IPV4`. Otherwise you'd reintroduce the name proxy in a different guise. In principle `NET_NAME` means `NET_IPV4_OR_IPV6`, but actually defining that doesn't make much sense implementation-wise.\r\n\r\nThe most true-to-reality design would be to decouple the proxies from `NET_*`, and introduce a new enumeration with `PROXY_DEFAULT` and `PROXY_ONION`. After all the proxies act on subsets of names, not classes of address.\r\n\r\nBut this achieves the same ... Or maybe `NET_DEFAULT` would be a better alias than `NET_NAME`? (with the comment `// to be used for names for which the network is undetermined`)\r\n",
      "created_at" : "2015-04-24T12:49:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6053#issuecomment-95922937",
      "id" : 95922937,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6053",
      "updated_at" : "2015-04-24T12:59:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/95922937",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj ``-onlynet`` seems to not touch proxy setup so we alsways can be sure, if -proxy is valid, we have an IPv4/IPv6 proxy setup. I'll push an updated version shortly, which will include an alias NET_DEFAULT and also pick up your suggestion for ``ConnectSocketByName()``.\r\n\r\nEdit: Updated...",
      "created_at" : "2015-04-28T12:34:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6053#issuecomment-97046865",
      "id" : 97046865,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6053",
      "updated_at" : "2015-04-28T12:41:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/97046865",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   }
]
