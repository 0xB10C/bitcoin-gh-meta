[
   {
      "body" : "Sorry for this little change, but...\r\n\r\n@thuni was concerned about introducing globals in policy.h\r\nfIsBareMultisigStd can be easily turned into an attribute later as shown in https://github.com/jtimon/bitcoin/compare/policy_new...jtimon:policy_moveonly (in fact it could be done more easily not moving AreInputsStandard at the same time as IsStandardTx)\r\nBut minRelayTxFee is in many more places, and after proposing some changes to #5159, I am no longer convinced that I want to move things like IsDust to policy directly. One possibility would be to put all the fee policy stuff in the estimator. Then an interface of the estimator can be returned by CPolicy, for example, making a CPolicy::GetFeePolicy() analogous to CChainParams::GetConsensus().\r\nThe minimum fee can still be configured from the constructor of CStandardPolicy but it can pass it directly to the estimator without storing it redundantly.\r\nIn that case some files could be dependent on policy/fees but not in policy/policy (just like some functions depend on Consensus::Params but not on CChainParams), then some of the 5 includes I just removed would have to be changed for policy/fees later.\r\n\r\nFor all these reasons I'm keeping minRelayTxFee in main for now.\r\n\r\nMoving minRelayTxFee to policy/policy could still prevent it from depending on main temporarily when IsStandardTx is moveonly, but it doesn't seem to be worth it.\r\n",
      "created_at" : "2015-04-27T22:55:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6068#issuecomment-96843767",
      "id" : 96843767,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6068",
      "updated_at" : "2015-04-27T22:55:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/96843767",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Nodes can do random things, but why encourage them to adopt diverse relay policies, create custom policies, and define custom parameters for others to create more custom relay policies?  \r\n\r\nShouldn't there just be baked-in policy parameters that have predictable effects when deployed with different values, like resource constraints and settings that influence the strength of preference for higher fees?\r\n\r\nI'm not concerned about miner policies, but something more like CokePolicy and PepsiPolicy disrupting the network with divergent relay rules.  What is the argument in favor?",
      "created_at" : "2015-05-01T15:50:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6068#issuecomment-98163070",
      "id" : 98163070,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6068",
      "updated_at" : "2015-05-01T15:50:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/98163070",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4284124?v=3",
         "events_url" : "https://api.github.com/users/dgenr8/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dgenr8/followers",
         "following_url" : "https://api.github.com/users/dgenr8/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dgenr8/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dgenr8",
         "id" : 4284124,
         "login" : "dgenr8",
         "organizations_url" : "https://api.github.com/users/dgenr8/orgs",
         "received_events_url" : "https://api.github.com/users/dgenr8/received_events",
         "repos_url" : "https://api.github.com/users/dgenr8/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dgenr8/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dgenr8/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dgenr8"
      }
   },
   {
      "body" : "@dgenr8 Non-centralisation. Authority to decide policy lies with the node operators and miners, and it's not a responsibility/power developers should have. Too much policy monoculture also creates incentives to use bad practices (trusting unconfirmed transactions) and make trouble for the outliers. Also, since the current policy monoculture is mostly *reference* policy, it also causes spam problems since there are no effective reference-suitable spam filters; and this is in partly out of necessity due to policy being intimately mixed in with the reference codebase.",
      "created_at" : "2015-05-01T17:06:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6068#issuecomment-98178713",
      "id" : 98178713,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6068",
      "updated_at" : "2015-05-01T17:06:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/98178713",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "I think there are different issues here.\r\n\r\nOne is that this is a step towards separating out policy code from consensus code. This PR is part of that. Eventually, we should end up with a situation where consensus is clearly separated in the source code (so we know when to be extremely careful in review and tests when someone wants to change it), and likewise have policy separated out (so people changing/forking the code know what can be safely changed).\r\n\r\nAnd yes, I think that the ability to change policy is essential, for the reasons that @luke-jr brings up. For one, relay (and other) policy is constantly changing anyway (pretty much every Bitcoin Core release has changed what is being relayed). You should not rely on it being uniform on the network.\r\n\r\nOf course, I think that we, as maintainers of a particular piece of Bitcoin network software, have a responsibility to make the code do what we think is best for the network - and possibly expose only part of the involved parameters to users. But that doesn't mean that others can't disagree. And separating out policy code makes it explicit exactly which part of the code is a choice.",
      "created_at" : "2015-05-01T18:06:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6068#issuecomment-98189841",
      "id" : 98189841,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6068",
      "updated_at" : "2015-05-01T18:06:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/98189841",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@luke-jr The blockchain is the world's most consistent distributed system.  It makes no sense to promote chaos right up to the assembly point.  If we have CokePolicy and PepsiPolicy, reorgs too become less safe.",
      "created_at" : "2015-05-02T16:09:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6068#issuecomment-98374106",
      "id" : 98374106,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6068",
      "updated_at" : "2015-05-02T16:09:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/98374106",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4284124?v=3",
         "events_url" : "https://api.github.com/users/dgenr8/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dgenr8/followers",
         "following_url" : "https://api.github.com/users/dgenr8/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dgenr8/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dgenr8",
         "id" : 4284124,
         "login" : "dgenr8",
         "organizations_url" : "https://api.github.com/users/dgenr8/orgs",
         "received_events_url" : "https://api.github.com/users/dgenr8/received_events",
         "repos_url" : "https://api.github.com/users/dgenr8/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dgenr8/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dgenr8/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dgenr8"
      }
   },
   {
      "body" : "dgenr8 differences in consensus code can cause reorgs, differences in policy code can't. That's the main reason why we want to separate them. There are people already maintaining alternative policies and there's nothing wrong about it. Let's just make their implementations safer and cleaner. We will safe A LOT of review work  by clearly separating policy proposals, which tend to be numerous, controversial and are also often uninteresting to many reviewers",
      "created_at" : "2015-05-02T16:21:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6068#issuecomment-98374720",
      "id" : 98374720,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6068",
      "updated_at" : "2015-05-02T16:21:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/98374720",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "@jtimon He means that when there are different mempool acceptance policies present, a reorg can reduce the (apparent) safety of transactions already in the blockchain.\r\n\r\nAnd that is true - but that's just a sign that you shouldn't be relying on having a consistent policy in the first place, and why you should use confirmations to gauge risk, not mere acceptance.\r\n\r\n@dgenr8 And the assembly point matters. There is a significant economic difference before and after. Miners get paid for what happens after, but not before.",
      "created_at" : "2015-05-02T16:27:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6068#issuecomment-98375784",
      "id" : 98375784,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6068",
      "updated_at" : "2015-05-02T16:27:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/98375784",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@jtimon Nothing against code separation, but this mixes in a *multi-relay-policy framework*.\r\n\r\n@sipa Use confirmations to gauge risk, but the system should try to reduce risk at all confirmation levels.  Nobody has shown that lower confirmation levels, including 0-conf, cannot be made safer with easily acceptable tradeoffs.  A multi-relay-policy framework is a step in the other direction.\r\n\r\n\r\n",
      "created_at" : "2015-05-02T17:28:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6068#issuecomment-98381574",
      "id" : 98381574,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6068",
      "updated_at" : "2015-05-02T17:28:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/98381574",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4284124?v=3",
         "events_url" : "https://api.github.com/users/dgenr8/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dgenr8/followers",
         "following_url" : "https://api.github.com/users/dgenr8/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dgenr8/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dgenr8",
         "id" : 4284124,
         "login" : "dgenr8",
         "organizations_url" : "https://api.github.com/users/dgenr8/orgs",
         "received_events_url" : "https://api.github.com/users/dgenr8/received_events",
         "repos_url" : "https://api.github.com/users/dgenr8/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dgenr8/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dgenr8/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dgenr8"
      }
   },
   {
      "body" : "@dgenr8 \"Unconfirmed\" is *not* a confirmation level at all. It is the absence of any confirmation. You cannot make it \"safe\" except through attempted centralisation and control over others.",
      "created_at" : "2015-05-02T17:33:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6068#issuecomment-98381767",
      "id" : 98381767,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6068",
      "updated_at" : "2015-05-02T17:33:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/98381767",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "@luke-jr That's a claim, not a proof, and rather than trying to prove a negative, why not think about how to accomplish the positive?",
      "created_at" : "2015-05-02T17:45:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6068#issuecomment-98382255",
      "id" : 98382255,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6068",
      "updated_at" : "2015-05-02T17:45:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/98382255",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4284124?v=3",
         "events_url" : "https://api.github.com/users/dgenr8/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dgenr8/followers",
         "following_url" : "https://api.github.com/users/dgenr8/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dgenr8/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dgenr8",
         "id" : 4284124,
         "login" : "dgenr8",
         "organizations_url" : "https://api.github.com/users/dgenr8/orgs",
         "received_events_url" : "https://api.github.com/users/dgenr8/received_events",
         "repos_url" : "https://api.github.com/users/dgenr8/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dgenr8/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dgenr8/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dgenr8"
      }
   },
   {
      "body" : "@dgenr8 feel free to spend your time on how to accomplish the positive.\r\nIn the meantime, policy diversity is what you get with a decentralized system. Multiple relay policies are already deployed and I don't think we can or should fight that.\r\nIn the meantime there's a lot of noise in the meantime because we don't have support for different policies and because everybody wants their own favorite policy to be everyone else's policy too. Everyone wants his policy to be the standard one, but that's simply not possible.\r\n",
      "created_at" : "2015-05-07T11:15:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6068#issuecomment-99818340",
      "id" : 99818340,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6068",
      "updated_at" : "2015-05-07T11:15:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/99818340",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Built, confirmed `-policy` option exposed, and checked msig tests still pass - ACK\r\n\r\nNote: Had to pull in https://github.com/bitcoin/bitcoin/pull/6114/files, which should be OK as long as you're building with 1.58<",
      "created_at" : "2015-05-10T17:48:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6068#issuecomment-100674492",
      "id" : 100674492,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6068",
      "updated_at" : "2015-05-10T17:48:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/100674492",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2230604?v=3",
         "events_url" : "https://api.github.com/users/faizkhan00/events{/privacy}",
         "followers_url" : "https://api.github.com/users/faizkhan00/followers",
         "following_url" : "https://api.github.com/users/faizkhan00/following{/other_user}",
         "gists_url" : "https://api.github.com/users/faizkhan00/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/faizkhan00",
         "id" : 2230604,
         "login" : "faizkhan00",
         "organizations_url" : "https://api.github.com/users/faizkhan00/orgs",
         "received_events_url" : "https://api.github.com/users/faizkhan00/received_events",
         "repos_url" : "https://api.github.com/users/faizkhan00/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/faizkhan00/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/faizkhan00/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/faizkhan00"
      }
   }
]
