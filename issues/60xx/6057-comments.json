[
   {
      "body" : "Nice! I'm glad you looked at this.\r\n\r\nThe way you checked `pindexRescan` isn't sufficient however.  You can't assume a pruned node has all the blocks past a certain point.  Blocks are deleted from disk in the order they were written, which doesn't necessarily correspond with order in the chain.  But perhaps you could scan backwards from the Tip until you get to either `pindexRescan` or one which isn't BLOCK_HAVE_DATA.",
      "created_at" : "2015-04-24T20:18:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6057#issuecomment-96052286",
      "id" : 96052286,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6057",
      "updated_at" : "2015-04-24T20:18:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/96052286",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Right. I did ignore the fact that blocks are not fly in in order. Will change it to your proposed way of scanning backwards.\r\n\r\nSame needs to be done for #6058",
      "created_at" : "2015-04-24T20:26:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6057#issuecomment-96054772",
      "id" : 96054772,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6057",
      "updated_at" : "2015-04-24T20:26:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/96054772",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   }
]
