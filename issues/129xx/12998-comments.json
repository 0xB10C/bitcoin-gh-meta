[
   {
      "author_association" : "OWNER",
      "body" : "I'm not sure making this assumption makes sense - the environment might or might not have those functions, without configure (or similar) that's impossible to know.\r\n\r\nYou could also define the `-DHAVE_DECL_BE16TOH` etc on the compiler command line, or ship with a pre-existing config.h?",
      "created_at" : "2018-04-16T17:09:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12998#issuecomment-381679180",
      "id" : 381679180,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12998",
      "updated_at" : "2018-04-16T17:10:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381679180",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "In my use-case (rust-bitcoinconsensus) we don't know anything more about the environment than non-configure Bitcoin. Re-implementing just enough of Bitcoin Core's configure to define the appropriate symbols seems like the wrong way to go (and would be entirely unmaintainable), actually running autogen/configure would also be a pain as we'd have to figure out what environment we're targeting and appropriately convert gcc flags to configure flags (as well as probably reimplement parts of the \"compile a C dependency\" rust module that is well-maintained by others). Not sure of another easy solution aside from this, but if we don't take it we should almost certainly add a #ifndef HAVE_CONFIG_H #error \"You need to run configure first\" in a bunch of places.",
      "created_at" : "2018-04-16T18:36:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12998#issuecomment-381705862",
      "id" : 381705862,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12998",
      "updated_at" : "2018-04-16T18:36:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381705862",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Agree with @laanwj.\r\n\r\nAlso agree with @TheBlueMatt about this being annoying, though. I've run into this exact issue as well, usually when I try to copy/paste sha256.cpp into a quick project.\r\n\r\nAs these are non-standard, I don't think there's a default that makes more sense than any other. For example, I believe that these aren't present on macOS. And I don't think we can assume that they're always defines when they do exist.\r\n\r\nImo what makes the most sense is (using htobe16 as an example):\r\n- rename all external calls to htobe16_int. I don't think there should be (m)any of these outside of crypto/.\r\n- If HAVE_CONFIG_H, htobe16_int is defined as htobe16, essentially as it's done now\r\n- If no HAVE_CONFIG_H and HAVE_DECL_HTOBE16, same as above, so that it can be overridden by other projects that know about their environment\r\n- If no HAVE_CONFIG_H and no HAVE_DECL_HTOBE16, htobe16_int is an explicit manual conversion function",
      "created_at" : "2018-04-18T14:57:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12998#issuecomment-382416874",
      "id" : 382416874,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12998",
      "updated_at" : "2018-04-18T14:57:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382416874",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I mean I'm open to doing the big refactor and proxying everything through inline \"int\" functions, but I figured that would be a bigger deal than just skipping compile of the conversion functions in the case where they're already defined (ie its super obvious we dont need them). Its not supposed to be a foolproof solution, just a simple fix that happens to be sufficient in some cases, and creates ever-so-slightly more robust defaults.",
      "created_at" : "2018-04-18T18:38:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12998#issuecomment-382487490",
      "id" : 382487490,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12998",
      "updated_at" : "2018-04-18T18:38:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382487490",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   }
]
