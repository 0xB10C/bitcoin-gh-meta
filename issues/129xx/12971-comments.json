[
   {
      "author_association" : "MEMBER",
      "body" : "According to https://doc.qt.io/qt-5.10/supported-platforms-and-configurations.html#qt-5-9 gcc4.8 is supported. Also, I could build your receipt on ubuntu trusty, which comes with gcc4.8. I think you can get rid of the optional flag to compile qt5.9?\r\n\r\nEdit: I didn't try windows or mac cross builds, so those might be causing issues ... ?",
      "created_at" : "2018-04-13T00:56:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-380988170",
      "id" : 380988170,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12971",
      "updated_at" : "2018-04-13T00:58:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/380988170",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The plan is to just move depends to Qt 5.9+ quite soon, I have been delayed doing that work. \r\nI don't think we want to want to have support for 5.7 and 5.9 in depends at the same time. \r\nWould you be interested in turning this work into a Qt 5.7 -> 5.9 upgrade?",
      "created_at" : "2018-04-13T01:23:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-380991926",
      "id" : 380991926,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12971",
      "updated_at" : "2018-04-13T01:24:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/380991926",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@MarcoFalke The compiler version for linux native compilation is not a problem. It is though as soon as you are trying to cross compile to windows (which requires Mingw5.3). \r\nI originally did not want to open the pr for this reason, since it would mean that the current travis tests would be broken because of the windows build requirement. I heard though that @theuni is working on getting the entire toolchain on depends, so I decided to publish the patch nevertheless to prevent duplicate work and enable other developers to already compile bitcoin static with a modern Qt version. \r\n\r\nThe macos build needs some further investigation. It fails upon creating qmake and the current qmake patch does not seem to work. Upon some investigation, I saw that multiple people had to do some manual property setting on xcode to make the build work. I am not sure if this is related though. ",
      "created_at" : "2018-04-13T07:37:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-381051061",
      "id" : 381051061,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12971",
      "updated_at" : "2018-04-13T07:37:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381051061",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> cross compile to windows (which requires Mingw5.3)\r\n\r\nHmm. Imo we could drop support for cross-compile to windows on trusty and just require xenial or above.",
      "created_at" : "2018-04-13T13:35:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-381137133",
      "id" : 381137133,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12971",
      "updated_at" : "2018-04-13T13:35:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381137133",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Could do a rebase since #12946 is merged?",
      "created_at" : "2018-04-15T15:51:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-381416556",
      "id" : 381416556,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12971",
      "updated_at" : "2018-04-15T15:51:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381416556",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Rebased.",
      "created_at" : "2018-04-15T16:40:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-381420031",
      "id" : 381420031,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12971",
      "updated_at" : "2018-04-15T16:40:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381420031",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@TheCharlatan Thanks for the work so far, however did you see my comment above? I think this would be better as a straight 5.7 -> 5.9 upgrade, instead of adding an additional version of Qt to depends. We would like to use Qt 5.9+ to build the next release anyways.\r\n\r\nRegardless of the that this needs a few fixes.\r\n\r\nThere are currently [whitespace linting errors](https://travis-ci.org/bitcoin/bitcoin/jobs/366832841#L794).\r\n\r\nA linux Travis build is [currently failing](https://travis-ci.org/bitcoin/bitcoin/jobs/366832847):\r\n[linux-raw-log.txt](https://github.com/bitcoin/bitcoin/files/1913637/linux-raw-log.txt)\r\n\r\n```\r\nconfigure: error: Package requirements (Qt5PlatformSupport) were not met:\r\nNo package 'Qt5PlatformSupport' found\r\nConsider adjusting the PKG_CONFIG_PATH environment variable if you\r\ninstalled software in a non-standard prefix.\r\nAlternatively, you may set the environment variables QTPLATFORM_CFLAGS\r\nand QTPLATFORM_LIBS to avoid the need to call pkg-config.\r\nSee the pkg-config man page for more details.\r\nThis file contains any messages produced by compilers while\r\nrunning configure, to aid debugging if configure makes a mistake.\r\nIt was created by Bitcoin Core configure 0.16.99, which was\r\ngenerated by GNU Autoconf 2.69.  Invocation command line was\r\n  $ ../configure --cache-file=config.cache --disable-dependency-tracking --prefix=/home/travis/build/bitcoin/bitcoin/depends/x86_64-unknown-linux-gnu --bindir=/home/travis/build/bitcoin/bitcoin/out/12971/27461.7-x86_64-unknown-linux-gnu/bin --libdir=/home/travis/build/bitcoin/bitcoin/out/12971/27461.7-x86_64-unknown-linux-gnu/lib --enable-glibc-back-compat --enable-reduce-exports\r\n```\r\n\r\nThe macOS build would also need to be [fixed/updated](https://travis-ci.org/bitcoin/bitcoin/jobs/366832848):\r\n[macOS-raw-log.txt](https://github.com/bitcoin/bitcoin/files/1913643/macOS-raw-log.txt)\r\n\r\n```\r\nConfiguring qt59...\r\nCreating qmake...\r\nmake[1]: Entering directory `/home/travis/build/bitcoin/bitcoin/depends/work/build/x86_64-apple-darwin11/qt59/5.9.4-01715d30425/qtbase/qmake'\r\nmake[1]: Leaving directory `/home/travis/build/bitcoin/bitcoin/depends/work/build/x86_64-apple-darwin11/qt59/5.9.4-01715d30425/qtbase/qmake'\r\nInfo: creating cache file /home/travis/build/bitcoin/bitcoin/depends/work/build/x86_64-apple-darwin11/qt59/5.9.4-01715d30425/qtbase/.qmake.cache\r\nCommand line: -bindir /home/travis/build/bitcoin/bitcoin/depends/x86_64-apple-darwin11/native/bin -c++std c++11 -confirm-license -dbus-runtime -hostprefix /home/travis/build/bitcoin/bitcoin/depends/x86_64-apple-darwin11/native -no-cups -no-egl -no-eglfs -no-freetype -no-gif -no-glib -no-icu -no-iconv -no-kms -no-linuxfb -no-libudev -no-mtdev -no-openvg -no-reduce-relocations -no-qml-debug -no-sql-db2 -no-sql-ibase -no-sql-oci -no-sql-tds -no-sql-mysql -no-sql-odbc -no-sql-psql -no-sql-sqlite -no-sql-sqlite2 -no-use-gold-linker -nomake examples -nomake tests -opensource -openssl-linked -optimized-qmake -pch -pkg-config -prefix /home/travis/build/bitcoin/bitcoin/depends/x86_64-apple-darwin11 -qt-libpng -qt-libjpeg -qt-pcre -system-zlib -static -silent -v -release -xplatform macx-clang-linux -device-option MAC_SDK_PATH=/home/travis/build/bitcoin/bitcoin/depends/SDKs/MacOSX10.11.sdk -device-option MAC_SDK_VERSION=10.11 -device-option CROSS_COMPILE=x86_64-apple-darwin11- -device-option MAC_MIN_VERSION=10.8 -device-option MAC_TARGET=x86_64-apple-darwin11 -device-option MAC_LD64_VERSION=253.9\r\nProject ERROR: Could not resolve SDK --show-sdk-path for 'macosx'\r\nmake: *** [/home/travis/build/bitcoin/bitcoin/depends/work/build/x86_64-apple-darwin11/qt59/5.9.4-01715d30425/qtbase/.stamp_configured] Error 3\r\nmake: Leaving directory `/home/travis/build/bitcoin/bitcoin/depends'\r\n```",
      "created_at" : "2018-04-16T02:10:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-381460418",
      "id" : 381460418,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12971",
      "updated_at" : "2018-04-16T02:10:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381460418",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12971#discussion_r181609465"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12971"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181609465"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This looks like it's building QT 5.9 in either case?",
      "commit_id" : "cc557dc855ed7f547d852198592bd8b9977ad696",
      "created_at" : "2018-04-16T02:13:36Z",
      "diff_hunk" : "@@ -3,11 +3,19 @@ packages:=boost openssl libevent zeromq\n qt_native_packages = native_protobuf\n qt_packages = qrencode protobuf zlib\n \n-qt_x86_64_linux_packages:=qt expat dbus libxcb xcb_proto libXau xproto freetype fontconfig libX11 xextproto libXext xtrans\n+ifeq ($(QT_59),1)\n+qt_x86_64_linux_packages:=qt59 expat dbus libxcb xcb_proto libXau xproto freetype fontconfig libX11 xextproto libXext xtrans\n qt_i686_linux_packages:=$(qt_x86_64_linux_packages)\n \n-qt_darwin_packages=qt",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12971#discussion_r181609465",
      "id" : 181609465,
      "original_commit_id" : "f870067fbfa7f4d4d8ba1ed9cf96e09bf4ea0e17",
      "original_position" : 9,
      "path" : "depends/packages/packages.mk",
      "position" : null,
      "pull_request_review_id" : 112265140,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12971",
      "updated_at" : "2018-05-16T00:59:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181609465",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@fanquake thanks for the review. \r\nIf I were to change this to a straight upgrade, how would travis, or gitian windows builds be done?",
      "created_at" : "2018-04-16T06:55:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-381497984",
      "id" : 381497984,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12971",
      "updated_at" : "2018-04-16T06:55:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381497984",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Our gitian descriptors will be switched to bionic soon: #12511. Similarly, we can switch travis to xenial. Those will happen in separate pull request, so don't worry about them.",
      "created_at" : "2018-04-16T12:39:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-381585128",
      "id" : 381585128,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12971",
      "updated_at" : "2018-04-16T12:39:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381585128",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "Travis fails on linux 64 bit with:\r\n```\r\nchecking for QTPLATFORM... no\r\nconfigure: error: Package requirements (Qt5PlatformSupport) were not met:\r\nNo package 'Qt5PlatformSupport' found\r\n```\r\n\r\nAnd OSX:\r\n```\r\nProject ERROR: Could not resolve SDK --show-sdk-path for 'macosx'\r\n```",
      "created_at" : "2018-05-14T13:19:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-388813583",
      "id" : 388813583,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12971",
      "updated_at" : "2018-05-14T13:19:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/388813583",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "See also #13215",
      "created_at" : "2018-05-14T13:25:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-388815250",
      "id" : 388815250,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12971",
      "updated_at" : "2018-05-14T13:25:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/388815250",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Removed the optional flags, Qt5.9.4 is now the new default. The build still fails on MacOS. ",
      "created_at" : "2018-05-16T00:20:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-389355464",
      "id" : 389355464,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12971",
      "updated_at" : "2018-05-16T00:20:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/389355464",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8421793?v=4",
         "events_url" : "https://api.github.com/users/TheCharlatan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheCharlatan/followers",
         "following_url" : "https://api.github.com/users/TheCharlatan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheCharlatan",
         "id" : 8421793,
         "login" : "TheCharlatan",
         "organizations_url" : "https://api.github.com/users/TheCharlatan/orgs",
         "received_events_url" : "https://api.github.com/users/TheCharlatan/received_events",
         "repos_url" : "https://api.github.com/users/TheCharlatan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheCharlatan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheCharlatan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@TheCharlatan Can you fixup any trailing whitespace so that Travis will run: https://travis-ci.org/bitcoin/bitcoin/jobs/379496754",
      "created_at" : "2018-05-16T00:58:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-389360897",
      "id" : 389360897,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12971",
      "updated_at" : "2018-05-16T00:58:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/389360897",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12971#discussion_r188487239"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12971"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188487239"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can remove this hunk and all other references to qt 5.9?",
      "commit_id" : "cc557dc855ed7f547d852198592bd8b9977ad696",
      "created_at" : "2018-05-16T02:20:48Z",
      "diff_hunk" : "@@ -12,6 +12,10 @@ For example:\n \n     make HOST=x86_64-w64-mingw32 -j4\n \n+To build the more recent Qt5.9.4, you can build depends with\n+\n+  make HOST=host-platform-triple QT_59=1",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12971#discussion_r188487239",
      "id" : 188487239,
      "original_commit_id" : "cc557dc855ed7f547d852198592bd8b9977ad696",
      "original_position" : 6,
      "path" : "depends/README.md",
      "position" : 6,
      "pull_request_review_id" : 120474772,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12971",
      "updated_at" : "2018-05-16T02:20:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188487239",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12971#discussion_r188945772"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12971"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188945772"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Either remove or replace with proper comment/reasoning.",
      "commit_id" : "cc557dc855ed7f547d852198592bd8b9977ad696",
      "created_at" : "2018-05-17T12:54:13Z",
      "diff_hunk" : "@@ -75,12 +64,10 @@ $(package)_config_opts += -qt-libpng\n $(package)_config_opts += -qt-libjpeg\n $(package)_config_opts += -qt-pcre\n $(package)_config_opts += -system-zlib\n-$(package)_config_opts += -reduce-exports\n+#$(package)_config_opts += -reduce-exports",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12971#discussion_r188945772",
      "id" : 188945772,
      "original_commit_id" : "cc557dc855ed7f547d852198592bd8b9977ad696",
      "original_position" : 71,
      "path" : "depends/packages/qt.mk",
      "position" : 71,
      "pull_request_review_id" : 121025716,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12971",
      "updated_at" : "2018-05-17T12:54:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188945772",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12971#discussion_r188946262"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12971"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188946262"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This whole section is added in #13246, so feel free to remove this to avoid merge conflicts.",
      "commit_id" : "cc557dc855ed7f547d852198592bd8b9977ad696",
      "created_at" : "2018-05-17T12:55:45Z",
      "diff_hunk" : "@@ -117,6 +117,20 @@ Once the source code is ready the build steps are below.\n     CONFIG_SITE=$PWD/depends/x86_64-w64-mingw32/share/config.site ./configure --prefix=/\n     make\n \n+Ubuntu Bionic Beaver 18.04:\n+\n+    sudo update-alternatives --config x86_64-w64-mingw32-g++ # Set the default mingw32 g++ compiler option to posix.\n+\n+Bionic Beaver has a modern mingw version. You can therefore use it to build\n+Bitcoin Qt with Qt v5.9.4. Follow these steps:\n+\n+    cd depends\n+    make HOST=x86_64-w64-mingw32 QT_59=1\n+    cd ..\n+    ./autogen.sh # not required when building from tarball\n+    CONFIG_SITE=$PWD/depends/x86_64-w64-mingw32/share/config.site ./configure --prefix=/ --enable-qt59\n+    make\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12971#discussion_r188946262",
      "id" : 188946262,
      "original_commit_id" : "cc557dc855ed7f547d852198592bd8b9977ad696",
      "original_position" : 17,
      "path" : "doc/build-windows.md",
      "position" : 17,
      "pull_request_review_id" : 121026339,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12971",
      "updated_at" : "2018-05-17T12:55:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/188946262",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This should fix the problem. Patch from [QTBUG-67286](https://bugreports.qt.io/browse/QTBUG-67286)\r\n```diff\r\ndiff --git a/depends/packages/qt.mk b/depends/packages/qt.mk\r\nindex 090635651..725daf2f5 100644\r\n--- a/depends/packages/qt.mk\r\n+++ b/depends/packages/qt.mk\r\n@@ -8,7 +8,7 @@ $(package)_dependencies=openssl zlib\r\n $(package)_linux_dependencies=freetype fontconfig libxcb libX11 xproto libXext\r\n $(package)_build_subdir=qtbase\r\n $(package)_qt_libs=corelib network widgets gui plugins testlib concurrent xml\r\n-$(package)_patches=fix_qt_pkgconfig.patch mac-qmake.conf\r\n+$(package)_patches=fix_qt_pkgconfig.patch mac-qmake.conf fix_configure_mac.patch\r\n \r\n $(package)_qttranslations_file_name=qttranslations-$($(package)_suffix)\r\n $(package)_qttranslations_sha256_hash=e5cf81f88cc6811166ea631e6b7faa869a578a910dce61e951f98ff83f27bad6\r\n@@ -130,7 +130,8 @@ define $(package)_preprocess_cmds\r\n   sed -i.old \"s|QMAKE_CFLAGS            = |!host_build: QMAKE_CFLAGS            = $($(package)_cflags) $($(package)_cppflags) |\" qtbase/mkspecs/win32-g++/qmake.conf && \\\r\n   sed -i.old \"s|QMAKE_LFLAGS            = |!host_build: QMAKE_LFLAGS            = $($(package)_ldflags) |\" qtbase/mkspecs/win32-g++/qmake.conf && \\\r\n   sed -i.old \"s|QMAKE_CXXFLAGS          = |!host_build: QMAKE_CXXFLAGS            = $($(package)_cxxflags) $($(package)_cppflags) |\" qtbase/mkspecs/win32-g++/qmake.conf &&\\\r\n-  patch -p1 -i $($(package)_patch_dir)/fix_qt_pkgconfig.patch\r\n+  patch -p1 -i $($(package)_patch_dir)/fix_qt_pkgconfig.patch && \\\r\n+  patch -p1 -i $($(package)_patch_dir)/fix_configure_mac.patch\r\n endef\r\n \r\n define $(package)_config_cmds\r\ndiff --git a/depends/patches/qt/fix_configure_mac.patch b/depends/patches/qt/fix_configure_mac.patch\r\nnew file mode 100644\r\nindex 000000000..0d7dd647d\r\n--- /dev/null\r\n+++ b/depends/patches/qt/fix_configure_mac.patch\r\n@@ -0,0 +1,50 @@\r\n+--- old/qtbase/mkspecs/features/mac/sdk.prf\t2018-02-08 10:24:48.000000000 -0800\r\n++++ new/qtbase/mkspecs/features/mac/sdk.prf\t2018-03-23 10:38:56.000000000 -0700\r\n+@@ -8,21 +8,21 @@\r\n+ defineReplace(xcodeSDKInfo) {\r\n+     info = $$1\r\n+     equals(info, \"Path\"): \\\r\n+-        info = --show-sdk-path\r\n++        infoarg = --show-sdk-path\r\n+     equals(info, \"PlatformPath\"): \\\r\n+-        info = --show-sdk-platform-path\r\n++        infoarg = --show-sdk-platform-path\r\n+     equals(info, \"SDKVersion\"): \\\r\n+-        info = --show-sdk-version\r\n++        infoarg = --show-sdk-version\r\n+     sdk = $$2\r\n+     isEmpty(sdk): \\\r\n+         sdk = $$QMAKE_MAC_SDK\r\n+ \r\n+     isEmpty(QMAKE_MAC_SDK.$${sdk}.$${info}) {\r\n+-        QMAKE_MAC_SDK.$${sdk}.$${info} = $$system(\"/usr/bin/xcrun --sdk $$sdk $$info 2>/dev/null\")\r\n++        QMAKE_MAC_SDK.$${sdk}.$${info} = $$system(\"/usr/bin/xcrun --sdk $$sdk $$infoarg 2>/dev/null\")\r\n+         # --show-sdk-platform-path won't work for Command Line Tools; this is fine\r\n+         # only used by the XCTest backend to testlib\r\n+-        isEmpty(QMAKE_MAC_SDK.$${sdk}.$${info}):if(!isEmpty(QMAKE_XCODEBUILD_PATH)|!equals(info, \"--show-sdk-platform-path\")): \\\r\n+-            error(\"Could not resolve SDK $$info for \\'$$sdk\\'\")\r\n++        isEmpty(QMAKE_MAC_SDK.$${sdk}.$${info}):if(!isEmpty(QMAKE_XCODEBUILD_PATH)|!equals(infoarg, \"--show-sdk-platform-path\")): \\\r\n++            error(\"Could not resolve SDK $$info for \\'$$sdk\\' using $$infoarg\")\r\n+         cache(QMAKE_MAC_SDK.$${sdk}.$${info}, set stash, QMAKE_MAC_SDK.$${sdk}.$${info})\r\n+     }\r\n+\r\n+--- old/qtbase/configure\t2018-02-08 10:24:48.000000000 -0800\r\n++++ new/qtbase/configure\t2018-03-23 05:42:29.000000000 -0700\r\n+@@ -232,8 +232,13 @@\r\n+ \r\n+     sdk=$(getSingleQMakeVariable \"QMAKE_MAC_SDK\" \"$1\")\r\n+     if [ -z \"$sdk\" ]; then echo \"QMAKE_MAC_SDK must be set when building on Mac\" >&2; exit 1; fi\r\n+-    sysroot=$(/usr/bin/xcrun --sdk $sdk --show-sdk-path 2>/dev/null)\r\n+-    if [ -z \"$sysroot\" ]; then echo \"Failed to resolve SDK path for '$sdk'\" >&2; exit 1; fi\r\n++    sysroot=$(getSingleQMakeVariable \"QMAKE_MAC_SDK_PATH\" \"$1\")\r\n++\r\n++    echo \"sysroot pre-configured as $sysroot\";\r\n++    if [ -z \"$sysroot\" ]; then\r\n++       sysroot=$(/usr/bin/xcrun --sdk $sdk --show-sdk-path 2>/dev/null)\r\n++       if [ -z \"$sysroot\" ]; then echo \"Failed to resolve SDK path for '$sdk'\" >&2; exit 1; fi\r\n++    fi\r\n+ \r\n+     case \"$sdk\" in\r\n+         macosx*)\r\n+\r\n+\r\ndiff --git a/depends/patches/qt/mac-qmake.conf b/depends/patches/qt/mac-qmake.conf\r\nindex ca70d30b1..337d0eb9c 100644\r\n--- a/depends/patches/qt/mac-qmake.conf\r\n+++ b/depends/patches/qt/mac-qmake.conf\r\n@@ -14,6 +14,7 @@ QMAKE_MAC_SDK.macosx.Path = $${MAC_SDK_PATH}\r\n QMAKE_MAC_SDK.macosx.platform_name = macosx\r\n QMAKE_MAC_SDK.macosx.SDKVersion = $${MAC_SDK_VERSION}\r\n QMAKE_MAC_SDK.macosx.PlatformPath = /phony\r\n+QMAKE_APPLE_DEVICE_ARCHS=x86_64\r\n !host_build: QMAKE_CFLAGS += -target $${MAC_TARGET}\r\n !host_build: QMAKE_OBJECTIVE_CFLAGS += $$QMAKE_CFLAGS\r\n !host_build: QMAKE_CXXFLAGS += $$QMAKE_CFLAGS\r\n",
      "created_at" : "2018-05-17T15:37:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-389910640",
      "id" : 389910640,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12971",
      "updated_at" : "2018-05-17T15:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/389910640",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/11154118?v=4",
         "events_url" : "https://api.github.com/users/ken2812221/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ken2812221/followers",
         "following_url" : "https://api.github.com/users/ken2812221/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ken2812221/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ken2812221",
         "id" : 11154118,
         "login" : "ken2812221",
         "organizations_url" : "https://api.github.com/users/ken2812221/orgs",
         "received_events_url" : "https://api.github.com/users/ken2812221/received_events",
         "repos_url" : "https://api.github.com/users/ken2812221/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ken2812221/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ken2812221"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This additional patch should fix all Mac and Windows build:\r\n```diff\r\ndiff --git a/build-aux/m4/bitcoin_qt.m4 b/build-aux/m4/bitcoin_qt.m4\r\nindex 28446a3cf..bb5d26c2d 100644\r\n--- a/build-aux/m4/bitcoin_qt.m4\r\n+++ b/build-aux/m4/bitcoin_qt.m4\r\n@@ -292,7 +292,7 @@ AC_DEFUN([_BITCOIN_QT_CHECK_QT5],[\r\n       #endif\r\n     ]],\r\n     [[\r\n-      #if QT_VERSION < 0x050000 OR QT_VERSION_MAJOR < 5\r\n+      #if QT_VERSION < 0x050000 || QT_VERSION_MAJOR < 5\r\n       choke\r\n       #endif\r\n     ]])],\r\n@@ -303,7 +303,7 @@ AC_DEFUN([_BITCOIN_QT_CHECK_QT5],[\r\n dnl Internal. Check if the included version of Qt is greater than Qt57.\r\n dnl Requires: INCLUDES must be populated as necessary.\r\n dnl Output: bitcoin_cv_qt5=yes|no\r\n-AC_DEFUN([_BITCOIN_QT_CHECK_QT5],[\r\n+AC_DEFUN([_BITCOIN_QT_CHECK_QT58],[\r\n   AC_CACHE_CHECK(for > Qt 5.7, bitcoin_cv_qt58,[\r\n   AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\r\n       #include <QtCore/qconfig.h>\r\n@@ -384,12 +384,16 @@ AC_DEFUN([_BITCOIN_QT_FIND_STATIC_PLUGINS],[\r\n        if test x$bitcoin_cv_qt58 = xno; then\r\n          PKG_CHECK_MODULES([QTPLATFORM], [Qt5PlatformSupport], [QT_LIBS=\"$QTPLATFORM_LIBS $QT_LIBS\"])\r\n        else\r\n-         PKG_CHECK_MODULES([QTPLATFORM], [Qt5FontDatabaseSupport], [QT_LIBS=\"$QTFONTDATABASE_LIBS $QT_LIBS\"])\r\n-         PKG_CHECK_MODULES([QTPLATFORM], [Qt5EventDispatcherSupport], [QT_LIBS=\"$QTEVENTDISPATCHER_LIBS $QT_LIBS\"])\r\n-         PKG_CHECK_MODULES([QTPLATFORM], [Qt5ThemeSupport], [QT_LIBS=\"$QTTHEME_LIBS $QT_LIBS\"])\r\n-         PKG_CHECK_MODULES([QTPLATFORM], [Qt5DeviceDiscoverySupport], [QT_LIBS=\"$QTDEVICEDISCOVERY_LIBS $QT_LIBS\"])\r\n-         PKG_CHECK_MODULES([QTPLATFORM], [Qt5AccessibilitySupport], [QT_LIBS=\"$QTACCESSIBILITY_LIBS $QT_LIBS\"])\r\n-         PKG_CHECK_MODULES([QTPLATFORM], [Qt5FbSupport], [QT_LIBS=\"$QTFB_LIBS $QT_LIBS\"])\r\n+         PKG_CHECK_MODULES([QTPLATFORM], [Qt5FontDatabaseSupport], [QT_LIBS=\"-lQt5FontDatabaseSupport $QT_LIBS\"])\r\n+         PKG_CHECK_MODULES([QTPLATFORM], [Qt5EventDispatcherSupport], [QT_LIBS=\"-lQt5EventDispatcherSupport $QT_LIBS\"])\r\n+         PKG_CHECK_MODULES([QTPLATFORM], [Qt5ThemeSupport], [QT_LIBS=\"-lQt5ThemeSupport $QT_LIBS\"])\r\n+         PKG_CHECK_MODULES([QTPLATFORM], [Qt5DeviceDiscoverySupport], [QT_LIBS=\"-lQt5DeviceDiscoverySupport $QT_LIBS\"])\r\n+         PKG_CHECK_MODULES([QTPLATFORM], [Qt5AccessibilitySupport], [QT_LIBS=\"-lQt5AccessibilitySupport $QT_LIBS\"])\r\n+         PKG_CHECK_MODULES([QTPLATFORM], [Qt5FbSupport], [QT_LIBS=\"-lQt5FbSupport $QT_LIBS\"])\r\n+         PKG_CHECK_MODULES([QTPLATFORM], [Qt5ClipboardSupport], [QT_LIBS=\"-lQt5ClipboardSupport $QT_LIBS\"])\r\n+         PKG_CHECK_MODULES([QTPLATFORM], [Qt5GraphicsSupport], [QT_LIBS=\"-lQt5GraphicsSupport $QT_LIBS\"])\r\n+         PKG_CHECK_MODULES([QTPLATFORM], [Qt5OpenGL], [QT_LIBS=\"-lQt5OpenGL $QT_LIBS\"])\r\n+         PKG_CHECK_MODULES([QTPLATFORM], [Qt5CglSupport], [QT_LIBS=\"-lQt5CglSupport $QT_LIBS\"])\r\n        fi\r\n        if test \"x$TARGET_OS\" = xlinux; then\r\n          PKG_CHECK_MODULES([X11XCB], [x11-xcb], [QT_LIBS=\"$X11XCB_LIBS $QT_LIBS\"])\r\n@@ -410,7 +414,7 @@ AC_DEFUN([_BITCOIN_QT_FIND_STATIC_PLUGINS],[\r\n                #endif\r\n              ]],\r\n              [[\r\n-               #if QT_VERSION < 0x050600 OR QT_VERSION_MINOR < 6\r\n+               #if QT_VERSION < 0x050600 || QT_VERSION_MINOR < 6\r\n                choke\r\n                #endif\r\n              ]])],\r\n@@ -519,6 +523,7 @@ AC_DEFUN([_BITCOIN_QT_FIND_LIBS_WITHOUT_PKGCONFIG],[\r\n   BITCOIN_QT_CHECK([\r\n     if test \"x$bitcoin_qt_want_version\" = xauto; then\r\n       _BITCOIN_QT_CHECK_QT5\r\n+      _BITCOIN_QT_CHECK_QT58\r\n     fi\r\n     if test \"x$bitcoin_cv_qt5\" = xyes || test \"x$bitcoin_qt_want_version\" = xqt5; then\r\n       QT_LIB_PREFIX=Qt5\r\ndiff --git a/depends/packages/qt.mk b/depends/packages/qt.mk\r\nindex e4a1f3751..884a02c2b 100644\r\n--- a/depends/packages/qt.mk\r\n+++ b/depends/packages/qt.mk\r\n@@ -8,7 +8,7 @@ $(package)_dependencies=openssl zlib\r\n $(package)_linux_dependencies=freetype fontconfig libxcb libX11 xproto libXext\r\n $(package)_build_subdir=qtbase\r\n $(package)_qt_libs=corelib network widgets gui plugins testlib concurrent xml\r\n-$(package)_patches=fix_qt_pkgconfig.patch mac-qmake.conf fix_configure_mac.patch\r\n+$(package)_patches=fix_qt_pkgconfig.patch mac-qmake.conf fix_configure_mac.patch fix_no_printer.patch\r\n \r\n $(package)_qttranslations_file_name=qttranslations-$($(package)_suffix)\r\n $(package)_qttranslations_sha256_hash=e5cf81f88cc6811166ea631e6b7faa869a578a910dce61e951f98ff83f27bad6\r\n@@ -67,6 +67,8 @@ $(package)_config_opts += -system-zlib\r\n $(package)_config_opts += -static\r\n $(package)_config_opts += -silent\r\n $(package)_config_opts += -v\r\n+$(package)_config_opts += -no-feature-printer\r\n+$(package)_config_opts += -no-feature-printdialog\r\n \r\n ifneq ($(build_os),darwin)\r\n $(package)_config_opts_darwin = -xplatform macx-clang-linux\r\n@@ -130,7 +132,8 @@ define $(package)_preprocess_cmds\r\n   sed -i.old \"s|QMAKE_LFLAGS            = |!host_build: QMAKE_LFLAGS            = $($(package)_ldflags) |\" qtbase/mkspecs/win32-g++/qmake.conf && \\\r\n   sed -i.old \"s|QMAKE_CXXFLAGS          = |!host_build: QMAKE_CXXFLAGS            = $($(package)_cxxflags) $($(package)_cppflags) |\" qtbase/mkspecs/win32-g++/qmake.conf &&\\\r\n   patch -p1 -i $($(package)_patch_dir)/fix_qt_pkgconfig.patch &&\\\r\n-  patch -p1 -i $($(package)_patch_dir)/fix_configure_mac.patch\r\n+  patch -p1 -i $($(package)_patch_dir)/fix_configure_mac.patch &&\\\r\n+  patch -p1 -i $($(package)_patch_dir)/fix_no_printer.patch\r\n endef\r\n \r\n define $(package)_config_cmds\r\ndiff --git a/depends/patches/qt/fix_no_printer.patch b/depends/patches/qt/fix_no_printer.patch\r\nnew file mode 100644\r\nindex 000000000..1cbd70ed4\r\n--- /dev/null\r\n+++ b/depends/patches/qt/fix_no_printer.patch\r\n@@ -0,0 +1,19 @@\r\n+--- x/qtbase/src/plugins/platforms/cocoa/qprintengine_mac_p.h\r\n++++ y/qtbase/src/plugins/platforms/cocoa/qprintengine_mac_p.h\r\n+@@ -52,6 +52,7 @@\r\n+ //\r\n+ \r\n+ #include <QtCore/qglobal.h>\r\n++#include <qpa/qplatformprintdevice.h>\r\n+ \r\n+ #ifndef QT_NO_PRINTER\r\n+ \r\n+--- x/qtbase/src/plugins/plugins.pro\r\n++++ y/qtbase/src/plugins/plugins.pro\r\n+@@ -8,6 +8,3 @@ qtHaveModule(gui) {\r\n+     qtConfig(imageformatplugin): SUBDIRS *= imageformats\r\n+     !android:qtConfig(library): SUBDIRS *= generic\r\n+ }\r\n+-\r\n+-!winrt:qtHaveModule(printsupport): \\\r\n+-    SUBDIRS += printsupport\r\n",
      "created_at" : "2018-05-18T09:34:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-390152410",
      "id" : 390152410,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12971",
      "updated_at" : "2018-05-18T09:34:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/390152410",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/11154118?v=4",
         "events_url" : "https://api.github.com/users/ken2812221/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ken2812221/followers",
         "following_url" : "https://api.github.com/users/ken2812221/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ken2812221/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ken2812221",
         "id" : 11154118,
         "login" : "ken2812221",
         "organizations_url" : "https://api.github.com/users/ken2812221/orgs",
         "received_events_url" : "https://api.github.com/users/ken2812221/received_events",
         "repos_url" : "https://api.github.com/users/ken2812221/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ken2812221/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ken2812221"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "You committed the wrong patch, it's not `fix-cocoahelpers-macos.patch` but `fix_no_printer.patch`",
      "created_at" : "2018-05-18T10:51:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12971#issuecomment-390170799",
      "id" : 390170799,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12971",
      "updated_at" : "2018-05-18T10:51:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/390170799",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/11154118?v=4",
         "events_url" : "https://api.github.com/users/ken2812221/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ken2812221/followers",
         "following_url" : "https://api.github.com/users/ken2812221/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ken2812221/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ken2812221",
         "id" : 11154118,
         "login" : "ken2812221",
         "organizations_url" : "https://api.github.com/users/ken2812221/orgs",
         "received_events_url" : "https://api.github.com/users/ken2812221/received_events",
         "repos_url" : "https://api.github.com/users/ken2812221/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ken2812221/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ken2812221"
      }
   }
]
