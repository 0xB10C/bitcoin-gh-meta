[
   {
      "body" : "I think such policy changes should first be discussed on the bitcoin-dev mailing list and eventually deserve a BIP.",
      "created_at" : "2017-07-14T18:31:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10823#issuecomment-315433537",
      "id" : 315433537,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10823",
      "updated_at" : "2017-07-14T18:31:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315433537",
      "user" : {
         "avatar_url" : "https://avatars7.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10823#discussion_r127528160"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10823"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/127528160"
         }
      },
      "body" : "Maybe use `SignalsOptInRBF()`",
      "commit_id" : "38f4c85b47351d40700e088122317aa385c5ee65",
      "created_at" : "2017-07-14T19:06:30Z",
      "diff_hunk" : "@@ -499,15 +500,22 @@ static bool AcceptToMemoryPoolWorker(const CChainParams& chainparams, CTxMemPool\n                 // first-seen mempool behavior should be checking all\n                 // unconfirmed ancestors anyway; doing otherwise is hopelessly\n                 // insecure.\n+                //\n+                // All transactions in mempool become replaceable after the timeout.\n                 bool fReplacementOptOut = true;\n                 if (fEnableReplacement)\n                 {\n-                    for (const CTxIn &_txin : ptxConflicting->vin)\n+                    const int64_t nConflictingTime = pool.info(ptxConflicting->GetHash()).nTime;\n+                    fReplacementOptOut = nAcceptTime - nConflictingTime < nReplacementTimeout;\n+                    if (fReplacementOptOut)\n                     {\n-                        if (_txin.nSequence < std::numeric_limits<unsigned int>::max()-1)\n+                        for (const CTxIn &_txin : ptxConflicting->vin)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10823#discussion_r127528160",
      "id" : 127528160,
      "original_commit_id" : "bea046166a61b6548ff6b3096a6d5ef9daa6ddb1",
      "original_position" : 23,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 50128217,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10823",
      "updated_at" : "2017-07-14T19:48:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/127528160",
      "user" : {
         "avatar_url" : "https://avatars7.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10823#discussion_r127535455"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10823"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/127535455"
         }
      },
      "body" : "I only moved the code but indeed that's a good idea (addressed in 38f4c85b47351d40700e088122317aa385c5ee65) - thanks!",
      "commit_id" : "38f4c85b47351d40700e088122317aa385c5ee65",
      "created_at" : "2017-07-14T19:50:08Z",
      "diff_hunk" : "@@ -499,15 +500,22 @@ static bool AcceptToMemoryPoolWorker(const CChainParams& chainparams, CTxMemPool\n                 // first-seen mempool behavior should be checking all\n                 // unconfirmed ancestors anyway; doing otherwise is hopelessly\n                 // insecure.\n+                //\n+                // All transactions in mempool become replaceable after the timeout.\n                 bool fReplacementOptOut = true;\n                 if (fEnableReplacement)\n                 {\n-                    for (const CTxIn &_txin : ptxConflicting->vin)\n+                    const int64_t nConflictingTime = pool.info(ptxConflicting->GetHash()).nTime;\n+                    fReplacementOptOut = nAcceptTime - nConflictingTime < nReplacementTimeout;\n+                    if (fReplacementOptOut)\n                     {\n-                        if (_txin.nSequence < std::numeric_limits<unsigned int>::max()-1)\n+                        for (const CTxIn &_txin : ptxConflicting->vin)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10823#discussion_r127535455",
      "id" : 127535455,
      "original_commit_id" : "bea046166a61b6548ff6b3096a6d5ef9daa6ddb1",
      "original_position" : 23,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 50136973,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10823",
      "updated_at" : "2017-07-14T19:56:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/127535455",
      "user" : {
         "avatar_url" : "https://avatars5.githubusercontent.com/u/5269298?v=4",
         "events_url" : "https://api.github.com/users/greenaddress/events{/privacy}",
         "followers_url" : "https://api.github.com/users/greenaddress/followers",
         "following_url" : "https://api.github.com/users/greenaddress/following{/other_user}",
         "gists_url" : "https://api.github.com/users/greenaddress/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/greenaddress",
         "id" : 5269298,
         "login" : "greenaddress",
         "organizations_url" : "https://api.github.com/users/greenaddress/orgs",
         "received_events_url" : "https://api.github.com/users/greenaddress/received_events",
         "repos_url" : "https://api.github.com/users/greenaddress/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/greenaddress/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/greenaddress/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/greenaddress"
      }
   },
   {
      "body" : "Yea, agreed that this should get a BIP (sadly probably means endlessly trolled), but does seem awesome to me. Does this need a new option? We dont currently have an option for opt-in-rbf, why not just leave this as hardcoded policy?",
      "created_at" : "2017-07-14T19:53:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10823#issuecomment-315452140",
      "id" : 315452140,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10823",
      "updated_at" : "2017-07-14T19:53:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315452140",
      "user" : {
         "avatar_url" : "https://avatars4.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "@TheBlueMatt replacement can be disabled (as a node policy afaik rather than wallet) and the new option i added  allows for easier testing and for people to run values that they like different from the default (either to be same as previous behavior or to get the other end without running some fork/patched core).\r\n\r\n@TheBlueMatt @jonasschnelli  I am happy to do a BIP and discuss in the dev mailing list as needed.  I thought the changes may be borderline like the change from 72h to 2 weeks for mempool expiry but happy (minus potential trolling) to learn otherwise and or try to reduce the impact of the changes if this is an option.\r\n",
      "created_at" : "2017-07-14T20:05:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10823#issuecomment-315454683",
      "id" : 315454683,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10823",
      "updated_at" : "2017-07-14T20:18:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315454683",
      "user" : {
         "avatar_url" : "https://avatars5.githubusercontent.com/u/5269298?v=4",
         "events_url" : "https://api.github.com/users/greenaddress/events{/privacy}",
         "followers_url" : "https://api.github.com/users/greenaddress/followers",
         "following_url" : "https://api.github.com/users/greenaddress/following{/other_user}",
         "gists_url" : "https://api.github.com/users/greenaddress/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/greenaddress",
         "id" : 5269298,
         "login" : "greenaddress",
         "organizations_url" : "https://api.github.com/users/greenaddress/orgs",
         "received_events_url" : "https://api.github.com/users/greenaddress/received_events",
         "repos_url" : "https://api.github.com/users/greenaddress/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/greenaddress/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/greenaddress/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/greenaddress"
      }
   },
   {
      "body" : "I disagree that this needs a BIP.\r\n\r\nOpt-in RBF added a new way to interpret a transaction, which just barely qualified as something you might want to do a BIP for.\r\n\r\nThis however makes an existing behavior - transactions being replaceable in spite of them not signalling opt-in RBF - happen a little sooner in some circumstances, just like adding expiration did in the first place. We didn't create a BIP for expiry, so why does this need a BIP?\r\n\r\nSecondly, writing a BIP for such a trivial change gives the misleading impression that you could rely on the opposite behavior. We've had continual problems with people misunderstanding the security properties of zeroconf; there's no reason to add to that problem.",
      "created_at" : "2017-07-14T23:06:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10823#issuecomment-315488050",
      "id" : 315488050,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10823",
      "updated_at" : "2017-07-14T23:06:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315488050",
      "user" : {
         "avatar_url" : "https://avatars6.githubusercontent.com/u/7042?v=4",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Indeed, mere policies are not BIP material...",
      "created_at" : "2017-07-15T00:31:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10823#issuecomment-315496443",
      "id" : 315496443,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10823",
      "updated_at" : "2017-07-15T00:31:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315496443",
      "user" : {
         "avatar_url" : "https://avatars6.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "People might want to know about it... and a BIP might be a good way to communicate it...  but we certainly didn't write a BIP about the expiration time changes over time, and this is strictly a narrower change.\r\n\r\nDunno how ideal 6 hours is though.",
      "created_at" : "2017-07-15T01:27:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10823#issuecomment-315500284",
      "id" : 315500284,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10823",
      "updated_at" : "2017-07-15T01:27:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315500284",
      "user" : {
         "avatar_url" : "https://avatars5.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "I'd suggest to put the timeout at 72h - at least when introducing the functionality. This way the behviour is similar to pre 0.14.x code. It's less likely to create havoc / confusion for operators who are still used to regularly see 0-conf transactions being re-spent after that time-frame (but not earlier).",
      "created_at" : "2017-07-16T04:18:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10823#issuecomment-315584435",
      "id" : 315584435,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10823",
      "updated_at" : "2017-07-16T04:18:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315584435",
      "user" : {
         "avatar_url" : "https://avatars7.githubusercontent.com/u/2886147?v=4",
         "events_url" : "https://api.github.com/users/EagleTM/events{/privacy}",
         "followers_url" : "https://api.github.com/users/EagleTM/followers",
         "following_url" : "https://api.github.com/users/EagleTM/following{/other_user}",
         "gists_url" : "https://api.github.com/users/EagleTM/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/EagleTM",
         "id" : 2886147,
         "login" : "EagleTM",
         "organizations_url" : "https://api.github.com/users/EagleTM/orgs",
         "received_events_url" : "https://api.github.com/users/EagleTM/received_events",
         "repos_url" : "https://api.github.com/users/EagleTM/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/EagleTM/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/EagleTM/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/EagleTM"
      }
   },
   {
      "body" : "@gmaxwell I suggested six hours because it's more than long enough (36 blocks) that if you wanted that tx mined relatively quickly, you're probably getting annoyed that it isn't.\r\n\r\n@EagleTM Try actually doublespending some time - it's a lot easier than you think it is.",
      "created_at" : "2017-07-16T05:20:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10823#issuecomment-315586610",
      "id" : 315586610,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10823",
      "updated_at" : "2017-07-16T05:20:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/315586610",
      "user" : {
         "avatar_url" : "https://avatars6.githubusercontent.com/u/7042?v=4",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "I think 6hrs is very short, I've seen many TXs confirmed after 24hrs+, there's plenty of people who, during bigger mempool periods, even try to aim for that...\r\n\r\nthough it might feel a bit insignificant for a BIP, this PR impacts a lot of assumptions people have about 0conf txs, it would get more significant exposure and discussion if proposed as a BIP. ",
      "created_at" : "2017-07-31T21:05:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10823#issuecomment-319196177",
      "id" : 319196177,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10823",
      "updated_at" : "2017-07-31T21:05:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/319196177",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/649160?v=4",
         "events_url" : "https://api.github.com/users/rubensayshi/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rubensayshi/followers",
         "following_url" : "https://api.github.com/users/rubensayshi/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rubensayshi/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rubensayshi",
         "id" : 649160,
         "login" : "rubensayshi",
         "organizations_url" : "https://api.github.com/users/rubensayshi/orgs",
         "received_events_url" : "https://api.github.com/users/rubensayshi/received_events",
         "repos_url" : "https://api.github.com/users/rubensayshi/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rubensayshi/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rubensayshi/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rubensayshi"
      }
   }
]
