{
   "assignee" : null,
   "assignees" : [],
   "body" : "I did this a few months ago (here: #9707), but a few new examples have crept back in.\r\n\r\nWhen testing RPC failures, the test case should always assert the error value and message, to ensure that the failure was for the correct reason. Not doing that can hide bugs in the test code and mean that the test is not testing the correct behaviour.\r\n\r\nRPC failure testing should use the utility function `assert_raises_jsonrpc()` (renamed in the final commit of this PR to `assert_raises_rpc_error()`.\r\n\r\nThis PR does the following:\r\n- changes all remaining instances of tests directly testing on `JSONRPCException` to calls to `assert_raises_jsonrpc()`\r\n- prevents `assert_raises_message()` from being called with `JSONRPCException`\r\n- scripted-diff changes `assert_raises_jsonrpc()` to `assert_raises_rpc_error()`",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 0,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10853/comments",
   "created_at" : "2017-07-17T15:55:02Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10853/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/10853",
   "id" : 243442699,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10853/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 10853,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/10853.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10853",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/10853.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10853"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "[tests] Fix RPC failure testing (again)",
   "updated_at" : "2017-07-17T15:55:02Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10853",
   "user" : {
      "avatar_url" : "https://avatars7.githubusercontent.com/u/1063656?v=4",
      "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
      "followers_url" : "https://api.github.com/users/jnewbery/followers",
      "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/jnewbery",
      "id" : 1063656,
      "login" : "jnewbery",
      "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
      "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
      "repos_url" : "https://api.github.com/users/jnewbery/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/jnewbery"
   }
}
