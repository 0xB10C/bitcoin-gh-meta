[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128398223"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128398223"
         }
      },
      "body" : "This is a helper, like the above. For the test below I had to drop `const`,",
      "commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "created_at" : "2017-07-20T00:06:50Z",
      "diff_hunk" : "@@ -104,7 +104,7 @@ class TestArgsManager : public ArgsManager\n     {\n         return mapArgs;\n     };\n-    const std::map<std::string, std::vector<std::string> >& GetMapMultiArgs()\n+    std::map<std::string, std::vector<std::string> >& GetMapMultiArgs()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128398223",
      "id" : 128398223,
      "original_commit_id" : "4b58cae78715035d40635054ce82c1edd68d43d3",
      "original_position" : 5,
      "path" : "src/test/util_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 51074178,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-26T12:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128398223",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128398372"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128398372"
         }
      },
      "body" : "This is set because `IsArgSet` uses `mapArgs`.",
      "commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "created_at" : "2017-07-20T00:07:54Z",
      "diff_hunk" : "@@ -160,6 +160,21 @@ BOOST_AUTO_TEST_CASE(util_GetArg)\n     BOOST_CHECK_EQUAL(testArgs.GetBoolArg(\"booltest4\", false), true);\n }\n \n+BOOST_AUTO_TEST_CASE(util_GetUniqueArgs)\n+{\n+    TestArgsManager testArgs;\n+\n+    BOOST_CHECK_EQUAL(testArgs.GetUniqueArgs(\"a\").size(), 0);\n+\n+    testArgs.GetMapArgs()[\"a\"] = \"biz\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128398372",
      "id" : 128398372,
      "original_commit_id" : "4b58cae78715035d40635054ce82c1edd68d43d3",
      "original_position" : 19,
      "path" : "src/test/util_tests.cpp",
      "position" : null,
      "pull_request_review_id" : 51074178,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-26T12:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128398372",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128543286"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128543286"
         }
      },
      "body" : "Can you briefly describe what it does in a comment above this line?",
      "commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "created_at" : "2017-07-20T15:09:20Z",
      "diff_hunk" : "@@ -202,6 +202,7 @@ class ArgsManager\n     void ParseParameters(int argc, const char*const argv[]);\n     void ReadConfigFile(const std::string& confPath);\n     std::vector<std::string> GetArgs(const std::string& strArg);\n+    std::vector<std::string> GetUniqueArgs(const std::string& strArg);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128543286",
      "id" : 128543286,
      "original_commit_id" : "099e5efba068f0aefe03d4ae167c548871ce3800",
      "original_position" : 4,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 51233694,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-26T12:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128543286",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128549084"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128549084"
         }
      },
      "body" : "Is this use-case common enough to add a new argument getter to the API for?\r\nIf not, I'd prefer chaining more general functions, for example defining a function `std::vector<string> UniqueStrings(const std::vector<string>&)` then using it as\r\n```c++\r\nUniqueStrings(GetArgs(\"-wallet\"))\r\n```\r\n",
      "commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "created_at" : "2017-07-20T15:28:56Z",
      "diff_hunk" : "@@ -202,6 +202,7 @@ class ArgsManager\n     void ParseParameters(int argc, const char*const argv[]);\n     void ReadConfigFile(const std::string& confPath);\n     std::vector<std::string> GetArgs(const std::string& strArg);\n+    std::vector<std::string> GetUniqueArgs(const std::string& strArg);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128549084",
      "id" : 128549084,
      "original_commit_id" : "099e5efba068f0aefe03d4ae167c548871ce3800",
      "original_position" : 4,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 51240236,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-26T12:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128549084",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128553500"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128553500"
         }
      },
      "body" : "There are other multiargs that may use this getter, but I'm checking it. There is also the option of `GetArgs(const std::string& strArg, fUnique = false)`.",
      "commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "created_at" : "2017-07-20T15:43:57Z",
      "diff_hunk" : "@@ -202,6 +202,7 @@ class ArgsManager\n     void ParseParameters(int argc, const char*const argv[]);\n     void ReadConfigFile(const std::string& confPath);\n     std::vector<std::string> GetArgs(const std::string& strArg);\n+    std::vector<std::string> GetUniqueArgs(const std::string& strArg);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128553500",
      "id" : 128553500,
      "original_commit_id" : "099e5efba068f0aefe03d4ae167c548871ce3800",
      "original_position" : 4,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 51245071,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-26T12:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128553500",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128554065"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128554065"
         }
      },
      "body" : "But I also like that option @laanwj.",
      "commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "created_at" : "2017-07-20T15:45:27Z",
      "diff_hunk" : "@@ -202,6 +202,7 @@ class ArgsManager\n     void ParseParameters(int argc, const char*const argv[]);\n     void ReadConfigFile(const std::string& confPath);\n     std::vector<std::string> GetArgs(const std::string& strArg);\n+    std::vector<std::string> GetUniqueArgs(const std::string& strArg);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128554065",
      "id" : 128554065,
      "original_commit_id" : "099e5efba068f0aefe03d4ae167c548871ce3800",
      "original_position" : 4,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 51245559,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-26T12:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128554065",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128635592"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128635592"
         }
      },
      "body" : "Why not let std::set do the heavy lifting for you:\r\n\r\n```\r\n    std::vector<std::string> args = GetArgs(strArg);\r\n    std::set<std::string> uniques(args.begin(), args.end());\r\n    args.assign(uniques.begin(), uniques.end());\r\n    return args;\r\n```",
      "commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "created_at" : "2017-07-20T21:28:48Z",
      "diff_hunk" : "@@ -427,6 +427,19 @@ std::vector<std::string> ArgsManager::GetArgs(const std::string& strArg)\n     return {};\n }\n \n+std::vector<std::string> ArgsManager::GetUniqueArgs(const std::string& strArg)\n+{\n+    LOCK(cs_args);\n+    std::vector<std::string> args;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128635592",
      "id" : 128635592,
      "original_commit_id" : "4b58cae78715035d40635054ce82c1edd68d43d3",
      "original_position" : 7,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 51335546,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-26T12:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128635592",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128636857"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128636857"
         }
      },
      "body" : "+1 to comment.\r\n\r\nI can imagine this having wider use, so I don't think adding a ArgsManager member function is a problem.",
      "commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "created_at" : "2017-07-20T21:35:04Z",
      "diff_hunk" : "@@ -202,6 +202,7 @@ class ArgsManager\n     void ParseParameters(int argc, const char*const argv[]);\n     void ReadConfigFile(const std::string& confPath);\n     std::vector<std::string> GetArgs(const std::string& strArg);\n+    std::vector<std::string> GetUniqueArgs(const std::string& strArg);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128636857",
      "id" : 128636857,
      "original_commit_id" : "099e5efba068f0aefe03d4ae167c548871ce3800",
      "original_position" : 4,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 51335546,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-26T12:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128636857",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128639698"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128639698"
         }
      },
      "body" : "We want to keep order.",
      "commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "created_at" : "2017-07-20T21:51:11Z",
      "diff_hunk" : "@@ -427,6 +427,19 @@ std::vector<std::string> ArgsManager::GetArgs(const std::string& strArg)\n     return {};\n }\n \n+std::vector<std::string> ArgsManager::GetUniqueArgs(const std::string& strArg)\n+{\n+    LOCK(cs_args);\n+    std::vector<std::string> args;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128639698",
      "id" : 128639698,
      "original_commit_id" : "4b58cae78715035d40635054ce82c1edd68d43d3",
      "original_position" : 7,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 51340096,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-26T12:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128639698",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128640058"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128640058"
         }
      },
      "body" : "ah. Makes sense. Thanks.",
      "commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "created_at" : "2017-07-20T21:53:12Z",
      "diff_hunk" : "@@ -427,6 +427,19 @@ std::vector<std::string> ArgsManager::GetArgs(const std::string& strArg)\n     return {};\n }\n \n+std::vector<std::string> ArgsManager::GetUniqueArgs(const std::string& strArg)\n+{\n+    LOCK(cs_args);\n+    std::vector<std::string> args;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128640058",
      "id" : 128640058,
      "original_commit_id" : "4b58cae78715035d40635054ce82c1edd68d43d3",
      "original_position" : 7,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 51340507,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-26T12:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128640058",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128641038"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128641038"
         }
      },
      "body" : "I was tempted to name it `GetStableUniqueArgs` but maybe it's too much for most of you.",
      "commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "created_at" : "2017-07-20T21:58:14Z",
      "diff_hunk" : "@@ -427,6 +427,19 @@ std::vector<std::string> ArgsManager::GetArgs(const std::string& strArg)\n     return {};\n }\n \n+std::vector<std::string> ArgsManager::GetUniqueArgs(const std::string& strArg)\n+{\n+    LOCK(cs_args);\n+    std::vector<std::string> args;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128641038",
      "id" : 128641038,
      "original_commit_id" : "4b58cae78715035d40635054ce82c1edd68d43d3",
      "original_position" : 7,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 51341553,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-26T12:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128641038",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Concept ACK",
      "created_at" : "2017-07-21T09:22:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-316951756",
      "id" : 316951756,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-21T09:22:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/316951756",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128737676"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128737676"
         }
      },
      "body" : "I think just make sure there's a comment at the declaration saying that ordering is stable.",
      "commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "created_at" : "2017-07-21T11:05:56Z",
      "diff_hunk" : "@@ -427,6 +427,19 @@ std::vector<std::string> ArgsManager::GetArgs(const std::string& strArg)\n     return {};\n }\n \n+std::vector<std::string> ArgsManager::GetUniqueArgs(const std::string& strArg)\n+{\n+    LOCK(cs_args);\n+    std::vector<std::string> args;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128737676",
      "id" : 128737676,
      "original_commit_id" : "4b58cae78715035d40635054ce82c1edd68d43d3",
      "original_position" : 7,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 51446013,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-26T12:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128737676",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "#10604 has been merged. Suggest ~you rebase on master and~ add something like the following to multiwallet.py as a functional test:\r\n\r\n```\r\n@@ -15,7 +15,8 @@ class MultiWalletTest(BitcoinTestFramework):\r\n         super().__init__()\r\n         self.setup_clean_chain = True\r\n         self.num_nodes = 1\r\n-        self.extra_args = [['-wallet=w1', '-wallet=w2', '-wallet=w3']]\r\n+        # bitcoind should ignore duplicate wallets in config\r\n+        self.extra_args = [['-wallet=w1', '-wallet=w2', '-wallet=w3', '-wallet=w2']]\r\n \r\n     def run_test(self):\r\n         w1 = self.nodes[0] / \"wallet/w1\"\r\n@@ -41,7 +42,7 @@ class MultiWalletTest(BitcoinTestFramework):\r\n         w3_name = w3.getwalletinfo()['walletname']\r\n         assert_equal(w3_name, \"w3\")\r\n \r\n-        assert_equal({\"w1\", \"w2\", \"w3\"}, {w1_name, w2_name, w3_name})\r\n+        assert_equal(self.nodes[0].listwallets(), [\"w1\", \"w2\", \"w3\"])\r\n \r\n         w1.generate(101)\r\n         assert_equal(w1.getbalance(), 100)\r\n```",
      "created_at" : "2017-07-21T14:07:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317010599",
      "id" : 317010599,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-21T14:24:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317010599",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@jnewbery thanks for the tip, it's in 7605a8d. @instagibbs added the missing comment in 8cf06d7.",
      "created_at" : "2017-07-21T14:48:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317021474",
      "id" : 317021474,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-21T14:48:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317021474",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128787407"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128787407"
         }
      },
      "body" : "ultranit: match the doxygen style comments below.",
      "commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "created_at" : "2017-07-21T15:14:18Z",
      "diff_hunk" : "@@ -203,6 +203,10 @@ class ArgsManager\n     void ReadConfigFile(const std::string& confPath);\n     std::vector<std::string> GetArgs(const std::string& strArg);\n \n+    // Returns unique values of the given argument, preserving the order",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128787407",
      "id" : 128787407,
      "original_commit_id" : "7605a8d4c18461c7673214c068f632f0aa340c3f",
      "original_position" : 4,
      "path" : "src/util.h",
      "position" : null,
      "pull_request_review_id" : 51503311,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-26T12:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128787407",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "Looks good @promag . I've added one nitty comment. utACK either way.",
      "created_at" : "2017-07-21T15:14:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317028552",
      "id" : 317028552,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-21T15:14:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317028552",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@jnewbery added missing comment to `GetArgs` too.",
      "created_at" : "2017-07-21T21:57:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317121885",
      "id" : 317121885,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-21T21:57:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317121885",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "please correct me if I'm wrong. As far as I can tell, since this only prevents specifying the same *filename* multiple times, it still doesn't prevent you from loading the same *file* twice. You just have to use different names/paths to refer to it:\r\n\r\n``--wallet=w1 --wallet=../wallets/w1`` (assuming we're in a directory called ``wallets``)\r\n\r\nOne could also use hard- or soft links to give a single wallet multiple names.",
      "created_at" : "2017-07-22T01:05:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317143484",
      "id" : 317143484,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-22T01:05:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317143484",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/661450?v=4",
         "events_url" : "https://api.github.com/users/arvidn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/arvidn/followers",
         "following_url" : "https://api.github.com/users/arvidn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/arvidn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/arvidn",
         "id" : 661450,
         "login" : "arvidn",
         "organizations_url" : "https://api.github.com/users/arvidn/orgs",
         "received_events_url" : "https://api.github.com/users/arvidn/received_events",
         "repos_url" : "https://api.github.com/users/arvidn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/arvidn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/arvidn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/arvidn"
      }
   },
   {
      "body" : "@arvidn I'll test. Thanks!",
      "created_at" : "2017-07-22T07:30:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317163450",
      "id" : 317163450,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-22T07:30:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317163450",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128963203"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128963203"
         }
      },
      "body" : "you should `#include <set>`",
      "commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "created_at" : "2017-07-24T07:16:17Z",
      "diff_hunk" : "@@ -427,6 +427,19 @@ std::vector<std::string> ArgsManager::GetArgs(const std::string& strArg)\n     return {};\n }\n \n+std::vector<std::string> ArgsManager::GetUniqueArgs(const std::string& strArg)\n+{\n+    LOCK(cs_args);\n+    std::vector<std::string> args;\n+    std::set<std::string> uniques;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r128963203",
      "id" : 128963203,
      "original_commit_id" : "15489827ef3a4384106cbbc0182c9be88f9e4864",
      "original_position" : 8,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 51687949,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-26T12:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/128963203",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1225267?v=4",
         "events_url" : "https://api.github.com/users/benma/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benma/followers",
         "following_url" : "https://api.github.com/users/benma/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benma/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benma",
         "id" : 1225267,
         "login" : "benma",
         "organizations_url" : "https://api.github.com/users/benma/orgs",
         "received_events_url" : "https://api.github.com/users/benma/received_events",
         "repos_url" : "https://api.github.com/users/benma/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benma/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benma/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benma"
      }
   },
   {
      "body" : "I'm updating to take into account @arvidn review.",
      "created_at" : "2017-07-24T07:36:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317342746",
      "id" : 317342746,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-24T07:36:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317342746",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "After @arvidn observation, I took a different approach. In order to correctly detect duplicate wallets I'm using `boost:filesystem::equivalent` in `bool CWallet::Verify()`. This means that if a wallet is duplicate then an initialization error is raised.\r\n\r\n@jnewbery removed the functional test because the app now quits with an error, AFAIK we don't test these?",
      "created_at" : "2017-07-24T22:46:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317576490",
      "id" : 317576490,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-24T22:46:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317576490",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@arvidn there is already a `-wallet` validation to prevent relative paths. However the initial approach failed with symlinks. Thanks for the feedback.",
      "created_at" : "2017-07-24T22:49:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317577087",
      "id" : 317577087,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-24T22:49:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317577087",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129200697"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129200697"
         }
      },
      "body" : "Based on the documentation, I'm not sure that `boost::filesystem::absolute` resolves symlinks; only that it resolves relative path elements (lack of root, and `.` and `..` path elements). `boost::filesystem::canonical` resolves symlinks too.\r\n\r\nEDIT: nevermind, it seems that `fs::equivalent` further takes care of this.",
      "commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "created_at" : "2017-07-25T02:38:45Z",
      "diff_hunk" : "@@ -468,13 +468,31 @@ bool CWallet::Verify()\n \n     uiInterface.InitMessage(_(\"Verifying wallet(s)...\"));\n \n+    // Keep track of each existing wallet absolute path in order to detect\n+    // when a wallet is already loaded by using boost::filesystem::equivalent.\n+    std::vector<fs::path> wallet_paths;\n+\n     for (const std::string& walletFile : gArgs.GetArgs(\"-wallet\")) {\n         if (boost::filesystem::path(walletFile).filename() != walletFile) {\n             return InitError(_(\"-wallet parameter must only specify a filename (not a path)\"));\n-        } else if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n+        }\n+\n+        if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n             return InitError(_(\"Invalid characters in -wallet filename\"));\n         }\n \n+        fs::path wallet_path = fs::absolute(walletFile, GetDataDir());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129200697",
      "id" : 129200697,
      "original_commit_id" : "b1b4e8ac1687fac1dd275b7bab2c45eb879be30d",
      "original_position" : 18,
      "path" : "src/wallet/wallet.cpp",
      "position" : 17,
      "pull_request_review_id" : 51947422,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-26T12:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129200697",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "utACK b1b4e8ac1687fac1dd275b7bab2c45eb879be30d",
      "created_at" : "2017-07-25T02:40:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317612149",
      "id" : 317612149,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-25T02:40:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317612149",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129409240"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129409240"
         }
      },
      "body" : "Doesn't this imply you can specify duplicate wallets if the wallet doesn't (yet) exist? It seems strange mostly because it would result in you being able to restart your node and then suddently it will fail but succeed the first time.",
      "commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "created_at" : "2017-07-25T19:59:11Z",
      "diff_hunk" : "@@ -468,13 +468,31 @@ bool CWallet::Verify()\n \n     uiInterface.InitMessage(_(\"Verifying wallet(s)...\"));\n \n+    // Keep track of each existing wallet absolute path in order to detect\n+    // when a wallet is already loaded by using boost::filesystem::equivalent.\n+    std::vector<fs::path> wallet_paths;\n+\n     for (const std::string& walletFile : gArgs.GetArgs(\"-wallet\")) {\n         if (boost::filesystem::path(walletFile).filename() != walletFile) {\n             return InitError(_(\"-wallet parameter must only specify a filename (not a path)\"));\n-        } else if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n+        }\n+\n+        if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n             return InitError(_(\"Invalid characters in -wallet filename\"));\n         }\n \n+        fs::path wallet_path = fs::absolute(walletFile, GetDataDir());\n+\n+        if (fs::exists(wallet_path)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129409240",
      "id" : 129409240,
      "original_commit_id" : "b1b4e8ac1687fac1dd275b7bab2c45eb879be30d",
      "original_position" : 20,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 52179335,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-26T12:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129409240",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "This approach seems pretty fragile, but maybe it's the simplest safeguard we can implement right now. I'd think ideally bitcoin would try to acquire an exclusive write lock on a wallet database file while opening it, and just not open files that can't be locked.",
      "created_at" : "2017-07-25T21:51:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317883603",
      "id" : 317883603,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-25T21:51:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317883603",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129437723"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129437723"
         }
      },
      "body" : "7c4058d disallows having wallets as symlinks whereas addffb2 resolves symlink to the concrete absolute path.",
      "commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "created_at" : "2017-07-25T22:03:53Z",
      "diff_hunk" : "@@ -468,13 +468,31 @@ bool CWallet::Verify()\n \n     uiInterface.InitMessage(_(\"Verifying wallet(s)...\"));\n \n+    // Keep track of each existing wallet absolute path in order to detect\n+    // when a wallet is already loaded by using boost::filesystem::equivalent.\n+    std::vector<fs::path> wallet_paths;\n+\n     for (const std::string& walletFile : gArgs.GetArgs(\"-wallet\")) {\n         if (boost::filesystem::path(walletFile).filename() != walletFile) {\n             return InitError(_(\"-wallet parameter must only specify a filename (not a path)\"));\n-        } else if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n+        }\n+\n+        if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n             return InitError(_(\"Invalid characters in -wallet filename\"));\n         }\n \n+        fs::path wallet_path = fs::absolute(walletFile, GetDataDir());\n+\n+        if (fs::exists(wallet_path)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129437723",
      "id" : 129437723,
      "original_commit_id" : "b1b4e8ac1687fac1dd275b7bab2c45eb879be30d",
      "original_position" : 20,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 52211102,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-26T12:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129437723",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129439010"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129439010"
         }
      },
      "body" : "@sipa `fs::equivalent` is not used in the latest version.\r\n",
      "commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "created_at" : "2017-07-25T22:10:56Z",
      "diff_hunk" : "@@ -468,13 +468,31 @@ bool CWallet::Verify()\n \n     uiInterface.InitMessage(_(\"Verifying wallet(s)...\"));\n \n+    // Keep track of each existing wallet absolute path in order to detect\n+    // when a wallet is already loaded by using boost::filesystem::equivalent.\n+    std::vector<fs::path> wallet_paths;\n+\n     for (const std::string& walletFile : gArgs.GetArgs(\"-wallet\")) {\n         if (boost::filesystem::path(walletFile).filename() != walletFile) {\n             return InitError(_(\"-wallet parameter must only specify a filename (not a path)\"));\n-        } else if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n+        }\n+\n+        if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n             return InitError(_(\"Invalid characters in -wallet filename\"));\n         }\n \n+        fs::path wallet_path = fs::absolute(walletFile, GetDataDir());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129439010",
      "id" : 129439010,
      "original_commit_id" : "b1b4e8ac1687fac1dd275b7bab2c45eb879be30d",
      "original_position" : 18,
      "path" : "src/wallet/wallet.cpp",
      "position" : 17,
      "pull_request_review_id" : 52212494,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-26T12:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129439010",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129460005"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129460005"
         }
      },
      "body" : "It seems this could be done using `fs::canonical` ?",
      "commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "created_at" : "2017-07-26T00:40:33Z",
      "diff_hunk" : "@@ -468,13 +468,34 @@ bool CWallet::Verify()\n \n     uiInterface.InitMessage(_(\"Verifying wallet(s)...\"));\n \n+    // Keep track of each wallet absolute path to detect duplicates.\n+    std::set<fs::path> wallet_paths;\n+\n     for (const std::string& walletFile : gArgs.GetArgs(\"-wallet\")) {\n         if (boost::filesystem::path(walletFile).filename() != walletFile) {\n             return InitError(_(\"-wallet parameter must only specify a filename (not a path)\"));\n-        } else if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n+        }\n+\n+        if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n             return InitError(_(\"Invalid characters in -wallet filename\"));\n         }\n \n+        fs::path wallet_path = fs::absolute(walletFile, GetDataDir());\n+\n+        if (fs::exists(wallet_path)) {\n+            if (!fs::is_regular_file(wallet_path)) {\n+                return InitError(_(\"Invalid -wallet file\"));\n+            }\n+\n+            if (fs::is_symlink(wallet_path)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129460005",
      "id" : 129460005,
      "original_commit_id" : "addffb2ba3edb6a0427ecc42a04efac0e2c8f4ec",
      "original_position" : 24,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 52234684,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-26T12:17:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129460005",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "> This approach seems pretty fragile, but maybe it's the simplest safeguard we can implement right now. I'd think ideally bitcoin would try to acquire an exclusive write lock on a wallet database file while opening it, and just not open files that can't be locked.\r\n\r\nRight, ideally it's something that would be handled at the database layer, in the same way it's avoided that multiple applications open the wallet at once. It's unfortunate that BerkeleyDB itself doesn't provide protection against opening a database multiple times.\r\n\r\nAnyhow it's better to have some check in place, so concept ACK.\r\n",
      "created_at" : "2017-07-26T06:37:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317962248",
      "id" : 317962248,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-26T06:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317962248",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "At this point there's no file opening, it's a configuration error. Like you said it's a runtime error. Both make sense for me.",
      "created_at" : "2017-07-26T07:00:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317966522",
      "id" : 317966522,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-26T07:00:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317966522",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "> the app now quits with an error, AFAIK we don't test these?\r\n\r\nWe have a way of testing this: if you're expecting bitcoind to fail on startup, take a look at `assert_start_raises_init_error()`. If you're expecting bitcoind to startup successfully and then exit, look at the new test in #10882 : https://github.com/bitcoin/bitcoin/pull/10882/commits/ec59b2eaaccd4d42d98345e9719265f102494e46#diff-8d6207d4df9ed2a74441a199714a612aR92",
      "created_at" : "2017-07-26T08:10:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-317981438",
      "id" : 317981438,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-26T08:10:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/317981438",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@jnewbery thanks, will add the missing tests.\r\n\r\nThe current approach is to raise an error when a wallet absolute path:\r\n - exists and it's not a regular file or a symlink, or (@sipa FYI)\r\n - does not exists and it's a duplicate (@TheBlueMatt FYI).",
      "created_at" : "2017-07-26T12:27:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#issuecomment-318038067",
      "id" : 318038067,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/10885",
      "updated_at" : "2017-07-26T12:27:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318038067",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129663401"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129663401"
         }
      },
      "body" : "Boost documentation seems to indicate that is_regular_file implies !is_symlink.",
      "commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "created_at" : "2017-07-26T18:48:56Z",
      "diff_hunk" : "@@ -468,13 +468,28 @@ bool CWallet::Verify()\n \n     uiInterface.InitMessage(_(\"Verifying wallet(s)...\"));\n \n+    // Keep track of each wallet absolute path to detect duplicates.\n+    std::set<fs::path> wallet_paths;\n+\n     for (const std::string& walletFile : gArgs.GetArgs(\"-wallet\")) {\n         if (boost::filesystem::path(walletFile).filename() != walletFile) {\n             return InitError(_(\"-wallet parameter must only specify a filename (not a path)\"));\n-        } else if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n+        }\n+\n+        if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {\n             return InitError(_(\"Invalid characters in -wallet filename\"));\n         }\n \n+        fs::path wallet_path = fs::absolute(walletFile, GetDataDir());\n+\n+        if (fs::exists(wallet_path) && (!fs::is_regular_file(wallet_path) || fs::is_symlink(wallet_path))) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/10885#discussion_r129663401",
      "id" : 129663401,
      "original_commit_id" : "c84a5a9e561409a3b1b15f81ac1d425acf2122b6",
      "original_position" : 19,
      "path" : "src/wallet/wallet.cpp",
      "position" : 19,
      "pull_request_review_id" : 52460983,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/10885",
      "updated_at" : "2017-07-26T18:48:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129663401",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   }
]
