[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32887478"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32887478"
         }
      },
      "body" : "I'm not sure if the locking of a signal emit is done within boost::signal of if this needs explicit locking of `uiInterface`?",
      "commit_id" : "114c72213da9496a7126b41562bd91efd438ecf2",
      "created_at" : "2015-06-20T20:01:10Z",
      "diff_hunk" : "@@ -527,6 +528,7 @@ UniValue setban(const UniValue& params, bool fHelp)\n             throw JSONRPCError(RPC_MISC_ERROR, \"Error: Unban failed\");\n     }\n \n+    uiInterface.BannedListChanged();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32887478",
      "id" : 32887478,
      "original_commit_id" : "2233f12a56416e029f4df50d83e2001f00fbd067",
      "original_position" : 12,
      "path" : "src/rpcnet.cpp",
      "position" : 12,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315",
      "updated_at" : "2015-06-21T08:44:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32887478",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32887492"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32887492"
         }
      },
      "body" : "i recognized that `boost::posix_time::from_time_t` is not 64bit capable. Maybe someone has a idea how to fix this.",
      "commit_id" : "114c72213da9496a7126b41562bd91efd438ecf2",
      "created_at" : "2015-06-20T20:03:07Z",
      "diff_hunk" : "@@ -0,0 +1,192 @@\n+// Copyright (c) 2011-2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bantablemodel.h\"\n+\n+#include \"clientmodel.h\"\n+#include \"guiconstants.h\"\n+#include \"guiutil.h\"\n+\n+#include \"net.h\"\n+#include \"sync.h\"\n+#include \"utiltime.h\"\n+\n+#include <QDebug>\n+#include <QList>\n+#include <QTimer>\n+\n+#include <boost/date_time/posix_time/posix_time.hpp>\n+#include <boost/date_time/c_local_time_adjustor.hpp>\n+\n+// private implementation\n+class BanTablePriv\n+{\n+public:\n+    /** Local cache of peer information */\n+    QList<CCombinedBan> cachedBanlist;\n+    /** Column to sort nodes by */\n+    int sortColumn;\n+    /** Order (ascending or descending) to sort nodes by */\n+    Qt::SortOrder sortOrder;\n+\n+    /** Pull a full list of banned nodes from CNode into our cache */\n+    void refreshBanlist()\n+    {\n+        std::map<CSubNet, int64_t> banMap;\n+        CNode::GetBanned(banMap);\n+\n+        cachedBanlist.clear();\n+#if QT_VERSION >= 0x040700\n+        cachedBanlist.reserve(banMap.size());\n+#endif\n+        std::map<CSubNet, int64_t>::iterator iter;\n+        for (iter = banMap.begin(); iter != banMap.end(); ++iter) {\n+            CCombinedBan banEntry;\n+            banEntry.subnet = iter->first;\n+            banEntry.bantil = iter->second;\n+            cachedBanlist.append(banEntry);\n+        }\n+    }\n+\n+    int size()\n+    {\n+        return cachedBanlist.size();\n+    }\n+\n+    CCombinedBan *index(int idx)\n+    {\n+        if(idx >= 0 && idx < cachedBanlist.size()) {\n+            return &cachedBanlist[idx];\n+        } else {\n+            return 0;\n+        }\n+    }\n+};\n+\n+BanTableModel::BanTableModel(ClientModel *parent) :\n+    QAbstractTableModel(parent),\n+    clientModel(parent),\n+    timer(0)\n+{\n+    columns << tr(\"IP/Netmask\") << tr(\"Banned Until\");\n+    priv = new BanTablePriv();\n+    // default to unsorted\n+    priv->sortColumn = -1;\n+\n+    // set up timer for auto refresh\n+    timer = new QTimer();\n+    connect(timer, SIGNAL(timeout()), SLOT(refresh()));\n+    timer->setInterval(MODEL_UPDATE_DELAY);\n+\n+    // load initial data\n+    refresh();\n+}\n+\n+void BanTableModel::startAutoRefresh()\n+{\n+    timer->start();\n+}\n+\n+void BanTableModel::stopAutoRefresh()\n+{\n+    timer->stop();\n+}\n+\n+int BanTableModel::rowCount(const QModelIndex &parent) const\n+{\n+    Q_UNUSED(parent);\n+    return priv->size();\n+}\n+\n+int BanTableModel::columnCount(const QModelIndex &parent) const\n+{\n+    Q_UNUSED(parent);\n+    return columns.length();;\n+}\n+\n+QVariant BanTableModel::data(const QModelIndex &index, int role) const\n+{\n+    if(!index.isValid())\n+        return QVariant();\n+\n+    CCombinedBan *rec = static_cast<CCombinedBan*>(index.internalPointer());\n+\n+    if (role == Qt::DisplayRole) {\n+        switch(index.column())\n+        {\n+        case Address:\n+            return QString::fromStdString(rec->subnet.ToString());\n+        case Bantime:\n+            //show time in users local timezone, not 64bit compatible!\n+            //TODO find a way to support 64bit timestamps\n+            boost::posix_time::ptime pt1 = boost::posix_time::from_time_t(rec->bantil);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32887492",
      "id" : 32887492,
      "original_commit_id" : "b5621faf909f31a0d6c41c1340f37b0b3235c38a",
      "original_position" : 123,
      "path" : "src/qt/bantablemodel.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315",
      "updated_at" : "2015-06-21T08:44:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32887492",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888653"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888653"
         }
      },
      "body" : "I was thinking about a typedef for this, what do you mean?",
      "commit_id" : "114c72213da9496a7126b41562bd91efd438ecf2",
      "created_at" : "2015-06-20T22:15:11Z",
      "diff_hunk" : "@@ -0,0 +1,192 @@\n+// Copyright (c) 2011-2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bantablemodel.h\"\n+\n+#include \"clientmodel.h\"\n+#include \"guiconstants.h\"\n+#include \"guiutil.h\"\n+\n+#include \"net.h\"\n+#include \"sync.h\"\n+#include \"utiltime.h\"\n+\n+#include <QDebug>\n+#include <QList>\n+#include <QTimer>\n+\n+#include <boost/date_time/posix_time/posix_time.hpp>\n+#include <boost/date_time/c_local_time_adjustor.hpp>\n+\n+// private implementation\n+class BanTablePriv\n+{\n+public:\n+    /** Local cache of peer information */\n+    QList<CCombinedBan> cachedBanlist;\n+    /** Column to sort nodes by */\n+    int sortColumn;\n+    /** Order (ascending or descending) to sort nodes by */\n+    Qt::SortOrder sortOrder;\n+\n+    /** Pull a full list of banned nodes from CNode into our cache */\n+    void refreshBanlist()\n+    {\n+        std::map<CSubNet, int64_t> banMap;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888653",
      "id" : 32888653,
      "original_commit_id" : "b5621faf909f31a0d6c41c1340f37b0b3235c38a",
      "original_position" : 36,
      "path" : "src/qt/bantablemodel.cpp",
      "position" : 35,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315",
      "updated_at" : "2015-06-21T08:44:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888653",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888665"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888665"
         }
      },
      "body" : "Could this be a Qt foreach? Would also be easy to convert to C++11 then :)?",
      "commit_id" : "114c72213da9496a7126b41562bd91efd438ecf2",
      "created_at" : "2015-06-20T22:16:11Z",
      "diff_hunk" : "@@ -0,0 +1,192 @@\n+// Copyright (c) 2011-2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bantablemodel.h\"\n+\n+#include \"clientmodel.h\"\n+#include \"guiconstants.h\"\n+#include \"guiutil.h\"\n+\n+#include \"net.h\"\n+#include \"sync.h\"\n+#include \"utiltime.h\"\n+\n+#include <QDebug>\n+#include <QList>\n+#include <QTimer>\n+\n+#include <boost/date_time/posix_time/posix_time.hpp>\n+#include <boost/date_time/c_local_time_adjustor.hpp>\n+\n+// private implementation\n+class BanTablePriv\n+{\n+public:\n+    /** Local cache of peer information */\n+    QList<CCombinedBan> cachedBanlist;\n+    /** Column to sort nodes by */\n+    int sortColumn;\n+    /** Order (ascending or descending) to sort nodes by */\n+    Qt::SortOrder sortOrder;\n+\n+    /** Pull a full list of banned nodes from CNode into our cache */\n+    void refreshBanlist()\n+    {\n+        std::map<CSubNet, int64_t> banMap;\n+        CNode::GetBanned(banMap);\n+\n+        cachedBanlist.clear();\n+#if QT_VERSION >= 0x040700\n+        cachedBanlist.reserve(banMap.size());\n+#endif\n+        std::map<CSubNet, int64_t>::iterator iter;\n+        for (iter = banMap.begin(); iter != banMap.end(); ++iter) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888665",
      "id" : 32888665,
      "original_commit_id" : "b5621faf909f31a0d6c41c1340f37b0b3235c38a",
      "original_position" : 44,
      "path" : "src/qt/bantablemodel.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315",
      "updated_at" : "2015-06-21T08:44:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888665",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888669"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888669"
         }
      },
      "body" : "Could this be ``int size() const``?",
      "commit_id" : "114c72213da9496a7126b41562bd91efd438ecf2",
      "created_at" : "2015-06-20T22:17:33Z",
      "diff_hunk" : "@@ -0,0 +1,192 @@\n+// Copyright (c) 2011-2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bantablemodel.h\"\n+\n+#include \"clientmodel.h\"\n+#include \"guiconstants.h\"\n+#include \"guiutil.h\"\n+\n+#include \"net.h\"\n+#include \"sync.h\"\n+#include \"utiltime.h\"\n+\n+#include <QDebug>\n+#include <QList>\n+#include <QTimer>\n+\n+#include <boost/date_time/posix_time/posix_time.hpp>\n+#include <boost/date_time/c_local_time_adjustor.hpp>\n+\n+// private implementation\n+class BanTablePriv\n+{\n+public:\n+    /** Local cache of peer information */\n+    QList<CCombinedBan> cachedBanlist;\n+    /** Column to sort nodes by */\n+    int sortColumn;\n+    /** Order (ascending or descending) to sort nodes by */\n+    Qt::SortOrder sortOrder;\n+\n+    /** Pull a full list of banned nodes from CNode into our cache */\n+    void refreshBanlist()\n+    {\n+        std::map<CSubNet, int64_t> banMap;\n+        CNode::GetBanned(banMap);\n+\n+        cachedBanlist.clear();\n+#if QT_VERSION >= 0x040700\n+        cachedBanlist.reserve(banMap.size());\n+#endif\n+        std::map<CSubNet, int64_t>::iterator iter;\n+        for (iter = banMap.begin(); iter != banMap.end(); ++iter) {\n+            CCombinedBan banEntry;\n+            banEntry.subnet = iter->first;\n+            banEntry.bantil = iter->second;\n+            cachedBanlist.append(banEntry);\n+        }\n+    }\n+\n+    int size()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888669",
      "id" : 32888669,
      "original_commit_id" : "b5621faf909f31a0d6c41c1340f37b0b3235c38a",
      "original_position" : 52,
      "path" : "src/qt/bantablemodel.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315",
      "updated_at" : "2015-06-21T08:44:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888669",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888727"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888727"
         }
      },
      "body" : "That else can be removed. I see you copied most of the code here from peertablemodel.cpp where all these suggestions would also fit and perhaps we should clean it up, to keep the codebase close together?",
      "commit_id" : "114c72213da9496a7126b41562bd91efd438ecf2",
      "created_at" : "2015-06-20T22:26:22Z",
      "diff_hunk" : "@@ -0,0 +1,192 @@\n+// Copyright (c) 2011-2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bantablemodel.h\"\n+\n+#include \"clientmodel.h\"\n+#include \"guiconstants.h\"\n+#include \"guiutil.h\"\n+\n+#include \"net.h\"\n+#include \"sync.h\"\n+#include \"utiltime.h\"\n+\n+#include <QDebug>\n+#include <QList>\n+#include <QTimer>\n+\n+#include <boost/date_time/posix_time/posix_time.hpp>\n+#include <boost/date_time/c_local_time_adjustor.hpp>\n+\n+// private implementation\n+class BanTablePriv\n+{\n+public:\n+    /** Local cache of peer information */\n+    QList<CCombinedBan> cachedBanlist;\n+    /** Column to sort nodes by */\n+    int sortColumn;\n+    /** Order (ascending or descending) to sort nodes by */\n+    Qt::SortOrder sortOrder;\n+\n+    /** Pull a full list of banned nodes from CNode into our cache */\n+    void refreshBanlist()\n+    {\n+        std::map<CSubNet, int64_t> banMap;\n+        CNode::GetBanned(banMap);\n+\n+        cachedBanlist.clear();\n+#if QT_VERSION >= 0x040700\n+        cachedBanlist.reserve(banMap.size());\n+#endif\n+        std::map<CSubNet, int64_t>::iterator iter;\n+        for (iter = banMap.begin(); iter != banMap.end(); ++iter) {\n+            CCombinedBan banEntry;\n+            banEntry.subnet = iter->first;\n+            banEntry.bantil = iter->second;\n+            cachedBanlist.append(banEntry);\n+        }\n+    }\n+\n+    int size()\n+    {\n+        return cachedBanlist.size();\n+    }\n+\n+    CCombinedBan *index(int idx)\n+    {\n+        if(idx >= 0 && idx < cachedBanlist.size()) {\n+            return &cachedBanlist[idx];\n+        } else {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888727",
      "id" : 32888727,
      "original_commit_id" : "b5621faf909f31a0d6c41c1340f37b0b3235c38a",
      "original_position" : 61,
      "path" : "src/qt/bantablemodel.cpp",
      "position" : 61,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315",
      "updated_at" : "2015-06-21T08:44:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888727",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888737"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888737"
         }
      },
      "body" : "What about ``QDateTime::fromTime_t()``?\r\n\r\n``QDateTime::fromTime_t(rec->bantil).toString()`` didn't test it...",
      "commit_id" : "114c72213da9496a7126b41562bd91efd438ecf2",
      "created_at" : "2015-06-20T22:28:20Z",
      "diff_hunk" : "@@ -0,0 +1,192 @@\n+// Copyright (c) 2011-2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bantablemodel.h\"\n+\n+#include \"clientmodel.h\"\n+#include \"guiconstants.h\"\n+#include \"guiutil.h\"\n+\n+#include \"net.h\"\n+#include \"sync.h\"\n+#include \"utiltime.h\"\n+\n+#include <QDebug>\n+#include <QList>\n+#include <QTimer>\n+\n+#include <boost/date_time/posix_time/posix_time.hpp>\n+#include <boost/date_time/c_local_time_adjustor.hpp>\n+\n+// private implementation\n+class BanTablePriv\n+{\n+public:\n+    /** Local cache of peer information */\n+    QList<CCombinedBan> cachedBanlist;\n+    /** Column to sort nodes by */\n+    int sortColumn;\n+    /** Order (ascending or descending) to sort nodes by */\n+    Qt::SortOrder sortOrder;\n+\n+    /** Pull a full list of banned nodes from CNode into our cache */\n+    void refreshBanlist()\n+    {\n+        std::map<CSubNet, int64_t> banMap;\n+        CNode::GetBanned(banMap);\n+\n+        cachedBanlist.clear();\n+#if QT_VERSION >= 0x040700\n+        cachedBanlist.reserve(banMap.size());\n+#endif\n+        std::map<CSubNet, int64_t>::iterator iter;\n+        for (iter = banMap.begin(); iter != banMap.end(); ++iter) {\n+            CCombinedBan banEntry;\n+            banEntry.subnet = iter->first;\n+            banEntry.bantil = iter->second;\n+            cachedBanlist.append(banEntry);\n+        }\n+    }\n+\n+    int size()\n+    {\n+        return cachedBanlist.size();\n+    }\n+\n+    CCombinedBan *index(int idx)\n+    {\n+        if(idx >= 0 && idx < cachedBanlist.size()) {\n+            return &cachedBanlist[idx];\n+        } else {\n+            return 0;\n+        }\n+    }\n+};\n+\n+BanTableModel::BanTableModel(ClientModel *parent) :\n+    QAbstractTableModel(parent),\n+    clientModel(parent),\n+    timer(0)\n+{\n+    columns << tr(\"IP/Netmask\") << tr(\"Banned Until\");\n+    priv = new BanTablePriv();\n+    // default to unsorted\n+    priv->sortColumn = -1;\n+\n+    // set up timer for auto refresh\n+    timer = new QTimer();\n+    connect(timer, SIGNAL(timeout()), SLOT(refresh()));\n+    timer->setInterval(MODEL_UPDATE_DELAY);\n+\n+    // load initial data\n+    refresh();\n+}\n+\n+void BanTableModel::startAutoRefresh()\n+{\n+    timer->start();\n+}\n+\n+void BanTableModel::stopAutoRefresh()\n+{\n+    timer->stop();\n+}\n+\n+int BanTableModel::rowCount(const QModelIndex &parent) const\n+{\n+    Q_UNUSED(parent);\n+    return priv->size();\n+}\n+\n+int BanTableModel::columnCount(const QModelIndex &parent) const\n+{\n+    Q_UNUSED(parent);\n+    return columns.length();;\n+}\n+\n+QVariant BanTableModel::data(const QModelIndex &index, int role) const\n+{\n+    if(!index.isValid())\n+        return QVariant();\n+\n+    CCombinedBan *rec = static_cast<CCombinedBan*>(index.internalPointer());\n+\n+    if (role == Qt::DisplayRole) {\n+        switch(index.column())\n+        {\n+        case Address:\n+            return QString::fromStdString(rec->subnet.ToString());\n+        case Bantime:\n+            //show time in users local timezone, not 64bit compatible!\n+            //TODO find a way to support 64bit timestamps\n+            boost::posix_time::ptime pt1 = boost::posix_time::from_time_t(rec->bantil);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888737",
      "id" : 32888737,
      "original_commit_id" : "b5621faf909f31a0d6c41c1340f37b0b3235c38a",
      "original_position" : 123,
      "path" : "src/qt/bantablemodel.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315",
      "updated_at" : "2015-06-21T08:44:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888737",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888789"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888789"
         }
      },
      "body" : "Is int the right type here? I tried ``(QVariant)`` which also works.",
      "commit_id" : "114c72213da9496a7126b41562bd91efd438ecf2",
      "created_at" : "2015-06-20T22:31:36Z",
      "diff_hunk" : "@@ -0,0 +1,192 @@\n+// Copyright (c) 2011-2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bantablemodel.h\"\n+\n+#include \"clientmodel.h\"\n+#include \"guiconstants.h\"\n+#include \"guiutil.h\"\n+\n+#include \"net.h\"\n+#include \"sync.h\"\n+#include \"utiltime.h\"\n+\n+#include <QDebug>\n+#include <QList>\n+#include <QTimer>\n+\n+#include <boost/date_time/posix_time/posix_time.hpp>\n+#include <boost/date_time/c_local_time_adjustor.hpp>\n+\n+// private implementation\n+class BanTablePriv\n+{\n+public:\n+    /** Local cache of peer information */\n+    QList<CCombinedBan> cachedBanlist;\n+    /** Column to sort nodes by */\n+    int sortColumn;\n+    /** Order (ascending or descending) to sort nodes by */\n+    Qt::SortOrder sortOrder;\n+\n+    /** Pull a full list of banned nodes from CNode into our cache */\n+    void refreshBanlist()\n+    {\n+        std::map<CSubNet, int64_t> banMap;\n+        CNode::GetBanned(banMap);\n+\n+        cachedBanlist.clear();\n+#if QT_VERSION >= 0x040700\n+        cachedBanlist.reserve(banMap.size());\n+#endif\n+        std::map<CSubNet, int64_t>::iterator iter;\n+        for (iter = banMap.begin(); iter != banMap.end(); ++iter) {\n+            CCombinedBan banEntry;\n+            banEntry.subnet = iter->first;\n+            banEntry.bantil = iter->second;\n+            cachedBanlist.append(banEntry);\n+        }\n+    }\n+\n+    int size()\n+    {\n+        return cachedBanlist.size();\n+    }\n+\n+    CCombinedBan *index(int idx)\n+    {\n+        if(idx >= 0 && idx < cachedBanlist.size()) {\n+            return &cachedBanlist[idx];\n+        } else {\n+            return 0;\n+        }\n+    }\n+};\n+\n+BanTableModel::BanTableModel(ClientModel *parent) :\n+    QAbstractTableModel(parent),\n+    clientModel(parent),\n+    timer(0)\n+{\n+    columns << tr(\"IP/Netmask\") << tr(\"Banned Until\");\n+    priv = new BanTablePriv();\n+    // default to unsorted\n+    priv->sortColumn = -1;\n+\n+    // set up timer for auto refresh\n+    timer = new QTimer();\n+    connect(timer, SIGNAL(timeout()), SLOT(refresh()));\n+    timer->setInterval(MODEL_UPDATE_DELAY);\n+\n+    // load initial data\n+    refresh();\n+}\n+\n+void BanTableModel::startAutoRefresh()\n+{\n+    timer->start();\n+}\n+\n+void BanTableModel::stopAutoRefresh()\n+{\n+    timer->stop();\n+}\n+\n+int BanTableModel::rowCount(const QModelIndex &parent) const\n+{\n+    Q_UNUSED(parent);\n+    return priv->size();\n+}\n+\n+int BanTableModel::columnCount(const QModelIndex &parent) const\n+{\n+    Q_UNUSED(parent);\n+    return columns.length();;\n+}\n+\n+QVariant BanTableModel::data(const QModelIndex &index, int role) const\n+{\n+    if(!index.isValid())\n+        return QVariant();\n+\n+    CCombinedBan *rec = static_cast<CCombinedBan*>(index.internalPointer());\n+\n+    if (role == Qt::DisplayRole) {\n+        switch(index.column())\n+        {\n+        case Address:\n+            return QString::fromStdString(rec->subnet.ToString());\n+        case Bantime:\n+            //show time in users local timezone, not 64bit compatible!\n+            //TODO find a way to support 64bit timestamps\n+            boost::posix_time::ptime pt1 = boost::posix_time::from_time_t(rec->bantil);\n+            boost::posix_time::ptime pt2 = boost::date_time::c_local_adjustor<boost::posix_time::ptime>::utc_to_local(pt1);\n+            std::stringstream ss;\n+            ss << pt2;\n+            return QString::fromStdString(ss.str());\n+        }\n+    } else if (role == Qt::TextAlignmentRole) {\n+        if (index.column() == Bantime)\n+            return (int)(Qt::AlignRight | Qt::AlignVCenter);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888789",
      "id" : 32888789,
      "original_commit_id" : "b5621faf909f31a0d6c41c1340f37b0b3235c38a",
      "original_position" : 131,
      "path" : "src/qt/bantablemodel.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315",
      "updated_at" : "2015-06-21T08:44:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888789",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888800"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888800"
         }
      },
      "body" : "Same as above unneeded else.",
      "commit_id" : "114c72213da9496a7126b41562bd91efd438ecf2",
      "created_at" : "2015-06-20T22:32:25Z",
      "diff_hunk" : "@@ -0,0 +1,192 @@\n+// Copyright (c) 2011-2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bantablemodel.h\"\n+\n+#include \"clientmodel.h\"\n+#include \"guiconstants.h\"\n+#include \"guiutil.h\"\n+\n+#include \"net.h\"\n+#include \"sync.h\"\n+#include \"utiltime.h\"\n+\n+#include <QDebug>\n+#include <QList>\n+#include <QTimer>\n+\n+#include <boost/date_time/posix_time/posix_time.hpp>\n+#include <boost/date_time/c_local_time_adjustor.hpp>\n+\n+// private implementation\n+class BanTablePriv\n+{\n+public:\n+    /** Local cache of peer information */\n+    QList<CCombinedBan> cachedBanlist;\n+    /** Column to sort nodes by */\n+    int sortColumn;\n+    /** Order (ascending or descending) to sort nodes by */\n+    Qt::SortOrder sortOrder;\n+\n+    /** Pull a full list of banned nodes from CNode into our cache */\n+    void refreshBanlist()\n+    {\n+        std::map<CSubNet, int64_t> banMap;\n+        CNode::GetBanned(banMap);\n+\n+        cachedBanlist.clear();\n+#if QT_VERSION >= 0x040700\n+        cachedBanlist.reserve(banMap.size());\n+#endif\n+        std::map<CSubNet, int64_t>::iterator iter;\n+        for (iter = banMap.begin(); iter != banMap.end(); ++iter) {\n+            CCombinedBan banEntry;\n+            banEntry.subnet = iter->first;\n+            banEntry.bantil = iter->second;\n+            cachedBanlist.append(banEntry);\n+        }\n+    }\n+\n+    int size()\n+    {\n+        return cachedBanlist.size();\n+    }\n+\n+    CCombinedBan *index(int idx)\n+    {\n+        if(idx >= 0 && idx < cachedBanlist.size()) {\n+            return &cachedBanlist[idx];\n+        } else {\n+            return 0;\n+        }\n+    }\n+};\n+\n+BanTableModel::BanTableModel(ClientModel *parent) :\n+    QAbstractTableModel(parent),\n+    clientModel(parent),\n+    timer(0)\n+{\n+    columns << tr(\"IP/Netmask\") << tr(\"Banned Until\");\n+    priv = new BanTablePriv();\n+    // default to unsorted\n+    priv->sortColumn = -1;\n+\n+    // set up timer for auto refresh\n+    timer = new QTimer();\n+    connect(timer, SIGNAL(timeout()), SLOT(refresh()));\n+    timer->setInterval(MODEL_UPDATE_DELAY);\n+\n+    // load initial data\n+    refresh();\n+}\n+\n+void BanTableModel::startAutoRefresh()\n+{\n+    timer->start();\n+}\n+\n+void BanTableModel::stopAutoRefresh()\n+{\n+    timer->stop();\n+}\n+\n+int BanTableModel::rowCount(const QModelIndex &parent) const\n+{\n+    Q_UNUSED(parent);\n+    return priv->size();\n+}\n+\n+int BanTableModel::columnCount(const QModelIndex &parent) const\n+{\n+    Q_UNUSED(parent);\n+    return columns.length();;\n+}\n+\n+QVariant BanTableModel::data(const QModelIndex &index, int role) const\n+{\n+    if(!index.isValid())\n+        return QVariant();\n+\n+    CCombinedBan *rec = static_cast<CCombinedBan*>(index.internalPointer());\n+\n+    if (role == Qt::DisplayRole) {\n+        switch(index.column())\n+        {\n+        case Address:\n+            return QString::fromStdString(rec->subnet.ToString());\n+        case Bantime:\n+            //show time in users local timezone, not 64bit compatible!\n+            //TODO find a way to support 64bit timestamps\n+            boost::posix_time::ptime pt1 = boost::posix_time::from_time_t(rec->bantil);\n+            boost::posix_time::ptime pt2 = boost::date_time::c_local_adjustor<boost::posix_time::ptime>::utc_to_local(pt1);\n+            std::stringstream ss;\n+            ss << pt2;\n+            return QString::fromStdString(ss.str());\n+        }\n+    } else if (role == Qt::TextAlignmentRole) {\n+        if (index.column() == Bantime)\n+            return (int)(Qt::AlignRight | Qt::AlignVCenter);\n+    }\n+\n+    return QVariant();\n+}\n+\n+QVariant BanTableModel::headerData(int section, Qt::Orientation orientation, int role) const\n+{\n+    if(orientation == Qt::Horizontal)\n+    {\n+        if(role == Qt::DisplayRole && section < columns.size())\n+        {\n+            return columns[section];\n+        }\n+    }\n+    return QVariant();\n+}\n+\n+Qt::ItemFlags BanTableModel::flags(const QModelIndex &index) const\n+{\n+    if(!index.isValid())\n+        return 0;\n+\n+    Qt::ItemFlags retval = Qt::ItemIsSelectable | Qt::ItemIsEnabled;\n+    return retval;\n+}\n+\n+QModelIndex BanTableModel::index(int row, int column, const QModelIndex &parent) const\n+{\n+    Q_UNUSED(parent);\n+    CCombinedBan *data = priv->index(row);\n+\n+    if (data)\n+    {\n+        return createIndex(row, column, data);\n+    }\n+    else",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888800",
      "id" : 32888800,
      "original_commit_id" : "b5621faf909f31a0d6c41c1340f37b0b3235c38a",
      "original_position" : 167,
      "path" : "src/qt/bantablemodel.cpp",
      "position" : 163,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315",
      "updated_at" : "2015-06-21T08:44:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888800",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888851"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888851"
         }
      },
      "body" : "We have a struct here and a std::map for similar stuff... is there a way to unify these 2?",
      "commit_id" : "114c72213da9496a7126b41562bd91efd438ecf2",
      "created_at" : "2015-06-20T22:38:14Z",
      "diff_hunk" : "@@ -0,0 +1,66 @@\n+// Copyright (c) 2011-2013 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_QT_BANTABLEMODEL_H\n+#define BITCOIN_QT_BANTABLEMODEL_H\n+\n+#include \"main.h\"\n+#include \"net.h\"\n+\n+#include <QAbstractTableModel>\n+#include <QStringList>\n+\n+class ClientModel;\n+class BanTablePriv;\n+\n+QT_BEGIN_NAMESPACE\n+class QTimer;\n+QT_END_NAMESPACE\n+\n+struct CCombinedBan {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888851",
      "id" : 32888851,
      "original_commit_id" : "b5621faf909f31a0d6c41c1340f37b0b3235c38a",
      "original_position" : 21,
      "path" : "src/qt/bantablemodel.h",
      "position" : 20,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315",
      "updated_at" : "2015-06-21T08:44:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888851",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888852"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888852"
         }
      },
      "body" : "This is included in the header already.",
      "commit_id" : "114c72213da9496a7126b41562bd91efd438ecf2",
      "created_at" : "2015-06-20T22:38:34Z",
      "diff_hunk" : "@@ -0,0 +1,192 @@\n+// Copyright (c) 2011-2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bantablemodel.h\"\n+\n+#include \"clientmodel.h\"\n+#include \"guiconstants.h\"\n+#include \"guiutil.h\"\n+\n+#include \"net.h\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888852",
      "id" : 32888852,
      "original_commit_id" : "b5621faf909f31a0d6c41c1340f37b0b3235c38a",
      "original_position" : 11,
      "path" : "src/qt/bantablemodel.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315",
      "updated_at" : "2015-06-21T08:44:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888852",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888876"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888876"
         }
      },
      "body" : "You are repeating some translation text, perhaps there is an efficient way to reduce that?",
      "commit_id" : "114c72213da9496a7126b41562bd91efd438ecf2",
      "created_at" : "2015-06-20T22:43:21Z",
      "diff_hunk" : "@@ -311,23 +313,66 @@ void RPCConsole::setClientModel(ClientModel *model)\n         ui->peerWidget->setColumnWidth(PeerTableModel::Address, ADDRESS_COLUMN_WIDTH);\n         ui->peerWidget->setColumnWidth(PeerTableModel::Subversion, SUBVERSION_COLUMN_WIDTH);\n         ui->peerWidget->setColumnWidth(PeerTableModel::Ping, PING_COLUMN_WIDTH);\n+        ui->peerWidget->horizontalHeader()->setStretchLastSection(true);\n \n         // create context menu actions\n-        QAction* disconnectAction = new QAction(tr(\"&Disconnect Node\"), this);\n+        QAction* disconnectAction   = new QAction(tr(\"&Disconnect Node\"), this);\n+        QAction* banAction1h        = new QAction(tr(\"&Ban Node for 1 hour\"), this);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888876",
      "id" : 32888876,
      "original_commit_id" : "b5621faf909f31a0d6c41c1340f37b0b3235c38a",
      "original_position" : 27,
      "path" : "src/qt/rpcconsole.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315",
      "updated_at" : "2015-06-21T08:44:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888876",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888887"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888887"
         }
      },
      "body" : "Seems you reintroduced that over fDisconnect flag?",
      "commit_id" : "114c72213da9496a7126b41562bd91efd438ecf2",
      "created_at" : "2015-06-20T22:46:38Z",
      "diff_hunk" : "@@ -692,6 +747,40 @@ void RPCConsole::disconnectSelectedNode()\n     }\n }\n \n+void RPCConsole::banSelectedNode(int bantime)\n+{\n+    // Get currently selected peer address\n+    QString strNode = GUIUtil::getEntryData(ui->peerWidget, 0, PeerTableModel::Address);\n+    // Find possible nodes, ban it and clear the selected node\n+    if (CNode *bannedNode = FindNode(strNode.toStdString())) {\n+        std::string nStr = strNode.toStdString();\n+        std::string addr;\n+        int port = 0;\n+        SplitHostPort(nStr, port, addr);\n+\n+        CNode::Ban(CNetAddr(addr), bantime);\n+        bannedNode->CloseSocketDisconnect();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888887",
      "id" : 32888887,
      "original_commit_id" : "b5621faf909f31a0d6c41c1340f37b0b3235c38a",
      "original_position" : 136,
      "path" : "src/qt/rpcconsole.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315",
      "updated_at" : "2015-06-21T08:44:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888887",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888892"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888892"
         }
      },
      "body" : "This could also use a NULL pointer check for clientModel IMHO.",
      "commit_id" : "114c72213da9496a7126b41562bd91efd438ecf2",
      "created_at" : "2015-06-20T22:47:33Z",
      "diff_hunk" : "@@ -699,3 +788,10 @@ void RPCConsole::clearSelectedNode()\n     ui->detailWidget->hide();\n     ui->peerHeading->setText(tr(\"Select a peer to view detailed information.\"));\n }\n+\n+void RPCConsole::showOrHideBanTableIfRequired()\n+{\n+    bool visible = clientModel->getBanTableModel()->shouldShow();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32888892",
      "id" : 32888892,
      "original_commit_id" : "b5621faf909f31a0d6c41c1340f37b0b3235c38a",
      "original_position" : 168,
      "path" : "src/qt/rpcconsole.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315",
      "updated_at" : "2015-06-21T08:44:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32888892",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Great pull IMHO, sorry for hitting you hard with that bunch of comments...",
      "created_at" : "2015-06-20T22:49:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6315#issuecomment-113835106",
      "id" : 113835106,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6315",
      "updated_at" : "2015-06-20T22:49:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/113835106",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "body" : "Thanks @Diapolo for the review. Appricate detailed feedback.\r\nWill fix all your points (especially the miss transaction to fDisconnect!).",
      "created_at" : "2015-06-21T06:57:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6315#issuecomment-113870172",
      "id" : 113870172,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6315",
      "updated_at" : "2015-06-21T06:57:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/113870172",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32891484"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32891484"
         }
      },
      "body" : "I think this won't work either. The [docs](http://doc.qt.io/qt-5.4/qdatetime.html#fromTime_t) are saying: `QDateTime QDateTime::fromTime_t(uint seconds)` (uint!).",
      "commit_id" : "114c72213da9496a7126b41562bd91efd438ecf2",
      "created_at" : "2015-06-21T08:10:18Z",
      "diff_hunk" : "@@ -0,0 +1,192 @@\n+// Copyright (c) 2011-2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bantablemodel.h\"\n+\n+#include \"clientmodel.h\"\n+#include \"guiconstants.h\"\n+#include \"guiutil.h\"\n+\n+#include \"net.h\"\n+#include \"sync.h\"\n+#include \"utiltime.h\"\n+\n+#include <QDebug>\n+#include <QList>\n+#include <QTimer>\n+\n+#include <boost/date_time/posix_time/posix_time.hpp>\n+#include <boost/date_time/c_local_time_adjustor.hpp>\n+\n+// private implementation\n+class BanTablePriv\n+{\n+public:\n+    /** Local cache of peer information */\n+    QList<CCombinedBan> cachedBanlist;\n+    /** Column to sort nodes by */\n+    int sortColumn;\n+    /** Order (ascending or descending) to sort nodes by */\n+    Qt::SortOrder sortOrder;\n+\n+    /** Pull a full list of banned nodes from CNode into our cache */\n+    void refreshBanlist()\n+    {\n+        std::map<CSubNet, int64_t> banMap;\n+        CNode::GetBanned(banMap);\n+\n+        cachedBanlist.clear();\n+#if QT_VERSION >= 0x040700\n+        cachedBanlist.reserve(banMap.size());\n+#endif\n+        std::map<CSubNet, int64_t>::iterator iter;\n+        for (iter = banMap.begin(); iter != banMap.end(); ++iter) {\n+            CCombinedBan banEntry;\n+            banEntry.subnet = iter->first;\n+            banEntry.bantil = iter->second;\n+            cachedBanlist.append(banEntry);\n+        }\n+    }\n+\n+    int size()\n+    {\n+        return cachedBanlist.size();\n+    }\n+\n+    CCombinedBan *index(int idx)\n+    {\n+        if(idx >= 0 && idx < cachedBanlist.size()) {\n+            return &cachedBanlist[idx];\n+        } else {\n+            return 0;\n+        }\n+    }\n+};\n+\n+BanTableModel::BanTableModel(ClientModel *parent) :\n+    QAbstractTableModel(parent),\n+    clientModel(parent),\n+    timer(0)\n+{\n+    columns << tr(\"IP/Netmask\") << tr(\"Banned Until\");\n+    priv = new BanTablePriv();\n+    // default to unsorted\n+    priv->sortColumn = -1;\n+\n+    // set up timer for auto refresh\n+    timer = new QTimer();\n+    connect(timer, SIGNAL(timeout()), SLOT(refresh()));\n+    timer->setInterval(MODEL_UPDATE_DELAY);\n+\n+    // load initial data\n+    refresh();\n+}\n+\n+void BanTableModel::startAutoRefresh()\n+{\n+    timer->start();\n+}\n+\n+void BanTableModel::stopAutoRefresh()\n+{\n+    timer->stop();\n+}\n+\n+int BanTableModel::rowCount(const QModelIndex &parent) const\n+{\n+    Q_UNUSED(parent);\n+    return priv->size();\n+}\n+\n+int BanTableModel::columnCount(const QModelIndex &parent) const\n+{\n+    Q_UNUSED(parent);\n+    return columns.length();;\n+}\n+\n+QVariant BanTableModel::data(const QModelIndex &index, int role) const\n+{\n+    if(!index.isValid())\n+        return QVariant();\n+\n+    CCombinedBan *rec = static_cast<CCombinedBan*>(index.internalPointer());\n+\n+    if (role == Qt::DisplayRole) {\n+        switch(index.column())\n+        {\n+        case Address:\n+            return QString::fromStdString(rec->subnet.ToString());\n+        case Bantime:\n+            //show time in users local timezone, not 64bit compatible!\n+            //TODO find a way to support 64bit timestamps\n+            boost::posix_time::ptime pt1 = boost::posix_time::from_time_t(rec->bantil);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32891484",
      "id" : 32891484,
      "original_commit_id" : "b5621faf909f31a0d6c41c1340f37b0b3235c38a",
      "original_position" : 123,
      "path" : "src/qt/bantablemodel.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315",
      "updated_at" : "2015-06-21T08:44:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32891484",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32891552"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32891552"
         }
      },
      "body" : "Found a fix! Pushed.",
      "commit_id" : "114c72213da9496a7126b41562bd91efd438ecf2",
      "created_at" : "2015-06-21T08:25:37Z",
      "diff_hunk" : "@@ -0,0 +1,192 @@\n+// Copyright (c) 2011-2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bantablemodel.h\"\n+\n+#include \"clientmodel.h\"\n+#include \"guiconstants.h\"\n+#include \"guiutil.h\"\n+\n+#include \"net.h\"\n+#include \"sync.h\"\n+#include \"utiltime.h\"\n+\n+#include <QDebug>\n+#include <QList>\n+#include <QTimer>\n+\n+#include <boost/date_time/posix_time/posix_time.hpp>\n+#include <boost/date_time/c_local_time_adjustor.hpp>\n+\n+// private implementation\n+class BanTablePriv\n+{\n+public:\n+    /** Local cache of peer information */\n+    QList<CCombinedBan> cachedBanlist;\n+    /** Column to sort nodes by */\n+    int sortColumn;\n+    /** Order (ascending or descending) to sort nodes by */\n+    Qt::SortOrder sortOrder;\n+\n+    /** Pull a full list of banned nodes from CNode into our cache */\n+    void refreshBanlist()\n+    {\n+        std::map<CSubNet, int64_t> banMap;\n+        CNode::GetBanned(banMap);\n+\n+        cachedBanlist.clear();\n+#if QT_VERSION >= 0x040700\n+        cachedBanlist.reserve(banMap.size());\n+#endif\n+        std::map<CSubNet, int64_t>::iterator iter;\n+        for (iter = banMap.begin(); iter != banMap.end(); ++iter) {\n+            CCombinedBan banEntry;\n+            banEntry.subnet = iter->first;\n+            banEntry.bantil = iter->second;\n+            cachedBanlist.append(banEntry);\n+        }\n+    }\n+\n+    int size()\n+    {\n+        return cachedBanlist.size();\n+    }\n+\n+    CCombinedBan *index(int idx)\n+    {\n+        if(idx >= 0 && idx < cachedBanlist.size()) {\n+            return &cachedBanlist[idx];\n+        } else {\n+            return 0;\n+        }\n+    }\n+};\n+\n+BanTableModel::BanTableModel(ClientModel *parent) :\n+    QAbstractTableModel(parent),\n+    clientModel(parent),\n+    timer(0)\n+{\n+    columns << tr(\"IP/Netmask\") << tr(\"Banned Until\");\n+    priv = new BanTablePriv();\n+    // default to unsorted\n+    priv->sortColumn = -1;\n+\n+    // set up timer for auto refresh\n+    timer = new QTimer();\n+    connect(timer, SIGNAL(timeout()), SLOT(refresh()));\n+    timer->setInterval(MODEL_UPDATE_DELAY);\n+\n+    // load initial data\n+    refresh();\n+}\n+\n+void BanTableModel::startAutoRefresh()\n+{\n+    timer->start();\n+}\n+\n+void BanTableModel::stopAutoRefresh()\n+{\n+    timer->stop();\n+}\n+\n+int BanTableModel::rowCount(const QModelIndex &parent) const\n+{\n+    Q_UNUSED(parent);\n+    return priv->size();\n+}\n+\n+int BanTableModel::columnCount(const QModelIndex &parent) const\n+{\n+    Q_UNUSED(parent);\n+    return columns.length();;\n+}\n+\n+QVariant BanTableModel::data(const QModelIndex &index, int role) const\n+{\n+    if(!index.isValid())\n+        return QVariant();\n+\n+    CCombinedBan *rec = static_cast<CCombinedBan*>(index.internalPointer());\n+\n+    if (role == Qt::DisplayRole) {\n+        switch(index.column())\n+        {\n+        case Address:\n+            return QString::fromStdString(rec->subnet.ToString());\n+        case Bantime:\n+            //show time in users local timezone, not 64bit compatible!\n+            //TODO find a way to support 64bit timestamps\n+            boost::posix_time::ptime pt1 = boost::posix_time::from_time_t(rec->bantil);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32891552",
      "id" : 32891552,
      "original_commit_id" : "b5621faf909f31a0d6c41c1340f37b0b3235c38a",
      "original_position" : 123,
      "path" : "src/qt/bantablemodel.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315",
      "updated_at" : "2015-06-21T08:44:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32891552",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32891637"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32891637"
         }
      },
      "body" : "Not sure if this else can be removed. What if the `QTableView` requests a row at index which is not in the cache `QList`. Obviously it should not happen because the table size is driven by the size of the cache `QList`. But I prefer keeping this.",
      "commit_id" : "114c72213da9496a7126b41562bd91efd438ecf2",
      "created_at" : "2015-06-21T08:37:18Z",
      "diff_hunk" : "@@ -0,0 +1,192 @@\n+// Copyright (c) 2011-2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bantablemodel.h\"\n+\n+#include \"clientmodel.h\"\n+#include \"guiconstants.h\"\n+#include \"guiutil.h\"\n+\n+#include \"net.h\"\n+#include \"sync.h\"\n+#include \"utiltime.h\"\n+\n+#include <QDebug>\n+#include <QList>\n+#include <QTimer>\n+\n+#include <boost/date_time/posix_time/posix_time.hpp>\n+#include <boost/date_time/c_local_time_adjustor.hpp>\n+\n+// private implementation\n+class BanTablePriv\n+{\n+public:\n+    /** Local cache of peer information */\n+    QList<CCombinedBan> cachedBanlist;\n+    /** Column to sort nodes by */\n+    int sortColumn;\n+    /** Order (ascending or descending) to sort nodes by */\n+    Qt::SortOrder sortOrder;\n+\n+    /** Pull a full list of banned nodes from CNode into our cache */\n+    void refreshBanlist()\n+    {\n+        std::map<CSubNet, int64_t> banMap;\n+        CNode::GetBanned(banMap);\n+\n+        cachedBanlist.clear();\n+#if QT_VERSION >= 0x040700\n+        cachedBanlist.reserve(banMap.size());\n+#endif\n+        std::map<CSubNet, int64_t>::iterator iter;\n+        for (iter = banMap.begin(); iter != banMap.end(); ++iter) {\n+            CCombinedBan banEntry;\n+            banEntry.subnet = iter->first;\n+            banEntry.bantil = iter->second;\n+            cachedBanlist.append(banEntry);\n+        }\n+    }\n+\n+    int size()\n+    {\n+        return cachedBanlist.size();\n+    }\n+\n+    CCombinedBan *index(int idx)\n+    {\n+        if(idx >= 0 && idx < cachedBanlist.size()) {\n+            return &cachedBanlist[idx];\n+        } else {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6315#discussion_r32891637",
      "id" : 32891637,
      "original_commit_id" : "b5621faf909f31a0d6c41c1340f37b0b3235c38a",
      "original_position" : 61,
      "path" : "src/qt/bantablemodel.cpp",
      "position" : 61,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6315",
      "updated_at" : "2015-06-21T08:44:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/32891637",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   }
]
