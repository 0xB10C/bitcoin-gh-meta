[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34038636"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34038636"
         }
      },
      "body" : "Not convinced that this code actually belongs in `rpcprotocol`, it is here because that file is shared between bitcoin-cli and bitcoind server, but conceptually it exists on a higher level than the protocol. Feel free to suggest a better place.",
      "commit_id" : "492ee66d296067a6ed6f0bcf8809b40018400147",
      "created_at" : "2015-07-07T13:29:16Z",
      "diff_hunk" : "@@ -287,3 +289,68 @@ UniValue JSONRPCError(int code, const string& message)\n     error.push_back(Pair(\"message\", message));\n     return error;\n }\n+\n+/** Username used when cookie authentication is in use (arbitrary, only for",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34038636",
      "id" : 34038636,
      "original_commit_id" : "492ee66d296067a6ed6f0bcf8809b40018400147",
      "original_position" : 21,
      "path" : "src/rpcprotocol.cpp",
      "position" : 21,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388",
      "updated_at" : "2015-07-07T13:29:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34038636",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34055509"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34055509"
         }
      },
      "body" : "This error should be changed. It will be shown if bitcoin-cli is used while bitcoind is not running, so it's confusing to tell the user to just set a password (which will indeed make this message go away, but just enough to get to `connection refused` :-).",
      "commit_id" : "492ee66d296067a6ed6f0bcf8809b40018400147",
      "created_at" : "2015-07-07T15:49:01Z",
      "diff_hunk" : "@@ -97,11 +97,19 @@ static bool AppInitRPC(int argc, char* argv[])\n \n UniValue CallRPC(const string& strMethod, const UniValue& params)\n {\n-    if (mapArgs[\"-rpcuser\"] == \"\" && mapArgs[\"-rpcpassword\"] == \"\")\n-        throw runtime_error(strprintf(\n-            _(\"You must set rpcpassword=<password> in the configuration file:\\n%s\\n\"\n-              \"If the file does not exist, create it with owner-readable-only file permissions.\"),\n-                GetConfigFile().string().c_str()));\n+    std::string strRPCUserColonPass;\n+    if (mapArgs[\"-rpcpassword\"] == \"\") {\n+        /* Try fall back to cookie-based authentication if no password is provided */\n+        if (!GetAuthCookie(&strRPCUserColonPass)) {\n+            throw runtime_error(strprintf(",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6388#discussion_r34055509",
      "id" : 34055509,
      "original_commit_id" : "492ee66d296067a6ed6f0bcf8809b40018400147",
      "original_position" : 13,
      "path" : "src/bitcoin-cli.cpp",
      "position" : 13,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6388",
      "updated_at" : "2015-07-07T15:49:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/34055509",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
