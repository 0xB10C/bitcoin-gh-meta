[
   {
      "body" : "Mind fixing that BIP link? 404",
      "created_at" : "2015-06-21T18:28:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-113938242",
      "id" : 113938242,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-06-21T18:28:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/113938242",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Fixed.\n\nOn Sun, Jun 21, 2015 at 11:28 AM, Peter Todd <notifications@github.com>\nwrote:\n\n> Mind fixing that BIP link? 404\n>\n> Ã¢ÂÂ\n> Reply to this email directly or view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-113938242>.\n>\n",
      "created_at" : "2015-06-21T18:39:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-113938911",
      "id" : 113938911,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-06-21T18:39:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/113938911",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "body" : "Now again, could you please do up a quick demo example app that actually uses this? e.g. like my https://github.com/petertodd/checklocktimeverify-demos/blob/master/micropayment-channel.py\r\n\r\nDoesn't have to be much, but we really need a worked out example here... Notably, see how without a way to fix tx mutability the nSequence proposal really isn't any different in practice than just signing increasingly decreasing nLockTime's? Because if you could safely sign the transaction it'd already be mined and thus you don't need a relative nSequence - an absolute nLockTime calculated from the height/time of the tx you know already is in the chain is fine.\r\n\r\nIMO there's no reason to merge this until it has a safe use-case that provides a concrete benefit over the existing status quo; a simple change in what exact number is being signed isn't a concrete benefit.",
      "created_at" : "2015-06-22T00:05:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-113970979",
      "id" : 113970979,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-06-22T00:05:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/113970979",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Why doesn' this patch include the code for OP_CHECKSEQUENCEVERIFY?",
      "created_at" : "2015-06-23T20:19:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-114630825",
      "id" : 114630825,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-06-23T20:20:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/114630825",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   },
   {
      "body" : "@btcdrak that code is here:\r\n\r\nhttps://github.com/maaku/bitcoin/tree/checksequenceverify\r\n\r\nIt is entirely separate from what this pull request accomplishes. For example, it is possible to do simple transaction replacement without CHECKSEQUENCEVERIFY, as explained in the BIP. Likewise the source code of the CSV branch does not in fact depend on this pull request -- all CSV does is verify a constraint on the sequence number of the input, it does not depend on that sequence number having consensus-enforced semantics.",
      "created_at" : "2015-06-23T20:38:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-114634773",
      "id" : 114634773,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-06-23T20:38:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/114634773",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "body" : "@maaku I think the value of this PR in isolation is limited. You really need the opcode as well. It would be wonderful if you could publish a separate PR+BIP for CSV if you dont wish to combine them.\r\n\r\nCSV is a very useful feature and one I think we clearly need to help address scalability. I see no profit in not getting it on the table now especially since it's been deployed in Elements already and is clearly working.",
      "created_at" : "2015-06-23T22:13:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-114656954",
      "id" : 114656954,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-06-23T22:13:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/114656954",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   },
   {
      "body" : "I'm working on it. Things take time.\nOn Jun 23, 2015 15:14, \"Ã Â¸Â¿tcDrak\" <notifications@github.com> wrote:\n\n> @maaku <https://github.com/maaku> I think the value of this PR in\n> isolation is limited. You really need the opcode as well. It would be\n> wonderful if you could publish a separate PR+BIP for CSV if you dont wish\n> to combine them.\n>\n> CSV is a very useful feature and one I think we clearly need to help\n> address scalability. I see no profit in not getting it on the table now\n> especially since it's been deployed in Elements already and is clearly\n> working.\n>\n> Ã¢ÂÂ\n> Reply to this email directly or view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-114656954>.\n>\n",
      "created_at" : "2015-06-23T22:21:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-114658497",
      "id" : 114658497,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-06-23T22:21:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/114658497",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r33211341"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33211341"
         }
      },
      "body" : "Probably should call this something other than sequence?",
      "commit_id" : "80300be009b4419befdbb6ff103d5ae06a3dd7e6",
      "created_at" : "2015-06-24T23:59:09Z",
      "diff_hunk" : "@@ -14,5 +14,7 @@ static const unsigned int MAX_BLOCK_SIGOPS = MAX_BLOCK_SIZE/50;\n static const int COINBASE_MATURITY = 100;\n /** Threshold for nLockTime: below this value it is interpreted as block number, otherwise as UNIX timestamp. */\n static const unsigned int LOCKTIME_THRESHOLD = 500000000; // Tue Nov  5 00:53:20 1985 UTC\n+/** Threshold for inverted CTxIn::nSequence: below this value it is interpreted as a relative lock-time, otherwise ignored. */\n+static const uint32_t SEQUENCE_THRESHOLD = (1 << 31);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r33211341",
      "id" : 33211341,
      "original_commit_id" : "856081c2b69027287660b099722af855f1cf1c1f",
      "original_position" : 5,
      "path" : "src/consensus/consensus.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312",
      "updated_at" : "2015-09-27T20:19:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33211341",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r33211350"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33211350"
         }
      },
      "body" : "IsFinalTx was a better name IMO.",
      "commit_id" : "80300be009b4419befdbb6ff103d5ae06a3dd7e6",
      "created_at" : "2015-06-24T23:59:21Z",
      "diff_hunk" : "@@ -673,22 +673,110 @@ bool IsStandardTx(const CTransaction& tx, string& reason)\n     return true;\n }\n \n-bool IsFinalTx(const CTransaction &tx, int nBlockHeight, int64_t nBlockTime)\n+int64_t LockTime(const CTransaction &tx, int flags, const CCoinsView* pCoinsView, int nBlockHeight, int64_t nBlockTime)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r33211350",
      "id" : 33211350,
      "original_commit_id" : "856081c2b69027287660b099722af855f1cf1c1f",
      "original_position" : 5,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312",
      "updated_at" : "2015-09-27T20:19:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33211350",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r33322311"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33322311"
         }
      },
      "body" : "The version check is in LockTime already, so redundant here...",
      "commit_id" : "80300be009b4419befdbb6ff103d5ae06a3dd7e6",
      "created_at" : "2015-06-26T01:31:35Z",
      "diff_hunk" : "@@ -969,6 +1050,19 @@ bool AcceptToMemoryPool(CTxMemPool& pool, CValidationState &state, const CTransa\n         view.SetBackend(dummy);\n         }\n \n+        // Enforce sequnce numbers as relative lock-time\n+        // only for tx.nVersion >= 2.\n+        int nLockTimeFlags = 0;\n+        if (tx.nVersion >= 2)\n+            nLockTimeFlags |= LOCKTIME_VERIFY_SEQUENCE;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r33322311",
      "id" : 33322311,
      "original_commit_id" : "856081c2b69027287660b099722af855f1cf1c1f",
      "original_position" : 144,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312",
      "updated_at" : "2015-09-27T20:19:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33322311",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r33322326"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33322326"
         }
      },
      "body" : "Perhaps STANDARD_LOCKTIME_VERIFY_FLAGS instead of nLockTimeFlags?",
      "commit_id" : "80300be009b4419befdbb6ff103d5ae06a3dd7e6",
      "created_at" : "2015-06-26T01:32:11Z",
      "diff_hunk" : "@@ -969,6 +1050,19 @@ bool AcceptToMemoryPool(CTxMemPool& pool, CValidationState &state, const CTransa\n         view.SetBackend(dummy);\n         }\n \n+        // Enforce sequnce numbers as relative lock-time\n+        // only for tx.nVersion >= 2.\n+        int nLockTimeFlags = 0;\n+        if (tx.nVersion >= 2)\n+            nLockTimeFlags |= LOCKTIME_VERIFY_SEQUENCE;\n+\n+        // Only accept nLockTime-using transactions that can be mined in the next\n+        // block; we don't want our mempool filled up with transactions that can't\n+        // be mined yet.\n+        if (LockTime(tx, nLockTimeFlags, &view, chainActive.Height() + 1, GetAdjustedTime()))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r33322326",
      "id" : 33322326,
      "original_commit_id" : "856081c2b69027287660b099722af855f1cf1c1f",
      "original_position" : 149,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312",
      "updated_at" : "2015-09-27T20:19:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33322326",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r33322335"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33322335"
         }
      },
      "body" : "The version check is in LockTime already, so redundant here...",
      "commit_id" : "80300be009b4419befdbb6ff103d5ae06a3dd7e6",
      "created_at" : "2015-06-26T01:32:26Z",
      "diff_hunk" : "@@ -153,7 +159,14 @@ CBlockTemplate* CreateNewBlock(const CScript& scriptPubKeyIn)\n              mi != mempool.mapTx.end(); ++mi)\n         {\n             const CTransaction& tx = mi->second.GetTx();\n-            if (tx.IsCoinBase() || !IsFinalTx(tx, nHeight, pblock->nTime))\n+\n+            // Enforce sequnce numbers as relative lock-time\n+            // only for tx.nVersion >= 2.\n+            int nLockTimeFlags = 0;\n+            if (tx.nVersion >= 2)\n+                nLockTimeFlags |= LOCKTIME_VERIFY_SEQUENCE;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r33322335",
      "id" : 33322335,
      "original_commit_id" : "856081c2b69027287660b099722af855f1cf1c1f",
      "original_position" : 32,
      "path" : "src/miner.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312",
      "updated_at" : "2015-09-27T20:19:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33322335",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "needs rebase",
      "created_at" : "2015-08-04T22:50:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-127784773",
      "id" : 127784773,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-08-04T22:50:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/127784773",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   },
   {
      "body" : "Rebased.",
      "created_at" : "2015-08-12T06:39:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-130186849",
      "id" : 130186849,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-08-12T06:39:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/130186849",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r37031834"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37031834"
         }
      },
      "body" : "`s/sequnce/sequence`",
      "commit_id" : "80300be009b4419befdbb6ff103d5ae06a3dd7e6",
      "created_at" : "2015-08-13T22:10:46Z",
      "diff_hunk" : "@@ -860,6 +942,18 @@ bool AcceptToMemoryPool(CTxMemPool& pool, CValidationState &state, const CTransa\n         view.SetBackend(dummy);\n         }\n \n+        // Enforce sequnce numbers as relative lock-time",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r37031834",
      "id" : 37031834,
      "original_commit_id" : "b011af6c551585e03a8575e3cc9e87d02472fba5",
      "original_position" : 139,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312",
      "updated_at" : "2015-09-27T20:19:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37031834",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "concept ACK",
      "created_at" : "2015-08-13T22:14:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-130863975",
      "id" : 130863975,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-08-13T22:14:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/130863975",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "Refs #6564",
      "created_at" : "2015-08-17T19:28:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-131936872",
      "id" : 131936872,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-08-17T19:28:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/131936872",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   },
   {
      "body" : "Agreed with @petertodd that this is fairly pointless without BIP-62 (malleability), but I do want both for lightning.\r\n\r\n(I also note that we should in future detach the locktime field from requiring non-FFFFFFFF nSequence; they're completely orthogonal AFAICT.  But that's a minor soft-fork.)",
      "created_at" : "2015-08-18T00:18:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-132002885",
      "id" : 132002885,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-08-18T00:18:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/132002885",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/775844?v=3",
         "events_url" : "https://api.github.com/users/rustyrussell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rustyrussell/followers",
         "following_url" : "https://api.github.com/users/rustyrussell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rustyrussell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rustyrussell",
         "id" : 775844,
         "login" : "rustyrussell",
         "organizations_url" : "https://api.github.com/users/rustyrussell/orgs",
         "received_events_url" : "https://api.github.com/users/rustyrussell/received_events",
         "repos_url" : "https://api.github.com/users/rustyrussell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rustyrussell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rustyrussell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rustyrussell"
      }
   },
   {
      "body" : "@petertodd isn't the point of this that it is relative?  That is,  I don't need to know what block the first transaction is in,  nor the follow up transactions?\r\nBut I know that they will be (at least) no less than `nSequence` apart?",
      "created_at" : "2015-08-18T00:28:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-132004029",
      "id" : 132004029,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-08-18T00:28:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/132004029",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r37256672"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37256672"
         }
      },
      "body" : "Took me a while to see what you're suggestion, but I agree. I'll rework it to be a policy.h option.",
      "commit_id" : "80300be009b4419befdbb6ff103d5ae06a3dd7e6",
      "created_at" : "2015-08-18T01:34:37Z",
      "diff_hunk" : "@@ -969,6 +1050,19 @@ bool AcceptToMemoryPool(CTxMemPool& pool, CValidationState &state, const CTransa\n         view.SetBackend(dummy);\n         }\n \n+        // Enforce sequnce numbers as relative lock-time\n+        // only for tx.nVersion >= 2.\n+        int nLockTimeFlags = 0;\n+        if (tx.nVersion >= 2)\n+            nLockTimeFlags |= LOCKTIME_VERIFY_SEQUENCE;\n+\n+        // Only accept nLockTime-using transactions that can be mined in the next\n+        // block; we don't want our mempool filled up with transactions that can't\n+        // be mined yet.\n+        if (LockTime(tx, nLockTimeFlags, &view, chainActive.Height() + 1, GetAdjustedTime()))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r37256672",
      "id" : 37256672,
      "original_commit_id" : "856081c2b69027287660b099722af855f1cf1c1f",
      "original_position" : 149,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312",
      "updated_at" : "2015-09-27T20:19:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37256672",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "body" : "@rustyrussell @petertodd : what relative lock-time gives you is a committed response window to a proof-of-publication. With CHECKSEQUENCEVERIFY (#6564) there is indeed some features you can get that in some situations aren't just replicatable with CHECKLOCKTIMEVERIFY. However the most exciting use cases also require something additional still. In the case of lightning, not just BIP 62, but some sort of normative txid.\r\n\r\n@dcousens I believe @petertodd's point is that since all the inputs are already on the block chain, you can just set nLockTime to the confirmed age of the input + the relative lock-time. And if the inputs are not all confirmed, then you are building chains of transactions that aren't safe due to malleability. So really this is a feature that becomes most useful when we have a definitive fix for malleability, which we will in the not so distant future.",
      "created_at" : "2015-08-18T01:42:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-132024558",
      "id" : 132024558,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-08-18T01:42:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/132024558",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "body" : "Yup, my objection was a somewhat pedantic point of process; now that CSV has been proposed it's moot objection.\n\nWill review all this stuff soon FWIW, travelling right now... Per usual. :/\n\nOn 17 August 2015 18:43:33 GMT-07:00, Mark Friedenbach <notifications@github.com> wrote:\n>@rustyrussell @petertodd : what relative lock-time gives you is a\n>committed response window to a proof-of-publication. With\n>CHECKSEQUENCEVERIFY (#6564) there is indeed some features you can get\n>that in some situations aren't just replicatable with\n>CHECKLOCKTIMEVERIFY. However the most exciting use cases also require\n>something additional still. In the case of lightning, not just BIP 62,\n>but some sort of normative txid.\n>\n>@dcousens I believe @petertodd's point is that since all the inputs are\n>already on the block chain, you can just set nLockTime to the confirmed\n>age of the input + the relative lock-time. And if the inputs are not\n>all confirmed, then you are building chains of transactions that aren't\n>safe due to malleability. So really this is a feature that becomes most\n>useful when we have a definitive fix for malleability, which we will in\n>the not so distant future.\n>\n>---\n>Reply to this email directly or view it on GitHub:\n>https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-132024558\n\n",
      "created_at" : "2015-08-18T01:57:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-132028861",
      "id" : 132028861,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-08-18T01:57:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/132028861",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "> And if the inputs are not all confirmed, then you are building chains of transactions that aren't safe due to malleability.\r\n\r\nRight,  thanks for clearing that up @maaku :)",
      "created_at" : "2015-08-18T02:23:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-132039404",
      "id" : 132039404,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-08-18T02:23:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/132039404",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "@maaku Just to clarify (though a bit OT):\r\n\r\nLightning *wants* normalized txid for simpler dual-input anchors, but doesn't need it (the escape tx design seems to work).\r\n\r\nLightning *needs* normalized txid for outsourcing of revocation enforcement.",
      "created_at" : "2015-08-18T04:22:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-132069024",
      "id" : 132069024,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-08-18T04:22:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/132069024",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/775844?v=3",
         "events_url" : "https://api.github.com/users/rustyrussell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rustyrussell/followers",
         "following_url" : "https://api.github.com/users/rustyrussell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rustyrussell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rustyrussell",
         "id" : 775844,
         "login" : "rustyrussell",
         "organizations_url" : "https://api.github.com/users/rustyrussell/orgs",
         "received_events_url" : "https://api.github.com/users/rustyrussell/received_events",
         "repos_url" : "https://api.github.com/users/rustyrussell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rustyrussell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rustyrussell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rustyrussell"
      }
   },
   {
      "body" : "Fixed @luke-jr's nits.",
      "created_at" : "2015-08-19T01:16:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-132408863",
      "id" : 132408863,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-08-19T01:16:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/132408863",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r37374565"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37374565"
         }
      },
      "body" : "Probably should call this something other than sequence?",
      "commit_id" : "80300be009b4419befdbb6ff103d5ae06a3dd7e6",
      "created_at" : "2015-08-19T02:22:51Z",
      "diff_hunk" : "@@ -6,11 +6,22 @@\n #ifndef BITCOIN_CONSENSUS_CONSENSUS_H\n #define BITCOIN_CONSENSUS_CONSENSUS_H\n \n+/** For uint32_t */\n+#include <stdint.h>\n+\n /** The maximum allowed size for a serialized block, in bytes (network rule) */\n static const unsigned int MAX_BLOCK_SIZE = 1000000;\n /** The maximum allowed number of signature check operations in a block (network rule) */\n static const unsigned int MAX_BLOCK_SIGOPS = MAX_BLOCK_SIZE/50;\n /** Coinbase transaction outputs can only be spent after this number of new blocks (network rule) */\n static const int COINBASE_MATURITY = 100;\n+/** Threshold for inverted CTxIn::nSequence: below this value it is interpreted as a relative lock-time, otherwise ignored. */\n+static const uint32_t SEQUENCE_THRESHOLD = (1 << 31);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r37374565",
      "id" : 37374565,
      "original_commit_id" : "246d456476119d464adfb8fa2e938b6def13ad50",
      "original_position" : 14,
      "path" : "src/consensus/consensus.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312",
      "updated_at" : "2015-09-27T20:19:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37374565",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r37374581"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37374581"
         }
      },
      "body" : "IsFinalTx was a better name IMO.\r\n",
      "commit_id" : "80300be009b4419befdbb6ff103d5ae06a3dd7e6",
      "created_at" : "2015-08-19T02:23:11Z",
      "diff_hunk" : "@@ -638,22 +638,110 @@ unsigned int LimitOrphanTxSize(unsigned int nMaxOrphans) EXCLUSIVE_LOCKS_REQUIRE\n     return nEvicted;\n }\n \n-bool IsFinalTx(const CTransaction &tx, int nBlockHeight, int64_t nBlockTime)\n+int64_t LockTime(const CTransaction &tx, int flags, const CCoinsView* pCoinsView, int nBlockHeight, int64_t nBlockTime)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r37374581",
      "id" : 37374581,
      "original_commit_id" : "246d456476119d464adfb8fa2e938b6def13ad50",
      "original_position" : 5,
      "path" : "src/main.cpp",
      "position" : 5,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312",
      "updated_at" : "2015-09-27T20:19:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37374581",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r37374960"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37374960"
         }
      },
      "body" : "Luke, did you notice that the semantics changed? That's why the name\nchanged.\nOn Aug 18, 2015 7:23 PM, \"Luke-Jr\" <notifications@github.com> wrote:\n\n> In src/main.cpp\n> <https://github.com/bitcoin/bitcoin/pull/6312#discussion_r37374581>:\n>\n> > @@ -638,22 +638,110 @@ unsigned int LimitOrphanTxSize(unsigned int nMaxOrphans) EXCLUSIVE_LOCKS_REQUIRE\n> >      return nEvicted;\n> >  }\n> >\n> > -bool IsFinalTx(const CTransaction &tx, int nBlockHeight, int64_t nBlockTime)\n> > +int64_t LockTime(const CTransaction &tx, int flags, const CCoinsView* pCoinsView, int nBlockHeight, int64_t nBlockTime)\n>\n> IsFinalTx was a better name IMO.\n>\n> Ã¢ÂÂ\n> Reply to this email directly or view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/6312/files#r37374581>.\n>\n",
      "commit_id" : "80300be009b4419befdbb6ff103d5ae06a3dd7e6",
      "created_at" : "2015-08-19T02:33:02Z",
      "diff_hunk" : "@@ -638,22 +638,110 @@ unsigned int LimitOrphanTxSize(unsigned int nMaxOrphans) EXCLUSIVE_LOCKS_REQUIRE\n     return nEvicted;\n }\n \n-bool IsFinalTx(const CTransaction &tx, int nBlockHeight, int64_t nBlockTime)\n+int64_t LockTime(const CTransaction &tx, int flags, const CCoinsView* pCoinsView, int nBlockHeight, int64_t nBlockTime)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r37374960",
      "id" : 37374960,
      "original_commit_id" : "246d456476119d464adfb8fa2e938b6def13ad50",
      "original_position" : 5,
      "path" : "src/main.cpp",
      "position" : 5,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312",
      "updated_at" : "2015-09-27T20:19:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37374960",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r37376960"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37376960"
         }
      },
      "body" : "You mean because it returns int64_t instead of bool? But unless I missed a spot, the return value is only ever *used* as a bool in the same sense...",
      "commit_id" : "80300be009b4419befdbb6ff103d5ae06a3dd7e6",
      "created_at" : "2015-08-19T03:23:33Z",
      "diff_hunk" : "@@ -638,22 +638,110 @@ unsigned int LimitOrphanTxSize(unsigned int nMaxOrphans) EXCLUSIVE_LOCKS_REQUIRE\n     return nEvicted;\n }\n \n-bool IsFinalTx(const CTransaction &tx, int nBlockHeight, int64_t nBlockTime)\n+int64_t LockTime(const CTransaction &tx, int flags, const CCoinsView* pCoinsView, int nBlockHeight, int64_t nBlockTime)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r37376960",
      "id" : 37376960,
      "original_commit_id" : "246d456476119d464adfb8fa2e938b6def13ad50",
      "original_position" : 5,
      "path" : "src/main.cpp",
      "position" : 5,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312",
      "updated_at" : "2015-09-27T20:19:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37376960",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r37377633"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37377633"
         }
      },
      "body" : "No it switches to opposite meaning -- zero indicates tx is final, nonzero\nindicates when it will become final.\nOn Aug 18, 2015 8:24 PM, \"Luke-Jr\" <notifications@github.com> wrote:\n\n> In src/main.cpp\n> <https://github.com/bitcoin/bitcoin/pull/6312#discussion_r37376960>:\n>\n> > @@ -638,22 +638,110 @@ unsigned int LimitOrphanTxSize(unsigned int nMaxOrphans) EXCLUSIVE_LOCKS_REQUIRE\n> >      return nEvicted;\n> >  }\n> >\n> > -bool IsFinalTx(const CTransaction &tx, int nBlockHeight, int64_t nBlockTime)\n> > +int64_t LockTime(const CTransaction &tx, int flags, const CCoinsView* pCoinsView, int nBlockHeight, int64_t nBlockTime)\n>\n> You mean because it returns int64_t instead of bool? But unless I missed a\n> spot, the return value is only ever *used* as a bool in the same sense...\n>\n> Ã¢ÂÂ\n> Reply to this email directly or view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/6312/files#r37376960>.\n>\n",
      "commit_id" : "80300be009b4419befdbb6ff103d5ae06a3dd7e6",
      "created_at" : "2015-08-19T03:42:44Z",
      "diff_hunk" : "@@ -638,22 +638,110 @@ unsigned int LimitOrphanTxSize(unsigned int nMaxOrphans) EXCLUSIVE_LOCKS_REQUIRE\n     return nEvicted;\n }\n \n-bool IsFinalTx(const CTransaction &tx, int nBlockHeight, int64_t nBlockTime)\n+int64_t LockTime(const CTransaction &tx, int flags, const CCoinsView* pCoinsView, int nBlockHeight, int64_t nBlockTime)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r37377633",
      "id" : 37377633,
      "original_commit_id" : "246d456476119d464adfb8fa2e938b6def13ad50",
      "original_position" : 5,
      "path" : "src/main.cpp",
      "position" : 5,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312",
      "updated_at" : "2015-09-27T20:19:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37377633",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r37378264"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37378264"
         }
      },
      "body" : "To expand, the change in semantics is required because it is no longer a\r\nsimple matter to introspect the transaction to see how long it will remain\r\nnon-final. You will see in some parts of the GUI code for example its\r\nreturn value is saved and used to calculate how long the transaction will\r\nremain locked, which is then displayed to the user.",
      "commit_id" : "80300be009b4419befdbb6ff103d5ae06a3dd7e6",
      "created_at" : "2015-08-19T04:02:54Z",
      "diff_hunk" : "@@ -638,22 +638,110 @@ unsigned int LimitOrphanTxSize(unsigned int nMaxOrphans) EXCLUSIVE_LOCKS_REQUIRE\n     return nEvicted;\n }\n \n-bool IsFinalTx(const CTransaction &tx, int nBlockHeight, int64_t nBlockTime)\n+int64_t LockTime(const CTransaction &tx, int flags, const CCoinsView* pCoinsView, int nBlockHeight, int64_t nBlockTime)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r37378264",
      "id" : 37378264,
      "original_commit_id" : "246d456476119d464adfb8fa2e938b6def13ad50",
      "original_position" : 5,
      "path" : "src/main.cpp",
      "position" : 5,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312",
      "updated_at" : "2015-09-27T20:19:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37378264",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r37378485"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37378485"
         }
      },
      "body" : "`RELATIVE_LOCKTIME_THRESHOLD`?",
      "commit_id" : "80300be009b4419befdbb6ff103d5ae06a3dd7e6",
      "created_at" : "2015-08-19T04:11:07Z",
      "diff_hunk" : "@@ -6,11 +6,22 @@\n #ifndef BITCOIN_CONSENSUS_CONSENSUS_H\n #define BITCOIN_CONSENSUS_CONSENSUS_H\n \n+/** For uint32_t */\n+#include <stdint.h>\n+\n /** The maximum allowed size for a serialized block, in bytes (network rule) */\n static const unsigned int MAX_BLOCK_SIZE = 1000000;\n /** The maximum allowed number of signature check operations in a block (network rule) */\n static const unsigned int MAX_BLOCK_SIGOPS = MAX_BLOCK_SIZE/50;\n /** Coinbase transaction outputs can only be spent after this number of new blocks (network rule) */\n static const int COINBASE_MATURITY = 100;\n+/** Threshold for inverted CTxIn::nSequence: below this value it is interpreted as a relative lock-time, otherwise ignored. */\n+static const uint32_t SEQUENCE_THRESHOLD = (1 << 31);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r37378485",
      "id" : 37378485,
      "original_commit_id" : "246d456476119d464adfb8fa2e938b6def13ad50",
      "original_position" : 14,
      "path" : "src/consensus/consensus.h",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312",
      "updated_at" : "2015-09-27T20:19:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/37378485",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "OK, I tested with with the lightning cli tools.  Passed and failed transactions using nSequence as expected.  That was for git rev 246d456476119d464adfb8fa2e938b6def13ad50.\r\n\r\nAcked-by: Rusty Russell <rusty@rustcorp.com.au> ",
      "created_at" : "2015-08-21T06:57:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-133307855",
      "id" : 133307855,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-08-21T06:57:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/133307855",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/775844?v=3",
         "events_url" : "https://api.github.com/users/rustyrussell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rustyrussell/followers",
         "following_url" : "https://api.github.com/users/rustyrussell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rustyrussell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rustyrussell",
         "id" : 775844,
         "login" : "rustyrussell",
         "organizations_url" : "https://api.github.com/users/rustyrussell/orgs",
         "received_events_url" : "https://api.github.com/users/rustyrussell/received_events",
         "repos_url" : "https://api.github.com/users/rustyrussell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rustyrussell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rustyrussell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rustyrussell"
      }
   },
   {
      "body" : "I have pushed two separate repos which provide an alternative to BIP 68 as specified, based on feedback received. I would appreciate review of these alternatives:\r\n\r\nhttps://github.com/maaku/bitcoin/tree/sequencenumbers2\r\n\r\nThis repo removes the inversion of the sequence number, such that the relative lock-time value is used directly as the sequence number.\r\n\r\nhttps://github.com/maaku/bitcoin/tree/sequencenumbers3\r\n\r\nThis repo also inverts the sequence number, as well as interprets it as a fixed-point number. This allows up to 5 year relative lock times using blocks as units, and saves 12 low-order bits for future use. Or, up to about 2 year relative lock times using seconds as units, and saves 4 bits for future use without second-level granularity. More bits could be recovered from time-based locktimes by choosing a higher granularity (a soft-fork change if done correctly).",
      "created_at" : "2015-08-28T00:57:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-135594513",
      "id" : 135594513,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-08-28T00:57:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/135594513",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "body" : "Mark Friedenbach <notifications@github.com> writes:\n> I have pushed two separate repos which provide an alternative to BIP 68 as specified, based on feedback received. I would appreciate review of these alternatives:\n>\n> https://github.com/maaku/bitcoin/tree/sequencenumbers2\n>\n> This repo removes the inversion of the sequence number, such that the relative lock-time value is used directly as the sequence number.\n\nOK, I like this.\n\n> https://github.com/maaku/bitcoin/tree/sequencenumbers3\n>\n> This repo also inverts the sequence number, as well as interprets it as a fixed-point number. This allows up to 5 year relative lock times using blocks as units, and saves 12 low-order bits for future use. Or, up to about 2 year relative lock times using seconds as units, and saves 4 bits for future use without second-level granularity. More bits could be recovered from time-based locktimes by choosing a higher granularity (a soft-fork change if done correctly).\n\nI think that's overkill.  We already have the high bit to say \"ignore\nit\" for future soft forks.\n\nBTW, you need to fix the commit messages, as they still talk about\ninversion.\n\nCheers,\nRusty.\n",
      "created_at" : "2015-08-31T00:34:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-136222776",
      "id" : 136222776,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-08-31T00:34:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/136222776",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/775844?v=3",
         "events_url" : "https://api.github.com/users/rustyrussell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rustyrussell/followers",
         "following_url" : "https://api.github.com/users/rustyrussell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rustyrussell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rustyrussell",
         "id" : 775844,
         "login" : "rustyrussell",
         "organizations_url" : "https://api.github.com/users/rustyrussell/orgs",
         "received_events_url" : "https://api.github.com/users/rustyrussell/received_events",
         "repos_url" : "https://api.github.com/users/rustyrussell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rustyrussell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rustyrussell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rustyrussell"
      }
   },
   {
      "body" : "@maaku I like https://github.com/maaku/bitcoin/tree/sequencenumbers3 which leaves the door open for future expansion.",
      "created_at" : "2015-09-17T18:08:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-141169510",
      "id" : 141169510,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-09-17T18:08:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/141169510",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   },
   {
      "body" : "Comparison links for others:\r\nhttps://github.com/bitcoin/bitcoin/compare/master...maaku:sequencenumbers2\r\nhttps://github.com/bitcoin/bitcoin/compare/master...maaku:sequencenumbers3",
      "created_at" : "2015-09-19T02:26:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-141609979",
      "id" : 141609979,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-09-19T02:26:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/141609979",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "Since posting the two alternatives 26 days ago, I have had conversations with many stakeholders via the mailing list, IRC, direct messaging, and in-person at the Scaling Bitcoin workshop in Montreal. Not all of these conversations were explicitly on the public record, so I will obey Chatham House rules in presenting a summary of these conversations in aggregate without identities attached. I hope that those who disagree with the summary or the outcome speak up in response.\r\n\r\n* There seems to be consensus in favor of BIP 68: I was unable to find anyone willing to argue that BIP 68 is on the whole a bad idea, so long as half of the sequence space keeps the original pre-BIP 68 (non consensus) semantics. The present pull request respects this constraint.\r\n\r\n* There is universal consensus that the bit-inversion step should be dropped. I have updated this pull request accordingly.\r\n\r\n* There is mixed views on whether the range of allowed relative lock-times should be constrained to set aside future bits for soft-fork changes (see: sequencenumbers2 and sequencenumbers3 discussed above). One developer argued strongly against this on the basis of favoring simplicity. Three developers argued to varying degrees in favor of setting bits aside for future soft-fork changes. The rest who were asked were explicitly indifferent. Nobody, of the developers who were asked, has said that they would retract their support for this pull request if the consensus were to be against them on this issue.\r\n\r\nWith this in mind I have decided to update this pull request to the sequencenumbers3 branch. This branch restricts maximum relative lock-times to approximately 1 year, and in doing so sets aside **5** bits for future expansion when using time-based relative lock-time (granularity: 1 second), and **14** bits for future expansion when using height-based relative lock-time (granularity: 1 block). Further bits could be set aside by decreasing granularity in a soft-fork compatible way.\r\n\r\nAll of the presently imagined use cases for BIP 68 and the related CHECKSEQUENCEVERIFY opcode (#6564) use relative lock-times much less than one year, so it is expected that this constraint on the maximum range does not restrict usability in any meaningful way.\r\n\r\nBIP 68 will be updated to reflect this new scheme.",
      "created_at" : "2015-09-23T02:07:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-142471985",
      "id" : 142471985,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-09-25T18:41:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/142471985",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r40199246"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/40199246"
         }
      },
      "body" : "\"I believe this is incorrect, as LockTime() is called for the coinbase transaction by ContextualCheckBlock()\" - @petertodd from [other branch](https://github.com/maaku/bitcoin/commit/d454248ad6eab502762ed0b0aaa37d0f646f1844#commitcomment-13327523)",
      "commit_id" : "80300be009b4419befdbb6ff103d5ae06a3dd7e6",
      "created_at" : "2015-09-23T12:55:58Z",
      "diff_hunk" : "@@ -638,22 +638,105 @@ unsigned int LimitOrphanTxSize(unsigned int nMaxOrphans) EXCLUSIVE_LOCKS_REQUIRE\n     return nEvicted;\n }\n \n-bool IsFinalTx(const CTransaction &tx, int nBlockHeight, int64_t nBlockTime)\n+int64_t LockTime(const CTransaction &tx, int flags, const CCoinsView* pCoinsView, int nBlockHeight, int64_t nBlockTime)\n {\n-    if (tx.nLockTime == 0)\n-        return true;\n-    if ((int64_t)tx.nLockTime < ((int64_t)tx.nLockTime < LOCKTIME_THRESHOLD ? (int64_t)nBlockHeight : nBlockTime))\n-        return true;\n-    BOOST_FOREACH(const CTxIn& txin, tx.vin)\n-        if (!txin.IsFinal())\n-            return false;\n-    return true;\n+    CCoins coins;\n+\n+    bool fEnforceBIP68 = tx.nVersion >= 2\n+                      && flags & LOCKTIME_VERIFY_SEQUENCE;\n+\n+    // Will be set to the equivalent height- and time-based nLockTime\n+    // values that would be necessary to satisfy all relative lock-\n+    // time constraints given our view of block chain history.\n+    int nMinHeight = 0;\n+    int64_t nMinTime = 0;\n+    // Will remain equal to true if all inputs are finalized\n+    // (CTxIn::SEQUENCE_FINAL).\n+    bool fFinalized = true;\n+\n+    BOOST_FOREACH(const CTxIn& txin, tx.vin) {\n+        // Set a flag if we witness an input that isn't finalized.\n+        if (CTxIn::SEQUENCE_FINAL == txin.nSequence)\n+            continue;\n+        else\n+            fFinalized = false;\n+\n+        // Do not enforce sequence numbers as a relative lock time\n+        // unless we have been instructed to.\n+        if (!fEnforceBIP68)\n+            continue;\n+\n+        // Sequence numbers equal to or above the locktime threshold\n+        // are not treated as relative lock-times, nor are they given\n+        // any consensus-enforced meaning at this point.\n+        if (txin.nSequence >= CTxIn::SEQUENCE_LOCKTIME_THRESHOLD)\n+            continue;\n+\n+        // Skip this input if it is not in the UTXO set. This should\n+        // only ever happen in non-consensus code.\n+        if (!pCoinsView->GetCoins(txin.prevout.hash, coins))\n+            continue;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r40199246",
      "id" : 40199246,
      "original_commit_id" : "c11fa72951e500a0503a0c129d7ca3d11f19febe",
      "original_position" : 50,
      "path" : "src/main.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312",
      "updated_at" : "2015-09-27T20:19:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/40199246",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   },
   {
      "body" : "For some reason I was not email notified of Peter's nits. They have now been fixed, at least those on the commit you linked to.",
      "created_at" : "2015-09-23T13:57:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-142609581",
      "id" : 142609581,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-09-23T13:57:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/142609581",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r40207799"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/40207799"
         }
      },
      "body" : "Would it be possible to retain the old IsFinalTx function, including its code, but replace its \"return true;\" statements by \"return LockTime(...) == 0\", and use that in consensus code? That would make it trivial to see this is a softfork.",
      "commit_id" : "80300be009b4419befdbb6ff103d5ae06a3dd7e6",
      "created_at" : "2015-09-23T14:15:03Z",
      "diff_hunk" : "@@ -638,22 +638,106 @@ unsigned int LimitOrphanTxSize(unsigned int nMaxOrphans) EXCLUSIVE_LOCKS_REQUIRE\n     return nEvicted;\n }\n \n-bool IsFinalTx(const CTransaction &tx, int nBlockHeight, int64_t nBlockTime)\n+int64_t LockTime(const CTransaction &tx, int flags, const CCoinsView* pCoinsView, int nBlockHeight, int64_t nBlockTime)\n {\n-    if (tx.nLockTime == 0)\n-        return true;\n-    if ((int64_t)tx.nLockTime < ((int64_t)tx.nLockTime < LOCKTIME_THRESHOLD ? (int64_t)nBlockHeight : nBlockTime))\n-        return true;\n-    BOOST_FOREACH(const CTxIn& txin, tx.vin)\n-        if (!txin.IsFinal())\n-            return false;\n-    return true;\n+    CCoins coins;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r40207799",
      "id" : 40207799,
      "original_commit_id" : "5624be42cbb55cc471a49eef882c1ae71c7d2f25",
      "original_position" : 15,
      "path" : "src/main.cpp",
      "position" : 15,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312",
      "updated_at" : "2015-09-27T20:19:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/40207799",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Just pushed a relatively minor consensus change to BIP 68 functionality, based on something that was observed while editing the BIP 68 and BIP 112 drafts.\r\n\r\nPreviously, it was possible to have a \"zero\" relative lock-time that allowed child and parent to be in the same block, but only if block-height was used. The smallest allowed relative lock-height using block-time required at least one block separation between child and parent. The reason for this asymmetry was a legacy of bit inversion where SEQUENCE_FINAL overlapped in meaning with 0-height relative lock-time.\r\n\r\nThere is no longer justification for treating these two units separately. Conceivably there could be an obscure use case where the CHECKSEQUENCEVERIFY parameter is calculated on the stack and yet the check itself needs to be disabled under some circumstances -- passing though a zero in this case could save a few bytes over wrapping the CSV in an IF/ELSE block. So I have opted for making the behavior symmetric in that both 0x00000000 (0 blocks) and 0x40000000 (0 seconds) allow child and parent to appear in the same block. The tests have been updated accordingly.",
      "created_at" : "2015-09-23T17:04:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-142664443",
      "id" : 142664443,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-09-23T17:04:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/142664443",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r40233364"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/40233364"
         }
      },
      "body" : "Yep that would have been better. However I wonder if this is necessary or desirable now that this PR has received many full reviews, including verification that the change is a soft-fork.\r\n\r\nIf you or others are having trouble verifying this, I recommend looking at the individual commits. There are two preparatory commits that contain no consensus changes, only rearrangement of the logic for IsFinalTx() into what will become LockTime(). The BIP 68 changes then affect only specific portions of the IsFinalTx / LockTime code.",
      "commit_id" : "80300be009b4419befdbb6ff103d5ae06a3dd7e6",
      "created_at" : "2015-09-23T17:40:24Z",
      "diff_hunk" : "@@ -638,22 +638,106 @@ unsigned int LimitOrphanTxSize(unsigned int nMaxOrphans) EXCLUSIVE_LOCKS_REQUIRE\n     return nEvicted;\n }\n \n-bool IsFinalTx(const CTransaction &tx, int nBlockHeight, int64_t nBlockTime)\n+int64_t LockTime(const CTransaction &tx, int flags, const CCoinsView* pCoinsView, int nBlockHeight, int64_t nBlockTime)\n {\n-    if (tx.nLockTime == 0)\n-        return true;\n-    if ((int64_t)tx.nLockTime < ((int64_t)tx.nLockTime < LOCKTIME_THRESHOLD ? (int64_t)nBlockHeight : nBlockTime))\n-        return true;\n-    BOOST_FOREACH(const CTxIn& txin, tx.vin)\n-        if (!txin.IsFinal())\n-            return false;\n-    return true;\n+    CCoins coins;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r40233364",
      "id" : 40233364,
      "original_commit_id" : "5624be42cbb55cc471a49eef882c1ae71c7d2f25",
      "original_position" : 15,
      "path" : "src/main.cpp",
      "position" : 15,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312",
      "updated_at" : "2015-09-27T20:19:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/40233364",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "body" : "All nits have been addressed except @sipa's (see my comment there).\r\n\r\n@rustyrussell for your convenience I have extracted the patch from the tree you ACK'd to the present state of the pull request. Here is the 0bin:\r\n\r\nhttp://0bin.net/paste/R7x6LS+2bZ588OLs#2yvQPDe36d0PxI8ImqRhhie4-DS5l4wb0OcpDJIgWw1",
      "created_at" : "2015-09-23T17:40:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-142675375",
      "id" : 142675375,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-09-23T17:40:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/142675375",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "body" : "needs rebase",
      "created_at" : "2015-09-23T19:48:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-142708879",
      "id" : 142708879,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-09-23T19:48:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/142708879",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   },
   {
      "body" : "Does not need rebase... anyone know how to get github to reload a PR? My branch is updated but the PR is not updating.\r\n\r\nEDIT: yay fixed",
      "created_at" : "2015-09-23T20:01:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-142712283",
      "id" : 142712283,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-09-23T20:03:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/142712283",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r40260094"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/40260094"
         }
      },
      "body" : "I have broken out another commit in order to make review easier.",
      "commit_id" : "80300be009b4419befdbb6ff103d5ae06a3dd7e6",
      "created_at" : "2015-09-23T21:28:25Z",
      "diff_hunk" : "@@ -638,22 +638,106 @@ unsigned int LimitOrphanTxSize(unsigned int nMaxOrphans) EXCLUSIVE_LOCKS_REQUIRE\n     return nEvicted;\n }\n \n-bool IsFinalTx(const CTransaction &tx, int nBlockHeight, int64_t nBlockTime)\n+int64_t LockTime(const CTransaction &tx, int flags, const CCoinsView* pCoinsView, int nBlockHeight, int64_t nBlockTime)\n {\n-    if (tx.nLockTime == 0)\n-        return true;\n-    if ((int64_t)tx.nLockTime < ((int64_t)tx.nLockTime < LOCKTIME_THRESHOLD ? (int64_t)nBlockHeight : nBlockTime))\n-        return true;\n-    BOOST_FOREACH(const CTxIn& txin, tx.vin)\n-        if (!txin.IsFinal())\n-            return false;\n-    return true;\n+    CCoins coins;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#discussion_r40260094",
      "id" : 40260094,
      "original_commit_id" : "5624be42cbb55cc471a49eef882c1ae71c7d2f25",
      "original_position" : 15,
      "path" : "src/main.cpp",
      "position" : 15,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/6312",
      "updated_at" : "2015-09-27T20:19:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/40260094",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "body" : "So to summarise this latest iteration now frees up some nSequence bits for future expansion as follows:\r\n\r\nThe first two bits signal whether relative lock-time is used, and which units (0 = height, 1 = seconds for bit 30), then either 16 bits of relative height, or 25 bits of relative time.\r\n\r\nThe remaining low order bits (5 or 14) are unused, reserved for future expansion: if you don't want relative lock-time, there's 31 bits to use for whatever purpose (by setting the MSB) and if you do want relative lock-time, then there are 5 or 14 bits based on which units you use.  More bits are reclaimable if you decrease granularity (in a soft-fork compatible way), e.g. round up the second based relative lock-time to the next multiple of 512, and you now have 14 bits for both units (512s is less than the expected time between blocks, so it's barely any a change anyway).",
      "created_at" : "2015-09-25T19:03:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-143324446",
      "id" : 143324446,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-09-25T19:03:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/143324446",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7275704?v=3",
         "events_url" : "https://api.github.com/users/btcdrak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/btcdrak/followers",
         "following_url" : "https://api.github.com/users/btcdrak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/btcdrak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/btcdrak",
         "id" : 7275704,
         "login" : "btcdrak",
         "organizations_url" : "https://api.github.com/users/btcdrak/orgs",
         "received_events_url" : "https://api.github.com/users/btcdrak/received_events",
         "repos_url" : "https://api.github.com/users/btcdrak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/btcdrak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/btcdrak"
      }
   },
   {
      "body" : "Rebase to fix merge.",
      "created_at" : "2015-09-25T22:31:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-143368073",
      "id" : 143368073,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-09-25T22:31:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/143368073",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   },
   {
      "body" : "I believe all nits have been addressed. Can we get some ACKs?",
      "created_at" : "2015-09-27T21:02:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/6312#issuecomment-143594888",
      "id" : 143594888,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6312",
      "updated_at" : "2015-09-27T21:02:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/143594888",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/69154?v=3",
         "events_url" : "https://api.github.com/users/maaku/events{/privacy}",
         "followers_url" : "https://api.github.com/users/maaku/followers",
         "following_url" : "https://api.github.com/users/maaku/following{/other_user}",
         "gists_url" : "https://api.github.com/users/maaku/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/maaku",
         "id" : 69154,
         "login" : "maaku",
         "organizations_url" : "https://api.github.com/users/maaku/orgs",
         "received_events_url" : "https://api.github.com/users/maaku/received_events",
         "repos_url" : "https://api.github.com/users/maaku/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/maaku/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/maaku/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/maaku"
      }
   }
]
