[
   {
      "body" : "And a stretch goal: there should be some functionality to query a raw transaction from the wallet rather than the blockchain.",
      "created_at" : "2013-11-07T16:30:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3220#issuecomment-27981081",
      "id" : 27981081,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3220",
      "updated_at" : "2013-11-07T16:30:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27981081",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "More than a stretch goal, IMO, a requirement.  I know of several softwares used internally that rely on 'getrawtransaction' working without txindex=1.\r\n\r\nAt a minimum, there **must** be a compatible replacement.\r\n\r\nI get the confusion angle and agree -- but people are using this feature actively, even with txindex=0.",
      "created_at" : "2013-11-07T16:44:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3220#issuecomment-27982431",
      "id" : 27982431,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3220",
      "updated_at" : "2013-11-07T16:44:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27982431",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "I understand the confusion but I don't think removing functionality is a good response, wouldn't it be better to improve the error message to be less confusing? (maybe even mention -txindex in the message...)\r\n\r\nMaking it possible to query raw transactions from the wallet sounds like a good idea. Maybe as a new RPC command `getwallettransaction` to not confuse wallet and blockchain functionality?\r\n",
      "created_at" : "2013-11-07T17:30:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3220#issuecomment-27986922",
      "id" : 27986922,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3220",
      "updated_at" : "2013-11-07T17:30:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27986922",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@jgarzik I think you may be misinformed. `getrawtransaction` currently does not work for wallet transactions. It works for transactions that are either in the mempool or not entirely spent (=in the UTXO set). This may overlap with wallet transactions of course, but is not guaranteed. I think that funtionality doesn't maatch many use cases, and is inefficient. I'd rather have it work under very clear conditions.\r\n\r\n@laanwj I'm in favor of both improving the error message and a `getwallettransaction` command (though `gettransaction` is also a wallet RPC, but one that fetches ledger-level information, not transaction-level information).",
      "created_at" : "2013-11-07T18:15:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3220#issuecomment-27991442",
      "id" : 27991442,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3220",
      "updated_at" : "2013-11-07T18:15:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27991442",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa No reason it couldn't work for wallet transactions - the raw data is all in the wallet too, IIRC.",
      "created_at" : "2013-11-07T18:36:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3220#issuecomment-27993328",
      "id" : 27993328,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3220",
      "updated_at" : "2013-11-07T18:36:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27993328",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "We could just have another RPC that works on wallet transactions. I have had people pull txn that they have stuck many times using get rawtransactions, so I think we need to at least preserve the wallet behavior.\r\n\r\nAny opinion on adding a getblockrawtransaction <block> <txid> ? which would replace the non-determinstic behavior we have for txindex=0 now? \r\n",
      "created_at" : "2013-11-07T18:57:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3220#issuecomment-27995259",
      "id" : 27995259,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3220",
      "updated_at" : "2013-11-07T18:57:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27995259",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@luke-jr Sure, my main concern is not further confusing wallet operations with blockchain operations.\r\n\r\nWe could of course extend `getrawtransaction` with wallet functionality, and at the same time deprecate it in favor of a `getwalletrawtransaction` and `getblockchainrawtransaction` (the latter name may be confusing, as i suppose it would also do mempool fetching).",
      "created_at" : "2013-11-07T19:05:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3220#issuecomment-27995921",
      "id" : 27995921,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3220",
      "updated_at" : "2013-11-07T19:05:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/27995921",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "If we're going to deprecate `getrawtransaction` let's not make it more powerful first :)\r\n\r\nMaybe even split it into three commands:\r\n- `getwalletrawtransaction`  -> only active of not in nowallet mode\r\n- `getblockchainrawtransaction` -> only active when txindex=1\r\n- `getmempoolrawtransaction` -> always active\r\n\r\n**Edit: alternatively, make it one command, then add flags what sources to query. This makes it possible to query multiple or all sources at once if desired.**\r\n",
      "created_at" : "2013-11-08T07:48:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3220#issuecomment-28043409",
      "id" : 28043409,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3220",
      "updated_at" : "2013-11-08T08:05:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/28043409",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "`gettransaction` shows the raw hex of a wallet transaction since pull #3668. That's at least one of the points in this issue.\r\n",
      "created_at" : "2014-05-06T09:48:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3220#issuecomment-42283816",
      "id" : 42283816,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3220",
      "updated_at" : "2014-05-06T09:48:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/42283816",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Is there really any evidence of people using getrawtransaction without -txindex? I can't imagine how the current behaviour could be reliable for them.",
      "created_at" : "2014-05-06T09:52:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3220#issuecomment-42284150",
      "id" : 42284150,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3220",
      "updated_at" : "2014-05-06T09:52:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/42284150",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@sipa One usage scenario would be together with `getrawmempool`, to get transaction data for mempool transactions. If `getrawtransaction` were to only work with `-txindex` we'd have to do something like #3256 to get the tx...",
      "created_at" : "2014-05-09T08:20:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3220#issuecomment-42643332",
      "id" : 42643332,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3220",
      "updated_at" : "2014-05-09T08:20:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/42643332",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj Perhaps. Though if your transaction suddenly confirms between `getrawmempool` and `getrawtransaction`, you won't get it either.",
      "created_at" : "2014-05-09T10:27:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3220#issuecomment-42652492",
      "id" : 42652492,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3220",
      "updated_at" : "2014-05-09T10:27:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/42652492",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Yes, but if it confirms in that time, it may not be interesting anymore for a process monitoring the mempool.\r\n",
      "created_at" : "2014-05-09T10:35:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/3220#issuecomment-42652977",
      "id" : 42652977,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3220",
      "updated_at" : "2014-05-09T10:35:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/42652977",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
