[
   {
      "author_association" : "MEMBER",
      "body" : "Something like this, plus some release notes, should do? https://github.com/bitcoin/bitcoin/compare/master...Sjors:2018/08/nChainTx-64",
      "created_at" : "2018-08-04T16:08:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13875#issuecomment-410459634",
      "id" : 410459634,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13875",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxMDQ1OTYzNA==",
      "updated_at" : "2018-08-04T17:06:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410459634",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Could also rename both to `m_num_tx` according to release notes? (That would also help with review, since each usage of the member would have to be checked anyway)",
      "created_at" : "2018-08-04T16:18:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13875#issuecomment-410460341",
      "id" : 410460341,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13875",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxMDQ2MDM0MQ==",
      "updated_at" : "2018-08-04T16:18:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410460341",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke done (I updated the link above)\r\n\r\nI used `m_chain_num_tx` as distinct from `nTx` which can later be renamed to `m_num_tx`. That rename surfaced a bunch of things I hadn't thought about, which should be better now.",
      "created_at" : "2018-08-04T17:06:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13875#issuecomment-410463574",
      "id" : 410463574,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13875",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxMDQ2MzU3NA==",
      "updated_at" : "2018-08-04T17:06:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410463574",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "If it's still necessary by that time, the following soft fork should prevent any issues for existing clients (unless I missed something):\r\n\r\n1. The block which reaches `nChainTx == UINT32_MAX` much reach exactly `UINT32_MAX` total transactions.\r\n2. The block afer that must have `nTx >= 2`.\r\n3. Repeat this every UINT32_MAX transactions if necessary.\r\n\r\nAlternatively, even simpler:\r\n1. `nChainTx` modulo `UINT32_MAX + 1` may not be `0` for any future block\r\n\r\nBoth options prevent `nChainTx` from becoming `0` which is the only special case, at least as of current master.\r\n\r\nFor historical reference, this counter was added in 2012: https://github.com/bitcoin/bitcoin/pull/1677/commits/857c61df0b71c8a0482b1bf8fc55849f8ad831b8#diff-e8db9b851adc2422aadfffca88f14c91R1371",
      "created_at" : "2018-08-04T18:55:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13875#issuecomment-410470328",
      "id" : 410470328,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13875",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxMDQ3MDMyOA==",
      "updated_at" : "2018-08-04T19:04:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410470328",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Or we could eliminate the number, the only real use for it is progress estimation (vs just using it as a one bit flag to indicate if a block has been processed yet or not), and we could simply use a single shared counter and be slightly off due to reorgs (which shouldn't be happening during IBD regardless). \r\n\r\nAs an aside, segwit didn't change the size of the minimum workable transaction size, both before and after a transaction can be 60 bytes. (consider: otherwise segwit wouldn't be a soft fork if it allowed something that wasn't possible before...)",
      "created_at" : "2018-08-04T19:28:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13875#issuecomment-410472259",
      "id" : 410472259,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13875",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxMDQ3MjI1OQ==",
      "updated_at" : "2018-08-04T19:35:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410472259",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I noticed it was used for progress measurement, which the above soft fork wouldn't fix, but that seemed unimportant. ~I didn't realize it was _only_ used for that; I assumed it was doing more given the many occurances, but hadn't digged into what yet.~ (nvm; you didn't say that)",
      "created_at" : "2018-08-04T19:38:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13875#issuecomment-410472894",
      "id" : 410472894,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13875",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxMDQ3Mjg5NA==",
      "updated_at" : "2018-08-04T19:44:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410472894",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "As far as I know it is used (a) for progress estimation and (b) being nonzero is used as proxy for \"we have downloaded all blocks up to this point in the chain\".\n\nIt certainly has no effect on consensus rules.",
      "created_at" : "2018-08-04T20:23:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13875#issuecomment-410475315",
      "id" : 410475315,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13875",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxMDQ3NTMxNQ==",
      "updated_at" : "2018-08-04T20:23:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410475315",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "We should change the non-progress part to be a flag.  Separately, we might want to drop the field entirely just to reduce the size of the index, progress can be done in ways that don't involve megabytes of memory usage. :)",
      "created_at" : "2018-08-05T00:44:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13875#issuecomment-410486930",
      "id" : 410486930,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13875",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxMDQ4NjkzMA==",
      "updated_at" : "2018-08-05T00:44:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410486930",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   }
]
