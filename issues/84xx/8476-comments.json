[
   {
      "body" : "After running\r\n\r\n```\r\n bitcoin-cli reconsiderblock 00000000000000000304f0c7db28c15cc4226dfc491d4c4f0d8b9ae48744453a\r\n```\r\n\r\nI am again downloading blocks. So it seems like after rejecting a block due to timestamping one has to manually rejoin the main chain.  Could a miner cause some portion of the network to fall off the chain in this manner?  I guess we assume clocks are well synced.  Could this be an attack vector against a node is one could change their system time?\r\n\r\nAdditionally, nothing around block 422168 changed wrt my node, so the cause of this is still unknown.\r\n\r\n```\r\n2016-08-06 18:52:17 UpdateTip: new best=000000000000000001f4de9d78ed4c2015cb676440e58069f67319ae31e71c75  height=422169  log2_work=85.035824  tx=144587363  date=2016-07-25 05:38:02 progress=0.993514  cache=36.9MiB(17785tx)\r\n2016-08-06 18:52:19 UpdateTip: new best=0000000000000000000d5cfd54279cb7be1a9b887b28e8884b4aacfdd73a1421  height=422170  log2_work=85.035858  tx=144589379  date=2016-07-25 05:38:35 progress=0.993514  cache=45.5MiB(23339tx)\r\n2016-08-06 18:52:20 UpdateTip: new best=000000000000000003d7e112fbc1aebf4613551290985ebdec276ca6e97ad04a  height=422171  log2_work=85.035891  tx=144591190  date=2016-07-25 05:46:06 progress=0.993517  cache=51.8MiB(28183tx)\r\n2016-08-06 18:52:21 UpdateTip: new best=00000000000000000309a6d5c4afa5a14a9dfe180e508ba95120576871da8313  height=422172  log2_work=85.035924  tx=144592662  date=2016-07-25 05:47:05 progress=0.993517  cache=55.9MiB(32215tx)\r\n2016-08-06 18:52:23 UpdateTip: new best=00000000000000000216dc225d4cbd9d8518b4ad82558d5a8e551aa7290c0da5  height=422173  log2_work=85.035958  tx=144593727  date=2016-07-25 05:52:22 progress=0.993519  cache=67.4MiB(35366tx)\r\n2016-08-06 18:52:24 UpdateTip: new best=0000000000000000042b75880a26fb457e86fe62fde458aad5a3969ea4b71f50  height=422174  log2_work=85.035991  tx=144595236  date=2016-07-25 06:00:58 progress=0.993522  cache=70.2MiB(38386tx)\r\n2016-08-06 18:52:25 UpdateTip: new best=0000000000000000000639f06ff3d0cfac19d5dc124efac8082fdaa249025027  height=422175  log2_work=85.036024  tx=144597506  date=2016-07-25 06:14:27 progress=0.993527  cache=72.7MiB(42227tx)\r\n2016-08-06 18:52:26 UpdateTip: new best=000000000000000003322fd7f65df3c951eb7dc0d12eb2452b1b582ceb4ae6bd  height=422176  log2_work=85.036058  tx=144598669  date=2016-07-25 06:20:34 progress=0.993529  cache=74.1MiB(44110tx)\r\n2016-08-06 18:52:27 UpdateTip: new best=000000000000000005194f58664b9eca668d75813264e8e181a0d57d02a68b33  height=422177  log2_work=85.036091  tx=144599579  date=2016-07-25 06:23:57 progress=0.993531  cache=79.0MiB(46237tx)\r\n2016-08-06 18:52:28 UpdateTip: new best=000000000000000002e6b94f5623aa48e1a82705281368b8dc3936084512229f  height=422178  log2_work=85.036124  tx=144600185  date=2016-07-25 06:26:36 progress=0.993532  cache=79.3MiB(47199tx)\r\n2016-08-06 18:52:28 receive version message: /bitcoin-seeder:0.01/: version 60000, blocks=350000, us=68.184.202.88:8333, peer=140\r\n2016-08-06 18:52:28 receive version message: /bitcoinj:0.14.1/: version 70001, blocks=0, us=127.0.0.1:8333, peer=141\r\n2016-08-06 18:52:34 receive version message: /Snoopy:0.2.1/: version 70001, blocks=0, us=68.184.202.88:8333, peer=142\r\n2016-08-06 18:52:43 receive version message: /bitnodes.21.co:0.1/: version 70002, blocks=424015, us=68.184.202.88:8333, peer=143\r\n2016-08-06 18:52:46 receive version message: /bitcoin-seeder:0.01/: version 60000, blocks=350000, us=68.184.202.88:8333, peer=144\r\n2016-08-06 18:52:46   nActualTimespan = 1279095  before bounds\r\n2016-08-06 18:52:46 GetNextWorkRequired RETARGET\r\n2016-08-06 18:52:46 params.nPowTargetTimespan = 1209600    nActualTimespan = 1279095\r\n2016-08-06 18:52:46 Before: 18052669  0000000000000000052669000000000000000000000000000000000000000000\r\n2016-08-06 18:52:46 After:  18057228  000000000000000005722817c64c64c64c64c64c64c64c64c64c64c64c64c64c\r\n2016-08-06 18:52:49 UpdateTip: new best=000000000000000000bce7c7f4ab9a6e40eb076e3bb1d9e505354491f82c20ca  height=422179  log2_work=85.036158  tx=144601270  date=2016-07-25 06:31:02 progress=0.993533  cache=84.9MiB(49710tx)\r\n2016-08-06 18:52:50 UpdateTip: new best=000000000000000002bfba561e2d609528687d4093c5066c5f12d3e3cbdce01a  height=422180  log2_work=85.036191  tx=144601381  date=2016-07-25 06:34:35 progress=0.993534  cache=85.1MiB(50360tx)\r\n2016-08-06 18:52:51 UpdateTip: new best=00000000000000000057c0b5022cc6add2ededb896d38565175e0224542c7abf  height=422181  log2_work=85.036225  tx=144602722  date=2016-07-25 06:39:44 progress=0.993536  cache=93.3MiB(52342tx)\r\n2016-08-06 18:52:52 UpdateTip: new best=00000000000000000303b94f10aec9ab4405318e7aeb3b74ec296c6b6b68bcb7  height=422182  log2_work=85.036258  tx=144604070  date=2016-07-25 07:00:04 progress=0.993544  cache=94.8MiB(56177tx)\r\n2016-08-06 18:52:54 UpdateTip: new best=000000000000000001f8a8d3b6f03bc2fabcfe6d4408861b5b8d0ecfafcf32c7  height=422183  log2_work=85.036291  tx=144605603  date=2016-07-25 07:21:29 progress=0.993551  cache=96.3MiB(59989tx)\r\n2016-08-06 18:52:54 Leaving block file 579: CBlockFileInfo(blocks=163, size=133634206, heights=422025...422214, time=2016-07-24...2016-07-25)\r\n2016-08-06 18:52:54 Pre-allocating up to position 0x1000000 in blk00580.dat\r\n```",
      "created_at" : "2016-08-06T18:57:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8476#issuecomment-238043052",
      "id" : 238043052,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8476",
      "updated_at" : "2016-08-06T18:58:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/238043052",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1205677?v=3",
         "events_url" : "https://api.github.com/users/nathaniel-mahieu/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nathaniel-mahieu/followers",
         "following_url" : "https://api.github.com/users/nathaniel-mahieu/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nathaniel-mahieu/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nathaniel-mahieu",
         "id" : 1205677,
         "login" : "nathaniel-mahieu",
         "organizations_url" : "https://api.github.com/users/nathaniel-mahieu/orgs",
         "received_events_url" : "https://api.github.com/users/nathaniel-mahieu/received_events",
         "repos_url" : "https://api.github.com/users/nathaniel-mahieu/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nathaniel-mahieu/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nathaniel-mahieu/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nathaniel-mahieu"
      }
   },
   {
      "body" : "~~Did you try deleting last block and `-rescan`?~~",
      "created_at" : "2016-08-06T19:24:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8476#issuecomment-238044274",
      "id" : 238044274,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8476",
      "updated_at" : "2016-08-07T13:33:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/238044274",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/20167871?v=3",
         "events_url" : "https://api.github.com/users/mcccs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mcccs/followers",
         "following_url" : "https://api.github.com/users/mcccs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mcccs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mcccs",
         "id" : 20167871,
         "login" : "mcccs",
         "organizations_url" : "https://api.github.com/users/mcccs/orgs",
         "received_events_url" : "https://api.github.com/users/mcccs/received_events",
         "repos_url" : "https://api.github.com/users/mcccs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mcccs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mcccs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mcccs"
      }
   },
   {
      "body" : "> Did you try deleting last block and -rescan? \r\n\r\nPlease ignore that advice.\r\n\r\nYou can't delete a block without corrupting the database, and `-rescan` has only an effect on the wallet. The problem here seems to be with the block downloading logic.",
      "created_at" : "2016-08-06T23:01:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8476#issuecomment-238053472",
      "id" : 238053472,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8476",
      "updated_at" : "2016-08-06T23:01:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/238053472",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "@nathaniel-mahieu I saw this \"bug\" last week in the source code, but I have been unable to reproduce it on regtest, so I assumed it was just me not reading the code correctly. (My test fired the rule violation, waited 10 sec, re broadcasted, and checked if the node reconsidered, and it worked fine)",
      "created_at" : "2016-08-07T01:21:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8476#issuecomment-238057564",
      "id" : 238057564,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8476",
      "updated_at" : "2016-08-07T01:21:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/238057564",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "Might be related to https://github.com/bitcoin/bitcoin/issues/8411#issuecomment-238035612 (not about this particular rule though)",
      "created_at" : "2016-08-07T01:22:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8476#issuecomment-238057593",
      "id" : 238057593,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8476",
      "updated_at" : "2016-08-07T01:22:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/238057593",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3020646?v=3",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "body" : "I'm not sure that this is a bug, although I do think that it could be quite simple to get bitcoind to automatically reconsider the highest block upon startup, or whenever invalid blocks are seen. Either of these solutions would fix this, I think.\r\n\r\n@nathaniel-mahieu regarding attack vectors, yes, I think there may be a risk here in that with eclipse attacks the adjusted time could be influenced and cause a node to stop updating. With various fixes around, such as #8282 to help improve address management, and perhaps this combined with having the \"adjusted time\" influenced only by outbound connections (perhaps this is already what is done?), then this scenario would be much less likely to happen as far as I can see.",
      "created_at" : "2016-08-07T03:48:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/8476#issuecomment-238061671",
      "id" : 238061671,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8476",
      "updated_at" : "2016-09-21T07:42:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/238061671",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   }
]
