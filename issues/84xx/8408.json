{
   "assignee" : null,
   "assignees" : [],
   "body" : "Because getblocktxn requests for unknown blocks would trigger a disconnect, while a getblocktxn for known-old blocks would just be ignored, it should be possible to fingerprint a node by seeing which old, non-main-chain blocks trigger disconnect.\r\n\r\nThe first commit removes the misbehaving score to eliminate this distinction.\r\n\r\nIn the handling of CMPCTBLOCK messages, the handling for blocks that are announced that have too little work, or where the block was known but pruned, was busted -- for requested blocks, we would generate a getdata for the block, but for unrequested blocks, we'd fall through and try to process.  In particular, this means that announcing old CMPCTBLOCKs could cause a pruning node to redownload old blocks (potentially causing a fill-up-disk DoS).\r\n\r\nThe second commit fixes this by aborting processing of CMPCTBLOCK messages in this situation.\r\n\r\nPlease tag this for consideration in 0.13.0.",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 0,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8408/comments",
   "created_at" : "2016-07-26T21:21:34Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8408/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/8408",
   "id" : 167715093,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8408/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "number" : 8408,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/8408.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/8408",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/8408.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/8408"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Prevent fingerprinting, disk-DoS with compact blocks",
   "updated_at" : "2016-07-26T21:21:34Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/8408",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
      "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
      "followers_url" : "https://api.github.com/users/sdaftuar/followers",
      "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/sdaftuar",
      "id" : 7463573,
      "login" : "sdaftuar",
      "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
      "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
      "repos_url" : "https://api.github.com/users/sdaftuar/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/sdaftuar"
   }
}
