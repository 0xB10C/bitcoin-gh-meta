[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11050#discussion_r133097520"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11050"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133097520"
         }
      },
      "body" : "`get_array` already throws and above you also replace `RPCTypeCheck` validation with `get_bool`. Remove?",
      "commit_id" : "4195613ea411c164e8b30c5803d35ea90a863dee",
      "created_at" : "2017-08-15T00:55:22Z",
      "diff_hunk" : "@@ -2361,19 +2361,18 @@ UniValue lockunspent(const JSONRPCRequest& request)\n \n     LOCK2(cs_main, pwallet->cs_wallet);\n \n-    if (request.params.size() == 1)\n-        RPCTypeCheck(request.params, {UniValue::VBOOL});\n-    else\n-        RPCTypeCheck(request.params, {UniValue::VBOOL, UniValue::VARR});\n+    RPCTypeCheckArgument(request.params[0], UniValue::VBOOL);\n \n     bool fUnlock = request.params[0].get_bool();\n \n-    if (request.params.size() == 1) {\n+    if (request.params[1].isNull()) {\n         if (fUnlock)\n             pwallet->UnlockAllCoins();\n         return true;\n     }\n \n+    RPCTypeCheckArgument(request.params[1], UniValue::VARR);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11050#discussion_r133097520",
      "id" : 133097520,
      "original_commit_id" : "4195613ea411c164e8b30c5803d35ea90a863dee",
      "original_position" : 153,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 153,
      "pull_request_review_id" : 56241991,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11050",
      "updated_at" : "2017-08-15T01:03:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133097520",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11050#discussion_r133097936"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11050"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133097936"
         }
      },
      "body" : "IMO `size()` sounds better in this case.",
      "commit_id" : "4195613ea411c164e8b30c5803d35ea90a863dee",
      "created_at" : "2017-08-15T00:59:09Z",
      "diff_hunk" : "@@ -2361,19 +2361,18 @@ UniValue lockunspent(const JSONRPCRequest& request)\n \n     LOCK2(cs_main, pwallet->cs_wallet);\n \n-    if (request.params.size() == 1)\n-        RPCTypeCheck(request.params, {UniValue::VBOOL});\n-    else\n-        RPCTypeCheck(request.params, {UniValue::VBOOL, UniValue::VARR});\n+    RPCTypeCheckArgument(request.params[0], UniValue::VBOOL);\n \n     bool fUnlock = request.params[0].get_bool();\n \n-    if (request.params.size() == 1) {\n+    if (request.params[1].isNull()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11050#discussion_r133097936",
      "id" : 133097936,
      "original_commit_id" : "4195613ea411c164e8b30c5803d35ea90a863dee",
      "original_position" : 147,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 147,
      "pull_request_review_id" : 56241991,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11050",
      "updated_at" : "2017-08-15T01:03:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133097936",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11050#discussion_r133099769"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11050"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133099769"
         }
      },
      "body" : "> get_array already throws and above you also replace RPCTypeCheck validation with get_bool. Remove?\r\n\r\nIt throws a different error that doesn't specify passed type name.",
      "commit_id" : "4195613ea411c164e8b30c5803d35ea90a863dee",
      "created_at" : "2017-08-15T01:17:51Z",
      "diff_hunk" : "@@ -2361,19 +2361,18 @@ UniValue lockunspent(const JSONRPCRequest& request)\n \n     LOCK2(cs_main, pwallet->cs_wallet);\n \n-    if (request.params.size() == 1)\n-        RPCTypeCheck(request.params, {UniValue::VBOOL});\n-    else\n-        RPCTypeCheck(request.params, {UniValue::VBOOL, UniValue::VARR});\n+    RPCTypeCheckArgument(request.params[0], UniValue::VBOOL);\n \n     bool fUnlock = request.params[0].get_bool();\n \n-    if (request.params.size() == 1) {\n+    if (request.params[1].isNull()) {\n         if (fUnlock)\n             pwallet->UnlockAllCoins();\n         return true;\n     }\n \n+    RPCTypeCheckArgument(request.params[1], UniValue::VARR);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11050#discussion_r133099769",
      "id" : 133099769,
      "original_commit_id" : "4195613ea411c164e8b30c5803d35ea90a863dee",
      "original_position" : 153,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 153,
      "pull_request_review_id" : 56244263,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11050",
      "updated_at" : "2017-08-15T01:28:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133099769",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11050#discussion_r133100918"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11050"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133100918"
         }
      },
      "body" : "The problem with checking size == 1 is that it's fragile and will break if you want to add new arguments to the RPC. \r\n\r\nChecking params.size() can also create confusion when using named arguments, because the current named argument implementation creates variable length null-padded arrays, so adding or removing one named argument can cause a completely different argument to switch from missing to null or vice versa.\r\n\r\nThe point of this PR is to avoid uses of params.size() to prevent missing arguments from being treated differently than null arguments.",
      "commit_id" : "4195613ea411c164e8b30c5803d35ea90a863dee",
      "created_at" : "2017-08-15T01:28:14Z",
      "diff_hunk" : "@@ -2361,19 +2361,18 @@ UniValue lockunspent(const JSONRPCRequest& request)\n \n     LOCK2(cs_main, pwallet->cs_wallet);\n \n-    if (request.params.size() == 1)\n-        RPCTypeCheck(request.params, {UniValue::VBOOL});\n-    else\n-        RPCTypeCheck(request.params, {UniValue::VBOOL, UniValue::VARR});\n+    RPCTypeCheckArgument(request.params[0], UniValue::VBOOL);\n \n     bool fUnlock = request.params[0].get_bool();\n \n-    if (request.params.size() == 1) {\n+    if (request.params[1].isNull()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11050#discussion_r133100918",
      "id" : 133100918,
      "original_commit_id" : "4195613ea411c164e8b30c5803d35ea90a863dee",
      "original_position" : 147,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 147,
      "pull_request_review_id" : 56244263,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11050",
      "updated_at" : "2017-08-15T01:28:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133100918",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
