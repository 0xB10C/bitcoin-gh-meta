[
   {
      "body" : "Not sure why `zapwallettxes.py` is failing. It's not touching anything I changed (and the test passes on my fork's travis & when running the test locally / via `make check` ...). @jnewbery thoughts?",
      "created_at" : "2017-08-10T09:06:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11020#issuecomment-321495466",
      "id" : 321495466,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11020",
      "updated_at" : "2017-08-10T09:06:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321495466",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "body" : "The zapwallettxes' failure is intermittent. Respinned travis.",
      "created_at" : "2017-08-10T09:36:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11020#issuecomment-321502374",
      "id" : 321502374,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11020",
      "updated_at" : "2017-08-10T09:36:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321502374",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "I'd hoped that #10330 had fixed the zapwallettxes intermittency. @MarcoFalke do you have an example of it failing (the failure on this PR is no longer available since the task was restarted in Travis).\r\n\r\n(apologies for being off-topic)",
      "created_at" : "2017-08-10T15:39:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11020#issuecomment-321589503",
      "id" : 321589503,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11020",
      "updated_at" : "2017-08-10T15:39:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321589503",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "@jnewbery Sorry I didn't keep track of the exact failure this time, I assume it was one of the known issues that popped up recently.",
      "created_at" : "2017-08-10T20:03:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11020#issuecomment-321658473",
      "id" : 321658473,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11020",
      "updated_at" : "2017-08-10T20:03:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321658473",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11020#discussion_r132804998"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132804998"
         }
      },
      "body" : "Nit, snake case.",
      "commit_id" : "5b644c85b725b11fd44d0412868023419b06492b",
      "created_at" : "2017-08-12T00:37:55Z",
      "diff_hunk" : "@@ -940,7 +940,7 @@ class CWallet : public CCryptoKeyStore, public CValidationInterface\n     void ResendWalletTransactions(int64_t nBestBlockTime, CConnman* connman) override;\n     // ResendWalletTransactionsBefore may only be called if fBroadcastTransactions!\n     std::vector<uint256> ResendWalletTransactionsBefore(int64_t nTime, CConnman* connman);\n-    CAmount GetBalance() const;\n+    CAmount GetBalance(bool ignoreUnspendable = true) const;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11020#discussion_r132804998",
      "id" : 132804998,
      "original_commit_id" : "5b644c85b725b11fd44d0412868023419b06492b",
      "original_position" : 14,
      "path" : "src/wallet/wallet.h",
      "position" : 14,
      "pull_request_review_id" : 55930842,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11020",
      "updated_at" : "2017-08-12T00:59:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132804998",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11020#discussion_r132805003"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132805003"
         }
      },
      "body" : "Nit, snake case.",
      "commit_id" : "5b644c85b725b11fd44d0412868023419b06492b",
      "created_at" : "2017-08-12T00:38:00Z",
      "diff_hunk" : "@@ -465,7 +465,7 @@ class CWalletTx : public CMerkleTx\n     bool IsEquivalentTo(const CWalletTx& tx) const;\n \n     bool InMempool() const;\n-    bool IsTrusted() const;\n+    bool IsTrusted(bool ignoreUnspendable = true) const;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11020#discussion_r132805003",
      "id" : 132805003,
      "original_commit_id" : "5b644c85b725b11fd44d0412868023419b06492b",
      "original_position" : 5,
      "path" : "src/wallet/wallet.h",
      "position" : 5,
      "pull_request_review_id" : 55930842,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11020",
      "updated_at" : "2017-08-12T00:59:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132805003",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11020#discussion_r132805193"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132805193"
         }
      },
      "body" : "Assert exact value?",
      "commit_id" : "5b644c85b725b11fd44d0412868023419b06492b",
      "created_at" : "2017-08-12T00:42:55Z",
      "diff_hunk" : "@@ -392,6 +392,8 @@ def run_test(self):\n         extra_txid = self.nodes[0].sendtoaddress(sending_addr, Decimal('0.0001'))\n         assert(extra_txid not in self.nodes[0].getrawmempool())\n         assert(extra_txid in [tx[\"txid\"] for tx in self.nodes[0].listtransactions()])\n+        # The change output for extra_txid should be in the balance if we include unspendable\n+        assert(self.nodes[0].getbalance() < self.nodes[0].getbalance(include_unspendable=True))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11020#discussion_r132805193",
      "id" : 132805193,
      "original_commit_id" : "5b644c85b725b11fd44d0412868023419b06492b",
      "original_position" : 5,
      "path" : "test/functional/wallet.py",
      "position" : 5,
      "pull_request_review_id" : 55930842,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11020",
      "updated_at" : "2017-08-12T00:59:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132805193",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11020#discussion_r132805271"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132805271"
         }
      },
      "body" : "Nit, snake case.",
      "commit_id" : "5b644c85b725b11fd44d0412868023419b06492b",
      "created_at" : "2017-08-12T00:44:34Z",
      "diff_hunk" : "@@ -1823,7 +1823,7 @@ bool CWalletTx::InMempool() const\n     return mempool.exists(GetHash());\n }\n \n-bool CWalletTx::IsTrusted() const\n+bool CWalletTx::IsTrusted(bool ignoreUnspendable) const",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11020#discussion_r132805271",
      "id" : 132805271,
      "original_commit_id" : "5b644c85b725b11fd44d0412868023419b06492b",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : 5,
      "pull_request_review_id" : 55930842,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11020",
      "updated_at" : "2017-08-12T00:59:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132805271",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11020#discussion_r132805796"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132805796"
         }
      },
      "body" : "Update comment.",
      "commit_id" : "5b644c85b725b11fd44d0412868023419b06492b",
      "created_at" : "2017-08-12T00:59:24Z",
      "diff_hunk" : "@@ -1837,7 +1837,7 @@ bool CWalletTx::IsTrusted() const\n         return false;\n \n     // Don't trust unconfirmed transactions from us unless they are in the mempool.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11020#discussion_r132805796",
      "id" : 132805796,
      "original_commit_id" : "5b644c85b725b11fd44d0412868023419b06492b",
      "original_position" : 12,
      "path" : "src/wallet/wallet.cpp",
      "position" : 12,
      "pull_request_review_id" : 55930842,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11020",
      "updated_at" : "2017-08-12T00:59:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132805796",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11020#discussion_r132976907"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132976907"
         }
      },
      "body" : "I think this argument name is a bit confusing. Perhaps `include_not_yet_spendable`. It's a bit of a mouthful, but 'unspendable' sounds too permanent to me.",
      "commit_id" : "5b644c85b725b11fd44d0412868023419b06492b",
      "created_at" : "2017-08-14T15:11:54Z",
      "diff_hunk" : "@@ -755,6 +755,8 @@ UniValue getbalance(const JSONRPCRequest& request)\n             \"                     avoid passing this argument.\\n\"\n             \"2. minconf           (numeric, optional, default=1) Only include transactions confirmed at least this many times.\\n\"\n             \"3. include_watchonly (bool, optional, default=false) Also include balance in watch-only addresses (see 'importaddress')\\n\"\n+            \"4. include_unspendable (bool, optional, default=false) Also include balance for UTXOs which are currently not (but\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11020#discussion_r132976907",
      "id" : 132976907,
      "original_commit_id" : "5b644c85b725b11fd44d0412868023419b06492b",
      "original_position" : 16,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 16,
      "pull_request_review_id" : 56108066,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11020",
      "updated_at" : "2017-08-14T15:22:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132976907",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11020#discussion_r132978397"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132978397"
         }
      },
      "body" : "This is confusing for me. `include_unspendable` only has effect if:\r\n\r\n- `account` is not specified; and\r\n- `minconf` is not specified; and\r\n- `include_watchonly` is not specified\r\n\r\nAdditionally, if `account` is specified as `\"\"` (ie balance not associated with any account), the returned balance will use `GetBalance()` if `include_unspendable` is not set, but `GetLegacyBalance()` if it is set.\r\n\r\nCan you explain the reasoning here?",
      "commit_id" : "5b644c85b725b11fd44d0412868023419b06492b",
      "created_at" : "2017-08-14T15:17:22Z",
      "diff_hunk" : "@@ -768,8 +770,10 @@ UniValue getbalance(const JSONRPCRequest& request)\n \n     LOCK2(cs_main, pwallet->cs_wallet);\n \n-    if (request.params.size() == 0)\n-        return  ValueFromAmount(pwallet->GetBalance());\n+    bool ignoreUnspendable = request.params[3].isNull() || !request.params[3].get_bool();\n+    if ((request.params[0].isNull() || (request.params[0].get_str() == \"\" && !ignoreUnspendable)) && request.params[1].isNull() && request.params[2].isNull()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11020#discussion_r132978397",
      "id" : 132978397,
      "original_commit_id" : "5b644c85b725b11fd44d0412868023419b06492b",
      "original_position" : 28,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 28,
      "pull_request_review_id" : 56108066,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11020",
      "updated_at" : "2017-08-14T15:22:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132978397",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11020#discussion_r132978623"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132978623"
         }
      },
      "body" : "I find it confusing that the API uses `include_unspendable`, but internally you use `ignoreUnspendable` which is the inverse. Any reason not to be consistent?",
      "commit_id" : "5b644c85b725b11fd44d0412868023419b06492b",
      "created_at" : "2017-08-14T15:18:13Z",
      "diff_hunk" : "@@ -768,8 +770,10 @@ UniValue getbalance(const JSONRPCRequest& request)\n \n     LOCK2(cs_main, pwallet->cs_wallet);\n \n-    if (request.params.size() == 0)\n-        return  ValueFromAmount(pwallet->GetBalance());\n+    bool ignoreUnspendable = request.params[3].isNull() || !request.params[3].get_bool();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11020#discussion_r132978623",
      "id" : 132978623,
      "original_commit_id" : "5b644c85b725b11fd44d0412868023419b06492b",
      "original_position" : 27,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 27,
      "pull_request_review_id" : 56108066,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11020",
      "updated_at" : "2017-08-14T15:22:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132978623",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11020#discussion_r132979387"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132979387"
         }
      },
      "body" : "Asserting on exact values can make the test more brittle. I think it's fine to test strict lesser than here.",
      "commit_id" : "5b644c85b725b11fd44d0412868023419b06492b",
      "created_at" : "2017-08-14T15:20:48Z",
      "diff_hunk" : "@@ -392,6 +392,8 @@ def run_test(self):\n         extra_txid = self.nodes[0].sendtoaddress(sending_addr, Decimal('0.0001'))\n         assert(extra_txid not in self.nodes[0].getrawmempool())\n         assert(extra_txid in [tx[\"txid\"] for tx in self.nodes[0].listtransactions()])\n+        # The change output for extra_txid should be in the balance if we include unspendable\n+        assert(self.nodes[0].getbalance() < self.nodes[0].getbalance(include_unspendable=True))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11020#discussion_r132979387",
      "id" : 132979387,
      "original_commit_id" : "5b644c85b725b11fd44d0412868023419b06492b",
      "original_position" : 5,
      "path" : "test/functional/wallet.py",
      "position" : 5,
      "pull_request_review_id" : 56108066,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11020",
      "updated_at" : "2017-08-14T15:22:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132979387",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11020#discussion_r132979704"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132979704"
         }
      },
      "body" : "Again, I think the name `ignoreUnspendable` could be made clearer.",
      "commit_id" : "5b644c85b725b11fd44d0412868023419b06492b",
      "created_at" : "2017-08-14T15:21:54Z",
      "diff_hunk" : "@@ -1823,7 +1823,7 @@ bool CWalletTx::InMempool() const\n     return mempool.exists(GetHash());\n }\n \n-bool CWalletTx::IsTrusted() const\n+bool CWalletTx::IsTrusted(bool ignoreUnspendable) const",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11020#discussion_r132979704",
      "id" : 132979704,
      "original_commit_id" : "5b644c85b725b11fd44d0412868023419b06492b",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : 5,
      "pull_request_review_id" : 56108066,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11020",
      "updated_at" : "2017-08-14T15:22:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132979704",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
