[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11084#discussion_r134128043"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11084"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134128043"
         }
      },
      "body" : "Hmm, maybe just \"us\"? Dunno if we want to introduce unicode into our logs by default.",
      "commit_id" : "fa3d8d371227153ed2e5573a2a065ae457fe8117",
      "created_at" : "2017-08-20T22:25:54Z",
      "diff_hunk" : "@@ -3183,6 +3184,12 @@ bool SendMessages(CNode* pto, CConnman& connman, const std::atomic<bool>& interr\n                     }\n                     pto->filterInventoryKnown.insert(hash);\n                 }\n+                int64_t nInvTrickleTimeEnd = GetTimeMicros();\n+                nInvTrickleTimeSum += (nInvTrickleTimeEnd - nInvTrickleTimeStart);\n+                nInvTricklePasses++;\n+                if (nInvTricklePasses % 1000 == 0) {\n+                    LogPrint(BCLog::BENCH, \"    - inv.trickle: %.2fÃÂ¼s/tx [%.2f txs/pass]\\n\", (float)nInvTrickleTimeSum / nInvTrickleCount, (float)nInvTrickleCount / nInvTricklePasses);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11084#discussion_r134128043",
      "id" : 134128043,
      "original_commit_id" : "fa3d8d371227153ed2e5573a2a065ae457fe8117",
      "original_position" : 96,
      "path" : "src/net_processing.cpp",
      "position" : 96,
      "pull_request_review_id" : 57384024,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11084",
      "updated_at" : "2017-08-20T23:45:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134128043",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11084#discussion_r134129655"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11084"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134129655"
         }
      },
      "body" : "I suppose things are broken after commit \"[refactor] Use uint256 vector instead of set iterator vector in trickÃ¢ÂÂ¦\" but fixed later? Looks like it'll wipe setInventoryTxToSend always, whereas previously it oulw only wipe the first INVENTORY_BROADCAST_MAX entries and retry the rest later, and then the next commit fixes it by limiting this loop to INVENTORY_BROADCAST_MAX.",
      "commit_id" : "fa3d8d371227153ed2e5573a2a065ae457fe8117",
      "created_at" : "2017-08-20T23:36:33Z",
      "diff_hunk" : "@@ -3122,10 +3122,11 @@ bool SendMessages(CNode* pto, CConnman& connman, const std::atomic<bool>& interr\n             // Determine transactions to relay\n             if (fSendTrickle) {\n                 // Produce a vector with all candidates for sending\n-                std::vector<std::set<uint256>::iterator> vInvTx;\n+                std::vector<uint256> vInvTx;\n                 vInvTx.reserve(pto->setInventoryTxToSend.size());\n-                for (std::set<uint256>::iterator it = pto->setInventoryTxToSend.begin(); it != pto->setInventoryTxToSend.end(); it++) {\n-                    vInvTx.push_back(it);\n+                for (std::set<uint256>::iterator it = pto->setInventoryTxToSend.begin(); it != pto->setInventoryTxToSend.end(); ) {\n+                    vInvTx.push_back(*it);\n+                    it = pto->setInventoryTxToSend.erase(it);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11084#discussion_r134129655",
      "id" : 134129655,
      "original_commit_id" : "d8e8280a4e4243cdb3724e6afd33841fc021b7b7",
      "original_position" : 25,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 57384024,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11084",
      "updated_at" : "2017-08-20T23:45:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134129655",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   }
]
