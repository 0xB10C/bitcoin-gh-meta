[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134128377"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134128377"
         }
      },
      "body" : "This is not correct since it can fail.",
      "commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "created_at" : "2017-08-20T22:40:59Z",
      "diff_hunk" : "@@ -1531,6 +1531,21 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n     return ret;\n }\n \n+UniValue dumpmempool(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() > 0)\n+        throw std::runtime_error(\n+            \"dumpmempool\\n\"\n+            \"\\nDumps to disk the mempool (mempool.dat).\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"dumpmempool\", \"\")\n+            + HelpExampleRpc(\"dumpmempool\", \"\")\n+        );\n+\n+    DumpMempool();\n+    return \"Mempool dumped\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134128377",
      "id" : 134128377,
      "original_commit_id" : "b83be8d2a40e3aa4a1766a86c9a26c4517fea67c",
      "original_position" : 16,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 57384353,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-23T11:43:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134128377",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134128392"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134128392"
         }
      },
      "body" : "Remove the filename?",
      "commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "created_at" : "2017-08-20T22:41:38Z",
      "diff_hunk" : "@@ -1531,6 +1531,21 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n     return ret;\n }\n \n+UniValue dumpmempool(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() > 0)\n+        throw std::runtime_error(\n+            \"dumpmempool\\n\"\n+            \"\\nDumps to disk the mempool (mempool.dat).\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134128392",
      "id" : 134128392,
      "original_commit_id" : "b83be8d2a40e3aa4a1766a86c9a26c4517fea67c",
      "original_position" : 9,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 57384353,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-23T11:43:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134128392",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Suggestion, reword `Add dumpmempool RPC`.",
      "created_at" : "2017-08-20T22:46:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-323616955",
      "id" : 323616955,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-20T22:46:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323616955",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@promag thanks, updated as for feedback and squashed",
      "created_at" : "2017-08-21T01:45:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-323627960",
      "id" : 323627960,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-21T01:45:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323627960",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/5269298?v=4",
         "events_url" : "https://api.github.com/users/greenaddress/events{/privacy}",
         "followers_url" : "https://api.github.com/users/greenaddress/followers",
         "following_url" : "https://api.github.com/users/greenaddress/following{/other_user}",
         "gists_url" : "https://api.github.com/users/greenaddress/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/greenaddress",
         "id" : 5269298,
         "login" : "greenaddress",
         "organizations_url" : "https://api.github.com/users/greenaddress/orgs",
         "received_events_url" : "https://api.github.com/users/greenaddress/received_events",
         "repos_url" : "https://api.github.com/users/greenaddress/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/greenaddress/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/greenaddress/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/greenaddress"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134171209"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134171209"
         }
      },
      "body" : "Sort, move before `getblockchaininfo `.",
      "commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "created_at" : "2017-08-21T08:25:29Z",
      "diff_hunk" : "@@ -1552,6 +1568,7 @@ static const CRPCCommand commands[] =\n     { \"blockchain\",         \"gettxoutsetinfo\",        &gettxoutsetinfo,        true,  {} },\n     { \"blockchain\",         \"pruneblockchain\",        &pruneblockchain,        true,  {\"height\"} },\n     { \"blockchain\",         \"verifychain\",            &verifychain,            true,  {\"checklevel\",\"nblocks\"} },\n+    { \"blockchain\",         \"dumpmempool\",            &dumpmempool,            true,  {} },",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134171209",
      "id" : 134171209,
      "original_commit_id" : "07d3aacbcb1e17bfe7220ae52eb93d2d51c602dc",
      "original_position" : 27,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 57430762,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-23T11:43:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134171209",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134171514"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134171514"
         }
      },
      "body" : "Missing `{ }`.",
      "commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "created_at" : "2017-08-21T08:26:52Z",
      "diff_hunk" : "@@ -1531,6 +1531,22 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n     return ret;\n }\n \n+UniValue dumpmempool(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() > 0)\n+        throw std::runtime_error(\n+            \"dumpmempool\\n\"\n+            \"\\nDumps to disk the mempool.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"dumpmempool\", \"\")\n+            + HelpExampleRpc(\"dumpmempool\", \"\")\n+        );\n+\n+    if (!DumpMempool())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134171514",
      "id" : 134171514,
      "original_commit_id" : "07d3aacbcb1e17bfe7220ae52eb93d2d51c602dc",
      "original_position" : 15,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 57430762,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-23T11:43:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134171514",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134171596"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134171596"
         }
      },
      "body" : "Nit, new line before `return`.",
      "commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "created_at" : "2017-08-21T08:27:06Z",
      "diff_hunk" : "@@ -1531,6 +1531,22 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n     return ret;\n }\n \n+UniValue dumpmempool(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() > 0)\n+        throw std::runtime_error(\n+            \"dumpmempool\\n\"\n+            \"\\nDumps to disk the mempool.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"dumpmempool\", \"\")\n+            + HelpExampleRpc(\"dumpmempool\", \"\")\n+        );\n+\n+    if (!DumpMempool())\n+        throw JSONRPCError(RPC_INTERNAL_ERROR, \"Unable to dump mempool to disk\");\n+    return \"Mempool dumped\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134171596",
      "id" : 134171596,
      "original_commit_id" : "07d3aacbcb1e17bfe7220ae52eb93d2d51c602dc",
      "original_position" : 17,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 57430762,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-23T11:43:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134171596",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "@promag thanks, updated as for feedback and split in two commits\r\n\r\nre: RPC_INTERNAL_ERROR - didn't immediately found something better, very open to suggestions\r\n\r\nAnything else you would add to the test?",
      "created_at" : "2017-08-21T11:26:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-323719469",
      "id" : 323719469,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-21T11:26:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323719469",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/5269298?v=4",
         "events_url" : "https://api.github.com/users/greenaddress/events{/privacy}",
         "followers_url" : "https://api.github.com/users/greenaddress/followers",
         "following_url" : "https://api.github.com/users/greenaddress/following{/other_user}",
         "gists_url" : "https://api.github.com/users/greenaddress/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/greenaddress",
         "id" : 5269298,
         "login" : "greenaddress",
         "organizations_url" : "https://api.github.com/users/greenaddress/orgs",
         "received_events_url" : "https://api.github.com/users/greenaddress/received_events",
         "repos_url" : "https://api.github.com/users/greenaddress/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/greenaddress/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/greenaddress/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/greenaddress"
      }
   },
   {
      "body" : "I meant maybe not throw, and have the bool in the response.",
      "created_at" : "2017-08-21T21:37:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-323859945",
      "id" : 323859945,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-21T21:37:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323859945",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "I think the condition is exceptional and deserve a throw of an exception & consistent with the other rpcs (though I don't know if there's a more appropriate exception for it)",
      "created_at" : "2017-08-21T22:02:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-323864706",
      "id" : 323864706,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-21T22:02:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323864706",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/5269298?v=4",
         "events_url" : "https://api.github.com/users/greenaddress/events{/privacy}",
         "followers_url" : "https://api.github.com/users/greenaddress/followers",
         "following_url" : "https://api.github.com/users/greenaddress/following{/other_user}",
         "gists_url" : "https://api.github.com/users/greenaddress/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/greenaddress",
         "id" : 5269298,
         "login" : "greenaddress",
         "organizations_url" : "https://api.github.com/users/greenaddress/orgs",
         "received_events_url" : "https://api.github.com/users/greenaddress/received_events",
         "repos_url" : "https://api.github.com/users/greenaddress/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/greenaddress/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/greenaddress/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/greenaddress"
      }
   },
   {
      "body" : "I almost agree with that if it wasn't the fact that the function doesn't throw.. but I have no strong opinion on that.\r\n\r\nIf the throw stays, then maybe `RPC_MISC_ERROR`. See what causes `RPC_INTERNAL_ERROR`, sound like really bad excpetions.",
      "created_at" : "2017-08-21T22:13:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-323866570",
      "id" : 323866570,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-21T22:13:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323866570",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134432363"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134432363"
         }
      },
      "body" : "I'm not the one to complain about this: but should it be `\"Dumps the mempool to disk\"?",
      "commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "created_at" : "2017-08-22T09:41:38Z",
      "diff_hunk" : "@@ -1531,9 +1531,28 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n     return ret;\n }\n \n+UniValue dumpmempool(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() > 0)\n+        throw std::runtime_error(\n+            \"dumpmempool\\n\"\n+            \"\\nDumps to disk the mempool.\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134432363",
      "id" : 134432363,
      "original_commit_id" : "6df6ce09e454555ee6c2181f3b474ca57826bebd",
      "original_position" : 9,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 57720729,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-23T11:43:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134432363",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134432492"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134432492"
         }
      },
      "body" : "Because this is machine to machine communication, use `true` as ret val at this point?",
      "commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "created_at" : "2017-08-22T09:42:13Z",
      "diff_hunk" : "@@ -1531,9 +1531,28 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n     return ret;\n }\n \n+UniValue dumpmempool(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() > 0)\n+        throw std::runtime_error(\n+            \"dumpmempool\\n\"\n+            \"\\nDumps to disk the mempool.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"dumpmempool\", \"\")\n+            + HelpExampleRpc(\"dumpmempool\", \"\")\n+        );\n+\n+    if (!DumpMempool()) {\n+        throw JSONRPCError(RPC_INTERNAL_ERROR, \"Unable to dump mempool to disk\");\n+    }\n+\n+    return \"Mempool dumped\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134432492",
      "id" : 134432492,
      "original_commit_id" : "6df6ce09e454555ee6c2181f3b474ca57826bebd",
      "original_position" : 19,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 57720729,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-23T11:43:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134432492",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "thanks @jonasschnelli - good points\r\n\r\nadded a commit (which i think should be squashed at some point together with \"Add dumpmempool RPC\")",
      "created_at" : "2017-08-22T12:43:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-324014364",
      "id" : 324014364,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-22T12:43:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324014364",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/5269298?v=4",
         "events_url" : "https://api.github.com/users/greenaddress/events{/privacy}",
         "followers_url" : "https://api.github.com/users/greenaddress/followers",
         "following_url" : "https://api.github.com/users/greenaddress/following{/other_user}",
         "gists_url" : "https://api.github.com/users/greenaddress/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/greenaddress",
         "id" : 5269298,
         "login" : "greenaddress",
         "organizations_url" : "https://api.github.com/users/greenaddress/orgs",
         "received_events_url" : "https://api.github.com/users/greenaddress/received_events",
         "repos_url" : "https://api.github.com/users/greenaddress/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/greenaddress/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/greenaddress/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/greenaddress"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134650130"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134650130"
         }
      },
      "body" : "Maybe `RPC_MISC_ERROR`. See what causes `RPC_INTERNAL_ERROR`, sounds like really bad exceptions.",
      "commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "created_at" : "2017-08-23T03:28:21Z",
      "diff_hunk" : "@@ -1531,9 +1531,28 @@ UniValue getchaintxstats(const JSONRPCRequest& request)\n     return ret;\n }\n \n+UniValue dumpmempool(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() != 0)\n+        throw std::runtime_error(\n+            \"dumpmempool\\n\"\n+            \"\\nDumps the mempool to disk.\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"dumpmempool\", \"\")\n+            + HelpExampleRpc(\"dumpmempool\", \"\")\n+        );\n+\n+    if (!DumpMempool()) {\n+        throw JSONRPCError(RPC_INTERNAL_ERROR, \"Unable to dump mempool to disk\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134650130",
      "id" : 134650130,
      "original_commit_id" : "d6322291ebe8d956c8b904dc39e500e7ec5ae3ea",
      "original_position" : 16,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 57965652,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-23T11:43:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134650130",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "utACK cd0ea487422028bec1f5df62ab4c57909c2bcc90\r\n\r\nMaybe add an rational (possible use-cases) to the PR description. ",
      "created_at" : "2017-08-23T10:57:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-324294605",
      "id" : 324294605,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-23T10:57:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324294605",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@promag updated the exception, thanks\r\n\r\n@jonasschnelli updated the description. Please note your utACK points to a commit from @TheBlueMatt. GitHub also tells me there's some changes required, should I ignore that?",
      "created_at" : "2017-08-23T11:56:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#issuecomment-324306305",
      "id" : 324306305,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11099",
      "updated_at" : "2017-08-23T11:56:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324306305",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/5269298?v=4",
         "events_url" : "https://api.github.com/users/greenaddress/events{/privacy}",
         "followers_url" : "https://api.github.com/users/greenaddress/followers",
         "following_url" : "https://api.github.com/users/greenaddress/following{/other_user}",
         "gists_url" : "https://api.github.com/users/greenaddress/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/greenaddress",
         "id" : 5269298,
         "login" : "greenaddress",
         "organizations_url" : "https://api.github.com/users/greenaddress/orgs",
         "received_events_url" : "https://api.github.com/users/greenaddress/received_events",
         "repos_url" : "https://api.github.com/users/greenaddress/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/greenaddress/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/greenaddress/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/greenaddress"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134730881"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134730881"
         }
      },
      "body" : "Use `os.path.join`, so that it works on other operating systems as well.",
      "commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "created_at" : "2017-08-23T12:00:57Z",
      "diff_hunk" : "@@ -0,0 +1,43 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test mempool dump.\n+\n+By default, bitcoind will dump mempool on shutdown and\n+then reload it on startup. Dump can also happen when requested via RPC.\n+\n+Test is as follows:\n+\n+  - start node0\n+  - check no mempool file exist\n+  - dump mempool and verify it then exists\n+  - move parent directory to cause fail to dump, verify exception\n+\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os\n+\n+class MempoolDumpTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        self.log.debug(\"Verify mempool file doesn't exists\")\n+        mempooldat = self.options.tmpdir + \"/node0/regtest/mempool.dat\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134730881",
      "id" : 134730881,
      "original_commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "original_position" : 32,
      "path" : "test/functional/mempool_dump.py",
      "position" : 32,
      "pull_request_review_id" : 58055545,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-23T12:06:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134730881",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134731366"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134731366"
         }
      },
      "body" : "Might use `os.path.isfile` for better readability.",
      "commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "created_at" : "2017-08-23T12:02:57Z",
      "diff_hunk" : "@@ -0,0 +1,43 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test mempool dump.\n+\n+By default, bitcoind will dump mempool on shutdown and\n+then reload it on startup. Dump can also happen when requested via RPC.\n+\n+Test is as follows:\n+\n+  - start node0\n+  - check no mempool file exist\n+  - dump mempool and verify it then exists\n+  - move parent directory to cause fail to dump, verify exception\n+\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os\n+\n+class MempoolDumpTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        self.log.debug(\"Verify mempool file doesn't exists\")\n+        mempooldat = self.options.tmpdir + \"/node0/regtest/mempool.dat\"\n+        assert_raises(OSError, lambda: os.remove(mempooldat))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134731366",
      "id" : 134731366,
      "original_commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "original_position" : 33,
      "path" : "test/functional/mempool_dump.py",
      "position" : 33,
      "pull_request_review_id" : 58055545,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-23T12:06:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134731366",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134731519"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134731519"
         }
      },
      "body" : "nit: No need for assert_equal, you can just `assert dumpmempool()`",
      "commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "created_at" : "2017-08-23T12:03:43Z",
      "diff_hunk" : "@@ -0,0 +1,43 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test mempool dump.\n+\n+By default, bitcoind will dump mempool on shutdown and\n+then reload it on startup. Dump can also happen when requested via RPC.\n+\n+Test is as follows:\n+\n+  - start node0\n+  - check no mempool file exist\n+  - dump mempool and verify it then exists\n+  - move parent directory to cause fail to dump, verify exception\n+\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os\n+\n+class MempoolDumpTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        self.log.debug(\"Verify mempool file doesn't exists\")\n+        mempooldat = self.options.tmpdir + \"/node0/regtest/mempool.dat\"\n+        assert_raises(OSError, lambda: os.remove(mempooldat))\n+        self.log.debug(\"Dump mempool to disk\")\n+        assert_equal(self.nodes[0].dumpmempool(), True)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134731519",
      "id" : 134731519,
      "original_commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "original_position" : 35,
      "path" : "test/functional/mempool_dump.py",
      "position" : 35,
      "pull_request_review_id" : 58055545,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-23T12:06:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134731519",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134731692"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134731692"
         }
      },
      "body" : "I don't think we allow the datadir to be moved while running. The tests should not rely on this.",
      "commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "created_at" : "2017-08-23T12:04:44Z",
      "diff_hunk" : "@@ -0,0 +1,43 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test mempool dump.\n+\n+By default, bitcoind will dump mempool on shutdown and\n+then reload it on startup. Dump can also happen when requested via RPC.\n+\n+Test is as follows:\n+\n+  - start node0\n+  - check no mempool file exist\n+  - dump mempool and verify it then exists\n+  - move parent directory to cause fail to dump, verify exception\n+\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os\n+\n+class MempoolDumpTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        self.log.debug(\"Verify mempool file doesn't exists\")\n+        mempooldat = self.options.tmpdir + \"/node0/regtest/mempool.dat\"\n+        assert_raises(OSError, lambda: os.remove(mempooldat))\n+        self.log.debug(\"Dump mempool to disk\")\n+        assert_equal(self.nodes[0].dumpmempool(), True)\n+        assert_equal(os.path.isfile(mempooldat), True)\n+        os.rename(self.options.tmpdir + \"/node0/regtest\", self.options.tmpdir + \"/node0/regtest_bk\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134731692",
      "id" : 134731692,
      "original_commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "original_position" : 37,
      "path" : "test/functional/mempool_dump.py",
      "position" : 37,
      "pull_request_review_id" : 58055545,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-23T12:06:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134731692",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134731914"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134731914"
         }
      },
      "body" : "You might be able to achieve the same error condition by changing the file permissions, though.",
      "commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "created_at" : "2017-08-23T12:05:51Z",
      "diff_hunk" : "@@ -0,0 +1,43 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2017 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test mempool dump.\n+\n+By default, bitcoind will dump mempool on shutdown and\n+then reload it on startup. Dump can also happen when requested via RPC.\n+\n+Test is as follows:\n+\n+  - start node0\n+  - check no mempool file exist\n+  - dump mempool and verify it then exists\n+  - move parent directory to cause fail to dump, verify exception\n+\n+\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+import os\n+\n+class MempoolDumpTest(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        self.log.debug(\"Verify mempool file doesn't exists\")\n+        mempooldat = self.options.tmpdir + \"/node0/regtest/mempool.dat\"\n+        assert_raises(OSError, lambda: os.remove(mempooldat))\n+        self.log.debug(\"Dump mempool to disk\")\n+        assert_equal(self.nodes[0].dumpmempool(), True)\n+        assert_equal(os.path.isfile(mempooldat), True)\n+        os.rename(self.options.tmpdir + \"/node0/regtest\", self.options.tmpdir + \"/node0/regtest_bk\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11099#discussion_r134731914",
      "id" : 134731914,
      "original_commit_id" : "79fa1ffe39a42b8a3335d46aa7a8668cfd5ba9ab",
      "original_position" : 37,
      "path" : "test/functional/mempool_dump.py",
      "position" : 37,
      "pull_request_review_id" : 58055545,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11099",
      "updated_at" : "2017-08-23T12:06:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/134731914",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
