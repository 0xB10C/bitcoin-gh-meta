[
   {
      "body" : "Concept ACK Ã°ÂÂÂ ",
      "created_at" : "2017-08-15T15:56:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11053#issuecomment-322509163",
      "id" : 322509163,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11053",
      "updated_at" : "2017-08-15T15:56:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322509163",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "body" : "```\r\nqt/notificator.cpp:27:10: error: 'macnotificationhandler.h' file not found with <angled> include; use \"quotes\" instead\r\n```",
      "created_at" : "2017-08-15T16:17:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11053#issuecomment-322514476",
      "id" : 322514476,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11053",
      "updated_at" : "2017-08-15T16:17:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322514476",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/6848764?v=4",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "Concept ACK.\r\n\r\nAre you planing on squashing everything to a single commit? Intermediate commits are broken (eg 15d3a6d3343f27e8c01faa5674a2fe406488eac3 breaks building `script_error.cpp`)",
      "created_at" : "2017-08-15T17:27:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11053#issuecomment-322532910",
      "id" : 322532910,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11053",
      "updated_at" : "2017-08-15T17:27:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322532910",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "I think it is possible to do more of this as a scripted diff. I was looking into this this morning, and the following command seemed to work well for switching all include paths that don't depend on the current directory from `\"\"` to `<>` syntax:\r\n\r\n```bash\r\nfor f in \\\r\n  src/*.cpp \\\r\n  src/*.h \\\r\n  src/bench/*.cpp \\\r\n  src/bench/*.h \\\r\n  src/compat/*.cpp \\\r\n  src/compat/*.h \\\r\n  src/consensus/*.cpp \\\r\n  src/consensus/*.h \\\r\n  src/crypto/*.cpp \\\r\n  src/crypto/*.h \\\r\n  src/crypto/ctaes/*.h \\\r\n  src/policy/*.cpp \\\r\n  src/policy/*.h \\\r\n  src/primitives/*.cpp \\\r\n  src/primitives/*.h \\\r\n  src/qt/*.cpp \\\r\n  src/qt/*.h \\\r\n  src/qt/test/*.cpp \\\r\n  src/qt/test/*.h \\\r\n  src/rpc/*.cpp \\\r\n  src/rpc/*.h \\\r\n  src/script/*.cpp \\\r\n  src/script/*.h \\\r\n  src/support/*.cpp \\\r\n  src/support/*.h \\\r\n  src/support/allocators/*.h \\\r\n  src/test/*.cpp \\\r\n  src/test/*.h \\\r\n  src/wallet/*.cpp \\\r\n  src/wallet/*.h \\\r\n  src/wallet/test/*.cpp \\\r\n  src/wallet/test/*.h \\\r\n  src/zmq/*.cpp \\\r\n  src/zmq/*.h\r\ndo\r\n  base=${f%/*} sed -i \"s:#include \\\"\\(.*\\)\\\"\\(.*\\):if test -e \\$base/'\\\\1'; then echo '#include \\\"\\\\1\\\"\\\\2'; else echo '#include <\\\\1>\\\\2'; fi:e\" $f\r\ndone\r\n```",
      "created_at" : "2017-08-15T17:43:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11053#issuecomment-322537018",
      "id" : 322537018,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11053",
      "updated_at" : "2017-08-15T17:44:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322537018",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "My branch is here (2 commits): https://github.com/ryanofsky/bitcoin/commits/pr/inc\r\n\r\nIt also updates developer notes. Feel free to take anything there that might be useful",
      "created_at" : "2017-08-15T17:54:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11053#issuecomment-322540152",
      "id" : 322540152,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11053",
      "updated_at" : "2017-08-15T17:54:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322540152",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "> Are you planing on squashing everything to a single commit? Intermediate commits are broken (eg 15d3a6d breaks building script_error.cpp)\r\n\r\nYes, before merging we could squash it. Before then, the current order of commits is easer to keep up to date with master.\r\n\r\n> I think it is possible to do more of this as a scripted diff\r\n\r\nI'm not entirely sure how to rebase on top of your changes, or how to combine it.\r\n\r\nMy changes are more complete. For example I've changed `qt/forms` around too, as well as all the includes in `src/qt`. I think I completely switched over everything.\r\n\r\nI've cherry-picked the developer notes change, thanks.",
      "created_at" : "2017-08-15T18:21:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11053#issuecomment-322547189",
      "id" : 322547189,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11053",
      "updated_at" : "2017-08-15T18:21:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322547189",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Great.\r\nutACK cbe3ac57583a683a82a05ab93dec1fb4877ba5c4",
      "created_at" : "2017-08-15T18:27:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11053#issuecomment-322548819",
      "id" : 322548819,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11053",
      "updated_at" : "2017-08-15T18:27:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322548819",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@ryanofsky \r\nI've adopted your script a bit and now it gets even closer:\r\n```\r\n  base=${f%/*}/ relbase=${base#src/} sed -i \"s:#include \\\"\\(.*\\)\\\"\\(.*\\):if test -e \\$base'\\\\1'; then echo '#include <'\\$relbase'\\\\1>\\\\2'; else echo '#include <\\\\1>\\\\2'; fi:e\" $f\r\n```\r\n",
      "created_at" : "2017-08-15T19:11:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11053#issuecomment-322560537",
      "id" : 322560537,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11053",
      "updated_at" : "2017-08-15T19:11:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322560537",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Changed the base commit to modified @ryanofsky's script. The rest of the changes is much smaller now.\r\n\r\nAlso the individual commits should build because I moved the `-I` build system change to the end. ",
      "created_at" : "2017-08-15T19:28:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11053#issuecomment-322564542",
      "id" : 322564542,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11053",
      "updated_at" : "2017-08-15T19:28:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322564542",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11053#discussion_r133289177"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11053"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133289177"
         }
      },
      "body" : "The include is being lost here because of the apostophe in the comment. I think replacing `echo '...'` with `echo \\\"...\\\"` in the script should fix it.",
      "commit_id" : "895330f2e31d6a5cdd68952ae3b35f9089703959",
      "created_at" : "2017-08-15T20:05:56Z",
      "diff_hunk" : "@@ -2,11 +2,11 @@\n // Distributed under the MIT software license, see the accompanying\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n-#include \"paymentrequestplus.h\" // this includes protobuf's port.h which defines its own bswap macos",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11053#discussion_r133289177",
      "id" : 133289177,
      "original_commit_id" : "90fe23a29c6fdc36643f2792984e200ec48709ea",
      "original_position" : 4,
      "path" : "src/qt/test/compattests.cpp",
      "position" : 4,
      "pull_request_review_id" : 56453577,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11053",
      "updated_at" : "2017-08-16T06:53:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133289177",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11053#discussion_r133369993"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11053"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133369993"
         }
      },
      "body" : "Seems to work, apparently we're nowhere using \" in comment after include :-)",
      "commit_id" : "895330f2e31d6a5cdd68952ae3b35f9089703959",
      "created_at" : "2017-08-16T06:48:40Z",
      "diff_hunk" : "@@ -2,11 +2,11 @@\n // Distributed under the MIT software license, see the accompanying\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n-#include \"paymentrequestplus.h\" // this includes protobuf's port.h which defines its own bswap macos",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11053#discussion_r133369993",
      "id" : 133369993,
      "original_commit_id" : "90fe23a29c6fdc36643f2792984e200ec48709ea",
      "original_position" : 4,
      "path" : "src/qt/test/compattests.cpp",
      "position" : 4,
      "pull_request_review_id" : 56541365,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11053",
      "updated_at" : "2017-08-16T06:53:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/133369993",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "641d4c5 Ã°ÂÂÂ  utACK 895330f.",
      "created_at" : "2017-08-16T07:17:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11053#issuecomment-322687253",
      "id" : 322687253,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11053",
      "updated_at" : "2017-08-16T07:20:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322687253",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "This makes me nervous without a subdir-as-a-namespace. gcc (i assume most others as well) searches -I's left-to-right, meaning that something with a generic name like \"config.h\" could end up including something from the system if we manage to add our \"-I(builddir)\" after some other path.\r\n\r\nTesting with ```include <amount.h>``` for example, I was able to change ```MAX_MONEY``` by copying amount.h to /usr/include, and (to mimic an accidental ordering bug) re-arranging the -I's on the compile line. Trying that with ```include \"amount.h\"``` it at least got confused by the clashing files due to the primitives subdir.\r\n\r\nGranted, that's pretty paranoid.\r\n\r\nMuch more likely if there was an ordering bug though, would be a compilation failure. A subdir would at least save us from those. Would it make sense to use ```-I$(top_builddir)``` and ```#include <src/amount.h>``` as a precaution? \r\n\r\n",
      "created_at" : "2017-08-17T00:01:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11053#issuecomment-322931956",
      "id" : 322931956,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11053",
      "updated_at" : "2017-08-17T00:01:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322931956",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "body" : "> This makes me nervous without a subdir-as-a-namespace. gcc (i assume most others as well) searches -I's left-to-right, meaning that something with a generic name like \"config.h\" could end up including something from the system if we manage to add our \"-I(builddir)\" after some other path.\r\n\r\nBut isn't that true for `\"\"` as well?\r\nThe only difference is that \"\" tries relative to the current directory first. It does not (IIRC) reverse -I order.\r\nIn the example that I give in the OP, `primitives/block.h` includes `\"primitives/transaction.h\"`, it will look in `src/primitives/primitives`, failing that it goes down the entire -I chain, to finally try in `src/`.\r\nSo that would find `/usr/include/primitives/transaction.h` first.\r\n\r\nDuplicated include files can lead to more confusion with relative includes as it  can be ambiguous which one is included. At least with `-I` you can just follow the include path when figuring out the issue.\r\n\r\n> Much more likely if there was an ordering bug though, would be a compilation failure. A subdir would at least save us from those. Would it make sense to use -I$(top_builddir) and #include <src/amount.h> as a precaution?\r\n\r\nI think on the longer run we should make sure all source files are in directories under `src/`, not `src` itself. Many bigger open source projects seem to have this convention.\r\n\r\nI really dislike using top_builddir as an intermediate step though. It'd work, but feels dirty to add `src/` before each include. I'd rather just close this.\r\n\r\nRegarding active paranoia, someone could still put a `src/amount.h` in your include path and it will take precedence.\r\n\r\nOnly insanely disciplined relative inclusion (using explicit `./` and `../`) could avoid that \"attack\", I think. That's... crazy though :( In any case if your include path is compromised, there are lots of other ways to create harm.",
      "created_at" : "2017-08-17T07:04:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11053#issuecomment-322986765",
      "id" : 322986765,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11053",
      "updated_at" : "2017-08-17T07:06:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322986765",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> Would it make sense to use -I$(top_builddir) and #include <src/amount.h> as a precaution?\r\n\r\nDo you know of any projects that do this?\r\n\r\nClosing this for now, on further thought, this creates more issues than it solves I guess.\r\n",
      "created_at" : "2017-08-17T07:11:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11053#issuecomment-322988090",
      "id" : 322988090,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11053",
      "updated_at" : "2017-08-17T07:11:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/322988090",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "> Closing this for now, on further thought, this creates more issues than it solves I guess.\r\n\r\nIs this only being closed because of the issue theuni raised? Or are there other problems?\r\n\r\nMy earlier scripted diff ([branch](https://github.com/ryanofsky/bitcoin/commits/pr/inc)) is neutral with respect to the issue theuni is talking about because it leaves includes that are relative to the source directory intact, and only modifies includes that rely on the include path from <> to \"\". So for example, if an amount.h were added to an prepended include path, nothing different would happen than already happens now.\r\n\r\nMore broadly though, it is hard to imagine taking this issue seriously, because the project already uses a mix of <> and \"\" includes, and all of the existing <> includes (as well as nearly all the \"\" includes in subdirectories below src/) are already relying on the configured include paths. And as laanwj pointed out this change is only removing include paths, not adding any, so it is strictly decreasing whatever ambiguities there may be in interpreting #include directives compared to what we are doing now.",
      "created_at" : "2017-08-17T09:28:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11053#issuecomment-323018001",
      "id" : 323018001,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11053",
      "updated_at" : "2017-08-17T09:28:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/323018001",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
