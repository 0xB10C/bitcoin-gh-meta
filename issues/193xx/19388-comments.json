[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Given that the [advice](https://diyhpl.us/wiki/transcripts/sydney-bitcoin-meetup/2020-05-19-socratic-seminar/) for those interested in running fuzz tests is arguably to run them on a Linux instance and not Mac OS is it wise for Mac OS users to be running all fuzz tests by default?",
      "created_at" : "2020-06-26T19:04:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19388#issuecomment-650346720",
      "id" : 650346720,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19388",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1MDM0NjcyMA==",
      "updated_at" : "2020-06-26T19:04:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/650346720",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@michaelfolkson This is not about running them, but *building* the fuzz test code - without actual fuzzing enabled. The advantage is that you'd notice when a change you're making breaks the fuzz tests.\n\nThis is similar to why we build the benchmarks by default, even when you're not interested in benchmarking: even if you don't, the benchmarks shouldn't break.\n\nActual fuzzing requires re-building with a whole different set of compilation options (and possibly a different compiler). Making that easier would be great too, but seems pretty hard. Yet, the code that implements the tests should be buildable easily by anyone who can build the rest of the code.",
      "created_at" : "2020-06-26T19:10:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19388#issuecomment-650349370",
      "id" : 650349370,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19388",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1MDM0OTM3MA==",
      "updated_at" : "2020-06-26T19:11:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/650349370",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I'd like to take a stab at this to try and get a bit more familiar with the build system...\r\n\r\nHowever at first glance it looks like compiling fuzz tests by default would require c++17 which might make this less desirable. For example, std::optional is c++17 only:\r\n\r\n```\r\n$ git grep -c \"std::optional\"\r\nsrc/optional.h:1\r\nsrc/test/fuzz/addrdb.cpp:1\r\nsrc/test/fuzz/asmap_direct.cpp:1\r\nsrc/test/fuzz/block_header.cpp:2\r\nsrc/test/fuzz/blockfilter.cpp:1\r\nsrc/test/fuzz/bloom_filter.cpp:3\r\nsrc/test/fuzz/chain.cpp:1\r\nsrc/test/fuzz/coins_view.cpp:4\r\nsrc/test/fuzz/flatfile.cpp:2\r\nsrc/test/fuzz/merkleblock.cpp:1\r\nsrc/test/fuzz/policy_estimator.cpp:2\r\nsrc/test/fuzz/pow.cpp:2\r\nsrc/test/fuzz/primitives_transaction.cpp:3\r\nsrc/test/fuzz/protocol.cpp:2\r\nsrc/test/fuzz/rbf.cpp:2\r\nsrc/test/fuzz/rolling_bloom_filter.cpp:1\r\nsrc/test/fuzz/script.cpp:2\r\nsrc/test/fuzz/script_interpreter.cpp:2\r\nsrc/test/fuzz/script_sigcache.cpp:2\r\nsrc/test/fuzz/script_sign.cpp:7\r\nsrc/test/fuzz/util.h:1\r\n```\r\n\r\nIt also increases my compile time by ~60% (from 440s to 730s), which might also not be desirable as the standard compile options.\r\n\r\nWould this still be something that we would want to make the default based on the above?",
      "created_at" : "2020-07-06T19:22:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19388#issuecomment-654420361",
      "id" : 654420361,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19388",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1NDQyMDM2MQ==",
      "updated_at" : "2020-07-06T19:22:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/654420361",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Ah I've now found the discussion in https://github.com/bitcoin/bitcoin/issues/16684 ...\r\n\r\nSo it seems like the question now is, is it more desirable to open a PR now and let it sit unmerged until c++17 becomes default, or just waiting?",
      "created_at" : "2020-07-06T19:28:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19388#issuecomment-654423377",
      "id" : 654423377,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19388",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1NDQyMzM3Nw==",
      "updated_at" : "2020-07-06T19:28:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/654423377",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "How hard is it to revert the c++17isms in the fuzz tests? I would expect it's only minimal (use Optional instead of std::optional etc)",
      "created_at" : "2020-07-06T19:31:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19388#issuecomment-654424352",
      "id" : 654424352,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19388",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1NDQyNDM1Mg==",
      "updated_at" : "2020-07-06T19:31:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/654424352",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I think based on discussion in https://github.com/bitcoin/bitcoin/pull/18901/ you are probably correct Sipa. I will take a crack at doing just that then.",
      "created_at" : "2020-07-06T19:40:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19388#issuecomment-654428351",
      "id" : 654428351,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19388",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1NDQyODM1MQ==",
      "updated_at" : "2020-07-06T19:40:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/654428351",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/6606587?v=4",
         "events_url" : "https://api.github.com/users/willcl-ark/events{/privacy}",
         "followers_url" : "https://api.github.com/users/willcl-ark/followers",
         "following_url" : "https://api.github.com/users/willcl-ark/following{/other_user}",
         "gists_url" : "https://api.github.com/users/willcl-ark/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/willcl-ark",
         "id" : 6606587,
         "login" : "willcl-ark",
         "node_id" : "MDQ6VXNlcjY2MDY1ODc=",
         "organizations_url" : "https://api.github.com/users/willcl-ark/orgs",
         "received_events_url" : "https://api.github.com/users/willcl-ark/received_events",
         "repos_url" : "https://api.github.com/users/willcl-ark/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/willcl-ark/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/willcl-ark/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/willcl-ark"
      }
   }
]
