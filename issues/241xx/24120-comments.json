[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@sipa would you be able to attempt to replicate this on your non-m1 arm machine?\r\n@prusnak would you be able to attempt to replicate this on your m1 machine?",
      "created_at" : "2022-01-22T12:43:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1019240819",
      "id" : 1019240819,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848wGFz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019240819/reactions"
      },
      "updated_at" : "2022-01-22T12:43:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019240819",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Can you debug where the time is spent? There is certain \"anti virus\" software that slows down RPC connections.",
      "created_at" : "2022-01-22T12:52:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1019245366",
      "id" : 1019245366,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848wHM2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019245366/reactions"
      },
      "updated_at" : "2022-01-22T12:52:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019245366",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@PastaPastaPasta I'm afraid that any comparison will be difficult. The machine I have is a 24-core Cortex-A53 (an architecture designed in 2012) running at 1 GHz, with 4 GiB RAM. In terms of single-threaded performance, even a RPi 3 is faster.",
      "created_at" : "2022-01-22T13:52:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1019273182",
      "id" : 1019273182,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848wN_e",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019273182/reactions"
      },
      "updated_at" : "2022-01-22T13:52:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019273182",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Can you debug where the time is spent? There is certain \"anti virus\" software that slows down RPC connections.\r\n\r\n@MarcoFalke this is a brand new M1 install, so no custom AV or anything like that has been installed.\r\n\r\nSee attached screen shot for high level profiling. It seems like 80% of this thread (which is a rpc worker that did exclusively `getnewaddress`) was spent in wallet::DatabaseBatch::Write. The vast majority of this time ended up being spent in libsystem_kernel.dylib`__fcntl\r\n\r\nNotes for replication, start bitcoind --regtest and attach profiler to it. Then, repeatidely run `getnewaddress` I used a bash script\r\n```\r\nwhile True\r\ndo\r\n    time ./src/bitcoin-cli --regtest getnewaddress\r\n    sleep 0\r\ndone\r\n```\r\n\r\nI did this for about a minute.\r\n\r\n<img width=\"1568\" alt=\"image\" src=\"https://user-images.githubusercontent.com/6443210/150643045-f6cecb98-c223-4a30-b12e-05db26a49fe4.png\">\r\n",
      "created_at" : "2022-01-22T14:47:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1019284395",
      "id" : 1019284395,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848wQur",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019284395/reactions"
      },
      "updated_at" : "2022-01-22T16:04:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019284395",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Are you using an external hard drive? I presume RPCs that don't write to disk are faster/immediate?",
      "created_at" : "2022-01-22T14:48:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1019284756",
      "id" : 1019284756,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848wQ0U",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019284756/reactions"
      },
      "updated_at" : "2022-01-22T14:48:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019284756",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Nope, everything is on the internal ssd",
      "created_at" : "2022-01-22T14:49:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1019284852",
      "id" : 1019284852,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848wQ10",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019284852/reactions"
      },
      "updated_at" : "2022-01-22T14:49:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019284852",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Are you using an external hard drive? I presume RPCs that don't write to disk are faster/immediate?\r\n\r\nEven non-writing rpc calls are slightly slower than I'd expect. \r\n\r\n`getblockchaininfo` takes .002 seconds on my amd 1950x machine, ~0.01 seconds on m1, or about 5x slower (not sure if there's a difference between mac time and unix time commands)\r\n\r\n`listtransaction \"*\" 1000` in a wallet that generated 1310 blocks takes 0.055s on amd ~0.06s on m1\r\n\r\nIt seems like the issue is in disk / database involving rpc calls",
      "created_at" : "2022-01-22T15:29:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1019292299",
      "id" : 1019292299,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848wSqL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019292299/reactions"
      },
      "updated_at" : "2022-01-22T15:29:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019292299",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I have a Macbook Pro (16GB + Intel arch) and a Macbook Air M1, I will compare the results and post here.",
      "created_at" : "2022-01-22T22:13:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1019367321",
      "id" : 1019367321,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848wk-Z",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019367321/reactions"
      },
      "updated_at" : "2022-01-22T22:13:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019367321",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Tested some functional tests here (`wallet_listtransactions` and `rpc_blockchain`) and both executes faster on M1. 60% faster.",
      "created_at" : "2022-01-24T11:30:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1020001100",
      "id" : 1020001100,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848y_tM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020001100/reactions"
      },
      "updated_at" : "2022-01-24T11:30:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020001100",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@PastaPastaPasta It might be worth to check your ssd for defects and performance",
      "created_at" : "2022-01-24T11:38:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1020007217",
      "id" : 1020007217,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848zBMx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020007217/reactions"
      },
      "updated_at" : "2022-01-24T11:38:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020007217",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@brunoerg \r\n\r\n> Tested some functional tests here (`wallet_listtransactions` and `rpc_blockchain`) and both executes faster on M1. 60% faster.\r\n\r\nDid you try anything involving wallet? `getnewaddress` or `loadwallet` or `generatetoaddress`?\r\n\r\nThese are where the slowdowns are\r\n\r\nEDIT: I see know your just talking about the functional tests, I've added a comment below with my speeds on both. I will investigate potential ssd issues",
      "created_at" : "2022-01-24T13:19:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1020092636",
      "id" : 1020092636,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848zWDc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020092636/reactions"
      },
      "updated_at" : "2022-01-24T13:26:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020092636",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "On m1 wallet_listtransactions took 31.126 seconds, rpc_blockchain took 9.715 seconds\r\n\r\non ubuntu amd 1900x wallet_listtransactions took 23.176 seconds, rpc_blockchain took 6.880s\r\n\r\nEDIT:\r\nIn regards to SSD defects, S.M.A.R.T. Status according to System Information is \"Verified\"",
      "created_at" : "2022-01-24T13:25:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1020098691",
      "id" : 1020098691,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848zXiD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020098691/reactions"
      },
      "updated_at" : "2022-01-24T15:19:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020098691",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke I tried to benchmark the disk. Using Blackmagic Disk Speed Test makes me think there is no raw ssd issue\r\n<img width=\"677\" alt=\"image\" src=\"https://user-images.githubusercontent.com/6443210/150936061-80233d18-0ef8-4e2d-9354-61dd6c7f3508.png\">\r\n",
      "created_at" : "2022-01-25T08:03:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1020907589",
      "id" : 1020907589,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII58482dBF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020907589/reactions"
      },
      "updated_at" : "2022-01-25T08:03:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020907589",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Tested some functional tests here (`wallet_listtransactions` and `rpc_blockchain`) and both executes faster on M1. 60% faster.\r\n\r\n@brunoerg \r\n~Could you try feature_block.py?~",
      "created_at" : "2022-01-26T09:18:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1022009633",
      "id" : 1022009633,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII58486qEh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022009633/reactions"
      },
      "updated_at" : "2022-01-26T15:41:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022009633",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I have used a second MacBookPro to validate this issue (courtesy of @Munkybooty), as well as a 2017 macbook air\r\n\r\nWe found the brand new macbook pro to be **131% slower** than the 5 year old entry level mac book air. \r\n\r\nWe compared two systems.\r\n\r\nMachine | 2021 Macbook Pro 14\"\r\n-- | --\r\nOS | MacOS Monterey\r\nCPU | 8/14 Core M1 Pro\r\nMemory | 32GB\r\n\r\n\r\nMachine | 2017 Macbook Air\r\n-- | --\r\nOS | MacOS Monterey\r\nCPU | 1.8GHz Dual core i5\r\nMemory | 8GB\r\n\r\n\r\nWe ran test_runner.py single threaded on each machine. The macbook air took 2206 seconds. **The m1 took 5107 seconds**. Over 80 minutes!\r\n\r\nYou can view the raw data here: https://docs.google.com/spreadsheets/d/1uIcgoIg0SVF5DMz0htVwOEsqTcZPleBxiWYg1iMi-Rw/edit#gid=1443924285\r\n\r\nAs you can see, some of the tests run substantially faster on m1, however others run exponentially slower on M1, as of note mempool_package_onemore.py takes 3400% longer on m1 compared to a macbook air.\r\n\r\n@brunoerg Please try running mempool_package_onemore.py.\r\n \r\nI think it is clear that there is obviously a massive issue with certain functional tests on m1 based platforms.\r\n\r\nThese problematic tests are\r\n1. mempool_package_onemore.py\r\n2. mempool_packages.py\r\n3. mempool_updatefromblock.py\r\n4. mining_prioritisetransaction.py\r\n5. wallet_startup.py\r\n6. wallet_taproot.py\r\n\r\nEach of which take 3x (or more) as long on m1 compared to a 2017 macbook air\r\n\r\n",
      "created_at" : "2022-01-26T15:41:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1022322657",
      "id" : 1022322657,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII584872fh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 1,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022322657/reactions"
      },
      "updated_at" : "2022-01-26T15:41:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022322657",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Indeed, result comparison looks interesting (medians of 3 runs):\r\n\r\n- a VirtualBox VM (2 cores) on an **_Intel_** host, macOS Monterey 12.2 (21D48):\r\n```\r\n% time ./test/functional/mempool_package_onemore.py\r\n2022-01-26T19:53:31.410000Z TestFramework (INFO): Initializing test directory /var/folders/9n/wb_bl1vs509d0dy850m7l9_m0000gn/T/bitcoin_func_test_8mxxh75y\r\n2022-01-26T19:53:52.802000Z TestFramework (INFO): Stopping nodes\r\n2022-01-26T19:53:53.016000Z TestFramework (INFO): Cleaning up /var/folders/9n/wb_bl1vs509d0dy850m7l9_m0000gn/T/bitcoin_func_test_8mxxh75y on exit\r\n2022-01-26T19:53:53.016000Z TestFramework (INFO): Tests successful\r\n./test/functional/mempool_package_onemore.py  1.74s user 2.30s system 18% cpu 21.838 total\r\n```\r\n\r\n- Mac mini (**_M1_** 2020) + macOS Monterey 12.1 (21C52):\r\n```\r\n% time ./test/functional/mempool_package_onemore.py\r\n2022-01-26T19:42:07.867000Z TestFramework (INFO): Initializing test directory /var/folders/4f/xd_qxxhx35569jp258s803_w0000gn/T/bitcoin_func_test_l99ehi5l\r\n2022-01-26T19:43:14.092000Z TestFramework (INFO): Stopping nodes\r\n2022-01-26T19:43:14.476000Z TestFramework (INFO): Cleaning up /var/folders/4f/xd_qxxhx35569jp258s803_w0000gn/T/bitcoin_func_test_l99ehi5l on exit\r\n2022-01-26T19:43:14.476000Z TestFramework (INFO): Tests successful\r\n./test/functional/mempool_package_onemore.py  2.03s user 0.80s system 4% cpu 1:06.73 total\r\n```",
      "created_at" : "2022-01-26T20:03:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1022555725",
      "id" : 1022555725,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII58488vZN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022555725/reactions"
      },
      "updated_at" : "2022-01-26T20:03:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022555725",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "The numbers we've gotten were from running them through `test_runner.py` thankfully the results are replicable via single test runs\r\n\r\n- 2017 Macbook Air, _Intel_ macOS Monterey 12.0.1:\r\n\r\n```\r\n% time ./test/functional/mempool_package_onemore.py \r\n2022-01-26T22:28:58.175000Z TestFramework (INFO): Initializing test directory /var/folders/pq/dx302qc9017285xl75wyp64m0000gn/T/bitcoin_func_test__6g3bi1h\r\n2022-01-26T22:29:00.028000Z TestFramework (INFO): Stopping nodes\r\n2022-01-26T22:29:00.239000Z TestFramework (INFO): Cleaning up /var/folders/pq/dx302qc9017285xl75wyp64m0000gn/T/bitcoin_func_test__6g3bi1h on exit\r\n2022-01-26T22:29:00.239000Z TestFramework (INFO): Tests successful\r\n./test/functional/mempool_package_onemore.py  1.33s user 0.61s system 59% cpu 3.263 total\r\n```\r\n\r\n- 2021 Macbook Pro 14\", _M1 Pro_ macOS Monterey 12.1:\r\n\r\n```\r\ntime ./test/functional/mempool_package_onemore.py\r\n2022-01-26T22:33:18.019000Z TestFramework (INFO): Initializing test directory /var/folders/82/2fk9xtkn1k3b5kbhvv937p0h0000gn/T/bitcoin_func_test_5i4zs9d_\r\n2022-01-26T22:34:25.599000Z TestFramework (INFO): Stopping nodes\r\n2022-01-26T22:34:26.209000Z TestFramework (INFO): Cleaning up /var/folders/82/2fk9xtkn1k3b5kbhvv937p0h0000gn/T/bitcoin_func_test_5i4zs9d_ on exit\r\n2022-01-26T22:34:26.209000Z TestFramework (INFO): Tests successful\r\n./test/functional/mempool_package_onemore.py  1.46s user 1.24s system 3% cpu 1:08.59 total\r\n```\r\n",
      "created_at" : "2022-01-26T22:43:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1022671092",
      "id" : 1022671092,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII58489Lj0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022671092/reactions"
      },
      "updated_at" : "2022-01-26T22:44:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022671092",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/52090345?v=4",
         "events_url" : "https://api.github.com/users/Munkybooty/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Munkybooty/followers",
         "following_url" : "https://api.github.com/users/Munkybooty/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Munkybooty/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Munkybooty",
         "id" : 52090345,
         "login" : "Munkybooty",
         "node_id" : "MDQ6VXNlcjUyMDkwMzQ1",
         "organizations_url" : "https://api.github.com/users/Munkybooty/orgs",
         "received_events_url" : "https://api.github.com/users/Munkybooty/received_events",
         "repos_url" : "https://api.github.com/users/Munkybooty/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Munkybooty/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Munkybooty/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Munkybooty"
      }
   }
]
