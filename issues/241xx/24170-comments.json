[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23900](https://github.com/bitcoin/bitcoin/pull/23900) (rpc: p2p_v2 rpc argument for addnode by dhruv)\n* [#23604](https://github.com/bitcoin/bitcoin/pull/23604) (Use Sock in CNode by vasild)\n* [#22778](https://github.com/bitcoin/bitcoin/pull/22778) (net processing: Reduce resource usage for inbound block-relay-only connections by jnewbery)\n* [#21160](https://github.com/bitcoin/bitcoin/pull/21160) (net/net processing: Move tx inventory into net_processing by jnewbery)\n* [#19860](https://github.com/bitcoin/bitcoin/pull/19860) (p2p: Improve diversification of new connections by naumenkogs)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-01-26T23:08:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#issuecomment-1022685492",
      "id" : 1022685492,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24170",
      "node_id" : "IC_kwDOABII58489PE0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022685492/reactions"
      },
      "updated_at" : "2022-02-04T06:19:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022685492",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r795315918"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795315918"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`IsBlockOnlyConn` and `IsManualConn` (below) should just return true for `MANUAL_BLOCK_RELAY` rather than additional checks every place",
      "commit_id" : "f2fc01fd5ea98060640c79cc82ebe71f8f1ed6bc",
      "created_at" : "2022-01-31T03:06:00Z",
      "diff_hunk" : "@@ -1273,7 +1273,7 @@ void PeerManagerImpl::FinalizeNode(const CNode& node)\n     }\n     } // cs_main\n     if (node.fSuccessfullyConnected && misbehavior == 0 &&\n-        !node.IsBlockOnlyConn() && !node.IsInboundConn()) {\n+        !node.IsBlockOnlyConn() && !node.IsManualBlockOnlyConn() && !node.IsInboundConn()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r795315918",
      "id" : 795315918,
      "line" : 1276,
      "node_id" : "PRRC_kwDOABII584vZ47O",
      "original_commit_id" : "f2fc01fd5ea98060640c79cc82ebe71f8f1ed6bc",
      "original_line" : 1276,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 5,
      "pull_request_review_id" : 867340302,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795315918/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-31T03:08:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795315918",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r795316261"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795316261"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This should be a `connection_type` String param, not a Boolean (see also #20551).\r\n\r\n(Throw an exception if an unsupported value is passed, for this PR)",
      "commit_id" : "f2fc01fd5ea98060640c79cc82ebe71f8f1ed6bc",
      "created_at" : "2022-01-31T03:07:46Z",
      "diff_hunk" : "@@ -278,6 +278,7 @@ static RPCHelpMan addnode()\n                 {\n                     {\"node\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The node (see getpeerinfo for nodes)\"},\n                     {\"command\", RPCArg::Type::STR, RPCArg::Optional::NO, \"'add' to add a node to the list, 'remove' to remove a node from the list, 'onetry' to try a connection to the node once\"},\n+                    {\"block_relay_only\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"If set, treat as block-relay-only connection (deactivating transaction and addr relay on this connection).\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r795316261",
      "id" : 795316261,
      "line" : 281,
      "node_id" : "PRRC_kwDOABII584vZ5Al",
      "original_commit_id" : "f2fc01fd5ea98060640c79cc82ebe71f8f1ed6bc",
      "original_line" : 281,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : 4,
      "pull_request_review_id" : 867340302,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795316261/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-31T03:08:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795316261",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r795316459"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795316459"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Rather use `ConnectionType` here",
      "commit_id" : "f2fc01fd5ea98060640c79cc82ebe71f8f1ed6bc",
      "created_at" : "2022-01-31T03:08:43Z",
      "diff_hunk" : "@@ -877,7 +903,7 @@ class CConnman\n     // Count the number of block-relay-only peers we have over our limit.\n     int GetExtraBlockRelayCount() const;\n \n-    bool AddNode(const std::string& node);\n+    bool AddNode(const std::string& node, bool block_relay_only);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r795316459",
      "id" : 795316459,
      "line" : 906,
      "node_id" : "PRRC_kwDOABII584vZ5Dr",
      "original_commit_id" : "f2fc01fd5ea98060640c79cc82ebe71f8f1ed6bc",
      "original_line" : 906,
      "original_position" : 72,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 72,
      "pull_request_review_id" : 867340302,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795316459/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-31T03:08:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795316459",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r795710002"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795710002"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I didn't do that because `IsBlockOnlyConn()` is used in several places (e.g. `PeerManagerImpl::EvictExtraOutboundPeers`, `CConnman::GetExtraBlockRelayCount()`, `GetCurrentBlockRelayOnlyConns()`) which would not apply to manual block-relay-only connections.",
      "commit_id" : "f2fc01fd5ea98060640c79cc82ebe71f8f1ed6bc",
      "created_at" : "2022-01-31T14:15:44Z",
      "diff_hunk" : "@@ -1273,7 +1273,7 @@ void PeerManagerImpl::FinalizeNode(const CNode& node)\n     }\n     } // cs_main\n     if (node.fSuccessfullyConnected && misbehavior == 0 &&\n-        !node.IsBlockOnlyConn() && !node.IsInboundConn()) {\n+        !node.IsBlockOnlyConn() && !node.IsManualBlockOnlyConn() && !node.IsInboundConn()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r795710002",
      "id" : 795710002,
      "in_reply_to_id" : 795315918,
      "line" : 1276,
      "node_id" : "PRRC_kwDOABII584vbZIy",
      "original_commit_id" : "f2fc01fd5ea98060640c79cc82ebe71f8f1ed6bc",
      "original_line" : 1276,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 5,
      "pull_request_review_id" : 867901393,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795710002/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-31T14:15:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795710002",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I'd be really interested in opinions whether the use case (as outlined in OP and linked issue) is  important enough to justify the added complexity of adding another connection type (and also adding more complexity to `-addnode`).",
      "created_at" : "2022-01-31T14:17:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#issuecomment-1025784947",
      "id" : 1025784947,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24170",
      "node_id" : "IC_kwDOABII5849JDxz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1025784947/reactions"
      },
      "updated_at" : "2022-01-31T14:17:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1025784947",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-02-04T08:59:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#issuecomment-1029775460",
      "id" : 1029775460,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24170",
      "node_id" : "IC_kwDOABII5849YSBk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1029775460/reactions"
      },
      "updated_at" : "2022-02-04T08:59:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1029775460",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r849957430"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849957430"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done with the latest push.",
      "commit_id" : "6196e9565757a920b4ee5622396166ef07850df9",
      "created_at" : "2022-04-13T22:53:53Z",
      "diff_hunk" : "@@ -278,6 +278,7 @@ static RPCHelpMan addnode()\n                 {\n                     {\"node\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The node (see getpeerinfo for nodes)\"},\n                     {\"command\", RPCArg::Type::STR, RPCArg::Optional::NO, \"'add' to add a node to the list, 'remove' to remove a node from the list, 'onetry' to try a connection to the node once\"},\n+                    {\"block_relay_only\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"If set, treat as block-relay-only connection (deactivating transaction and addr relay on this connection).\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r849957430",
      "id" : 849957430,
      "in_reply_to_id" : 795316261,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584yqVI2",
      "original_commit_id" : "f2fc01fd5ea98060640c79cc82ebe71f8f1ed6bc",
      "original_line" : 281,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 941633235,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849957430/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-13T22:53:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849957430",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r849957511"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849957511"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "6196e9565757a920b4ee5622396166ef07850df9",
      "created_at" : "2022-04-13T22:54:06Z",
      "diff_hunk" : "@@ -877,7 +903,7 @@ class CConnman\n     // Count the number of block-relay-only peers we have over our limit.\n     int GetExtraBlockRelayCount() const;\n \n-    bool AddNode(const std::string& node);\n+    bool AddNode(const std::string& node, bool block_relay_only);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r849957511",
      "id" : 849957511,
      "in_reply_to_id" : 795316459,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584yqVKH",
      "original_commit_id" : "f2fc01fd5ea98060640c79cc82ebe71f8f1ed6bc",
      "original_line" : 906,
      "original_position" : 72,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : null,
      "pull_request_review_id" : 941633346,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849957511/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-13T22:54:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849957511",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased and addressed feedback.",
      "created_at" : "2022-04-13T22:55:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#issuecomment-1098555109",
      "id" : 1098555109,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24170",
      "node_id" : "IC_kwDOABII585Bep7l",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1098555109/reactions"
      },
      "updated_at" : "2022-04-13T22:55:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1098555109",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r860411252"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/860411252"
         }
      },
      "author_association" : "NONE",
      "body" : "Why not try std::map<std::string, ConnectionType> m_added_nodes, then we can avoid to define AddedNodeEntry?",
      "commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "created_at" : "2022-04-28T02:31:39Z",
      "diff_hunk" : "@@ -1087,7 +1114,7 @@ class CConnman\n     AddrMan& addrman;\n     std::deque<std::string> m_addr_fetches GUARDED_BY(m_addr_fetches_mutex);\n     Mutex m_addr_fetches_mutex;\n-    std::vector<std::string> m_added_nodes GUARDED_BY(m_added_nodes_mutex);\n+    std::vector<AddedNodeEntry> m_added_nodes GUARDED_BY(m_added_nodes_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r860411252",
      "id" : 860411252,
      "line" : 1117,
      "node_id" : "PRRC_kwDOABII584zSNV0",
      "original_commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "original_line" : 1117,
      "original_position" : 105,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 105,
      "pull_request_review_id" : 955757376,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/860411252/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-28T02:34:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/860411252",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7625606?v=4",
         "events_url" : "https://api.github.com/users/www222fff/events{/privacy}",
         "followers_url" : "https://api.github.com/users/www222fff/followers",
         "following_url" : "https://api.github.com/users/www222fff/following{/other_user}",
         "gists_url" : "https://api.github.com/users/www222fff/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/www222fff",
         "id" : 7625606,
         "login" : "www222fff",
         "node_id" : "MDQ6VXNlcjc2MjU2MDY=",
         "organizations_url" : "https://api.github.com/users/www222fff/orgs",
         "received_events_url" : "https://api.github.com/users/www222fff/received_events",
         "repos_url" : "https://api.github.com/users/www222fff/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/www222fff/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/www222fff/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/www222fff"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r860411953"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/860411953"
         }
      },
      "author_association" : "NONE",
      "body" : "Why not directly change IsBlockOnlyConn() directly as below, then can avoid to define new function IsManualBlockRelayConn()?\r\n\r\n     bool IsBlockOnlyConn() const {\r\n-        return m_conn_type == ConnectionType::BLOCK_RELAY;\r\n+        return m_conn_type == ConnectionType::BLOCK_RELAY || m_conn_type == ConnectionType::MANUAL_BLOCK_RELAY;\r\n     }\r\n",
      "commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "created_at" : "2022-04-28T02:33:25Z",
      "diff_hunk" : "@@ -1230,7 +1230,7 @@ void PeerManagerImpl::InitializeNode(CNode *pnode)\n         mapNodeState.emplace_hint(mapNodeState.end(), std::piecewise_construct, std::forward_as_tuple(nodeid), std::forward_as_tuple(pnode->IsInboundConn()));\n         assert(m_txrequest.Count(nodeid) == 0);\n     }\n-    PeerRef peer = std::make_shared<Peer>(nodeid, /*tx_relay=*/ !pnode->IsBlockOnlyConn());\n+    PeerRef peer = std::make_shared<Peer>(nodeid, /*tx_relay=*/!pnode->IsBlockOnlyConn() && !pnode->IsManualBlockRelayConn());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r860411953",
      "id" : 860411953,
      "line" : 1233,
      "node_id" : "PRRC_kwDOABII584zSNgx",
      "original_commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "original_line" : 1233,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 5,
      "pull_request_review_id" : 955757376,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/860411953/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-28T02:34:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/860411953",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7625606?v=4",
         "events_url" : "https://api.github.com/users/www222fff/events{/privacy}",
         "followers_url" : "https://api.github.com/users/www222fff/followers",
         "following_url" : "https://api.github.com/users/www222fff/following{/other_user}",
         "gists_url" : "https://api.github.com/users/www222fff/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/www222fff",
         "id" : 7625606,
         "login" : "www222fff",
         "node_id" : "MDQ6VXNlcjc2MjU2MDY=",
         "organizations_url" : "https://api.github.com/users/www222fff/orgs",
         "received_events_url" : "https://api.github.com/users/www222fff/received_events",
         "repos_url" : "https://api.github.com/users/www222fff/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/www222fff/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/www222fff/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/www222fff"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r860672619"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/860672619"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "See https://github.com/bitcoin/bitcoin/pull/24170#discussion_r795710002 - there are several placed that use `IsBlockOnlyConn()` with logic specific to automatic block-relay-only connections that have logic that does not apply to manual ones. So if I did that, we'd need additional logic in these places to distinguish between manual and automatic connections. ",
      "commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "created_at" : "2022-04-28T09:20:55Z",
      "diff_hunk" : "@@ -1230,7 +1230,7 @@ void PeerManagerImpl::InitializeNode(CNode *pnode)\n         mapNodeState.emplace_hint(mapNodeState.end(), std::piecewise_construct, std::forward_as_tuple(nodeid), std::forward_as_tuple(pnode->IsInboundConn()));\n         assert(m_txrequest.Count(nodeid) == 0);\n     }\n-    PeerRef peer = std::make_shared<Peer>(nodeid, /*tx_relay=*/ !pnode->IsBlockOnlyConn());\n+    PeerRef peer = std::make_shared<Peer>(nodeid, /*tx_relay=*/!pnode->IsBlockOnlyConn() && !pnode->IsManualBlockRelayConn());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r860672619",
      "id" : 860672619,
      "in_reply_to_id" : 860411953,
      "line" : 1233,
      "node_id" : "PRRC_kwDOABII584zTNJr",
      "original_commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "original_line" : 1233,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 5,
      "pull_request_review_id" : 956123934,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/860672619/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-28T09:20:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/860672619",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r861572702"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861572702"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n    for (auto node_to_add : lAddresses) {\r\n```\r\n\r\n(since you're iterating over the items individually, `node_to_add` is singular)",
      "commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "created_at" : "2022-04-29T08:28:09Z",
      "diff_hunk" : "@@ -2202,9 +2206,9 @@ std::vector<AddedNodeInfo> CConnman::GetAddedNodeInfo() const\n         }\n     }\n \n-    for (const std::string& strAddNode : lAddresses) {\n-        CService service(LookupNumeric(strAddNode, Params().GetDefaultPort(strAddNode)));\n-        AddedNodeInfo addedNode{strAddNode, CService(), false, false};\n+    for (auto nodes_to_add : lAddresses) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r861572702",
      "id" : 861572702,
      "line" : 2209,
      "node_id" : "PRRC_kwDOABII584zWo5e",
      "original_commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "original_line" : 2209,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 41,
      "pull_request_review_id" : 957412617,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861572702/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-29T08:54:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861572702",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r861572926"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861572926"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Since you're touching this line, can you comment the boolean arguments?",
      "commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "created_at" : "2022-04-29T08:28:28Z",
      "diff_hunk" : "@@ -2202,9 +2206,9 @@ std::vector<AddedNodeInfo> CConnman::GetAddedNodeInfo() const\n         }\n     }\n \n-    for (const std::string& strAddNode : lAddresses) {\n-        CService service(LookupNumeric(strAddNode, Params().GetDefaultPort(strAddNode)));\n-        AddedNodeInfo addedNode{strAddNode, CService(), false, false};\n+    for (auto nodes_to_add : lAddresses) {\n+        CService service(LookupNumeric(nodes_to_add.m_node_address, Params().GetDefaultPort(nodes_to_add.m_node_address)));\n+        AddedNodeInfo addedNode{nodes_to_add.m_node_address, CService(), false, false, nodes_to_add.conn_type};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r861572926",
      "id" : 861572926,
      "line" : 2211,
      "node_id" : "PRRC_kwDOABII584zWo8-",
      "original_commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "original_line" : 2211,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 43,
      "pull_request_review_id" : 957412617,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861572926/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-29T08:54:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861572926",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r861575629"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861575629"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Since you're adding `IsManualBlockRelayConn()`, consider renaming `IsBlockOnlyConn()` to `IsAutomaticBlockRelayConn()`, otherwise that function name is misleading (it returns `false` for connections that are block relay only connections but were created manually).",
      "commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "created_at" : "2022-04-29T08:32:10Z",
      "diff_hunk" : "@@ -523,10 +541,16 @@ class CNode\n         return m_conn_type == ConnectionType::INBOUND;\n     }\n \n+    bool IsManualBlockRelayConn() const",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r861575629",
      "id" : 861575629,
      "line" : 544,
      "node_id" : "PRRC_kwDOABII584zWpnN",
      "original_commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "original_line" : 544,
      "original_position" : 59,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 59,
      "pull_request_review_id" : 957412617,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861575629/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-29T08:54:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861575629",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r861577089"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861577089"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I know that this is maybe a bit of a stretch for this PR, but I really don't like the addnode/addednode terminology, and would much prefer this to be named something like `ManualConnectionEntry`, which much more precisely describes the nature of these connections.",
      "commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "created_at" : "2022-04-29T08:34:10Z",
      "diff_hunk" : "@@ -188,6 +180,31 @@ enum class ConnectionType {\n      * AddrMan is empty.\n      */\n     ADDR_FETCH,\n+\n+    /**\n+     * Manual-block-relay connections are manually added nodes (via -addnode)\n+     * that behave like BLOCK_RELAY connections in that they don't participate in\n+     * transaction and address relay, and also share the properties of MANUAL\n+     * connections. When connected to a privacy network such as\n+     * Tor, manual block-relay-only connections to IPv4 or IPv6 nodes can be\n+     * used for hardening against eclipse attacks, while at the same time\n+     * making fingerprinting attacks more difficult and preserving a higher degree\n+     * of privacy by not transmitting transactions and addresses over these links.\n+     */\n+    MANUAL_BLOCK_RELAY,\n+};\n+\n+struct AddedNodeInfo {\n+    std::string strAddedNode;\n+    CService resolvedAddress;\n+    bool fConnected;\n+    bool fInbound;\n+    ConnectionType conn_type;\n+};\n+\n+struct AddedNodeEntry {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r861577089",
      "id" : 861577089,
      "line" : 205,
      "node_id" : "PRRC_kwDOABII584zWp-B",
      "original_commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "original_line" : 205,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 41,
      "pull_request_review_id" : 957412617,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861577089/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-29T08:54:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861577089",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r861578067"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861578067"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Be consistent with the `m_` prefix (either `m_node_address` and `m_conn_type` or `node_address` and `conn_type`). I prefer naming all members of structs with the `m_` prefix, but opinions vary.",
      "commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "created_at" : "2022-04-29T08:35:31Z",
      "diff_hunk" : "@@ -188,6 +180,31 @@ enum class ConnectionType {\n      * AddrMan is empty.\n      */\n     ADDR_FETCH,\n+\n+    /**\n+     * Manual-block-relay connections are manually added nodes (via -addnode)\n+     * that behave like BLOCK_RELAY connections in that they don't participate in\n+     * transaction and address relay, and also share the properties of MANUAL\n+     * connections. When connected to a privacy network such as\n+     * Tor, manual block-relay-only connections to IPv4 or IPv6 nodes can be\n+     * used for hardening against eclipse attacks, while at the same time\n+     * making fingerprinting attacks more difficult and preserving a higher degree\n+     * of privacy by not transmitting transactions and addresses over these links.\n+     */\n+    MANUAL_BLOCK_RELAY,\n+};\n+\n+struct AddedNodeInfo {\n+    std::string strAddedNode;\n+    CService resolvedAddress;\n+    bool fConnected;\n+    bool fInbound;\n+    ConnectionType conn_type;\n+};\n+\n+struct AddedNodeEntry {\n+    std::string m_node_address;\n+    ConnectionType conn_type;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r861578067",
      "id" : 861578067,
      "line" : 207,
      "node_id" : "PRRC_kwDOABII584zWqNT",
      "original_commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "original_line" : 207,
      "original_position" : 43,
      "original_start_line" : 206,
      "path" : "src/net.h",
      "position" : 43,
      "pull_request_review_id" : 957412617,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861578067/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 206,
      "start_side" : "RIGHT",
      "updated_at" : "2022-04-29T08:54:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861578067",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r861592353"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861592353"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is it possible to use `ConnectionTypeAsString()` here to avoid defining these strings in multiple places in the source?",
      "commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "created_at" : "2022-04-29T08:46:31Z",
      "diff_hunk" : "@@ -293,6 +294,20 @@ static RPCHelpMan addnode()\n         throw std::runtime_error(\n             self.ToString());\n     }\n+    std::string connection_type_name = \"manual\";\n+    if (!request.params[2].isNull()) {\n+        connection_type_name = request.params[2].get_str();\n+    }\n+    if (connection_type_name != \"manual\" && connection_type_name != \"manual-block-relay\") {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r861592353",
      "id" : 861592353,
      "line" : 301,
      "node_id" : "PRRC_kwDOABII584zWtsh",
      "original_commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "original_line" : 301,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : 16,
      "pull_request_review_id" : 957412617,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861592353/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-29T08:54:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/861592353",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r862080703"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862080703"
         }
      },
      "author_association" : "MEMBER",
      "body" : "That seems preferable?",
      "commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "created_at" : "2022-04-29T19:13:40Z",
      "diff_hunk" : "@@ -1230,7 +1230,7 @@ void PeerManagerImpl::InitializeNode(CNode *pnode)\n         mapNodeState.emplace_hint(mapNodeState.end(), std::piecewise_construct, std::forward_as_tuple(nodeid), std::forward_as_tuple(pnode->IsInboundConn()));\n         assert(m_txrequest.Count(nodeid) == 0);\n     }\n-    PeerRef peer = std::make_shared<Peer>(nodeid, /*tx_relay=*/ !pnode->IsBlockOnlyConn());\n+    PeerRef peer = std::make_shared<Peer>(nodeid, /*tx_relay=*/!pnode->IsBlockOnlyConn() && !pnode->IsManualBlockRelayConn());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r862080703",
      "id" : 862080703,
      "in_reply_to_id" : 860411953,
      "line" : 1233,
      "node_id" : "PRRC_kwDOABII584zYk6_",
      "original_commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "original_line" : 1233,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 5,
      "pull_request_review_id" : 958143179,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862080703/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-29T19:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862080703",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r862081323"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862081323"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Prefer `=blocksonly` to be clearer and match the existing `-blocksonly` option.",
      "commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "created_at" : "2022-04-29T19:14:48Z",
      "diff_hunk" : "@@ -440,7 +440,7 @@ void SetupServerArgs(ArgsManager& argsman)\n                  \" If <type> is not supplied or if <type> = 1, indexes for all known types are enabled.\",\n                  ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n \n-    argsman.AddArg(\"-addnode=<ip>\", strprintf(\"Add a node to connect to and attempt to keep the connection open (see the addnode RPC help for more info). This option can be specified multiple times to add multiple nodes; connections are limited to %u at a time and are counted separately from the -maxconnections limit.\", MAX_ADDNODE_CONNECTIONS), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-addnode=<ip>[=manual-block-relay]\", strprintf(\"Add a node to connect to and attempt to keep the connection open (see the addnode RPC help for more info). This option can be specified multiple times to add multiple nodes; connections are limited to %u at a time and are counted separately from the -maxconnections limit. Append =manual-block-relay to disable transaction and address relay.\", MAX_ADDNODE_CONNECTIONS), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r862081323",
      "id" : 862081323,
      "line" : 443,
      "node_id" : "PRRC_kwDOABII584zYlEr",
      "original_commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "original_line" : 443,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 5,
      "pull_request_review_id" : 958144085,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862081323/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-29T19:25:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862081323",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r862177197"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862177197"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`-blocksonly` mode is different from block relay peers.",
      "commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "created_at" : "2022-04-29T21:37:57Z",
      "diff_hunk" : "@@ -440,7 +440,7 @@ void SetupServerArgs(ArgsManager& argsman)\n                  \" If <type> is not supplied or if <type> = 1, indexes for all known types are enabled.\",\n                  ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n \n-    argsman.AddArg(\"-addnode=<ip>\", strprintf(\"Add a node to connect to and attempt to keep the connection open (see the addnode RPC help for more info). This option can be specified multiple times to add multiple nodes; connections are limited to %u at a time and are counted separately from the -maxconnections limit.\", MAX_ADDNODE_CONNECTIONS), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-addnode=<ip>[=manual-block-relay]\", strprintf(\"Add a node to connect to and attempt to keep the connection open (see the addnode RPC help for more info). This option can be specified multiple times to add multiple nodes; connections are limited to %u at a time and are counted separately from the -maxconnections limit. Append =manual-block-relay to disable transaction and address relay.\", MAX_ADDNODE_CONNECTIONS), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r862177197",
      "id" : 862177197,
      "in_reply_to_id" : 862081323,
      "line" : 443,
      "node_id" : "PRRC_kwDOABII584zY8et",
      "original_commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "original_line" : 443,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 5,
      "pull_request_review_id" : 958287551,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862177197/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-29T21:37:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862177197",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r862207474"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862207474"
         }
      },
      "author_association" : "NONE",
      "body" : "Supposed option modify case need not be handled?\r\nIf add node firstly with setting manual and then setting manual block relay.",
      "commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "created_at" : "2022-04-29T22:14:01Z",
      "diff_hunk" : "@@ -2812,22 +2816,22 @@ std::vector<CAddress> CConnman::GetAddresses(CNode& requestor, size_t max_addres\n     return cache_entry.m_addrs_response_cache;\n }\n \n-bool CConnman::AddNode(const std::string& strNode)\n+bool CConnman::AddNode(const std::string& strNode, ConnectionType conn_type)\n {\n     LOCK(m_added_nodes_mutex);\n-    for (const std::string& it : m_added_nodes) {\n-        if (strNode == it) return false;\n+    for (const auto& it : m_added_nodes) {\n+        if (strNode == it.m_node_address) return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r862207474",
      "id" : 862207474,
      "line" : 2823,
      "node_id" : "PRRC_kwDOABII584zZD3y",
      "original_commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "original_line" : 2823,
      "original_position" : 76,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 76,
      "pull_request_review_id" : 958328721,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862207474/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-29T22:14:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862207474",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7625606?v=4",
         "events_url" : "https://api.github.com/users/www222fff/events{/privacy}",
         "followers_url" : "https://api.github.com/users/www222fff/followers",
         "following_url" : "https://api.github.com/users/www222fff/following{/other_user}",
         "gists_url" : "https://api.github.com/users/www222fff/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/www222fff",
         "id" : 7625606,
         "login" : "www222fff",
         "node_id" : "MDQ6VXNlcjc2MjU2MDY=",
         "organizations_url" : "https://api.github.com/users/www222fff/orgs",
         "received_events_url" : "https://api.github.com/users/www222fff/received_events",
         "repos_url" : "https://api.github.com/users/www222fff/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/www222fff/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/www222fff/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/www222fff"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r862210147"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862210147"
         }
      },
      "author_association" : "NONE",
      "body" : "Addconnection rpc should not support manual block relay, so seems here need not check?",
      "commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "created_at" : "2022-04-29T22:16:46Z",
      "diff_hunk" : "@@ -1258,6 +1260,7 @@ bool CConnman::AddConnection(const std::string& address, ConnectionType conn_typ\n     switch (conn_type) {\n     case ConnectionType::INBOUND:\n     case ConnectionType::MANUAL:\n+    case ConnectionType::MANUAL_BLOCK_RELAY:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r862210147",
      "id" : 862210147,
      "line" : 1263,
      "node_id" : "PRRC_kwDOABII584zZEhj",
      "original_commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "original_line" : 1263,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 13,
      "pull_request_review_id" : 958332314,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862210147/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-29T22:16:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862210147",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7625606?v=4",
         "events_url" : "https://api.github.com/users/www222fff/events{/privacy}",
         "followers_url" : "https://api.github.com/users/www222fff/followers",
         "following_url" : "https://api.github.com/users/www222fff/following{/other_user}",
         "gists_url" : "https://api.github.com/users/www222fff/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/www222fff",
         "id" : 7625606,
         "login" : "www222fff",
         "node_id" : "MDQ6VXNlcjc2MjU2MDY=",
         "organizations_url" : "https://api.github.com/users/www222fff/orgs",
         "received_events_url" : "https://api.github.com/users/www222fff/received_events",
         "repos_url" : "https://api.github.com/users/www222fff/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/www222fff/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/www222fff/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/www222fff"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r862252028"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862252028"
         }
      },
      "author_association" : "MEMBER",
      "body" : "How so? Maybe it needs better docs on the difference...",
      "commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "created_at" : "2022-04-29T23:10:07Z",
      "diff_hunk" : "@@ -440,7 +440,7 @@ void SetupServerArgs(ArgsManager& argsman)\n                  \" If <type> is not supplied or if <type> = 1, indexes for all known types are enabled.\",\n                  ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n \n-    argsman.AddArg(\"-addnode=<ip>\", strprintf(\"Add a node to connect to and attempt to keep the connection open (see the addnode RPC help for more info). This option can be specified multiple times to add multiple nodes; connections are limited to %u at a time and are counted separately from the -maxconnections limit.\", MAX_ADDNODE_CONNECTIONS), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-addnode=<ip>[=manual-block-relay]\", strprintf(\"Add a node to connect to and attempt to keep the connection open (see the addnode RPC help for more info). This option can be specified multiple times to add multiple nodes; connections are limited to %u at a time and are counted separately from the -maxconnections limit. Append =manual-block-relay to disable transaction and address relay.\", MAX_ADDNODE_CONNECTIONS), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r862252028",
      "id" : 862252028,
      "in_reply_to_id" : 862081323,
      "line" : 443,
      "node_id" : "PRRC_kwDOABII584zZOv8",
      "original_commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "original_line" : 443,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 5,
      "pull_request_review_id" : 958385116,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862252028/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-29T23:10:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862252028",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r862387357"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862387357"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Here you go: https://bitcoin.stackexchange.com/questions/112828/what-is-a-block-relay-only-connection-what-is-it-used-for",
      "commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "created_at" : "2022-04-30T19:07:32Z",
      "diff_hunk" : "@@ -440,7 +440,7 @@ void SetupServerArgs(ArgsManager& argsman)\n                  \" If <type> is not supplied or if <type> = 1, indexes for all known types are enabled.\",\n                  ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n \n-    argsman.AddArg(\"-addnode=<ip>\", strprintf(\"Add a node to connect to and attempt to keep the connection open (see the addnode RPC help for more info). This option can be specified multiple times to add multiple nodes; connections are limited to %u at a time and are counted separately from the -maxconnections limit.\", MAX_ADDNODE_CONNECTIONS), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-addnode=<ip>[=manual-block-relay]\", strprintf(\"Add a node to connect to and attempt to keep the connection open (see the addnode RPC help for more info). This option can be specified multiple times to add multiple nodes; connections are limited to %u at a time and are counted separately from the -maxconnections limit. Append =manual-block-relay to disable transaction and address relay.\", MAX_ADDNODE_CONNECTIONS), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r862387357",
      "id" : 862387357,
      "in_reply_to_id" : 862081323,
      "line" : 443,
      "node_id" : "PRRC_kwDOABII584zZvyd",
      "original_commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "original_line" : 443,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 5,
      "pull_request_review_id" : 958513139,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862387357/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-30T19:07:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862387357",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r862388509"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862388509"
         }
      },
      "author_association" : "MEMBER",
      "body" : "That doesn't contrast.",
      "commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "created_at" : "2022-04-30T19:22:19Z",
      "diff_hunk" : "@@ -440,7 +440,7 @@ void SetupServerArgs(ArgsManager& argsman)\n                  \" If <type> is not supplied or if <type> = 1, indexes for all known types are enabled.\",\n                  ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n \n-    argsman.AddArg(\"-addnode=<ip>\", strprintf(\"Add a node to connect to and attempt to keep the connection open (see the addnode RPC help for more info). This option can be specified multiple times to add multiple nodes; connections are limited to %u at a time and are counted separately from the -maxconnections limit.\", MAX_ADDNODE_CONNECTIONS), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-addnode=<ip>[=manual-block-relay]\", strprintf(\"Add a node to connect to and attempt to keep the connection open (see the addnode RPC help for more info). This option can be specified multiple times to add multiple nodes; connections are limited to %u at a time and are counted separately from the -maxconnections limit. Append =manual-block-relay to disable transaction and address relay.\", MAX_ADDNODE_CONNECTIONS), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r862388509",
      "id" : 862388509,
      "in_reply_to_id" : 862081323,
      "line" : 443,
      "node_id" : "PRRC_kwDOABII584zZwEd",
      "original_commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "original_line" : 443,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 5,
      "pull_request_review_id" : 958514114,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862388509/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-30T19:22:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862388509",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r862393584"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862393584"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Some differences:\r\n- -blocksonly is a global startup option (applying to all connections) -block-relay-only is connection-specific\r\n- A node in -blocksonly mode participates in address relay, we never send out addresses on -block-relay-only connections (and ignore incoming ones).\r\n- A node in -blocksonly signals not to receive any transactions (`fRelay`) and will disconnect if that is breached, but it may in special cases send out transactions itself (if submitted via RPC). We'll  never send a tx over a block-relay-only connection.\r\n- A node in -blocksonly mode still has two of their outbound connections as -block-relay-only (for which then the block-relay-only rules apply).",
      "commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "created_at" : "2022-04-30T20:30:59Z",
      "diff_hunk" : "@@ -440,7 +440,7 @@ void SetupServerArgs(ArgsManager& argsman)\n                  \" If <type> is not supplied or if <type> = 1, indexes for all known types are enabled.\",\n                  ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n \n-    argsman.AddArg(\"-addnode=<ip>\", strprintf(\"Add a node to connect to and attempt to keep the connection open (see the addnode RPC help for more info). This option can be specified multiple times to add multiple nodes; connections are limited to %u at a time and are counted separately from the -maxconnections limit.\", MAX_ADDNODE_CONNECTIONS), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-addnode=<ip>[=manual-block-relay]\", strprintf(\"Add a node to connect to and attempt to keep the connection open (see the addnode RPC help for more info). This option can be specified multiple times to add multiple nodes; connections are limited to %u at a time and are counted separately from the -maxconnections limit. Append =manual-block-relay to disable transaction and address relay.\", MAX_ADDNODE_CONNECTIONS), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r862393584",
      "id" : 862393584,
      "in_reply_to_id" : 862081323,
      "line" : 443,
      "node_id" : "PRRC_kwDOABII584zZxTw",
      "original_commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "original_line" : 443,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 5,
      "pull_request_review_id" : 958518276,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862393584/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-30T20:30:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862393584",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r862525759"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862525759"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "It's true that it doesn't support this, just as it doesn't support INBOUND or MANUAL. But leaving it out her would result in a compiler warning for the switch, see comment below:\r\n`// no default case, so the compiler can warn about missing cases`",
      "commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "created_at" : "2022-05-01T21:52:09Z",
      "diff_hunk" : "@@ -1258,6 +1260,7 @@ bool CConnman::AddConnection(const std::string& address, ConnectionType conn_typ\n     switch (conn_type) {\n     case ConnectionType::INBOUND:\n     case ConnectionType::MANUAL:\n+    case ConnectionType::MANUAL_BLOCK_RELAY:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r862525759",
      "id" : 862525759,
      "in_reply_to_id" : 862210147,
      "line" : 1263,
      "node_id" : "PRRC_kwDOABII584zaRk_",
      "original_commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "original_line" : 1263,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 13,
      "pull_request_review_id" : 958634001,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862525759/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-01T21:52:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862525759",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r862526220"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862526220"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "No, a modify option is not supported, especially since it is not possible to change the connection connection type of an existing connection. A user could instead use the 'remove' option and then re-add with another connection type (which would not change existing connections though). ",
      "commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "created_at" : "2022-05-01T21:56:41Z",
      "diff_hunk" : "@@ -2812,22 +2816,22 @@ std::vector<CAddress> CConnman::GetAddresses(CNode& requestor, size_t max_addres\n     return cache_entry.m_addrs_response_cache;\n }\n \n-bool CConnman::AddNode(const std::string& strNode)\n+bool CConnman::AddNode(const std::string& strNode, ConnectionType conn_type)\n {\n     LOCK(m_added_nodes_mutex);\n-    for (const std::string& it : m_added_nodes) {\n-        if (strNode == it) return false;\n+    for (const auto& it : m_added_nodes) {\n+        if (strNode == it.m_node_address) return false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24170#discussion_r862526220",
      "id" : 862526220,
      "in_reply_to_id" : 862207474,
      "line" : 2823,
      "node_id" : "PRRC_kwDOABII584zaRsM",
      "original_commit_id" : "99154c5c314859874dee47cd54d035c7308b35b3",
      "original_line" : 2823,
      "original_position" : 76,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 76,
      "pull_request_review_id" : 958634341,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862526220/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-01T21:56:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862526220",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   }
]
