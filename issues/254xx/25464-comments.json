[
   {
      "author_association" : "MEMBER",
      "body" : "> In the txs vector created to store ret.getValues()\r\n\r\nThis is not accurate. The memory used by `const std::vector<UniValue>& txs = ret.getValues();` is roughly `0`, as `getValues` returns a reference and the return value is bound as a reference.\r\n\r\nMemory is consumed when creating an unnamed temporary vector, to be passed into `push_backV`. While the argument of `push_backV` is a const reference, there is no enforcement that the caller is providing a reference and the language allows *any* value of the type (lvalue or (p)rvalue) to be passed in.",
      "created_at" : "2022-06-27T12:40:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25464#issuecomment-1167303373",
      "id" : 1167303373,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25464",
      "node_id" : "IC_kwDOABII585Fk6LN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1167303373/reactions"
      },
      "updated_at" : "2022-06-27T12:40:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1167303373",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Does anyone know how to test this accurately?\r\n\r\nI tried massif, but it didn't seem too useful to check intermittent memory spikes.\r\n\r\nMaster:\r\n![Screenshot from 2022-06-28 11-07-26](https://user-images.githubusercontent.com/6399679/176140706-9ee9b584-aee3-43e3-8a62-c4eb37be8ce1.png)\r\n\r\nThis pull:\r\n![Screenshot from 2022-06-28 11-07-26](https://user-images.githubusercontent.com/6399679/176140827-74347fba-f963-4ef9-928b-584d54acf6a4.png)\r\n\r\n",
      "created_at" : "2022-06-28T09:10:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25464#issuecomment-1168450227",
      "id" : 1168450227,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25464",
      "node_id" : "IC_kwDOABII585FpSKz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1168450227/reactions"
      },
      "updated_at" : "2022-06-28T09:10:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1168450227",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "While the massif chart may not be accurate, the maximum memory usage should be.\r\n\r\nI've also confirmed this with `/usr/bin/time --format='%M'`.\r\n\r\n\r\nResults for master:\r\n\r\n* peak memory (`%M`): 0.507 GB\r\n* fastest duration (out of 10 RPC invocations): 2.34 seconds\r\n\r\nThis pull:\r\n\r\n* peak memory: 0.444 GB\r\n* fastest duration (out of 10 RPC invocations): 2.19 seconds\r\n\r\nThus, in my testing, the changes in this pull both *speed-up* and *reduce memory*.",
      "created_at" : "2022-06-29T09:44:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25464#issuecomment-1169767990",
      "id" : 1169767990,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25464",
      "node_id" : "IC_kwDOABII585FuT42",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1169767990/reactions"
      },
      "updated_at" : "2022-06-29T09:44:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1169767990",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
