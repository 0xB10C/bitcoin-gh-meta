[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25487](https://github.com/bitcoin/bitcoin/pull/25487) ([kernel 3b/n] Make `{Dump,Load}Mempool` `CTxMemPool` methods, decouple from `ArgsManager` by dongcarl)\n* [#23897](https://github.com/bitcoin/bitcoin/pull/23897) (refactor: Move calculation logic out from `CheckSequenceLocksAtTip()` by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-06-21T04:46:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25434#issuecomment-1161262465",
      "id" : 1161262465,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25434",
      "node_id" : "IC_kwDOABII585FN3WB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1161262465/reactions"
      },
      "updated_at" : "2022-07-01T10:42:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1161262465",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks for picking this up. I just realized I probably should have left a comment summarizing what work needs to be done. Not sure if you saw https://github.com/bitcoin/bitcoin/pull/21413#issuecomment-827228002? We'll want to add (1) an option to override relative timelocks between transactions passed in, (2) a param for what MTP/height to mock, either for the whole thing or at each transaction. This would also require more tests, i.e. utilizing the new options to ensure it works beyond not breaking things.",
      "created_at" : "2022-06-21T08:25:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25434#issuecomment-1161426723",
      "id" : 1161426723,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25434",
      "node_id" : "IC_kwDOABII585FOfcj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1161426723/reactions"
      },
      "updated_at" : "2022-06-21T08:25:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1161426723",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This greatly increases the scope.\r\n\r\nIt might be better to break down each option into a specific PR.\r\n\r\nHow could `testmempoolaccept` simulate a specific block height, for example?",
      "created_at" : "2022-06-21T16:25:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25434#issuecomment-1161980569",
      "id" : 1161980569,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25434",
      "node_id" : "IC_kwDOABII585FQmqZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1161980569/reactions"
      },
      "updated_at" : "2022-06-21T16:25:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1161980569",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@ariard  If I understand correctly, are you suggesting the parameter schemes below?\r\n\r\n```c++\r\n{\"options\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED_NAMED_ARG, \"\",\r\n    {\r\n        {\"maxfeerate\", RPCArg::Type::AMOUNT, RPCArg::Default{...},\"...\"},\r\n        {\"bypass_relative_timelocks\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"...\"},\r\n        {\"bypass_absolute_timelocks\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"...\"},\r\n        {\"bypass_feerate_accuracy\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"...\"},\r\n        {\"bypass_csv_execution\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"...\"},\r\n        {\"bypass_cltv_execution\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"...\"},\r\n    },\r\n     \"\\\"options\\\"\"\r\n},\r\n```\r\nor\r\n\r\n```c++\r\n{\"options\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED_NAMED_ARG, \"\",\r\n    {\r\n        {\"maxfeerate\", RPCArg::Type::AMOUNT, RPCArg::Default{...},\"...\"},\r\n        {\"mock_mtp\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"...\"},\r\n        {\"mock_height\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"...\"},\r\n        {\"bypass_feerate_accuracy\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"...\"},\r\n        {\"bypass_csv_execution\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"...\"},\r\n        {\"bypass_cltv_execution\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"...\"},\r\n    },\r\n    \"\\\"options\\\"\"\r\n},\r\n```",
      "created_at" : "2022-06-28T14:55:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25434#issuecomment-1168833308",
      "id" : 1168833308,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25434",
      "node_id" : "IC_kwDOABII585Fqvsc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1168833308/reactions"
      },
      "updated_at" : "2022-06-28T14:55:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1168833308",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@w0xlt \r\n\r\nActually a combination of both. The first one + \"mock_mtp / mock_height\". \r\nIt sounds a lot of flexibility but I think that's what you're aiming for to verify Lightning HTLC-timeout.",
      "created_at" : "2022-06-29T01:08:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25434#issuecomment-1169430111",
      "id" : 1169430111,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25434",
      "node_id" : "IC_kwDOABII585FtBZf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1169430111/reactions"
      },
      "updated_at" : "2022-06-29T01:08:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1169430111",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-06-30T16:47:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25434#issuecomment-1171454030",
      "id" : 1171454030,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25434",
      "node_id" : "IC_kwDOABII585F0vhO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1171454030/reactions"
      },
      "updated_at" : "2022-06-30T16:47:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1171454030",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "IMO the idea for `mock_{mtp,height}` is a better approach. \"Valid in 9999 years\" seems closer to \"never valid\" than \"valid eventually\".",
      "created_at" : "2022-07-01T19:19:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25434#issuecomment-1172650243",
      "id" : 1172650243,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25434",
      "node_id" : "IC_kwDOABII585F5TkD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1172650243/reactions"
      },
      "updated_at" : "2022-07-01T19:19:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1172650243",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I pushed some changes:\r\n\r\n. `struct MempoolTestCriteria` was created to allocate all parameters suggested in https://github.com/bitcoin/bitcoin/pull/25434#pullrequestreview-1020896809. (https://github.com/bitcoin/bitcoin/pull/25434/commits/be52f8ace2e30aa5981852fafc4fe8f10eb8e759)\r\n. `bypass_timelocks` has been split into `bypass_relative_timelocks` and `bypass_absolute_timelocks`, as suggested in the same comment. (https://github.com/bitcoin/bitcoin/pull/25434/commits/ef766e10225eaed8f24a50304629026709165354)\r\n. The tests were split in two commit: one tests that bypass_timelocls works and the other tests that it doesn't affect OP_CSV and OP_CLTV checks. (https://github.com/bitcoin/bitcoin/pull/25434/commits/9c7b5180f43ef428ef89be9fb5e26e8bef99c659 and https://github.com/bitcoin/bitcoin/pull/25434/commits/81d4bf7fcdc0fc380f5107fd3bd50de0d9ef5db5)",
      "created_at" : "2022-07-02T15:39:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25434#issuecomment-1172917695",
      "id" : 1172917695,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25434",
      "node_id" : "IC_kwDOABII585F6U2_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1172917695/reactions"
      },
      "updated_at" : "2022-07-02T15:39:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1172917695",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   }
]
