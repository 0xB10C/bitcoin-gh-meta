{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\nThis behavior was first noted by @EthanHeilman here: https://github.com/bitcoin/bitcoin/issues/11368#issuecomment-751574945 but it was conflated with the RPC issue there while I now think this is a separate issue.\r\n\r\nWhen a lot of wallets are created in quick succession, sqlite will exhaust all the available file descriptors and the node crashes the next time it tries to create file for unrelated reasons (blk, rev etc.).\n\n### Expected behaviour\n\nThe node shouldn't crash.\n\n### Steps to reproduce\n\n```\r\nfor i in $(seq 1 100); do src/bitcoin-cli createwallet \"fd-wallet$i\"; done\r\n```\n\n### Relevant log output\n\nhttps://0bin.net/paste/swIJVCaU#CuCCWv7cC4ZscxjCEiauqEhB1icPiMHkYo+D5dC8mSr\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nmaster\n\n### Operating system and version\n\nmacOS\n\n### Machine specifications\n\n_No response_",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 10,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27732/comments",
   "created_at" : "2023-05-23T23:38:52Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27732/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/27732",
   "id" : 1722940889,
   "labels" : [
      {
         "color" : "08a781",
         "default" : false,
         "description" : null,
         "id" : 149424,
         "name" : "Wallet",
         "node_id" : "MDU6TGFiZWwxNDk0MjQ=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27732/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "I_kwDOABII585msf3Z",
   "number" : 27732,
   "performed_via_github_app" : null,
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27732/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27732/timeline",
   "title" : "Creating too many wallets exhausts file descriptor limit and leads to crash",
   "updated_at" : "2023-06-14T15:37:02Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27732",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
      "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
      "followers_url" : "https://api.github.com/users/fjahr/followers",
      "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/fjahr",
      "id" : 1322187,
      "login" : "fjahr",
      "node_id" : "MDQ6VXNlcjEzMjIxODc=",
      "organizations_url" : "https://api.github.com/users/fjahr/orgs",
      "received_events_url" : "https://api.github.com/users/fjahr/received_events",
      "repos_url" : "https://api.github.com/users/fjahr/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/fjahr"
   }
}
