[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept NACK | [sdaftuar](https://github.com/bitcoin/bitcoin/pull/27772#issuecomment-1566232510) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#27742](https://github.com/bitcoin/bitcoin/pull/27742) ([NO MERGE] BIP331 Ancestor Package Relay by glozow)\n* [#27675](https://github.com/bitcoin/bitcoin/pull/27675) (net_processing: Drop m_recently_announced_invs bloom filter by ajtowns)\n* [#27499](https://github.com/bitcoin/bitcoin/pull/27499) (net processing, refactor: Decouple PeerManager from gArgs by dergoegge)\n* [#26711](https://github.com/bitcoin/bitcoin/pull/26711) (validate package transactions with their in-package ancestor sets by glozow)\n* [#26525](https://github.com/bitcoin/bitcoin/pull/26525) (Remove -mempoolfullrbf option by BitcoinErrorLog)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-05-28T11:55:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27772#issuecomment-1566110454",
      "id" : 1566110454,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27772",
      "node_id" : "IC_kwDOABII585dWPL2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1566110454/reactions"
      },
      "updated_at" : "2023-05-28T20:45:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1566110454",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rather than open more PRs that are duplicative of other recently rejected PRs, it would be more helpful to directly address the feedback that was previously given.\r\n\r\nAre you unaware that some of the DoS attacks that are prevented by our standardness checks include situations where a block might be mined that would take a very long time to validate, a cost that would be felt by the whole network?  See for instance https://bitcointalk.org/?topic=140078%7CCVE-2013-2292]].  It is absurd that this issue would be ignored in a PR seeking to change mainnet behavior.\r\n\r\nEven putting aside the network-wide risks, I think it would be inappropriate for this project to bless a configuration that could lead to our users allowing themselves to be DoS'ed, which seems like the obvious outcome (I have no idea how we would provide documentation to our users to do these risk assessments themselves).\r\n\r\nIn the most recent PR that tried to do something similar to this (which you also commented on),  I [asked for the particular rules that seem to be problematic](https://github.com/bitcoin/bitcoin/pull/27578#issuecomment-1535568784) (for whatever use case is motivating these PRs) to be spelled out, so that we can discuss -- and perhaps there are indeed modifications to our rules that would be fine and beneficial to the network if we adopted.  If you'd care to do that here, perhaps progress could be made. Treating our standardness rules as a black box to be worked around, without any consideration for _why_ any of these rules exist, is not helpful and not going to lead anywhere.  Concept NACK.\r\n",
      "created_at" : "2023-05-28T19:07:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27772#issuecomment-1566232510",
      "id" : 1566232510,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27772",
      "node_id" : "IC_kwDOABII585dWs--",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1566232510/reactions"
      },
      "updated_at" : "2023-05-28T19:07:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1566232510",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "NONE",
      "body" : ">Rather than open more PRs that are duplicative of other recently rejected PRs, it would be more helpful to directly address the feedback that was previously given.\r\n\r\nThis PR was intended as a draft. The goal was not to propose any changes right away, but rather to illustrate (also for myself) the touch points in the codebase. I wouldn't consider this PR a duplicate though. It only relaxes tx acceptance on the rpc level, and leaves the p2p restrictions in place - contrary to #27578. Nevertheless apologies if it came across as pushy.\r\n\r\nI will reply to your other feedback points within the context of https://github.com/bitcoin/bitcoin/issues/27768, to avoid spreading out the discussion across multiple places.",
      "created_at" : "2023-05-29T12:17:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27772#issuecomment-1567067889",
      "id" : 1567067889,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27772",
      "node_id" : "IC_kwDOABII585dZ47x",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1567067889/reactions"
      },
      "updated_at" : "2023-05-29T12:17:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1567067889",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4638168?v=4",
         "events_url" : "https://api.github.com/users/joostjager/events{/privacy}",
         "followers_url" : "https://api.github.com/users/joostjager/followers",
         "following_url" : "https://api.github.com/users/joostjager/following{/other_user}",
         "gists_url" : "https://api.github.com/users/joostjager/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/joostjager",
         "id" : 4638168,
         "login" : "joostjager",
         "node_id" : "MDQ6VXNlcjQ2MzgxNjg=",
         "organizations_url" : "https://api.github.com/users/joostjager/orgs",
         "received_events_url" : "https://api.github.com/users/joostjager/received_events",
         "repos_url" : "https://api.github.com/users/joostjager/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/joostjager/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/joostjager/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/joostjager"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27772#discussion_r1209308134"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1209308134"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Looks like you just switch this from true to false here, without making it an option. NACK on making this a silent footgun for all users.",
      "commit_id" : "4126cef8d9015ff6e1f2f5e2e0ded948c1fa5b60",
      "created_at" : "2023-05-29T13:16:57Z",
      "diff_hunk" : "@@ -71,15 +71,15 @@ TransactionError BroadcastTransaction(NodeContext& node, const CTransactionRef t\n             if (max_tx_fee > 0) {\n                 // First, call ATMP with test_accept and check the fee. If ATMP\n                 // fails here, return error immediately.\n-                const MempoolAcceptResult result = node.chainman->ProcessTransaction(tx, /*test_accept=*/ true);\n+                const MempoolAcceptResult result = node.chainman->ProcessTransaction(tx, /*require_standard=*/false,  /*test_accept=*/ true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27772#discussion_r1209308134",
      "id" : 1209308134,
      "line" : 74,
      "node_id" : "PRRC_kwDOABII585IFJPm",
      "original_commit_id" : "4126cef8d9015ff6e1f2f5e2e0ded948c1fa5b60",
      "original_line" : 74,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/node/transaction.cpp",
      "position" : 5,
      "pull_request_review_id" : 1449481569,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27772",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1209308134/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-29T13:16:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1209308134",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27772#discussion_r1209312388"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1209312388"
         }
      },
      "author_association" : "NONE",
      "body" : "Are you suggesting to add `-acceptnonstdtxnrpc`?",
      "commit_id" : "4126cef8d9015ff6e1f2f5e2e0ded948c1fa5b60",
      "created_at" : "2023-05-29T13:22:21Z",
      "diff_hunk" : "@@ -71,15 +71,15 @@ TransactionError BroadcastTransaction(NodeContext& node, const CTransactionRef t\n             if (max_tx_fee > 0) {\n                 // First, call ATMP with test_accept and check the fee. If ATMP\n                 // fails here, return error immediately.\n-                const MempoolAcceptResult result = node.chainman->ProcessTransaction(tx, /*test_accept=*/ true);\n+                const MempoolAcceptResult result = node.chainman->ProcessTransaction(tx, /*require_standard=*/false,  /*test_accept=*/ true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27772#discussion_r1209312388",
      "id" : 1209312388,
      "in_reply_to_id" : 1209308134,
      "line" : 74,
      "node_id" : "PRRC_kwDOABII585IFKSE",
      "original_commit_id" : "4126cef8d9015ff6e1f2f5e2e0ded948c1fa5b60",
      "original_line" : 74,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/node/transaction.cpp",
      "position" : 5,
      "pull_request_review_id" : 1449487946,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27772",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1209312388/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-29T13:22:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1209312388",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4638168?v=4",
         "events_url" : "https://api.github.com/users/joostjager/events{/privacy}",
         "followers_url" : "https://api.github.com/users/joostjager/followers",
         "following_url" : "https://api.github.com/users/joostjager/following{/other_user}",
         "gists_url" : "https://api.github.com/users/joostjager/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/joostjager",
         "id" : 4638168,
         "login" : "joostjager",
         "node_id" : "MDQ6VXNlcjQ2MzgxNjg=",
         "organizations_url" : "https://api.github.com/users/joostjager/orgs",
         "received_events_url" : "https://api.github.com/users/joostjager/received_events",
         "repos_url" : "https://api.github.com/users/joostjager/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/joostjager/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/joostjager/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/joostjager"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I will reply to your other feedback points within the context of https://github.com/bitcoin/bitcoin/issues/27768, to avoid spreading out the discussion across multiple places.\r\n\r\nI think it'd be better to close this PR for now, (I agree with suhas's comments above), and continue discussion in #27768 (I see [you've responded there](https://github.com/bitcoin/bitcoin/issues/27768#issuecomment-1567115600) with further details of what you are interested in).\r\n\r\nI don't think there's a need to keep this PR open [to discuss code changes](https://github.com/bitcoin/bitcoin/pull/27772#discussion_r1209308134) at this point, and it can always be reopened in future. Given it was [also intended to be an example](https://github.com/bitcoin/bitcoin/pull/27772#issuecomment-1567067889) of what changes you had in mind/would be required, you could link to it from #27768, either in the op, or in further commentary, as a POC.",
      "created_at" : "2023-05-29T13:42:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27772#issuecomment-1567155749",
      "id" : 1567155749,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27772",
      "node_id" : "IC_kwDOABII585daOYl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1567155749/reactions"
      },
      "updated_at" : "2023-05-29T13:42:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1567155749",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
