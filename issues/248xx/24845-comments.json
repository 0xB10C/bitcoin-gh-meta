[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#24897](https://github.com/bitcoin/bitcoin/pull/24897) ([Draft / POC] Silent Payments by w0xlt)\n* [#24811](https://github.com/bitcoin/bitcoin/pull/24811) (refactor: Prepare for moving ArgsManager out of util/system by Empact)\n* [#24752](https://github.com/bitcoin/bitcoin/pull/24752) (wallet: increase BnB upper limit by S3RK)\n* [#24699](https://github.com/bitcoin/bitcoin/pull/24699) (wallet: Improve AvailableCoins performance by reducing duplicated operations by achow101)\n* [#24649](https://github.com/bitcoin/bitcoin/pull/24649) (wallet: do not count wallet utxos as external by S3RK)\n* [#24644](https://github.com/bitcoin/bitcoin/pull/24644) (wallet: add tracepoints and algorithm information to coin selection by achow101)\n* [#24455](https://github.com/bitcoin/bitcoin/pull/24455) (refactor: Split ArgsManager out of util/system by Empact)\n* [#22693](https://github.com/bitcoin/bitcoin/pull/22693) (RPC/Wallet: Add \"use_txids\" to output of getaddressinfo by luke-jr)\n* [#20640](https://github.com/bitcoin/bitcoin/pull/20640) (wallet, refactor: return out-params of CreateTransaction() as optional struct by theStack)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-04-14T11:32:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24845#issuecomment-1099093626",
      "id" : 1099093626,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24845",
      "node_id" : "IC_kwDOABII585BgtZ6",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1099093626/reactions"
      },
      "updated_at" : "2022-04-20T16:47:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1099093626",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24845#discussion_r850797804"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24845"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/850797804"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In 7c9839d3a8aa3bbd0fc9ae46a726022cdb661fc8 \"introduce OperationResult and CallResult classes\"\r\n\r\nnit: missing newline",
      "commit_id" : "ba6dc81466e5dbb867bc054695a3c62db32ff449",
      "created_at" : "2022-04-14T20:55:31Z",
      "diff_hunk" : "@@ -0,0 +1,44 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_OPERATIONRESULT_H\n+#define BITCOIN_OPERATIONRESULT_H\n+\n+#include <util/translation.h>\n+\n+class OperationResult\n+{\n+private:\n+    bool m_res{false};\n+    std::optional<bilingual_str> m_error{std::nullopt};\n+\n+public:\n+    OperationResult(bool _res, const bilingual_str& _error) : m_res(_res), m_error(_error) { }\n+    OperationResult(bool _res) : m_res(_res) { }\n+\n+    bilingual_str getError() const { return (m_error ? *m_error : bilingual_str()); }\n+    bool getRes() const { return m_res; }\n+    explicit operator bool() const { return m_res; }\n+};\n+\n+inline OperationResult errorOut(const bilingual_str& errorStr)\n+{\n+    return OperationResult(false, errorStr);\n+}\n+\n+\n+template <class T>\n+class CallResult : public OperationResult\n+{\n+private:\n+    std::optional<T> m_obj_res{std::nullopt};\n+public:\n+    CallResult() : OperationResult(false) {}\n+    CallResult(T _obj) : OperationResult(true), m_obj_res(_obj) { }\n+    CallResult(const bilingual_str& error) : OperationResult(false, error) { }\n+    const std::optional<T>& getObjResult() const { return m_obj_res; }\n+};\n+\n+\n+#endif // BITCOIN_OPERATIONRESULT_H",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24845#discussion_r850797804",
      "id" : 850797804,
      "line" : 44,
      "node_id" : "PRRC_kwDOABII584ytiTs",
      "original_commit_id" : "7c9839d3a8aa3bbd0fc9ae46a726022cdb661fc8",
      "original_line" : 44,
      "original_position" : 44,
      "original_start_line" : null,
      "path" : "src/operationresult.h",
      "position" : 44,
      "pull_request_review_id" : 942788501,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24845",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/850797804/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-14T21:24:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/850797804",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24845#discussion_r850799951"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24845"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/850799951"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In 7c9839d3a8aa3bbd0fc9ae46a726022cdb661fc8 \"introduce OperationResult and CallResult classes\"\r\n\r\nnit: We prefer to use UpperCamelCase for function names. (here and elsewhere)",
      "commit_id" : "ba6dc81466e5dbb867bc054695a3c62db32ff449",
      "created_at" : "2022-04-14T20:58:53Z",
      "diff_hunk" : "@@ -0,0 +1,44 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_OPERATIONRESULT_H\n+#define BITCOIN_OPERATIONRESULT_H\n+\n+#include <util/translation.h>\n+\n+class OperationResult\n+{\n+private:\n+    bool m_res{false};\n+    std::optional<bilingual_str> m_error{std::nullopt};\n+\n+public:\n+    OperationResult(bool _res, const bilingual_str& _error) : m_res(_res), m_error(_error) { }\n+    OperationResult(bool _res) : m_res(_res) { }\n+\n+    bilingual_str getError() const { return (m_error ? *m_error : bilingual_str()); }\n+    bool getRes() const { return m_res; }\n+    explicit operator bool() const { return m_res; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24845#discussion_r850799951",
      "id" : 850799951,
      "line" : 22,
      "node_id" : "PRRC_kwDOABII584yti1P",
      "original_commit_id" : "7c9839d3a8aa3bbd0fc9ae46a726022cdb661fc8",
      "original_line" : 22,
      "original_position" : 22,
      "original_start_line" : 20,
      "path" : "src/operationresult.h",
      "position" : 22,
      "pull_request_review_id" : 942788501,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24845",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/850799951/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 20,
      "start_side" : "RIGHT",
      "updated_at" : "2022-04-14T21:24:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/850799951",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24845#discussion_r850803298"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24845"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/850803298"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In c2ec6661cbb70a388dc67d6b4b47f2ab49b99418 \"wallet: make SelectCoins return a CallResult.\"\r\n\r\nnit: We prefer snake_case for new variables. (here and elsewhere)",
      "commit_id" : "ba6dc81466e5dbb867bc054695a3c62db32ff449",
      "created_at" : "2022-04-14T21:04:23Z",
      "diff_hunk" : "@@ -566,15 +566,18 @@ std::optional<SelectionResult> SelectCoins(const CWallet& wallet, const std::vec\n             }\n         }\n         // Coin Selection failed.\n-        return std::optional<SelectionResult>();\n+        return CallResult<SelectionResult>();\n     }();\n \n-    if (!res) return std::nullopt;\n+    if (!res) {\n+        return res;\n+    }\n \n     // Add preset inputs to result\n-    res->AddInput(preset_inputs);\n+    auto resMerged = *res.getObjResult();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24845#discussion_r850803298",
      "id" : 850803298,
      "line" : 606,
      "node_id" : "PRRC_kwDOABII584ytjpi",
      "original_commit_id" : "c2ec6661cbb70a388dc67d6b4b47f2ab49b99418",
      "original_line" : 577,
      "original_position" : 95,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 95,
      "pull_request_review_id" : 942788501,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24845",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/850803298/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-14T21:24:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/850803298",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24845#discussion_r850813353"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24845"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/850813353"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In c8a43eca7c4081f8ca87be1befbbcdbfdc798a10 \"send: return proper error message for too-long-mempool-chain failure.\"\r\n\r\nI'm not a huge fan of doing all of the coin selection computation just to immediately throw away the result. It seems like there should be a better way to do this, e.g. by changing how we fill `vCoins` to be guaranteed to have a solution at this point iff long chain utxos are included.",
      "commit_id" : "ba6dc81466e5dbb867bc054695a3c62db32ff449",
      "created_at" : "2022-04-14T21:21:52Z",
      "diff_hunk" : "@@ -557,12 +557,15 @@ CallResult<SelectionResult> SelectCoins(const CWallet& wallet, const std::vector\n             // Try with unlimited ancestors/descendants. The transaction will still need to meet\n             // mempool ancestor/descendant policy to be accepted to mempool and broadcasted, but\n             // OutputGroups use heuristics that may overestimate ancestor/descendant counts.\n-            if (!fRejectLongChains) {\n-                if (auto r8{AttemptSelection(wallet, value_to_select,\n-                                      CoinEligibilityFilter(0, 1, std::numeric_limits<uint64_t>::max(), std::numeric_limits<uint64_t>::max(), true /* include_partial_groups */),\n-                                      vCoins, coin_selection_params)}) {\n-                    return r8;\n+            if (auto r8{AttemptSelection(wallet, value_to_select,\n+                                         CoinEligibilityFilter(0, 1, std::numeric_limits<uint64_t>::max(), std::numeric_limits<uint64_t>::max(), true /* include_partial_groups */),\n+                                         vCoins, coin_selection_params)}) {\n+                if (fRejectLongChains) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24845#discussion_r850813353",
      "id" : 850813353,
      "line" : 589,
      "node_id" : "PRRC_kwDOABII584ytmGp",
      "original_commit_id" : "c8a43eca7c4081f8ca87be1befbbcdbfdc798a10",
      "original_line" : 563,
      "original_position" : 12,
      "original_start_line" : 560,
      "path" : "src/wallet/spend.cpp",
      "position" : 12,
      "pull_request_review_id" : 942788501,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24845",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/850813353/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-04-14T21:24:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/850813353",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24845#discussion_r850814403"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24845"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/850814403"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In 30feca7b374256ff62443b2e2f1c65dfa49bb083 \"send: move wallet CreateTransaction* flow to use OperationResult/CallResult.\"\r\n\r\nI don't think this needs to be an `OperationResult`. It really can be `CallResult<CTransactionRef>`. The original really should have just returned `CTransactionRef` anyways.",
      "commit_id" : "ba6dc81466e5dbb867bc054695a3c62db32ff449",
      "created_at" : "2022-04-14T21:23:51Z",
      "diff_hunk" : "@@ -651,13 +651,12 @@ static void DiscourageFeeSniping(CMutableTransaction& tx, FastRandomContext& rng\n     }\n }\n \n-static bool CreateTransactionInternal(\n+static OperationResult CreateTransactionInternal(",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24845#discussion_r850814403",
      "id" : 850814403,
      "line" : 686,
      "node_id" : "PRRC_kwDOABII584ytmXD",
      "original_commit_id" : "30feca7b374256ff62443b2e2f1c65dfa49bb083",
      "original_line" : 654,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 5,
      "pull_request_review_id" : 942788501,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24845",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/850814403/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-14T21:24:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/850814403",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24845#discussion_r851340834"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24845"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851340834"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "hmm yeah, nice point. Will cook something for it.",
      "commit_id" : "ba6dc81466e5dbb867bc054695a3c62db32ff449",
      "created_at" : "2022-04-15T15:43:43Z",
      "diff_hunk" : "@@ -557,12 +557,15 @@ CallResult<SelectionResult> SelectCoins(const CWallet& wallet, const std::vector\n             // Try with unlimited ancestors/descendants. The transaction will still need to meet\n             // mempool ancestor/descendant policy to be accepted to mempool and broadcasted, but\n             // OutputGroups use heuristics that may overestimate ancestor/descendant counts.\n-            if (!fRejectLongChains) {\n-                if (auto r8{AttemptSelection(wallet, value_to_select,\n-                                      CoinEligibilityFilter(0, 1, std::numeric_limits<uint64_t>::max(), std::numeric_limits<uint64_t>::max(), true /* include_partial_groups */),\n-                                      vCoins, coin_selection_params)}) {\n-                    return r8;\n+            if (auto r8{AttemptSelection(wallet, value_to_select,\n+                                         CoinEligibilityFilter(0, 1, std::numeric_limits<uint64_t>::max(), std::numeric_limits<uint64_t>::max(), true /* include_partial_groups */),\n+                                         vCoins, coin_selection_params)}) {\n+                if (fRejectLongChains) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24845#discussion_r851340834",
      "id" : 851340834,
      "in_reply_to_id" : 850813353,
      "line" : 589,
      "node_id" : "PRRC_kwDOABII584yvm4i",
      "original_commit_id" : "c8a43eca7c4081f8ca87be1befbbcdbfdc798a10",
      "original_line" : 563,
      "original_position" : 12,
      "original_start_line" : 560,
      "path" : "src/wallet/spend.cpp",
      "position" : 12,
      "pull_request_review_id" : 943511008,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24845",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851340834/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-04-15T15:43:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851340834",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Hey, thanks for the review @achow101.\r\n\r\n> The last 2 commits should be dropped from this PR and a new PR for each one opened. They are orthogonal to the main changes here.\r\n\r\nSounds good, will move them to their own PRs. I added them here basically because I wasn't totally happy with the extra wasted computation neither, so.. thought on other ways to speed up the process.\r\n\r\n---\r\nWill tackle the code styling changes as well ð.\r\n",
      "created_at" : "2022-04-15T15:50:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24845#issuecomment-1100190834",
      "id" : 1100190834,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24845",
      "node_id" : "IC_kwDOABII585Bk5Ry",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1100190834/reactions"
      },
      "updated_at" : "2022-04-15T15:50:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1100190834",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24845#discussion_r853350249"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24845"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/853350249"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In b2846445135f6d6b7902672cb2202dc75088a200 \"wallet: add CoinControl filtering capabilities for coins that exceed mempool restrictions.\"\r\n\r\nnit: For new variables, we prefer snake_case, without the prefix for type. So this could be just `unconf_coins`.",
      "commit_id" : "fbc130aaf6f34240d7177808789707bd68d1c38d",
      "created_at" : "2022-04-19T18:03:23Z",
      "diff_hunk" : "@@ -83,7 +83,14 @@ TxSize CalculateMaximumSignedTxSize(const CTransaction &tx, const CWallet *walle\n     return CalculateMaximumSignedTxSize(tx, wallet, txouts, coin_control);\n }\n \n-void AvailableCoins(const CWallet& wallet, std::vector<COutput>& vCoins, const CCoinControl* coinControl, const CAmount& nMinimumAmount, const CAmount& nMaximumAmount, const CAmount& nMinimumSumAmount, const uint64_t nMaximumCount)\n+void AvailableCoins(const CWallet& wallet,\n+                    std::vector<COutput>& vCoins,\n+                    const CCoinControl* coinControl,\n+                    const CAmount& nMinimumAmount,\n+                    const CAmount& nMaximumAmount,\n+                    const CAmount& nMinimumSumAmount,\n+                    const uint64_t nMaximumCount,\n+                    std::vector<COutput>* vUnconfCoins)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24845#discussion_r853350249",
      "id" : 853350249,
      "line" : 93,
      "node_id" : "PRRC_kwDOABII584y3Rdp",
      "original_commit_id" : "b2846445135f6d6b7902672cb2202dc75088a200",
      "original_line" : 93,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 12,
      "pull_request_review_id" : 946103262,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24845",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/853350249/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-19T18:04:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/853350249",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "kk, done both. You caught me doing some further changes.\r\n\r\nHave re-coded the mempool ancestors/descendants cache differently, much cleaner and less intrusive. It's now integrated into the available coin information (the changes are quite small now, it shouldn't require another PR for it but let me know what you think achow101).\r\n\r\nPlus cleaned the `CreateTransaction` changes a bit more.",
      "created_at" : "2022-04-19T21:19:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24845#issuecomment-1103184961",
      "id" : 1103184961,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24845",
      "node_id" : "IC_kwDOABII585BwURB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1103184961/reactions"
      },
      "updated_at" : "2022-04-19T21:19:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1103184961",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "You can explain more to me what's going on and what exactly you did\n\n\nwt., 19 kwi 2022, 23:19 uÅ¼ytkownik Matias Furszyfer <\n***@***.***> napisaÅ:\n\n> kk, done both. You caught me doing some further changes.\n>\n> Have re-coded the mempool ancestors/descendants cache differently, much\n> cleaner and less intrusive. It's now integrated into the available coin\n> information (the changes are quite small now, it shouldn't require another\n> PR for it but let me know what you think achow101).\n>\n> Plus cleaned the CreateTransaction changes a bit more.\n>\n> â\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/24845#issuecomment-1103184961>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AWTHVFRFNWKAJZX4ES4TCK3VF4PPJANCNFSM5TLGUZWQ>\n> .\n> You are receiving this because you are subscribed to this thread.Message\n> ID: ***@***.***>\n>\n",
      "created_at" : "2022-04-21T22:32:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24845#issuecomment-1105825291",
      "id" : 1105825291,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24845",
      "node_id" : "IC_kwDOABII585B6Y4L",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1105825291/reactions"
      },
      "updated_at" : "2022-04-21T22:32:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1105825291",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94796438?v=4",
         "events_url" : "https://api.github.com/users/Szatan181/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Szatan181/followers",
         "following_url" : "https://api.github.com/users/Szatan181/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Szatan181/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Szatan181",
         "id" : 94796438,
         "login" : "Szatan181",
         "node_id" : "U_kgDOBaZ6lg",
         "organizations_url" : "https://api.github.com/users/Szatan181/orgs",
         "received_events_url" : "https://api.github.com/users/Szatan181/received_events",
         "repos_url" : "https://api.github.com/users/Szatan181/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Szatan181/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Szatan181/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Szatan181"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Aside from achow101 review changes, the first part:\r\n>Have re-coded the mempool ancestors/descendants cache differently, much cleaner and less intrusive. It's now integrated into the available coin information\r\n\r\nWas the move from fbc130aa to d9b8ea because now the ancestors and descendants count is available inside `COutput`. Which simplified the changes greatly.\r\n\r\nAnd the second part was an unification for 76aa7d05 of the previous two `emplace_back` calls into a single one inside `AvailableCoins` and moving the ancestors/descendants getter call after the basic checks.",
      "created_at" : "2022-04-22T00:00:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24845#issuecomment-1105867388",
      "id" : 1105867388,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24845",
      "node_id" : "IC_kwDOABII585B6jJ8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1105867388/reactions"
      },
      "updated_at" : "2022-04-22T00:00:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1105867388",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   }
]
