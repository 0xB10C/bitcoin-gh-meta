[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24830#discussion_r848089106"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/848089106"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"init: Allow -noproxy and -proxy=\"\" setting values\" (6a51a9193236345fbd3ff06e9006fc2a6e7a61a4)\r\n\r\nNote: These lines are copied from `AppInitMain`:\r\nhttps://github.com/bitcoin/bitcoin/blob/2b5a741e98f186e50d9fbe1ceadcc8b8c91547f7/src/init.cpp#L1330-L1331",
      "commit_id" : "6a51a9193236345fbd3ff06e9006fc2a6e7a61a4",
      "created_at" : "2022-04-12T07:41:05Z",
      "diff_hunk" : "@@ -660,7 +660,8 @@ void InitParameterInteraction(ArgsManager& args)\n             LogPrintf(\"%s: parameter interaction: -connect set -> setting -listen=0\\n\", __func__);\n     }\n \n-    if (args.IsArgSet(\"-proxy\")) {\n+    std::string proxy_arg = args.GetArg(\"-proxy\", \"\");\n+    if (proxy_arg != \"\" && proxy_arg != \"0\") {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24830#discussion_r848089106",
      "id" : 848089106,
      "line" : 664,
      "node_id" : "PRRC_kwDOABII584yjNAS",
      "original_commit_id" : "6a51a9193236345fbd3ff06e9006fc2a6e7a61a4",
      "original_line" : 664,
      "original_position" : 15,
      "original_start_line" : 663,
      "path" : "src/init.cpp",
      "position" : 15,
      "pull_request_review_id" : 939067294,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24830",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/848089106/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 663,
      "start_side" : "RIGHT",
      "updated_at" : "2022-04-12T07:41:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/848089106",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2022-04-12T10:05:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24830#issuecomment-1096489745",
      "id" : 1096489745,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24830",
      "node_id" : "IC_kwDOABII585BWxsR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1096489745/reactions"
      },
      "updated_at" : "2022-04-12T10:05:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1096489745",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Should `-proxy=` in the command line still ends with an error for reasons discussed in #20003?",
      "created_at" : "2022-04-12T10:17:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24830#issuecomment-1096511603",
      "id" : 1096511603,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24830",
      "node_id" : "IC_kwDOABII585BW3Bz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1096511603/reactions"
      },
      "updated_at" : "2022-04-12T10:17:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1096511603",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2022-04-12T11:12:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24830#issuecomment-1096586933",
      "id" : 1096586933,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24830",
      "node_id" : "IC_kwDOABII585BXJa1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1096586933/reactions"
      },
      "updated_at" : "2022-04-12T11:12:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1096586933",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Renamed PR from \"init: Allow -noproxy and -proxy=\"\" setting values\" to \"init: Allow -proxy=\"\" setting values\" because I was wrong that `-noproxy` was broken before this PR. `-noproxy` was actually working correctly.",
      "created_at" : "2022-04-12T14:46:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24830#issuecomment-1096826308",
      "id" : 1096826308,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24830",
      "node_id" : "IC_kwDOABII585BYD3E",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1096826308/reactions"
      },
      "updated_at" : "2022-04-12T14:46:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1096826308",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Should `-proxy=` in the command line still ends with an error for reasons discussed in #20003?\r\n\r\nBitcoin treats bare arguments (`-txindex`, `-blocksonly`, `-server`, etc) as being true, and it's reasonable a user might see a bare `-proxy` argument and interpret that as meaning \"use a proxy\" instead of \"don't use a proxy\". That is the case which #20003 describes, and makes into an error to alert the user. This case is still an error after this PR.\r\n\r\nThe problem is #20003 also forbids setting no proxy with `-proxy=` or `-proxy=\"\"` shell arguments that are explicit assignments. I think it would be better in those cases to allow the assignments than disallow them. Obviously there is some chance a user could be confused in those cases as well, but keeping ability to assign an empty value makes sense logically, avoids needing to add special case logic in Qt to fix https://github.com/bitcoin/bitcoin/pull/15936#pullrequestreview-937685759, and is a nice convenience.\r\n\r\nMore broadly, I think it is a bad thing that ArgsManager does not make a distinction between `-foo` and `-foo=` command line arguments. I think generally for boolean settings `-mybool` should be allowed and `-mybool=` should be treated as an ambiguous error. For string settings `-mystring=` should be allowed and `-mystring` should be treated as an ambiguous error. This PR enables making this distinction for the `-proxy` argument in a general way that could be applied to other string arguments. (It's less general and flexible than #16545 but still compatible with it and other approaches.)",
      "created_at" : "2022-04-12T15:20:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24830#issuecomment-1096867391",
      "id" : 1096867391,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24830",
      "node_id" : "IC_kwDOABII585BYN4_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1096867391/reactions"
      },
      "updated_at" : "2022-04-12T15:35:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1096867391",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
