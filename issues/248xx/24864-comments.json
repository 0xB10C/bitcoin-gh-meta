[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. \n\n(Python linter says to remove unused headers.)",
      "created_at" : "2022-04-15T15:37:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1100182446",
      "id" : 1100182446,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585Bk3Ou",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1100182446/reactions"
      },
      "updated_at" : "2022-04-15T15:37:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1100182446",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#24863](https://github.com/bitcoin/bitcoin/pull/24863) (contrib: improve makeseeds.py progress indicator by jonatack)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-04-16T06:38:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#issuecomment-1100587144",
      "id" : 1100587144,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24864",
      "node_id" : "IC_kwDOABII585BmaCI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1100587144/reactions"
      },
      "updated_at" : "2022-04-16T06:38:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1100587144",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852039164"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852039164"
         }
      },
      "author_association" : "MEMBER",
      "body" : "btw: This fixes a bug that was exposed by the changes in #24818, where it was possible for a limit to be exceeded because `max_per_asn` differs per network but `asn_count` was not counted per network (in combination with `==`). Making the counting per ipv4/ipv6 avoids this, and makes sense to me conceptually. So after this, a single ASN can have *both* 2 IPv4 seeds and 6 IPv6 seeds.",
      "commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "created_at" : "2022-04-18T10:51:23Z",
      "diff_hunk" : "@@ -179,13 +155,14 @@ def filterbyasn(ips: List[Dict], max_per_asn: Dict, max_per_net: int) -> List[Di\n             # do not add this ip as we already too many\n             # ips from this network\n             continue\n-        asn = lookup_asn(ip['net'], ip['ip'])\n-        if asn is None or asn_count[asn] == max_per_asn[ip['net']]:\n+        asn = asmap.lookup_asn(ip['ip'])\n+        if asn is None or asn_count[ip['net'], asn] == max_per_asn[ip['net']]:\n             # do not add this ip as we already have too many\n             # ips from this ASN on this network\n             continue\n-        asn_count[asn] += 1\n+        asn_count[ip['net'], asn] += 1",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852039164",
      "id" : 852039164,
      "line" : 163,
      "node_id" : "PRRC_kwDOABII584yyRX8",
      "original_commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "original_line" : 163,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "contrib/seeds/makeseeds.py",
      "position" : 64,
      "pull_request_review_id" : 944292389,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852039164/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-18T10:51:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852039164",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852042358"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852042358"
         }
      },
      "author_association" : "MEMBER",
      "body" : "BTW I didn't realize before that Python had built-in functionality to parse/manipulate IP addresses (both v4 and v6). Might make sense (but not in this PR) to use this in more places and replace all the ad-hoc hacks.",
      "commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "created_at" : "2022-04-18T10:58:55Z",
      "diff_hunk" : "@@ -0,0 +1,90 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2013-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+import ipaddress",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852042358",
      "id" : 852042358,
      "line" : 5,
      "node_id" : "PRRC_kwDOABII584yySJ2",
      "original_commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "original_line" : 5,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "contrib/seeds/asmap.py",
      "position" : 5,
      "pull_request_review_id" : 944296777,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852042358/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-18T10:58:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852042358",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852043903"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852043903"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The code from here came from [testmap](https://github.com/sipa/asmap/blob/master/testmap.py) which doesn't come with a license. It looks like @sipa and @jamesob contributed to it, so to include it we would need you to sign off that it's acceptable to include this here under the MIT license.",
      "commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "created_at" : "2022-04-18T11:02:39Z",
      "diff_hunk" : "@@ -0,0 +1,90 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2013-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+import ipaddress\n+\n+# Convert a byte array to a bit array\n+def DecodeBytes(byts):\n+    return [(byt >> i) & 1 for byt in byts for i in range(8)]\n+\n+def DecodeBits(stream, bitpos, minval, bit_sizes):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24864#discussion_r852043903",
      "id" : 852043903,
      "line" : 11,
      "node_id" : "PRRC_kwDOABII584yySh_",
      "original_commit_id" : "08ecc04e5d2067cc5e5199348d0fe1ed8ae36722",
      "original_line" : 11,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "contrib/seeds/asmap.py",
      "position" : 11,
      "pull_request_review_id" : 944298847,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24864",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852043903/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-18T11:02:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852043903",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
