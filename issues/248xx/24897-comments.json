[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#26021](https://github.com/bitcoin/bitcoin/pull/26021) (wallet: bugfix, load a wallet with an unknown/corrupt descriptor causes a fatal error by furszy)\n* [#25907](https://github.com/bitcoin/bitcoin/pull/25907) (wallet: rpc to add automatically generated descriptors by achow101)\n* [#25722](https://github.com/bitcoin/bitcoin/pull/25722) (refactor: Use util::Result class for wallet loading by ryanofsky)\n* [#25634](https://github.com/bitcoin/bitcoin/pull/25634) (wallet, tests: Expand and test when the blank wallet flag should be un/set by achow101)\n* [#25620](https://github.com/bitcoin/bitcoin/pull/25620) (wallet: Introduce AddressBookManager by furszy)\n* [#25465](https://github.com/bitcoin/bitcoin/pull/25465) (build: remove boost library detection by fanquake)\n* [#25344](https://github.com/bitcoin/bitcoin/pull/25344) (New `outputs` argument for `bumpfee`/`psbtbumpfee` by rodentrabies)\n* [#25273](https://github.com/bitcoin/bitcoin/pull/25273) (wallet: Pass through transaction locktime and preset input sequences and scripts to CreateTransaction by achow101)\n* [#25183](https://github.com/bitcoin/bitcoin/pull/25183) (rpc: Filter inputs by type during CoinSelection by aureleoules)\n* [#24545](https://github.com/bitcoin/bitcoin/pull/24545) (BIP324: Enable v2 P2P encrypted transport by dhruv)\n* [#24539](https://github.com/bitcoin/bitcoin/pull/24539) (Add a \"tx output spender\" index by sstone)\n* [#23561](https://github.com/bitcoin/bitcoin/pull/23561) (BIP324: Handshake prerequisites by dhruv)\n* [#23475](https://github.com/bitcoin/bitcoin/pull/23475) (wallet: add config to prioritize a solution that doesn't create change in coin selection by brunoerg)\n* [#23432](https://github.com/bitcoin/bitcoin/pull/23432) (BIP324: CPubKey encode/decode to elligator-swift by dhruv)\n* [#23417](https://github.com/bitcoin/bitcoin/pull/23417) (wallet, spkm: Move key management from DescriptorScriptPubKeyMan to wallet level KeyManager by achow101)\n* [#22838](https://github.com/bitcoin/bitcoin/pull/22838) (descriptors: Be able to specify change and receiving in a single descriptor string by achow101)\n* [#22341](https://github.com/bitcoin/bitcoin/pull/22341) (rpc: add getxpub by Sjors)\n* [#21928](https://github.com/bitcoin/bitcoin/pull/21928) (wallet: allow toggling external_signer flag by Sjors)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-04-17T04:48:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1100803007",
      "id" : 1100803007,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585BnOu_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1100803007/reactions"
      },
      "updated_at" : "2022-09-13T22:31:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1100803007",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2022-04-18T01:54:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1101019295",
      "id" : 1101019295,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585BoDif",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1101019295/reactions"
      },
      "updated_at" : "2022-04-18T01:54:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1101019295",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94559964?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 94559964,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOBaLe3A",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r852141704"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852141704"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm just trying to understand the protocol better. This function is called \"create tweaked pubkey\" but what seems more significant about it to me is that it also provides the recipient with the private key they need to spend from the silent payment output. Is that correct?",
      "commit_id" : "b97fee2f445d396fdb62d4468c214320745519be",
      "created_at" : "2022-04-18T14:08:03Z",
      "diff_hunk" : "@@ -0,0 +1,115 @@\n+#include \"silentpayment.h\"\n+\n+#include <key_io.h>\n+#include <secp256k1.h>\n+#include <secp256k1_ecdh.h>\n+#include <secp256k1_extrakeys.h>\n+\n+namespace silentpayment {\n+\n+secp256k1_pubkey Sender::CreateTweakedPubkey(\n+    const secp256k1_context* ctx,\n+    const secp256k1_xonly_pubkey recipient_public_key,\n+    const unsigned char sender_secret_key[32])\n+{\n+    unsigned char shared_secret[32];\n+\n+    secp256k1_pubkey output_pubkey;\n+\n+    int return_val;\n+\n+    return_val = secp256k1_ecdh_xonly(ctx, shared_secret, &recipient_public_key, sender_secret_key, NULL, NULL);\n+    assert(return_val);\n+\n+    return_val = secp256k1_ec_seckey_verify(secp256k1_context_no_precomp, shared_secret);\n+    assert(return_val);\n+\n+    return_val = secp256k1_xonly_pubkey_tweak_add(ctx, &output_pubkey, &recipient_public_key, shared_secret);\n+    assert(return_val);\n+\n+    return output_pubkey;\n+}\n+\n+XOnlyPubKey Sender::CreateSilentPaymentAddress(\n+    const CKey& sender_secret_key,\n+    const XOnlyPubKey& _recipient_public_key)\n+{\n+    int return_val;\n+\n+    secp256k1_context* ctx = secp256k1_context_create(SECP256K1_CONTEXT_SIGN | SECP256K1_CONTEXT_VERIFY);\n+\n+    secp256k1_xonly_pubkey recipient_public_key;\n+    return_val = secp256k1_xonly_pubkey_parse(ctx, &recipient_public_key, _recipient_public_key.data());\n+    assert(return_val);\n+\n+    secp256k1_pubkey sender_output_pubkey;\n+    sender_output_pubkey = CreateTweakedPubkey(ctx, recipient_public_key, sender_secret_key.data());\n+\n+    // Test the key\n+    size_t len;\n+    unsigned char sender_serialized_output_pubkey[33];\n+    len = sizeof(sender_serialized_output_pubkey);\n+    return_val = secp256k1_ec_pubkey_serialize(ctx, sender_serialized_output_pubkey, &len, &sender_output_pubkey, SECP256K1_EC_COMPRESSED);\n+    assert(return_val);\n+\n+    CPubKey pubKey = CPubKey(sender_serialized_output_pubkey);\n+\n+    assert(pubKey.IsFullyValid());\n+\n+    XOnlyPubKey xOnlyPubKey = XOnlyPubKey(pubKey);\n+\n+    return xOnlyPubKey;\n+}\n+\n+void Recipient::CreateTweakedPubkey(",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r852141704",
      "id" : 852141704,
      "line" : 64,
      "node_id" : "PRRC_kwDOABII584yyqaI",
      "original_commit_id" : "b97fee2f445d396fdb62d4468c214320745519be",
      "original_line" : 64,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "src/wallet/silentpayment.cpp",
      "position" : 64,
      "pull_request_review_id" : 944439250,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852141704/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-18T14:08:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852141704",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r852184789"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852184789"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes. I defined this name when using another approach, but that's the idea.\r\n\r\n`secp256k1_keypair_xonly_tweak_add` returns both the tweaked private and public keys in the `recipient_keypair` parameter. So the recipient can spend the output.",
      "commit_id" : "b97fee2f445d396fdb62d4468c214320745519be",
      "created_at" : "2022-04-18T15:10:11Z",
      "diff_hunk" : "@@ -0,0 +1,115 @@\n+#include \"silentpayment.h\"\n+\n+#include <key_io.h>\n+#include <secp256k1.h>\n+#include <secp256k1_ecdh.h>\n+#include <secp256k1_extrakeys.h>\n+\n+namespace silentpayment {\n+\n+secp256k1_pubkey Sender::CreateTweakedPubkey(\n+    const secp256k1_context* ctx,\n+    const secp256k1_xonly_pubkey recipient_public_key,\n+    const unsigned char sender_secret_key[32])\n+{\n+    unsigned char shared_secret[32];\n+\n+    secp256k1_pubkey output_pubkey;\n+\n+    int return_val;\n+\n+    return_val = secp256k1_ecdh_xonly(ctx, shared_secret, &recipient_public_key, sender_secret_key, NULL, NULL);\n+    assert(return_val);\n+\n+    return_val = secp256k1_ec_seckey_verify(secp256k1_context_no_precomp, shared_secret);\n+    assert(return_val);\n+\n+    return_val = secp256k1_xonly_pubkey_tweak_add(ctx, &output_pubkey, &recipient_public_key, shared_secret);\n+    assert(return_val);\n+\n+    return output_pubkey;\n+}\n+\n+XOnlyPubKey Sender::CreateSilentPaymentAddress(\n+    const CKey& sender_secret_key,\n+    const XOnlyPubKey& _recipient_public_key)\n+{\n+    int return_val;\n+\n+    secp256k1_context* ctx = secp256k1_context_create(SECP256K1_CONTEXT_SIGN | SECP256K1_CONTEXT_VERIFY);\n+\n+    secp256k1_xonly_pubkey recipient_public_key;\n+    return_val = secp256k1_xonly_pubkey_parse(ctx, &recipient_public_key, _recipient_public_key.data());\n+    assert(return_val);\n+\n+    secp256k1_pubkey sender_output_pubkey;\n+    sender_output_pubkey = CreateTweakedPubkey(ctx, recipient_public_key, sender_secret_key.data());\n+\n+    // Test the key\n+    size_t len;\n+    unsigned char sender_serialized_output_pubkey[33];\n+    len = sizeof(sender_serialized_output_pubkey);\n+    return_val = secp256k1_ec_pubkey_serialize(ctx, sender_serialized_output_pubkey, &len, &sender_output_pubkey, SECP256K1_EC_COMPRESSED);\n+    assert(return_val);\n+\n+    CPubKey pubKey = CPubKey(sender_serialized_output_pubkey);\n+\n+    assert(pubKey.IsFullyValid());\n+\n+    XOnlyPubKey xOnlyPubKey = XOnlyPubKey(pubKey);\n+\n+    return xOnlyPubKey;\n+}\n+\n+void Recipient::CreateTweakedPubkey(",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r852184789",
      "id" : 852184789,
      "in_reply_to_id" : 852141704,
      "line" : 64,
      "node_id" : "PRRC_kwDOABII584yy07V",
      "original_commit_id" : "b97fee2f445d396fdb62d4468c214320745519be",
      "original_line" : 64,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "src/wallet/silentpayment.cpp",
      "position" : 64,
      "pull_request_review_id" : 944500372,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852184789/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-18T15:11:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852184789",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-04-18T17:21:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1101583051",
      "id" : 1101583051,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585BqNLL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1101583051/reactions"
      },
      "updated_at" : "2022-04-18T17:21:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1101583051",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Need some way to avoid users trying to send a silent payment to a wallet that doesn't support it... am I missing something?",
      "created_at" : "2022-04-19T19:06:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1102990584",
      "id" : 1102990584,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585Bvkz4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1102990584/reactions"
      },
      "updated_at" : "2022-04-19T19:06:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1102990584",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@luke-jr Yes, it will need to be further discussed if this concept proves to be valid.\r\n\r\nIn this PR, all descriptor wallets support silent transactions as the `SILENT_PAYMENT` flag can be enabled or disabled at any time. The `rescanblockchain` RPC can be used to retrieve previous silent payments.\r\n\r\nAs only Taproot addresses can be used for silent payments and only descriptor wallets support Taproot, this may suffice, but it certainly needs further discussion.",
      "created_at" : "2022-04-20T07:12:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1103548839",
      "id" : 1103548839,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585BxtGn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1103548839/reactions"
      },
      "updated_at" : "2022-04-20T07:26:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1103548839",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "NONE",
      "body" : ">Need some way to avoid users trying to send a silent payment to a wallet that doesn't support it\r\n\r\n@luke-jr When the recipient publishes their silent payment address, it needs to be clear that it is not a regular taproot address. The address format should be distinct. The tweaked silent payment address that is generated by the sender and is ultimately committed on-chain should be indistinguishable from a regular taproot output.\r\n\r\n>only Taproot addresses can be used for silent payments\r\n\r\n@w0xlt Note that nothing about the silent payment scheme is exclusive to taproot, but regardless I do think it's good to limit the specifications to creating taproot outputs only as it encourages taproot use and means transactions without taproot outputs (albeit hopefully rare in the eventual future) don't need to be scanned.",
      "created_at" : "2022-04-20T08:45:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1103635123",
      "id" : 1103635123,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585ByCKz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1103635123/reactions"
      },
      "updated_at" : "2022-04-20T08:45:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1103635123",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/9066803?v=4",
         "events_url" : "https://api.github.com/users/RubenSomsen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/RubenSomsen/followers",
         "following_url" : "https://api.github.com/users/RubenSomsen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/RubenSomsen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/RubenSomsen",
         "id" : 9066803,
         "login" : "RubenSomsen",
         "node_id" : "MDQ6VXNlcjkwNjY4MDM=",
         "organizations_url" : "https://api.github.com/users/RubenSomsen/orgs",
         "received_events_url" : "https://api.github.com/users/RubenSomsen/received_events",
         "repos_url" : "https://api.github.com/users/RubenSomsen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/RubenSomsen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/RubenSomsen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/RubenSomsen"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">When the recipient publishes their silent payment address, it needs to be clear that it is not a regular taproot address. The address format should be distinct. \r\n\r\nBut I don't see that in this current spec/code?",
      "created_at" : "2022-04-20T18:00:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1104252903",
      "id" : 1104252903,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585B0Y_n",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1104252903/reactions"
      },
      "updated_at" : "2022-04-20T18:00:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1104252903",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-04-26T18:42:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1110131074",
      "id" : 1110131074,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585CK0GC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1110131074/reactions"
      },
      "updated_at" : "2022-04-26T18:42:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1110131074",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Need some way to avoid users trying to send a silent payment to a wallet that doesn't support it... am I missing something?\r\n\r\nit's worse than that, AFAIU the address needs to support it not just the wallet -- E.g., what if the Tr key is a NUMS point?\r\n\r\nWorth making a new address type / format so that you never mix the two.",
      "created_at" : "2022-04-28T04:32:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1111735167",
      "id" : 1111735167,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585CQ7t_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111735167/reactions"
      },
      "updated_at" : "2022-04-28T04:32:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111735167",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@luke-jr @JeremyRubin  Thanks for the comments. The current version deliberately does not implement a new address/descriptor format. This requires a separate discussion and changes in wallet behavior. And it doesn't make sense to start a discussion about it before the scheme proves itself valid in a viable time.\r\n\r\nCurrently the main focus is to validate the scheme and verify that the performance is viable.",
      "created_at" : "2022-05-16T18:54:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1128022340",
      "id" : 1128022340,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585DPEFE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1128022340/reactions"
      },
      "updated_at" : "2022-05-16T18:54:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1128022340",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I created a short and simple tutorial on how to make silent payments on signet.\r\nhttps://gist.github.com/w0xlt/72390ded95dd797594f80baba5d2e6ee",
      "created_at" : "2022-05-16T18:55:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1128022502",
      "id" : 1128022502,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585DPEHm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1128022502/reactions"
      },
      "updated_at" : "2022-05-16T18:57:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1128022502",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-05-17T12:06:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1128785938",
      "id" : 1128785938,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585DR-gS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1128785938/reactions"
      },
      "updated_at" : "2022-05-17T12:06:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1128785938",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@w0xlt I am sorry if this is documented somewhere, but how do you determine which input carries the public key for ECDH?",
      "created_at" : "2022-05-23T16:47:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1134907552",
      "id" : 1134907552,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585DpVCg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1134907552/reactions"
      },
      "updated_at" : "2022-05-23T16:47:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1134907552",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@prusnak It s not well documented as well as being discussed.\r\n\r\nIn the current implementation, for simplicity, [only the first input is used.](https://github.com/w0xlt/bitcoin/blob/8f616acf868bbc75b31bf5170c40fd9957c08e91/src/wallet/spend.cpp#L665)\r\n\r\nThere is a suggestion by @RubenSomsen  to use a hash of all inputs. This would make silent payments compatible with coinjoins.\r\n\r\nThis is a possibility of change if the current version proves viable, since there shouldn't be much difference in performance between the two versions.\r\n\r\nI posted some estimates [here](https://gist.github.com/RubenSomsen/c43b79517e7cb701ebf77eec6dbb46b8?permalink_comment_id=4172737#gistcomment-4172737).",
      "created_at" : "2022-05-23T23:36:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1135241506",
      "id" : 1135241506,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585Dqmki",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135241506/reactions"
      },
      "updated_at" : "2022-05-23T23:43:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135241506",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r880324746"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/880324746"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`warning:` comparison of integer expressions of different signedness: âstd::vector<unsigned char>::size_typeâ {aka âlong unsigned intâ} and âintâ [-Wsign-compare]",
      "commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "created_at" : "2022-05-24T10:15:12Z",
      "diff_hunk" : "@@ -0,0 +1,196 @@\n+#include <index/silentpaymentindex.h>\n+\n+#include <chainparams.h>\n+#include <coins.h>\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <pubkey.h>\n+#include <undo.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+using node::ReadBlockFromDisk;\n+using node::UndoReadFromDisk;\n+\n+constexpr uint8_t DB_SILENTPAYMENTINDEX{'s'};\n+\n+std::unique_ptr<SilentPaymentIndex> g_silentpaymentindex;\n+\n+/** Access to the silent payment index database (indexes/silentpaymentindex/) */\n+class SilentPaymentIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSilentPayments(const std::vector<std::pair<uint256, uint256>>& items);\n+};\n+\n+SilentPaymentIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) :\n+    BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"silentpaymentindex\", n_cache_size, f_memory, f_wipe)\n+{}\n+\n+bool SilentPaymentIndex::DB::WriteSilentPayments(const std::vector<std::pair<uint256, uint256>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& tuple : items) {\n+        batch.Write(std::make_pair(DB_SILENTPAYMENTINDEX, tuple.first), tuple.second);\n+    }\n+    return WriteBatch(batch);\n+}\n+\n+SilentPaymentIndex::SilentPaymentIndex(size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : m_db(std::make_unique<SilentPaymentIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{}\n+\n+SilentPaymentIndex::~SilentPaymentIndex() {}\n+\n+bool SilentPaymentIndex::ExtractPubkeyFromInput(const Coin& prevCoin, const CTxIn& txin,  XOnlyPubKey& senderPubKey)\n+{\n+    // scriptPubKey being spent by this input\n+    CScript scriptPubKey = prevCoin.out.scriptPubKey;\n+\n+    if (scriptPubKey.IsPayToWitnessScriptHash()) {\n+        return false;\n+    }\n+\n+    // Vector of parsed pubkeys and hashes\n+    std::vector<std::vector<unsigned char>> solutions;\n+\n+    TxoutType whichType = Solver(scriptPubKey, solutions);\n+\n+    if (whichType == TxoutType::NONSTANDARD ||\n+    whichType == TxoutType::MULTISIG ||\n+    whichType == TxoutType::WITNESS_UNKNOWN ) {\n+        return false;\n+    }\n+\n+    const CScript scriptSig = txin.scriptSig;\n+    const CScriptWitness scriptWitness = txin.scriptWitness;\n+\n+    assert(senderPubKey.IsNull());\n+\n+    // TODO: Condition not tested\n+    if (whichType == TxoutType::PUBKEY) {\n+\n+        CPubKey pubkey = CPubKey(solutions[0]);\n+        assert(pubkey.IsFullyValid());\n+        senderPubKey = XOnlyPubKey(pubkey);\n+    }\n+\n+    else if (whichType == TxoutType::PUBKEYHASH) {\n+\n+        int sigSize = static_cast<int>(scriptSig[0]);\n+        int pubKeySize = static_cast<int>(scriptSig[sigSize + 1]);\n+        auto serializedPubKey = std::vector<unsigned char>(scriptSig.begin() + sigSize + 2, scriptSig.end());\n+        assert(serializedPubKey.size() == pubKeySize);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r880324746",
      "id" : 880324746,
      "line" : 85,
      "node_id" : "PRRC_kwDOABII5840eLCK",
      "original_commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "original_line" : 85,
      "original_position" : 85,
      "original_start_line" : null,
      "path" : "src/index/silentpaymentindex.cpp",
      "position" : 85,
      "pull_request_review_id" : 982957038,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/880324746/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-24T10:15:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/880324746",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94559964?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 94559964,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOBaLe3A",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-05-24T13:39:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1135937189",
      "id" : 1135937189,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585DtQal",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135937189/reactions"
      },
      "updated_at" : "2022-05-24T13:39:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1135937189",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Huge Concept ACK.. \r\n\r\nThis is amazing.. ð¥ð¥ð¥ð¥",
      "created_at" : "2022-05-24T17:07:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1136199154",
      "id" : 1136199154,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585DuQXy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1136199154/reactions"
      },
      "updated_at" : "2022-05-24T17:07:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1136199154",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/36541669?v=4",
         "events_url" : "https://api.github.com/users/rajarshimaitra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rajarshimaitra/followers",
         "following_url" : "https://api.github.com/users/rajarshimaitra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rajarshimaitra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rajarshimaitra",
         "id" : 36541669,
         "login" : "rajarshimaitra",
         "node_id" : "MDQ6VXNlcjM2NTQxNjY5",
         "organizations_url" : "https://api.github.com/users/rajarshimaitra/orgs",
         "received_events_url" : "https://api.github.com/users/rajarshimaitra/received_events",
         "repos_url" : "https://api.github.com/users/rajarshimaitra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rajarshimaitra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rajarshimaitra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rajarshimaitra"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I followed the tutorial and it worked great on signet",
      "created_at" : "2022-05-26T00:12:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1138004570",
      "id" : 1138004570,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585D1JJa",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1138004570/reactions"
      },
      "updated_at" : "2022-05-26T00:12:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1138004570",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/207713?v=4",
         "events_url" : "https://api.github.com/users/a5an0/events{/privacy}",
         "followers_url" : "https://api.github.com/users/a5an0/followers",
         "following_url" : "https://api.github.com/users/a5an0/following{/other_user}",
         "gists_url" : "https://api.github.com/users/a5an0/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/a5an0",
         "id" : 207713,
         "login" : "a5an0",
         "node_id" : "MDQ6VXNlcjIwNzcxMw==",
         "organizations_url" : "https://api.github.com/users/a5an0/orgs",
         "received_events_url" : "https://api.github.com/users/a5an0/received_events",
         "repos_url" : "https://api.github.com/users/a5an0/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/a5an0/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/a5an0/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/a5an0"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2022-05-26T09:54:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1138361638",
      "id" : 1138361638,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585D2gUm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1138361638/reactions"
      },
      "updated_at" : "2022-05-26T09:54:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1138361638",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r882514222"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882514222"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Linter error:\r\n```\r\nPlease use bracket syntax includes (\"#include <foo.h>\") instead of quote syntax includes:\r\nsrc/wallet/silentpayment.cpp:#include \"silentpayment.h\"\r\n^---- failure generated from lint-includes.py\r\n```",
      "commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "created_at" : "2022-05-26T10:01:30Z",
      "diff_hunk" : "@@ -0,0 +1,115 @@\n+#include \"silentpayment.h\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r882514222",
      "id" : 882514222,
      "line" : 1,
      "node_id" : "PRRC_kwDOABII5840mhku",
      "original_commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "original_line" : 1,
      "original_position" : 1,
      "original_start_line" : null,
      "path" : "src/wallet/silentpayment.cpp",
      "position" : 1,
      "pull_request_review_id" : 985996807,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882514222/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-26T11:06:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882514222",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r882515225"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882515225"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Linter error:\r\n```\r\nAssertions should not have side effects:\r\nsrc/wallet/wallet.cpp:    assert( ++pos == coins.end() );\r\n```",
      "commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "created_at" : "2022-05-26T10:02:57Z",
      "diff_hunk" : "@@ -1108,41 +1224,158 @@ bool CWallet::AddToWalletIfInvolvingMe(const CTransactionRef& ptx, const SyncTxS\n         if (fExisted && !fUpdate) return false;\n         if (fExisted || IsMine(tx) || IsFromMe(tx))\n         {\n-            /* Check if any keys in the wallet keypool that were supposed to be unused\n-             * have appeared in a new transaction. If so, remove those keys from the keypool.\n-             * This can happen when restoring an old wallet backup that does not contain\n-             * the mostly recently created transactions from newer versions of the wallet.\n-             */\n-\n-            // loop though all outputs\n-            for (const CTxOut& txout: tx.vout) {\n-                for (const auto& spk_man : GetScriptPubKeyMans(txout.scriptPubKey)) {\n-                    for (auto &dest : spk_man->MarkUnusedAddresses(txout.scriptPubKey)) {\n-                        // If internal flag is not defined try to infer it from the ScriptPubKeyMan\n-                        if (!dest.internal.has_value()) {\n-                            dest.internal = IsInternalScriptPubKeyMan(spk_man);\n-                        }\n+            return HandleNewTxBelongingToMe(tx, state, rescanning_old_block);\n+        }\n+        else if (IsWalletFlagSet(WALLET_FLAG_SILENT_PAYMENT) && VerifySilentPayment(tx, rawTrKeys))\n+        {\n+            return AddSilentScriptKeyMan(tx, state, rescanning_old_block, rawTrKeys);\n+        }\n+    }\n+    return false;\n+}\n+\n+bool CWallet::ExtractPubkeyFromInput(const CTxIn& txin, XOnlyPubKey& senderPubKey)\n+{\n+    // Find the UTXO being spent in UTXO Set to learn the transaction type\n+    std::map<COutPoint, Coin> coins;\n+    coins[txin.prevout];\n+    chain().findCoins(coins);\n \n-                        // skip if can't determine whether it's a receiving address or not\n-                        if (!dest.internal.has_value()) continue;\n+    auto pos = coins.find(txin.prevout);\n \n-                        // If this is a receiving address and it's not in the address book yet\n-                        // (e.g. it wasn't generated on this node or we're restoring from backup)\n-                        // add it to the address book for proper transaction accounting\n-                        if (!*dest.internal && !FindAddressBookEntry(dest.dest, /* allow_change= */ false)) {\n-                            SetAddressBook(dest.dest, \"\", \"receive\");\n-                        }\n-                    }\n-                }\n-            }\n+    Coin coin = pos->second;\n \n-            // Block disconnection override an abandoned tx as unconfirmed\n-            // which means user may have to call abandontransaction again\n-            TxState tx_state = std::visit([](auto&& s) -> TxState { return s; }, state);\n-            return AddToWallet(MakeTransactionRef(tx), tx_state, /*update_wtx=*/nullptr, /*fFlushOnClose=*/false, rescanning_old_block);\n+    // TODO: can more than one txin.prevout be in the mempool (RBF) ?\n+    assert( ++pos == coins.end() );",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r882515225",
      "id" : 882515225,
      "line" : 1249,
      "node_id" : "PRRC_kwDOABII5840mh0Z",
      "original_commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "original_line" : 1249,
      "original_position" : 205,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 205,
      "pull_request_review_id" : 985996807,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882515225/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-26T11:06:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882515225",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r882518081"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882518081"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n#ifndef BITCOIN_WALLET_SILENTPAYMENT_H\r\n#define BITCOIN_WALLET_SILENTPAYMENT_H\r\n```\r\n\r\nLinter does not like the name of include guard define:\r\n```\r\nsrc/wallet/silentpayment.h seems to be missing the expected include guard:\r\n  #ifndef BITCOIN_WALLET_SILENTPAYMENT_H\r\n  #define BITCOIN_WALLET_SILENTPAYMENT_H\r\n  ...\r\n  #endif // BITCOIN_WALLET_SILENTPAYMENT_H\r\n```",
      "commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "created_at" : "2022-05-26T10:06:58Z",
      "diff_hunk" : "@@ -0,0 +1,38 @@\n+#ifndef BITCOIN_SILENT_PAYMENT_H\n+#define BITCOIN_SILENT_PAYMENT_H",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r882518081",
      "id" : 882518081,
      "line" : 2,
      "node_id" : "PRRC_kwDOABII5840mihB",
      "original_commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "original_line" : 2,
      "original_position" : 2,
      "original_start_line" : 1,
      "path" : "src/wallet/silentpayment.h",
      "position" : 2,
      "pull_request_review_id" : 985996807,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882518081/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 1,
      "start_side" : "RIGHT",
      "updated_at" : "2022-05-26T11:06:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882518081",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r882521869"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882521869"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```\r\nrpc/blockchain.cpp: In function âbool {anonymous}::CheckSilentPayment(uint256&, const CScript&, std::vector<std::tuple<FlatSigningProvider, CScript> >&, node::NodeContext&, std::vector<uint256>&, std::vector<XOnlyPubKey>&, std::map<CScript, std::__cxx11::basic_string<char> >&)â:\r\nrpc/blockchain.cpp:1936:18: warning: unused variable âactive_chainstateâ [-Wunused-variable]\r\n 1936 |     CChainState& active_chainstate = chainman.ActiveChainstate();\r\n      |                  ^~~~~~~~~~~~~~~~~\r\n```",
      "commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "created_at" : "2022-05-26T10:12:18Z",
      "diff_hunk" : "@@ -1910,9 +1915,113 @@ static RPCHelpMan getblockstats()\n }\n \n namespace {\n-//! Search for a given set of pubkey scripts\n-bool FindScriptPubKey(std::atomic<int>& scan_progress, const std::atomic<bool>& should_abort, int64_t& count, CCoinsViewCursor* cursor, const std::set<CScript>& needles, std::map<COutPoint, Coin>& out_results, std::function<void()>& interruption_point)\n+\n+bool CheckSilentPayment(\n+    uint256& txhash,\n+    const CScript& outScriptPubKey,\n+    std::vector<std::tuple<FlatSigningProvider, CScript>>& providers,\n+    NodeContext& node,\n+    std::vector<uint256>& verified_txs,\n+    std::vector<XOnlyPubKey>& silPubKeys,\n+    std::map<CScript, std::string>& silDesc)\n {\n+\n+    bool f_silentpaymentindex_ready = g_silentpaymentindex ? g_silentpaymentindex->BlockUntilSyncedToCurrentChain() : false;\n+    if (!f_silentpaymentindex_ready) {\n+        throw JSONRPCError(RPC_VERIFY_ERROR, \"The silent payment index is either disabled or not yet synced.\");\n+    }\n+\n+    ChainstateManager& chainman = EnsureChainman(node);\n+    LOCK(cs_main);\n+    CChainState& active_chainstate = chainman.ActiveChainstate();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r882521869",
      "id" : 882521869,
      "line" : 1936,
      "node_id" : "PRRC_kwDOABII5840mjcN",
      "original_commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "original_line" : 1936,
      "original_position" : 63,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 63,
      "pull_request_review_id" : 985996807,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882521869/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-26T11:06:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882521869",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r882526990"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882526990"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```\r\nIn file included from wallet/wallet.cpp:44:\r\nwallet/wallet.cpp: In member function âbool wallet::CWallet::ExtractPubkeyFromInput(const CTxIn&, XOnlyPubKey&)â:\r\nwallet/wallet.cpp:1292:40: warning: comparison of integer expressions of different signedness: âstd::vector<unsigned char>::size_typeâ {aka âlong unsigned intâ} and âintâ [-Wsign-compare]\r\n 1292 |         assert(serializedPubKey.size() == pubKeySize);\r\n      |                ~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~\r\n```",
      "commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "created_at" : "2022-05-26T10:19:45Z",
      "diff_hunk" : "@@ -1108,41 +1224,158 @@ bool CWallet::AddToWalletIfInvolvingMe(const CTransactionRef& ptx, const SyncTxS\n         if (fExisted && !fUpdate) return false;\n         if (fExisted || IsMine(tx) || IsFromMe(tx))\n         {\n-            /* Check if any keys in the wallet keypool that were supposed to be unused\n-             * have appeared in a new transaction. If so, remove those keys from the keypool.\n-             * This can happen when restoring an old wallet backup that does not contain\n-             * the mostly recently created transactions from newer versions of the wallet.\n-             */\n-\n-            // loop though all outputs\n-            for (const CTxOut& txout: tx.vout) {\n-                for (const auto& spk_man : GetScriptPubKeyMans(txout.scriptPubKey)) {\n-                    for (auto &dest : spk_man->MarkUnusedAddresses(txout.scriptPubKey)) {\n-                        // If internal flag is not defined try to infer it from the ScriptPubKeyMan\n-                        if (!dest.internal.has_value()) {\n-                            dest.internal = IsInternalScriptPubKeyMan(spk_man);\n-                        }\n+            return HandleNewTxBelongingToMe(tx, state, rescanning_old_block);\n+        }\n+        else if (IsWalletFlagSet(WALLET_FLAG_SILENT_PAYMENT) && VerifySilentPayment(tx, rawTrKeys))\n+        {\n+            return AddSilentScriptKeyMan(tx, state, rescanning_old_block, rawTrKeys);\n+        }\n+    }\n+    return false;\n+}\n+\n+bool CWallet::ExtractPubkeyFromInput(const CTxIn& txin, XOnlyPubKey& senderPubKey)\n+{\n+    // Find the UTXO being spent in UTXO Set to learn the transaction type\n+    std::map<COutPoint, Coin> coins;\n+    coins[txin.prevout];\n+    chain().findCoins(coins);\n \n-                        // skip if can't determine whether it's a receiving address or not\n-                        if (!dest.internal.has_value()) continue;\n+    auto pos = coins.find(txin.prevout);\n \n-                        // If this is a receiving address and it's not in the address book yet\n-                        // (e.g. it wasn't generated on this node or we're restoring from backup)\n-                        // add it to the address book for proper transaction accounting\n-                        if (!*dest.internal && !FindAddressBookEntry(dest.dest, /* allow_change= */ false)) {\n-                            SetAddressBook(dest.dest, \"\", \"receive\");\n-                        }\n-                    }\n-                }\n-            }\n+    Coin coin = pos->second;\n \n-            // Block disconnection override an abandoned tx as unconfirmed\n-            // which means user may have to call abandontransaction again\n-            TxState tx_state = std::visit([](auto&& s) -> TxState { return s; }, state);\n-            return AddToWallet(MakeTransactionRef(tx), tx_state, /*update_wtx=*/nullptr, /*fFlushOnClose=*/false, rescanning_old_block);\n+    // TODO: can more than one txin.prevout be in the mempool (RBF) ?\n+    assert( ++pos == coins.end() );\n+\n+    if (coin.out.IsNull()) {\n+        return false;\n+    }\n+\n+    // scriptPubKey being spent by this input\n+    CScript scriptPubKey = coin.out.scriptPubKey;\n+\n+    if (scriptPubKey.IsPayToWitnessScriptHash()) {\n+        return false;\n+    }\n+\n+    // Vector of parsed pubkeys and hashes\n+    std::vector<std::vector<unsigned char>> solutions;\n+\n+    TxoutType whichType = Solver(scriptPubKey, solutions);\n+\n+    if (whichType == TxoutType::NONSTANDARD ||\n+    whichType == TxoutType::MULTISIG ||\n+    whichType == TxoutType::WITNESS_UNKNOWN ) {\n+        return false;\n+    }\n+\n+    const CScript scriptSig = txin.scriptSig;\n+    const CScriptWitness scriptWitness = txin.scriptWitness;\n+\n+    assert(senderPubKey.IsNull());\n+\n+    // TODO: Condition not tested\n+    if (whichType == TxoutType::PUBKEY) {\n+\n+        CPubKey pubkey = CPubKey(solutions[0]);\n+        assert(pubkey.IsFullyValid());\n+        senderPubKey = XOnlyPubKey(pubkey);\n+\n+    }\n+\n+    else if (whichType == TxoutType::PUBKEYHASH) {\n+\n+        int sigSize = static_cast<int>(scriptSig[0]);\n+        int pubKeySize = static_cast<int>(scriptSig[sigSize + 1]);\n+        auto serializedPubKey = std::vector<unsigned char>(scriptSig.begin() + sigSize + 2, scriptSig.end());\n+        assert(serializedPubKey.size() == pubKeySize);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r882526990",
      "id" : 882526990,
      "line" : 1292,
      "node_id" : "PRRC_kwDOABII5840mksO",
      "original_commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "original_line" : 1292,
      "original_position" : 248,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 248,
      "pull_request_review_id" : 985996807,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882526990/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-26T11:06:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882526990",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r882527414"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882527414"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```\r\nwallet/silentpayment.cpp: In static member function âstatic void silentpayment::Recipient::CreateTweakedKeyPair(const secp256k1_context*, secp256k1_xonly_pubkey, secp256k1_keypair&)â:\r\nwallet/silentpayment.cpp:72:22: warning: unused variable âoutput_pubkeyâ [-Wunused-variable]\r\n   72 |     secp256k1_pubkey output_pubkey;\r\n      |                      ^~~~~~~~~~~~~\r\n```",
      "commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "created_at" : "2022-05-26T10:20:23Z",
      "diff_hunk" : "@@ -0,0 +1,115 @@\n+#include \"silentpayment.h\"\n+\n+#include <key_io.h>\n+#include <secp256k1.h>\n+#include <secp256k1_ecdh.h>\n+#include <secp256k1_extrakeys.h>\n+\n+namespace silentpayment {\n+\n+secp256k1_pubkey Sender::CreateTweakedPubkey(\n+    const secp256k1_context* ctx,\n+    const secp256k1_xonly_pubkey recipient_public_key,\n+    const unsigned char sender_secret_key[32])\n+{\n+    unsigned char shared_secret[32];\n+\n+    secp256k1_pubkey output_pubkey;\n+\n+    int return_val;\n+\n+    return_val = secp256k1_ecdh_xonly(ctx, shared_secret, &recipient_public_key, sender_secret_key, NULL, NULL);\n+    assert(return_val);\n+\n+    return_val = secp256k1_ec_seckey_verify(secp256k1_context_no_precomp, shared_secret);\n+    assert(return_val);\n+\n+    return_val = secp256k1_xonly_pubkey_tweak_add(ctx, &output_pubkey, &recipient_public_key, shared_secret);\n+    assert(return_val);\n+\n+    return output_pubkey;\n+}\n+\n+XOnlyPubKey Sender::CreateSilentPaymentAddress(\n+    const CKey& sender_secret_key,\n+    const XOnlyPubKey& _recipient_public_key)\n+{\n+    int return_val;\n+\n+    secp256k1_context* ctx = secp256k1_context_create(SECP256K1_CONTEXT_SIGN | SECP256K1_CONTEXT_VERIFY);\n+\n+    secp256k1_xonly_pubkey recipient_public_key;\n+    return_val = secp256k1_xonly_pubkey_parse(ctx, &recipient_public_key, _recipient_public_key.data());\n+    assert(return_val);\n+\n+    secp256k1_pubkey sender_output_pubkey;\n+    sender_output_pubkey = CreateTweakedPubkey(ctx, recipient_public_key, sender_secret_key.begin());\n+\n+    // Test the key\n+    size_t len;\n+    unsigned char sender_serialized_output_pubkey[33];\n+    len = sizeof(sender_serialized_output_pubkey);\n+    return_val = secp256k1_ec_pubkey_serialize(ctx, sender_serialized_output_pubkey, &len, &sender_output_pubkey, SECP256K1_EC_COMPRESSED);\n+    assert(return_val);\n+\n+    CPubKey pubKey = CPubKey(sender_serialized_output_pubkey);\n+\n+    assert(pubKey.IsFullyValid());\n+\n+    XOnlyPubKey xOnlyPubKey = XOnlyPubKey(pubKey);\n+\n+    return xOnlyPubKey;\n+}\n+\n+void Recipient::CreateTweakedKeyPair(\n+    const secp256k1_context* ctx,\n+    const secp256k1_xonly_pubkey sender_public_key,\n+    secp256k1_keypair& recipient_keypair)\n+{\n+    unsigned char recipient_secret_key[32];\n+    unsigned char shared_secret[32];\n+\n+    secp256k1_pubkey output_pubkey;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r882527414",
      "id" : 882527414,
      "line" : 72,
      "node_id" : "PRRC_kwDOABII5840mky2",
      "original_commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "original_line" : 72,
      "original_position" : 72,
      "original_start_line" : null,
      "path" : "src/wallet/silentpayment.cpp",
      "position" : 72,
      "pull_request_review_id" : 985996807,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882527414/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-26T11:06:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/882527414",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r887750679"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887750679"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Skip this test when compiled without legacy wallet support.",
      "commit_id" : "a395e23bbfa259a9043e2ecb830cad290abde776",
      "created_at" : "2022-06-02T09:22:34Z",
      "diff_hunk" : "@@ -0,0 +1,268 @@\n+#!/usr/bin/env python3\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.util import (\n+    assert_raises_rpc_error,\n+)\n+from test_framework.descriptors import descsum_create\n+\n+class SilentTransactioTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 3\n+        self.extra_args = [[], [\"-keypool=1\", \"-silentpaymentindex=1\"], [\"-keypool=1\", \"-silentpaymentindex=1\"]]\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+        self.skip_if_no_sqlite()\n+\n+    def init_wallet(self, *, node):\n+        pass\n+\n+    def invalid_create_wallet(self):\n+        self.log.info(\"Testing the creation of invalid wallets\")\n+\n+        assert_raises_rpc_error(-4, \"Only descriptor wallets support silent payments.\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r887750679",
      "id" : 887750679,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58406gAX",
      "original_commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "original_line" : 25,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/wallet_silentpayment.py",
      "position" : null,
      "pull_request_review_id" : 993257629,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887750679/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-02T14:18:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887750679",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r887752800"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887752800"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Skip this test when compiled without external signer support.",
      "commit_id" : "a395e23bbfa259a9043e2ecb830cad290abde776",
      "created_at" : "2022-06-02T09:24:56Z",
      "diff_hunk" : "@@ -0,0 +1,268 @@\n+#!/usr/bin/env python3\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.util import (\n+    assert_raises_rpc_error,\n+)\n+from test_framework.descriptors import descsum_create\n+\n+class SilentTransactioTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 3\n+        self.extra_args = [[], [\"-keypool=1\", \"-silentpaymentindex=1\"], [\"-keypool=1\", \"-silentpaymentindex=1\"]]\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+        self.skip_if_no_sqlite()\n+\n+    def init_wallet(self, *, node):\n+        pass\n+\n+    def invalid_create_wallet(self):\n+        self.log.info(\"Testing the creation of invalid wallets\")\n+\n+        assert_raises_rpc_error(-4, \"Only descriptor wallets support silent payments.\",\n+            self.nodes[1].createwallet, wallet_name='invalid_wallet', descriptors=False, silent_payment=True)\n+\n+        assert_raises_rpc_error(-4, \"Silent payments require the ability to store private keys.\",\n+            self.nodes[1].createwallet, wallet_name='invalid_wallet', descriptors=True, disable_private_keys=True, silent_payment=True)\n+\n+        assert_raises_rpc_error(-4, \"Silent payments require the ability to store private keys.\",\n+            self.nodes[1].createwallet, wallet_name='invalid_wallet',  descriptors=True, disable_private_keys=True, external_signer=True, silent_payment=True)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r887752800",
      "id" : 887752800,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58406ghg",
      "original_commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "original_line" : 32,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "test/functional/wallet_silentpayment.py",
      "position" : null,
      "pull_request_review_id" : 993257629,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887752800/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-02T14:18:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/887752800",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Very cool! It's nice to be able to test this concept with \"real\" demo software. I'll share some thoughts about the concept on the mailinglist or gist. Will focus on the implementation here.\r\n\r\nI was able to send to signet coins to myself. Here's the public key: `tb1p0ykcmjxv26utyntns8ryn70at9t38zkdta9fj3zrrnpnczuddxvqf8qwac`\r\n\r\nMy first thought was that it may be better (initially) to implement silent payments as a standalone tool that uses the Bitcoin Core RPC.\r\n\r\nHowever, given that this implementation requires a new index, I don't know how practical that is. Getting a new index added to Bitcoin Core however is also not easy (https://bitcoincore.reviews/14053). The light at the end the tunnel here would be a plugin system for indexes, which should be possible once process separation is complete. See #24230. That will take a while though.\r\n\r\nAnother reason for building a separate tool that uses the RPC is that this proposal has a pretty big resource need, something that the project may not want to commit to anytime soon. The sending side is not resource intensive though, so perhaps that is easier to get in.\r\n\r\nLimiting the scope of this implementation to taproot makes sense. Limiting it to the first input seems brittle however, hopefully it's not too difficult to scan them all. Other implementations might order the input coins differently. Also, if you go for the approach of building an external tool that uses the RPC, then you can could use `send` with 1 fixed input and have the wallet automatically select the other coins. But in that case the RPC gives no guarantee which position the input will end up (it might be the first in practice atm).\r\n\r\nIn case the proposal is modified to consider _all_ inputs, keep in mind that this makes coin selection (slightly) more complicated. The wallet has to decide, before it knows the output address, which inputs to use. That would involve some surgery in the way coin selection is integrated in the wallet. When implemented as an external tool, you would probably make two calls to send: one with a dummy destination and automatic coin selection to get the coins, and then one with manual coin selection and the real destination. But that's not pretty, and won't work if the wallet has a combination of taproot and non-taproot coins, because you currently can't tell coin selection to only use taproot inputs.\r\n\r\nImporting a descriptor with a shorter range than the keypool size has no effect afaik, it's just treated as a descriptor with range 0-1000. We could change that behavior, so that a descriptor imported with a fixed range is not expanded unless you re-import it. Not sure if that's ideal, cc @achow101. Another option might be to make the keypool configurable per wallet, though that also feels a bit meh. A user may have multiple wallets, not all of which use this feature, so relying on a global keypool=1 setting is not ideal. And a factor 1000 slower scanning seems suboptimal.\r\n\r\nAnother approach could be that a silent_payment wallet only ever generates 1 key, perhaps with a new `silent(pk)` descriptor type. That might also make it easier for `getnewaddress` to spit out something that's not actually an address. See https://gist.github.com/RubenSomsen/c43b79517e7cb701ebf77eec6dbb46b8?permalink_comment_id=4177027#gistcomment-4177027 for discussion around what format the silent payment public key should be communicated in.\r\n\r\nIdeally the scriptPubKeys are stored in the silent(pk) descriptor. This would make `getaddressinfo` return the right descriptor. In that case `getnewaddress` should always fail, because the addresses are not known in advance. You'd need another way to communicate the public key. The easiest hack might be to return it as public-key version of the silent(pk) descriptor, so the user can find it with either `listdescriptors` or `getaddressinfo` on any received payment.",
      "created_at" : "2022-06-02T14:18:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1144921702",
      "id" : 1144921702,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585EPh5m",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1144921702/reactions"
      },
      "updated_at" : "2022-06-02T14:18:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1144921702",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r889490415"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490415"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done in https://github.com/bitcoin/bitcoin/pull/24897/commits/6120b53da4b1a7dc067790a1c00ac744a66f2f71. Thanks.",
      "commit_id" : "a395e23bbfa259a9043e2ecb830cad290abde776",
      "created_at" : "2022-06-04T05:49:06Z",
      "diff_hunk" : "@@ -0,0 +1,196 @@\n+#include <index/silentpaymentindex.h>\n+\n+#include <chainparams.h>\n+#include <coins.h>\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <pubkey.h>\n+#include <undo.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+using node::ReadBlockFromDisk;\n+using node::UndoReadFromDisk;\n+\n+constexpr uint8_t DB_SILENTPAYMENTINDEX{'s'};\n+\n+std::unique_ptr<SilentPaymentIndex> g_silentpaymentindex;\n+\n+/** Access to the silent payment index database (indexes/silentpaymentindex/) */\n+class SilentPaymentIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSilentPayments(const std::vector<std::pair<uint256, uint256>>& items);\n+};\n+\n+SilentPaymentIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) :\n+    BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"silentpaymentindex\", n_cache_size, f_memory, f_wipe)\n+{}\n+\n+bool SilentPaymentIndex::DB::WriteSilentPayments(const std::vector<std::pair<uint256, uint256>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& tuple : items) {\n+        batch.Write(std::make_pair(DB_SILENTPAYMENTINDEX, tuple.first), tuple.second);\n+    }\n+    return WriteBatch(batch);\n+}\n+\n+SilentPaymentIndex::SilentPaymentIndex(size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : m_db(std::make_unique<SilentPaymentIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{}\n+\n+SilentPaymentIndex::~SilentPaymentIndex() {}\n+\n+bool SilentPaymentIndex::ExtractPubkeyFromInput(const Coin& prevCoin, const CTxIn& txin,  XOnlyPubKey& senderPubKey)\n+{\n+    // scriptPubKey being spent by this input\n+    CScript scriptPubKey = prevCoin.out.scriptPubKey;\n+\n+    if (scriptPubKey.IsPayToWitnessScriptHash()) {\n+        return false;\n+    }\n+\n+    // Vector of parsed pubkeys and hashes\n+    std::vector<std::vector<unsigned char>> solutions;\n+\n+    TxoutType whichType = Solver(scriptPubKey, solutions);\n+\n+    if (whichType == TxoutType::NONSTANDARD ||\n+    whichType == TxoutType::MULTISIG ||\n+    whichType == TxoutType::WITNESS_UNKNOWN ) {\n+        return false;\n+    }\n+\n+    const CScript scriptSig = txin.scriptSig;\n+    const CScriptWitness scriptWitness = txin.scriptWitness;\n+\n+    assert(senderPubKey.IsNull());\n+\n+    // TODO: Condition not tested\n+    if (whichType == TxoutType::PUBKEY) {\n+\n+        CPubKey pubkey = CPubKey(solutions[0]);\n+        assert(pubkey.IsFullyValid());\n+        senderPubKey = XOnlyPubKey(pubkey);\n+    }\n+\n+    else if (whichType == TxoutType::PUBKEYHASH) {\n+\n+        int sigSize = static_cast<int>(scriptSig[0]);\n+        int pubKeySize = static_cast<int>(scriptSig[sigSize + 1]);\n+        auto serializedPubKey = std::vector<unsigned char>(scriptSig.begin() + sigSize + 2, scriptSig.end());\n+        assert(serializedPubKey.size() == pubKeySize);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r889490415",
      "id" : 889490415,
      "in_reply_to_id" : 880324746,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841BIvv",
      "original_commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "original_line" : 85,
      "original_position" : 85,
      "original_start_line" : null,
      "path" : "src/index/silentpaymentindex.cpp",
      "position" : null,
      "pull_request_review_id" : 995775644,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490415/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-04T05:49:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490415",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r889490543"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490543"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done in  https://github.com/bitcoin/bitcoin/pull/24897/commits/178e39d804a092016abe9650a1cde085173d6795. Thanks.",
      "commit_id" : "a395e23bbfa259a9043e2ecb830cad290abde776",
      "created_at" : "2022-06-04T05:50:24Z",
      "diff_hunk" : "@@ -1108,41 +1224,158 @@ bool CWallet::AddToWalletIfInvolvingMe(const CTransactionRef& ptx, const SyncTxS\n         if (fExisted && !fUpdate) return false;\n         if (fExisted || IsMine(tx) || IsFromMe(tx))\n         {\n-            /* Check if any keys in the wallet keypool that were supposed to be unused\n-             * have appeared in a new transaction. If so, remove those keys from the keypool.\n-             * This can happen when restoring an old wallet backup that does not contain\n-             * the mostly recently created transactions from newer versions of the wallet.\n-             */\n-\n-            // loop though all outputs\n-            for (const CTxOut& txout: tx.vout) {\n-                for (const auto& spk_man : GetScriptPubKeyMans(txout.scriptPubKey)) {\n-                    for (auto &dest : spk_man->MarkUnusedAddresses(txout.scriptPubKey)) {\n-                        // If internal flag is not defined try to infer it from the ScriptPubKeyMan\n-                        if (!dest.internal.has_value()) {\n-                            dest.internal = IsInternalScriptPubKeyMan(spk_man);\n-                        }\n+            return HandleNewTxBelongingToMe(tx, state, rescanning_old_block);\n+        }\n+        else if (IsWalletFlagSet(WALLET_FLAG_SILENT_PAYMENT) && VerifySilentPayment(tx, rawTrKeys))\n+        {\n+            return AddSilentScriptKeyMan(tx, state, rescanning_old_block, rawTrKeys);\n+        }\n+    }\n+    return false;\n+}\n+\n+bool CWallet::ExtractPubkeyFromInput(const CTxIn& txin, XOnlyPubKey& senderPubKey)\n+{\n+    // Find the UTXO being spent in UTXO Set to learn the transaction type\n+    std::map<COutPoint, Coin> coins;\n+    coins[txin.prevout];\n+    chain().findCoins(coins);\n \n-                        // skip if can't determine whether it's a receiving address or not\n-                        if (!dest.internal.has_value()) continue;\n+    auto pos = coins.find(txin.prevout);\n \n-                        // If this is a receiving address and it's not in the address book yet\n-                        // (e.g. it wasn't generated on this node or we're restoring from backup)\n-                        // add it to the address book for proper transaction accounting\n-                        if (!*dest.internal && !FindAddressBookEntry(dest.dest, /* allow_change= */ false)) {\n-                            SetAddressBook(dest.dest, \"\", \"receive\");\n-                        }\n-                    }\n-                }\n-            }\n+    Coin coin = pos->second;\n \n-            // Block disconnection override an abandoned tx as unconfirmed\n-            // which means user may have to call abandontransaction again\n-            TxState tx_state = std::visit([](auto&& s) -> TxState { return s; }, state);\n-            return AddToWallet(MakeTransactionRef(tx), tx_state, /*update_wtx=*/nullptr, /*fFlushOnClose=*/false, rescanning_old_block);\n+    // TODO: can more than one txin.prevout be in the mempool (RBF) ?\n+    assert( ++pos == coins.end() );\n+\n+    if (coin.out.IsNull()) {\n+        return false;\n+    }\n+\n+    // scriptPubKey being spent by this input\n+    CScript scriptPubKey = coin.out.scriptPubKey;\n+\n+    if (scriptPubKey.IsPayToWitnessScriptHash()) {\n+        return false;\n+    }\n+\n+    // Vector of parsed pubkeys and hashes\n+    std::vector<std::vector<unsigned char>> solutions;\n+\n+    TxoutType whichType = Solver(scriptPubKey, solutions);\n+\n+    if (whichType == TxoutType::NONSTANDARD ||\n+    whichType == TxoutType::MULTISIG ||\n+    whichType == TxoutType::WITNESS_UNKNOWN ) {\n+        return false;\n+    }\n+\n+    const CScript scriptSig = txin.scriptSig;\n+    const CScriptWitness scriptWitness = txin.scriptWitness;\n+\n+    assert(senderPubKey.IsNull());\n+\n+    // TODO: Condition not tested\n+    if (whichType == TxoutType::PUBKEY) {\n+\n+        CPubKey pubkey = CPubKey(solutions[0]);\n+        assert(pubkey.IsFullyValid());\n+        senderPubKey = XOnlyPubKey(pubkey);\n+\n+    }\n+\n+    else if (whichType == TxoutType::PUBKEYHASH) {\n+\n+        int sigSize = static_cast<int>(scriptSig[0]);\n+        int pubKeySize = static_cast<int>(scriptSig[sigSize + 1]);\n+        auto serializedPubKey = std::vector<unsigned char>(scriptSig.begin() + sigSize + 2, scriptSig.end());\n+        assert(serializedPubKey.size() == pubKeySize);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r889490543",
      "id" : 889490543,
      "in_reply_to_id" : 882526990,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841BIxv",
      "original_commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "original_line" : 1292,
      "original_position" : 248,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 995775727,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490543/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-04T05:50:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490543",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r889490571"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490571"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done in https://github.com/bitcoin/bitcoin/pull/24897/commits/afbdf2bd9d1e1358eb03054db732cf12d05802b7. Thanks.",
      "commit_id" : "a395e23bbfa259a9043e2ecb830cad290abde776",
      "created_at" : "2022-06-04T05:50:47Z",
      "diff_hunk" : "@@ -0,0 +1,115 @@\n+#include \"silentpayment.h\"\n+\n+#include <key_io.h>\n+#include <secp256k1.h>\n+#include <secp256k1_ecdh.h>\n+#include <secp256k1_extrakeys.h>\n+\n+namespace silentpayment {\n+\n+secp256k1_pubkey Sender::CreateTweakedPubkey(\n+    const secp256k1_context* ctx,\n+    const secp256k1_xonly_pubkey recipient_public_key,\n+    const unsigned char sender_secret_key[32])\n+{\n+    unsigned char shared_secret[32];\n+\n+    secp256k1_pubkey output_pubkey;\n+\n+    int return_val;\n+\n+    return_val = secp256k1_ecdh_xonly(ctx, shared_secret, &recipient_public_key, sender_secret_key, NULL, NULL);\n+    assert(return_val);\n+\n+    return_val = secp256k1_ec_seckey_verify(secp256k1_context_no_precomp, shared_secret);\n+    assert(return_val);\n+\n+    return_val = secp256k1_xonly_pubkey_tweak_add(ctx, &output_pubkey, &recipient_public_key, shared_secret);\n+    assert(return_val);\n+\n+    return output_pubkey;\n+}\n+\n+XOnlyPubKey Sender::CreateSilentPaymentAddress(\n+    const CKey& sender_secret_key,\n+    const XOnlyPubKey& _recipient_public_key)\n+{\n+    int return_val;\n+\n+    secp256k1_context* ctx = secp256k1_context_create(SECP256K1_CONTEXT_SIGN | SECP256K1_CONTEXT_VERIFY);\n+\n+    secp256k1_xonly_pubkey recipient_public_key;\n+    return_val = secp256k1_xonly_pubkey_parse(ctx, &recipient_public_key, _recipient_public_key.data());\n+    assert(return_val);\n+\n+    secp256k1_pubkey sender_output_pubkey;\n+    sender_output_pubkey = CreateTweakedPubkey(ctx, recipient_public_key, sender_secret_key.begin());\n+\n+    // Test the key\n+    size_t len;\n+    unsigned char sender_serialized_output_pubkey[33];\n+    len = sizeof(sender_serialized_output_pubkey);\n+    return_val = secp256k1_ec_pubkey_serialize(ctx, sender_serialized_output_pubkey, &len, &sender_output_pubkey, SECP256K1_EC_COMPRESSED);\n+    assert(return_val);\n+\n+    CPubKey pubKey = CPubKey(sender_serialized_output_pubkey);\n+\n+    assert(pubKey.IsFullyValid());\n+\n+    XOnlyPubKey xOnlyPubKey = XOnlyPubKey(pubKey);\n+\n+    return xOnlyPubKey;\n+}\n+\n+void Recipient::CreateTweakedKeyPair(\n+    const secp256k1_context* ctx,\n+    const secp256k1_xonly_pubkey sender_public_key,\n+    secp256k1_keypair& recipient_keypair)\n+{\n+    unsigned char recipient_secret_key[32];\n+    unsigned char shared_secret[32];\n+\n+    secp256k1_pubkey output_pubkey;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r889490571",
      "id" : 889490571,
      "in_reply_to_id" : 882527414,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841BIyL",
      "original_commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "original_line" : 72,
      "original_position" : 72,
      "original_start_line" : null,
      "path" : "src/wallet/silentpayment.cpp",
      "position" : null,
      "pull_request_review_id" : 995775748,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490571/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-04T05:50:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490571",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r889490596"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490596"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done in https://github.com/bitcoin/bitcoin/pull/24897/commits/16ca3614639833d4a3bfea548a2cf4738bb2efb7. Thanks.",
      "commit_id" : "a395e23bbfa259a9043e2ecb830cad290abde776",
      "created_at" : "2022-06-04T05:51:16Z",
      "diff_hunk" : "@@ -1910,9 +1915,113 @@ static RPCHelpMan getblockstats()\n }\n \n namespace {\n-//! Search for a given set of pubkey scripts\n-bool FindScriptPubKey(std::atomic<int>& scan_progress, const std::atomic<bool>& should_abort, int64_t& count, CCoinsViewCursor* cursor, const std::set<CScript>& needles, std::map<COutPoint, Coin>& out_results, std::function<void()>& interruption_point)\n+\n+bool CheckSilentPayment(\n+    uint256& txhash,\n+    const CScript& outScriptPubKey,\n+    std::vector<std::tuple<FlatSigningProvider, CScript>>& providers,\n+    NodeContext& node,\n+    std::vector<uint256>& verified_txs,\n+    std::vector<XOnlyPubKey>& silPubKeys,\n+    std::map<CScript, std::string>& silDesc)\n {\n+\n+    bool f_silentpaymentindex_ready = g_silentpaymentindex ? g_silentpaymentindex->BlockUntilSyncedToCurrentChain() : false;\n+    if (!f_silentpaymentindex_ready) {\n+        throw JSONRPCError(RPC_VERIFY_ERROR, \"The silent payment index is either disabled or not yet synced.\");\n+    }\n+\n+    ChainstateManager& chainman = EnsureChainman(node);\n+    LOCK(cs_main);\n+    CChainState& active_chainstate = chainman.ActiveChainstate();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r889490596",
      "id" : 889490596,
      "in_reply_to_id" : 882521869,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841BIyk",
      "original_commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "original_line" : 1936,
      "original_position" : 63,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 995775776,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490596/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-04T05:51:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490596",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r889490622"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490622"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done in https://github.com/bitcoin/bitcoin/pull/24897/commits/afbdf2bd9d1e1358eb03054db732cf12d05802b7. Thanks.",
      "commit_id" : "a395e23bbfa259a9043e2ecb830cad290abde776",
      "created_at" : "2022-06-04T05:51:43Z",
      "diff_hunk" : "@@ -0,0 +1,38 @@\n+#ifndef BITCOIN_SILENT_PAYMENT_H\n+#define BITCOIN_SILENT_PAYMENT_H",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r889490622",
      "id" : 889490622,
      "in_reply_to_id" : 882518081,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841BIy-",
      "original_commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "original_line" : 2,
      "original_position" : 2,
      "original_start_line" : 1,
      "path" : "src/wallet/silentpayment.h",
      "position" : null,
      "pull_request_review_id" : 995775806,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490622/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-06-04T05:51:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490622",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r889490641"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490641"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done in https://github.com/bitcoin/bitcoin/commit/afbdf2bd9d1e1358eb03054db732cf12d05802b7. Thanks.",
      "commit_id" : "a395e23bbfa259a9043e2ecb830cad290abde776",
      "created_at" : "2022-06-04T05:52:05Z",
      "diff_hunk" : "@@ -0,0 +1,115 @@\n+#include \"silentpayment.h\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r889490641",
      "id" : 889490641,
      "in_reply_to_id" : 882514222,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841BIzR",
      "original_commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "original_line" : 1,
      "original_position" : 1,
      "original_start_line" : null,
      "path" : "src/wallet/silentpayment.cpp",
      "position" : null,
      "pull_request_review_id" : 995775825,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490641/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-04T05:52:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490641",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r889490700"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490700"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done in https://github.com/bitcoin/bitcoin/commit/178e39d804a092016abe9650a1cde085173d6795. Thanks.",
      "commit_id" : "a395e23bbfa259a9043e2ecb830cad290abde776",
      "created_at" : "2022-06-04T05:52:30Z",
      "diff_hunk" : "@@ -1108,41 +1224,158 @@ bool CWallet::AddToWalletIfInvolvingMe(const CTransactionRef& ptx, const SyncTxS\n         if (fExisted && !fUpdate) return false;\n         if (fExisted || IsMine(tx) || IsFromMe(tx))\n         {\n-            /* Check if any keys in the wallet keypool that were supposed to be unused\n-             * have appeared in a new transaction. If so, remove those keys from the keypool.\n-             * This can happen when restoring an old wallet backup that does not contain\n-             * the mostly recently created transactions from newer versions of the wallet.\n-             */\n-\n-            // loop though all outputs\n-            for (const CTxOut& txout: tx.vout) {\n-                for (const auto& spk_man : GetScriptPubKeyMans(txout.scriptPubKey)) {\n-                    for (auto &dest : spk_man->MarkUnusedAddresses(txout.scriptPubKey)) {\n-                        // If internal flag is not defined try to infer it from the ScriptPubKeyMan\n-                        if (!dest.internal.has_value()) {\n-                            dest.internal = IsInternalScriptPubKeyMan(spk_man);\n-                        }\n+            return HandleNewTxBelongingToMe(tx, state, rescanning_old_block);\n+        }\n+        else if (IsWalletFlagSet(WALLET_FLAG_SILENT_PAYMENT) && VerifySilentPayment(tx, rawTrKeys))\n+        {\n+            return AddSilentScriptKeyMan(tx, state, rescanning_old_block, rawTrKeys);\n+        }\n+    }\n+    return false;\n+}\n+\n+bool CWallet::ExtractPubkeyFromInput(const CTxIn& txin, XOnlyPubKey& senderPubKey)\n+{\n+    // Find the UTXO being spent in UTXO Set to learn the transaction type\n+    std::map<COutPoint, Coin> coins;\n+    coins[txin.prevout];\n+    chain().findCoins(coins);\n \n-                        // skip if can't determine whether it's a receiving address or not\n-                        if (!dest.internal.has_value()) continue;\n+    auto pos = coins.find(txin.prevout);\n \n-                        // If this is a receiving address and it's not in the address book yet\n-                        // (e.g. it wasn't generated on this node or we're restoring from backup)\n-                        // add it to the address book for proper transaction accounting\n-                        if (!*dest.internal && !FindAddressBookEntry(dest.dest, /* allow_change= */ false)) {\n-                            SetAddressBook(dest.dest, \"\", \"receive\");\n-                        }\n-                    }\n-                }\n-            }\n+    Coin coin = pos->second;\n \n-            // Block disconnection override an abandoned tx as unconfirmed\n-            // which means user may have to call abandontransaction again\n-            TxState tx_state = std::visit([](auto&& s) -> TxState { return s; }, state);\n-            return AddToWallet(MakeTransactionRef(tx), tx_state, /*update_wtx=*/nullptr, /*fFlushOnClose=*/false, rescanning_old_block);\n+    // TODO: can more than one txin.prevout be in the mempool (RBF) ?\n+    assert( ++pos == coins.end() );",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r889490700",
      "id" : 889490700,
      "in_reply_to_id" : 882515225,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841BI0M",
      "original_commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "original_line" : 1249,
      "original_position" : 205,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 995775851,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490700/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-04T05:52:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490700",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r889490746"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490746"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done in https://github.com/bitcoin/bitcoin/pull/24897/commits/a395e23bbfa259a9043e2ecb830cad290abde776. Thanks.",
      "commit_id" : "a395e23bbfa259a9043e2ecb830cad290abde776",
      "created_at" : "2022-06-04T05:53:02Z",
      "diff_hunk" : "@@ -0,0 +1,268 @@\n+#!/usr/bin/env python3\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.util import (\n+    assert_raises_rpc_error,\n+)\n+from test_framework.descriptors import descsum_create\n+\n+class SilentTransactioTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 3\n+        self.extra_args = [[], [\"-keypool=1\", \"-silentpaymentindex=1\"], [\"-keypool=1\", \"-silentpaymentindex=1\"]]\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+        self.skip_if_no_sqlite()\n+\n+    def init_wallet(self, *, node):\n+        pass\n+\n+    def invalid_create_wallet(self):\n+        self.log.info(\"Testing the creation of invalid wallets\")\n+\n+        assert_raises_rpc_error(-4, \"Only descriptor wallets support silent payments.\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r889490746",
      "id" : 889490746,
      "in_reply_to_id" : 887750679,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841BI06",
      "original_commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "original_line" : 25,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/wallet_silentpayment.py",
      "position" : null,
      "pull_request_review_id" : 995775876,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490746/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-04T05:53:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490746",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r889490762"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490762"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done in https://github.com/bitcoin/bitcoin/pull/24897/commits/a395e23bbfa259a9043e2ecb830cad290abde776. Thanks.",
      "commit_id" : "a395e23bbfa259a9043e2ecb830cad290abde776",
      "created_at" : "2022-06-04T05:53:05Z",
      "diff_hunk" : "@@ -0,0 +1,268 @@\n+#!/usr/bin/env python3\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.util import (\n+    assert_raises_rpc_error,\n+)\n+from test_framework.descriptors import descsum_create\n+\n+class SilentTransactioTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 3\n+        self.extra_args = [[], [\"-keypool=1\", \"-silentpaymentindex=1\"], [\"-keypool=1\", \"-silentpaymentindex=1\"]]\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+        self.skip_if_no_sqlite()\n+\n+    def init_wallet(self, *, node):\n+        pass\n+\n+    def invalid_create_wallet(self):\n+        self.log.info(\"Testing the creation of invalid wallets\")\n+\n+        assert_raises_rpc_error(-4, \"Only descriptor wallets support silent payments.\",\n+            self.nodes[1].createwallet, wallet_name='invalid_wallet', descriptors=False, silent_payment=True)\n+\n+        assert_raises_rpc_error(-4, \"Silent payments require the ability to store private keys.\",\n+            self.nodes[1].createwallet, wallet_name='invalid_wallet', descriptors=True, disable_private_keys=True, silent_payment=True)\n+\n+        assert_raises_rpc_error(-4, \"Silent payments require the ability to store private keys.\",\n+            self.nodes[1].createwallet, wallet_name='invalid_wallet',  descriptors=True, disable_private_keys=True, external_signer=True, silent_payment=True)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r889490762",
      "id" : 889490762,
      "in_reply_to_id" : 887752800,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5841BI1K",
      "original_commit_id" : "8f616acf868bbc75b31bf5170c40fd9957c08e91",
      "original_line" : 32,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "test/functional/wallet_silentpayment.py",
      "position" : null,
      "pull_request_review_id" : 995775881,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490762/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-04T05:53:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889490762",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@Sjors @kristapsk @1440000bytes Thanks for reviews and tests.  I addressed your suggestions in the last force-push.\r\n\r\n@Sjors  I agree that using a separate wallet/tool ââfor silent payments can be a good solution.\r\nI initially considered this option, but it would imply re-implementing the scan logic. The tool must be able to request and de-serialize blocks and the UTXO Set to scan coins.\r\nSo a new branch appeared to be the simplest way to implement a proof of concept.\r\n\r\n> In case the proposal is modified to consider all inputs, keep in mind that this makes coin selection (slightly) more complicated.\r\n\r\nYes. There are some tradeoffs involving how to use inputs for ECDH. I don't think there's a way to accept every type of input, as seen in https://github.com/bitcoin/bitcoin/pull/24897/commits/178e39d804a092016abe9650a1cde085173d6795.\r\n\r\nExample:\r\n```c++\r\nif (whichType == TxoutType::NONSTANDARD ||\r\n    whichType == TxoutType::MULTISIG ||\r\n    whichType == TxoutType::WITNESS_UNKNOWN ) {\r\n        return false;\r\n    }\r\n```\r\n\r\n> given that this implementation requires a new index,\r\n\r\nThis index just speeds up the transaction verification. This is not necessary for Silent Payments, although in this particular implementation it is required for UX purposes. I'm getting some metrics to see if it can be removed and still have a good user experience.\r\n\r\n> relying on a global keypool=1 setting is not ideal.\r\n\r\nYes. This is just for testing and should not be required in an eventual final version.\r\n\r\n> Another approach could be that a silent_payment wallet only ever generates 1 key, perhaps with a new silent(pk) descriptor type. \r\n\r\nI think this is the best solution. This would imply changing the `getnewaddress` RPC to always return the same address for this `silent` descriptor and allowing a non-ranged descriptor to be active.",
      "created_at" : "2022-06-05T21:57:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1146890220",
      "id" : 1146890220,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585EXCfs",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1146890220/reactions"
      },
      "updated_at" : "2022-06-06T01:36:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1146890220",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-07-12T13:16:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1181748133",
      "id" : 1181748133,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585GcAul",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1181748133/reactions"
      },
      "updated_at" : "2022-07-12T13:16:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1181748133",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased.",
      "created_at" : "2022-07-15T23:24:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1186019639",
      "id" : 1186019639,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585GsTk3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1186019639/reactions"
      },
      "updated_at" : "2022-07-15T23:24:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1186019639",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Rebased.\r\n\r\nwhy is CI failing?",
      "created_at" : "2022-07-16T00:24:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1186036654",
      "id" : 1186036654,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585GsXuu",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1186036654/reactions"
      },
      "updated_at" : "2022-07-16T00:24:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1186036654",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94559964?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 94559964,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOBaLe3A",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@1440000bytes this PR is built on top of https://github.com/bitcoin/bitcoin/pull/23480 and https://github.com/bitcoin-core/secp256k1/pull/994, which have not yet been merged.\r\n\r\n~~One of the error is the same as #23480, which occurs in `wallet_taproot.py`. This is failing almost every CI check, but not on my machine (Ubuntu 21.10).~~\r\nRegarding the error in`wallet_taproot.py`, I suggested the solution in https://github.com/bitcoin/bitcoin/pull/23480#issuecomment-1186014033, but had forgotten to commit it here. This error has now been fixed.\r\n\r\nThe other error is a lint error about manually merging #994. I'm still not sure how to fix this lint error.\r\n\r\nEDIT: The only error now is the lint error mentioned above. From what I understand from the file `test/lint/git-subtree-check.sh`, this is because the `src/secp256k1` subtree is compared with the master branch of https://github.com/bitcoin-core/secp256k1  and as it is different, it results in an error.\r\n\r\nIf so, this error will remain until https://github.com/bitcoin-core/secp256k1/pull/994 is merged.\r\n\r\nAnyway, it's a lint error (formatting basically). Does not affect functionality.",
      "created_at" : "2022-07-16T01:49:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1186053310",
      "id" : 1186053310,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585Gsby-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1186053310/reactions"
      },
      "updated_at" : "2022-07-16T06:46:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1186053310",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">Another approach could be that a silent_payment wallet only ever generates 1 key, perhaps with a new silent(pk) descriptor type. That might also make it easier for getnewaddress to spit out something that's not actually an address. \r\n\r\nHow would you apply a label and determine who the sender is?\r\n\r\nAlso, being non-reversible from the UTXO doesn't make it any less of an address...",
      "created_at" : "2022-07-16T05:29:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1186093975",
      "id" : 1186093975,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585GsluX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1186093975/reactions"
      },
      "updated_at" : "2022-07-16T05:29:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1186093975",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@luke-jr Not sure if I understand your question, but this scheme doesn't change anything regarding the sender/recipient relationship.\r\nThe sender will know the tweaked address and the recipient will know where the coins are coming from.\r\n\r\nWhat this proposal prevents is external observers from knowing or tracking how many coins or transactions a public address has.\r\nAnd it also prevents reuse of a public address (as it happens in on-chain donations, for example).",
      "created_at" : "2022-07-16T06:03:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1186097589",
      "id" : 1186097589,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585Gsmm1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1186097589/reactions"
      },
      "updated_at" : "2022-07-16T06:06:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1186097589",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">Not sure if I understand your question, but this scheme doesn't change anything regarding the sender/recipient relationship.\r\nThe sender will know the tweaked address and the recipient will know where the coins are coming from.\r\n\r\nThe recipient knows who the sender is and the purpose of the transaction, based on the address the bitcoins were sent to. If `getnewaddress` gave the same address every call, it would be impossible to tell the difference between them.\r\n\r\n>And it also prevents reuse of a public address (as it happens in on-chain donations, for example).\r\n\r\nI thought the whole point was to make reuse of such an address safe?",
      "created_at" : "2022-07-16T14:46:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1186209556",
      "id" : 1186209556,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585GtB8U",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1186209556/reactions"
      },
      "updated_at" : "2022-07-16T14:46:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1186209556",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> If `getnewaddress` gave the same address every call\r\n\r\nYou can label the tweaked address. It is part of the wallet. The `rawtr(pk)` descriptor is normally added to wallet.\r\n\r\n> I thought the whole point was to make reuse of such an address safe?\r\n\r\nYes. That's the point. The same address will be tweaked on every transaction \r\n\r\nAs I understand it, the purpose of SP is primarily to increase privacy in a situation where you need to publicly post an address and anyone can send coins to it.\r\n\r\nIf you need more control to categorize each address by payer, an HD wallet is better.",
      "created_at" : "2022-07-16T15:14:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1186216119",
      "id" : 1186216119,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585GtDi3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1186216119/reactions"
      },
      "updated_at" : "2022-07-16T15:25:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1186216119",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">You can label the tweaked address. It is part of the wallet.\r\n\r\nThat seems like a bad design... it should show the silent address.\r\n\r\nBut more importantly, for the recipient to set a label, he has to know what it's for _first_....\r\n\r\n",
      "created_at" : "2022-07-16T15:31:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1186219581",
      "id" : 1186219581,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585GtEY9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1186219581/reactions"
      },
      "updated_at" : "2022-07-16T15:31:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1186219581",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> it should show the silent address. \r\n\r\nThis can be done. The wallet knows that a certain transaction / address was found by verifying SP.",
      "created_at" : "2022-07-16T15:37:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1186221029",
      "id" : 1186221029,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585GtEvl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1186221029/reactions"
      },
      "updated_at" : "2022-07-16T15:37:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1186221029",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r929443015"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/929443015"
         }
      },
      "author_association" : "NONE",
      "body" : "address2 is not being used",
      "commit_id" : "1e2c0760a611253fa2dc0261fab6795ef02dc7d7",
      "created_at" : "2022-07-26T01:22:29Z",
      "diff_hunk" : "@@ -652,12 +652,67 @@ static void DiscourageFeeSniping(CMutableTransaction& tx, FastRandomContext& rng\n     }\n }\n \n+bool CreateSilentTransaction(\n+    const CWallet& wallet,\n+    const std::vector<COutput>& selected_coins,\n+    CMutableTransaction& txNew,\n+    bilingual_str& error)\n+{\n+    auto firstCoin = selected_coins.at(0);\n+\n+    const auto& spk_managers = wallet.GetScriptPubKeyMans(firstCoin.txout.scriptPubKey);\n+\n+    if (spk_managers.size() != 1) {\n+        error = _(\"Only one ScriptPubKeyManager was expected for the input.\");\n+        return false;\n+    }\n+\n+    DescriptorScriptPubKeyMan* spk_manager = dynamic_cast<DescriptorScriptPubKeyMan*>(*spk_managers.begin());\n+\n+    for (auto& vout : txNew.vout) {\n+\n+        std::vector<std::vector<unsigned char>> solutions;\n+        TxoutType whichType = Solver(vout.scriptPubKey, solutions);\n+\n+        if (whichType != TxoutType::WITNESS_V1_TAPROOT) {\n+            error = _(\"Silent Payments require that the recipients use Taproot address.\");\n+            return false;\n+        }\n+\n+        auto recipientPubKey = XOnlyPubKey(solutions[0]);\n+\n+        auto destScriptPubKey = GetScriptForDestination(WitnessV1Taproot(recipientPubKey));\n+        CTxDestination address2;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#discussion_r929443015",
      "id" : 929443015,
      "line" : 685,
      "node_id" : "PRRC_kwDOABII5843ZizH",
      "original_commit_id" : "1e2c0760a611253fa2dc0261fab6795ef02dc7d7",
      "original_line" : 685,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 34,
      "pull_request_review_id" : 1050258564,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/929443015/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-07-26T01:22:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/929443015",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/45250003?v=4",
         "events_url" : "https://api.github.com/users/librepgp/events{/privacy}",
         "followers_url" : "https://api.github.com/users/librepgp/followers",
         "following_url" : "https://api.github.com/users/librepgp/following{/other_user}",
         "gists_url" : "https://api.github.com/users/librepgp/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/librepgp",
         "id" : 45250003,
         "login" : "librepgp",
         "node_id" : "MDQ6VXNlcjQ1MjUwMDAz",
         "organizations_url" : "https://api.github.com/users/librepgp/orgs",
         "received_events_url" : "https://api.github.com/users/librepgp/received_events",
         "repos_url" : "https://api.github.com/users/librepgp/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/librepgp/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/librepgp/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/librepgp"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-08-02T18:37:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1203081337",
      "id" : 1203081337,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585HtZB5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1203081337/reactions"
      },
      "updated_at" : "2022-08-02T18:37:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1203081337",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-08-05T13:56:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1206487265",
      "id" : 1206487265,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585H6Yjh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1206487265/reactions"
      },
      "updated_at" : "2022-08-05T13:56:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1206487265",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-08-09T22:40:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1209962886",
      "id" : 1209962886,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585IHpGG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1209962886/reactions"
      },
      "updated_at" : "2022-08-09T22:40:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1209962886",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This PR has been updated with a new silent payment version, which eliminates some manual steps from the previous version (such as the need to set the `keypool` to avoid costly multi-key scan).\r\n\r\nThis is achieved by using a new descriptor type (`sp()`) that has no range and contains exactly one key.\r\n\r\nExample: `sp(cQq73sG9....JD51uaRD)#9llg6xjm`\r\n\r\nThis descriptor introduces a new type of output:  `silent-payment`. This output type returns a standard Taproot script (Segwit V1), but with HRP changed from `bc` to  `sp` on the mainnet (or `tsp` on testnet and signet).\r\n\r\nThis output type will always generate the same address (unless another `sp` descriptor is enabled on the same wallet).\r\n\r\n```bash\r\n$ ./src/bitcoin-cli -signet getnewaddress '' 'silent-payment'\r\ntsp1pfmjyl7ecpmx8yf8cu6g3ez36jy7s9mzuh5pdnal3k0n588uzgmfs4s4fws\r\n```\r\n\r\nTo create a silent transaction, simply use the silent payment address as one of the outputs. \r\nThe `send` RPC will automatically identify and tweak it.\r\n\r\nThe transaction can contain multiple outputs, combining silent and standard addresses.\r\n\r\nI have written a step by step signet tutorial so reviewers can test this new version easily.\r\nhttps://gist.github.com/w0xlt/a7b498ac1ff14b8c292a22be789bd93f",
      "created_at" : "2022-08-17T00:09:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1217295752",
      "id" : 1217295752,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585IjnWI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1217295752/reactions"
      },
      "updated_at" : "2022-08-17T00:09:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1217295752",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-08-17T00:44:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1217313635",
      "id" : 1217313635,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585Ijrtj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1217313635/reactions"
      },
      "updated_at" : "2022-08-17T00:44:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1217313635",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "is the idea of a scanning key included in this? I would have expected `sp(...)` to contain 64 bytes (two xonly keys).",
      "created_at" : "2022-08-17T13:37:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1218022393",
      "id" : 1218022393,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585ImYv5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1218022393/reactions"
      },
      "updated_at" : "2022-08-17T13:37:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1218022393",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3734083?v=4",
         "events_url" : "https://api.github.com/users/LLFourn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LLFourn/followers",
         "following_url" : "https://api.github.com/users/LLFourn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LLFourn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LLFourn",
         "id" : 3734083,
         "login" : "LLFourn",
         "node_id" : "MDQ6VXNlcjM3MzQwODM=",
         "organizations_url" : "https://api.github.com/users/LLFourn/orgs",
         "received_events_url" : "https://api.github.com/users/LLFourn/received_events",
         "repos_url" : "https://api.github.com/users/LLFourn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LLFourn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LLFourn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LLFourn"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I think there is a use case for multiple SP addresses and this is probably what @luke-jr meant. Let's say I work on two Open Source projects. I could post the same SP address for both but it'd be nicer to post a separate SP address for each. Then I would be able to determine how much people appreciate each project. Perhaps most donations go only to one of them so I should focus on that one? It may be an advanced use case but a very reasonable one. I'd myself definitely prefer this over having one address.",
      "created_at" : "2022-08-17T15:24:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1218159758",
      "id" : 1218159758,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585Im6SO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1218159758/reactions"
      },
      "updated_at" : "2022-08-17T15:24:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1218159758",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1178779?v=4",
         "events_url" : "https://api.github.com/users/Kixunil/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Kixunil/followers",
         "following_url" : "https://api.github.com/users/Kixunil/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Kixunil/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Kixunil",
         "id" : 1178779,
         "login" : "Kixunil",
         "node_id" : "MDQ6VXNlcjExNzg3Nzk=",
         "organizations_url" : "https://api.github.com/users/Kixunil/orgs",
         "received_events_url" : "https://api.github.com/users/Kixunil/received_events",
         "repos_url" : "https://api.github.com/users/Kixunil/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Kixunil/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Kixunil/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Kixunil"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Many people don't receive only donations. If you have multiple clients, you need a different address for each so you know who is paying you.",
      "created_at" : "2022-08-17T16:03:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1218217369",
      "id" : 1218217369,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585InIWZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1218217369/reactions"
      },
      "updated_at" : "2022-08-17T16:03:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1218217369",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@Kixunil 2 wallets (different silent payment address) for 2 projects would also make sense ",
      "created_at" : "2022-08-17T16:03:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1218217431",
      "id" : 1218217431,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585InIXX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1218217431/reactions"
      },
      "updated_at" : "2022-08-17T16:03:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1218217431",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94559964?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 94559964,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOBaLe3A",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Many people don't receive only donations. If you have multiple clients, you need a different address for each so you know who is paying you.\r\n\r\n@luke-jr client could share txid in which he sent the payment ",
      "created_at" : "2022-08-17T16:05:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1218220136",
      "id" : 1218220136,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585InJBo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1218220136/reactions"
      },
      "updated_at" : "2022-08-17T16:05:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1218220136",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94559964?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 94559964,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOBaLe3A",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@luke-jr indeed, though you could already send a different xpub to each client and avoid some scanning costs. SP address may be nicer though, not sure.\r\n\r\n@1440000bytes yes, those hacks are available but I'd prefer to avoid such hacks because they significantly degrade UX.",
      "created_at" : "2022-08-17T16:16:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1218231718",
      "id" : 1218231718,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585InL2m",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1218231718/reactions"
      },
      "updated_at" : "2022-08-17T16:16:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1218231718",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1178779?v=4",
         "events_url" : "https://api.github.com/users/Kixunil/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Kixunil/followers",
         "following_url" : "https://api.github.com/users/Kixunil/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Kixunil/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Kixunil",
         "id" : 1178779,
         "login" : "Kixunil",
         "node_id" : "MDQ6VXNlcjExNzg3Nzk=",
         "organizations_url" : "https://api.github.com/users/Kixunil/orgs",
         "received_events_url" : "https://api.github.com/users/Kixunil/received_events",
         "repos_url" : "https://api.github.com/users/Kixunil/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Kixunil/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Kixunil/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Kixunil"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @1440000bytes yes, those hacks are available but I'd prefer to avoid such hacks because they significantly degrade UX.\r\n\r\nNot sure I would consider it hack because it makes things simple. Even BIP 47 has one reusable code per wallet so I would find it confusing to have multiple silent payment address in the same wallet. Although no strong opinion and won't mind anything as long as silent payment address is available in core.",
      "created_at" : "2022-08-17T16:28:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1218245487",
      "id" : 1218245487,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585InPNv",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1218245487/reactions"
      },
      "updated_at" : "2022-08-17T16:28:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1218245487",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94559964?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 94559964,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOBaLe3A",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "* May make spending funds together impossible/difficult\r\n* Managing multiple wallets is PITA\r\n* Sending txid is just more work for humans that computers could do instead\r\n\r\nI think these are enough reasons to at least support multiple addresses in *descriptors* and leaving it up to wallets to decide whether to provide support for more than one in GUI/CLI/...",
      "created_at" : "2022-08-17T16:41:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1218258776",
      "id" : 1218258776,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585InSdY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1218258776/reactions"
      },
      "updated_at" : "2022-08-17T16:41:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1218258776",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1178779?v=4",
         "events_url" : "https://api.github.com/users/Kixunil/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Kixunil/followers",
         "following_url" : "https://api.github.com/users/Kixunil/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Kixunil/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Kixunil",
         "id" : 1178779,
         "login" : "Kixunil",
         "node_id" : "MDQ6VXNlcjExNzg3Nzk=",
         "organizations_url" : "https://api.github.com/users/Kixunil/orgs",
         "received_events_url" : "https://api.github.com/users/Kixunil/received_events",
         "repos_url" : "https://api.github.com/users/Kixunil/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Kixunil/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Kixunil/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Kixunil"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> client could share txid in which he sent the payment\r\n\r\nAnyone could claim to have sent it. There is still no proof-of-sender in Bitcoin, and it doesn't look like anyone is working on it.\r\n\r\nEven if it were possible, it'd still be a pain - this kind of thing should \"just work\" and label transactions, without extra steps from the users.\r\n\r\n>Even BIP 47 has one reusable code per wallet\r\n\r\nBIP 47 was a bad design that shouldn't be implemented nor imitated...\r\n\r\n",
      "created_at" : "2022-08-17T22:55:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1218576871",
      "id" : 1218576871,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585IogHn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1218576871/reactions"
      },
      "updated_at" : "2022-08-17T22:55:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1218576871",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The default behavior for most descriptors is to be ranged and therefore support multiple addresses.\r\nIf the idea is to have multiple `sp` addresses, a ranged `sp` version is sufficient (and is easier to implement than the current version).\r\n\r\nThe decision to use a rangeless descriptor is for validation purposes.\r\nVerification of silent payments is costly. And if the user inadvertently generates multiple `sp` addresses, the overhead can be prohibitive.\r\nUntil there are more reliable statistics on how many `sp` addresses a node (even on a raspberrey) can process (from mempool and when loading wallets), I think it's prudent to keep only one active address per wallet.\r\n\r\nThe label issue shouldn't be complicated, I think. \r\nUTXO can inherit the same label assigned to the `sp` address or descriptor.\r\nI can work on that in the next iteration.",
      "created_at" : "2022-08-17T23:20:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1218630414",
      "id" : 1218630414,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585IotMO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1218630414/reactions"
      },
      "updated_at" : "2022-08-17T23:20:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1218630414",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "NONE",
      "body" : ">I think there is a use case for multiple SP addresses\r\n\r\n@Kixunil good point about wanting to identify the reason for the payment. Naively, the issue is that two keys means twice the scanning, but an interesting alternative would be to simply use the same key (assuming you're OK with using the same identity) but add a public identifier `f` to it when tweaking. So instead of `hash(i*X)*G + X` you get `hash(i*X)*G + X + f*G `. This means every additional \"address\" only costs one additional ECC addition when scanning (relatively cheap compared to doing ECC multiplications).\r\n\r\nThe main downside with this is that `f` becomes crucial for recovering from backup. If we set `f` as an index (0, 1, 2, 3...) then you'd only have to remember how many \"addresses\" you issued (and perhaps overshoot when unsure) to ensure recovery of funds, though of course you'd rather also remember which index is associated with what payment reason.\r\n\r\nAbsolute worst case scenario you could even do something similar to the gap limit where you scan the full history (not just the UTXO set so you don't miss spent outputs) with a default max index of e.g. 100, and then if you find out most of them are in use, you scan the next 100, etc. Costly, but thorough, and only needed as a last resort.",
      "created_at" : "2022-08-17T23:26:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1218641521",
      "id" : 1218641521,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585Iov5x",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1218641521/reactions"
      },
      "updated_at" : "2022-08-17T23:28:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1218641521",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/9066803?v=4",
         "events_url" : "https://api.github.com/users/RubenSomsen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/RubenSomsen/followers",
         "following_url" : "https://api.github.com/users/RubenSomsen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/RubenSomsen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/RubenSomsen",
         "id" : 9066803,
         "login" : "RubenSomsen",
         "node_id" : "MDQ6VXNlcjkwNjY4MDM=",
         "organizations_url" : "https://api.github.com/users/RubenSomsen/orgs",
         "received_events_url" : "https://api.github.com/users/RubenSomsen/received_events",
         "repos_url" : "https://api.github.com/users/RubenSomsen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/RubenSomsen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/RubenSomsen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/RubenSomsen"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-08-19T17:51:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1220951357",
      "id" : 1220951357,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585Ixj09",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1220951357/reactions"
      },
      "updated_at" : "2022-08-19T17:51:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1220951357",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-08-31T09:30:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1232699656",
      "id" : 1232699656,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585JeYEI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232699656/reactions"
      },
      "updated_at" : "2022-08-31T09:30:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232699656",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> This PR has been updated with a new silent payment version, which eliminates some manual steps from the previous version (such as the need to set the `keypool` to avoid costly multi-key scan).\r\n> \r\n> This is achieved by using a new descriptor type (`sp()`) that has no range and contains exactly one key.\r\n> \r\n> Example: `sp(cQq73sG9....JD51uaRD)#9llg6xjm`\r\n> \r\n> This descriptor introduces a new type of output: `silent-payment`. This output type returns a standard Taproot script (Segwit V1), but with HRP changed from `bc` to `sp` on the mainnet (or `tsp` on testnet and signet).\r\n> \r\n> This output type will always generate the same address (unless another `sp` descriptor is enabled on the same wallet).\r\n> \r\n> ```shell\r\n> $ ./src/bitcoin-cli -signet getnewaddress '' 'silent-payment'\r\n> tsp1pfmjyl7ecpmx8yf8cu6g3ez36jy7s9mzuh5pdnal3k0n588uzgmfs4s4fws\r\n> ```\r\n> \r\n> To create a silent transaction, simply use the silent payment address as one of the outputs. The `send` RPC will automatically identify and tweak it.\r\n> \r\n> The transaction can contain multiple outputs, combining silent and standard addresses.\r\n> \r\n> I have written a step by step signet tutorial so reviewers can test this new version easily. https://gist.github.com/w0xlt/a7b498ac1ff14b8c292a22be789bd93f\r\n\r\nTested the new version and everything worked fine except scanning UTXO set: https://gist.github.com/w0xlt/a7b498ac1ff14b8c292a22be789bd93f?permalink_comment_id=4286510#gistcomment-4286510\r\n\r\nI have updated the steps I followed here in tutorial section: https://silentbitco.in/\r\n\r\nUpdated the new silent payment address in DNS as TXT record: [`tsp1pkr8e083j7vp0w82ry5s53rz3t26yf0p8dzg7gqs53r6y399kyw4qa8z52y`](https://mxtoolbox.com/SuperTool.aspx?action=txt%3aalice.silentbitco.in)\r\n\r\n---\r\n\r\nSuggestion: We could add a new RPC command to create silent payment address instead of using `getnewaddress`. So the CLI command would look like this:\r\n\r\n```\r\n$ bitcoin-cli getspaddress\r\n```",
      "created_at" : "2022-09-01T06:45:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1233819035",
      "id" : 1233819035,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585JipWb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1233819035/reactions"
      },
      "updated_at" : "2022-09-01T06:45:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1233819035",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94559964?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 94559964,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOBaLe3A",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-09-13T16:35:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1245664312",
      "id" : 1245664312,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585KP1Q4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1245664312/reactions"
      },
      "updated_at" : "2022-09-13T16:35:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1245664312",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@w0xlt can you rebase? \r\n\r\n> The purpose of this PR is not a final version, but to start the discussion and get benchmarks based on a real implementation.\r\n\r\n> T> his version is built on top of https://github.com/bitcoin-core/secp256k1/pull/994 (bitcoin-core/secp256k1) for x-only ECDH support and https://github.com/bitcoin/bitcoin/pull/23480 (bitcoin/bitcoin) for rawtr(). Each new silent transaction detected is stored in wallet as a rawtr() descriptor.\r\n\r\nCan you confirm this is one of the version that can be used for bitcoin?",
      "created_at" : "2022-09-13T16:56:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1245687307",
      "id" : 1245687307,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585KP64L",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1245687307/reactions"
      },
      "updated_at" : "2022-09-13T16:56:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1245687307",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94559964?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 94559964,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOBaLe3A",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@1440000bytes Done.\r\n\r\nI am not sure I understand your question. The idea of current implementation is to be used with Bitcoin.\r\nI'm evaluating the possibility of including more than one `sp` address per wallet, but that would be a future change .",
      "created_at" : "2022-09-18T15:48:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1250335151",
      "id" : 1250335151,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585Khpmv",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1250335151/reactions"
      },
      "updated_at" : "2022-09-18T15:48:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1250335151",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Sorry I forgot to mention 'mainnet' after bitcoin. Wanted to know if this version is good enough for mainnet and what else could be done to get more reviews and eventually get this merged before v25.0",
      "created_at" : "2022-09-18T15:55:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24897#issuecomment-1250336244",
      "id" : 1250336244,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
      "node_id" : "IC_kwDOABII585Khp30",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1250336244/reactions"
      },
      "updated_at" : "2022-09-18T15:55:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1250336244",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94559964?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 94559964,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOBaLe3A",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   }
]
