[
   {
      "author_association" : "NONE",
      "body" : "CI failure looks unrelated - a timeout occurred in fee_estimator test. Can we kick the CI again?",
      "created_at" : "2022-04-11T17:53:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24827#issuecomment-1095354491",
      "id" : 1095354491,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24827",
      "node_id" : "IC_kwDOABII585BSch7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1095354491/reactions"
      },
      "updated_at" : "2022-04-11T17:53:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1095354491",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2466893?v=4",
         "events_url" : "https://api.github.com/users/Adlai-Holler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Adlai-Holler/followers",
         "following_url" : "https://api.github.com/users/Adlai-Holler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Adlai-Holler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Adlai-Holler",
         "id" : 2466893,
         "login" : "Adlai-Holler",
         "node_id" : "MDQ6VXNlcjI0NjY4OTM=",
         "organizations_url" : "https://api.github.com/users/Adlai-Holler/orgs",
         "received_events_url" : "https://api.github.com/users/Adlai-Holler/received_events",
         "repos_url" : "https://api.github.com/users/Adlai-Holler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Adlai-Holler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Adlai-Holler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Adlai-Holler"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Can we kick the CI again?\r\n\r\nI think you can do it yourself, `git commit --amend` and then `git push --force`.",
      "created_at" : "2022-04-11T18:07:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24827#issuecomment-1095373490",
      "id" : 1095373490,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24827",
      "node_id" : "IC_kwDOABII585BShKy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1095373490/reactions"
      },
      "updated_at" : "2022-04-11T18:07:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1095373490",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Same test timed out again, plus another RPC also timed out that worked this morning. My base case is now that I broke something. Gone through the code a dozen times and can't see what. I'll keep digging.",
      "created_at" : "2022-04-11T21:45:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24827#issuecomment-1095598442",
      "id" : 1095598442,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24827",
      "node_id" : "IC_kwDOABII585BTYFq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1095598442/reactions"
      },
      "updated_at" : "2022-04-11T21:45:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1095598442",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2466893?v=4",
         "events_url" : "https://api.github.com/users/Adlai-Holler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Adlai-Holler/followers",
         "following_url" : "https://api.github.com/users/Adlai-Holler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Adlai-Holler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Adlai-Holler",
         "id" : 2466893,
         "login" : "Adlai-Holler",
         "node_id" : "MDQ6VXNlcjI0NjY4OTM=",
         "organizations_url" : "https://api.github.com/users/Adlai-Holler/orgs",
         "received_events_url" : "https://api.github.com/users/Adlai-Holler/received_events",
         "repos_url" : "https://api.github.com/users/Adlai-Holler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Adlai-Holler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Adlai-Holler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Adlai-Holler"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#24464](https://github.com/bitcoin/bitcoin/pull/24464) (logging: Add severity level to logs by klementtan)\n* [#24185](https://github.com/bitcoin/bitcoin/pull/24185) (refactor: only use explicit reinterpret/const casts, not implicit by PastaPastaPasta)\n* [#21878](https://github.com/bitcoin/bitcoin/pull/21878) (Make all networking code mockable by vasild)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-04-11T21:46:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24827#issuecomment-1095599003",
      "id" : 1095599003,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24827",
      "node_id" : "IC_kwDOABII585BTYOb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1095599003/reactions"
      },
      "updated_at" : "2022-04-11T21:46:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1095599003",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, I agree this is UB and it should be fixed. `memcpy` is notoriously dangerous though, this will have to be carefully checked to not introduce any subtle bugs, especially to make sure the right lengths are used everywhere.",
      "created_at" : "2022-04-13T20:24:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24827#issuecomment-1098453110",
      "id" : 1098453110,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24827",
      "node_id" : "IC_kwDOABII585BeRB2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1098453110/reactions"
      },
      "updated_at" : "2022-04-13T20:25:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1098453110",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "In terms of lengths, and for more general context on this issue so that reviewers can avoid duplicating work:\r\n\r\n- `struct sockaddr` is an old 1980's generic socket address type, (made with IPv4 in mind). It's like a base class.\r\n- `struct sockaddr_in` (\"internet\") is the IPv4 \"subclass.\"\r\n  - It has a size that fits within `sockaddr` and its layout is such that the two can be cast back & forth. In C. In C++ it's UB to manipulate aliased unrelated types like that.\r\n- `struct sockaddr_in6` is the IPv6 \"subclass.\"\r\n  - It is larger than `sockaddr`\r\n  - But the API still works with `sockaddr*`. It's up to you and the API to cast the pointer to the appropriate \"subclass\" once you know which protocol you're dealing with.\r\n- `struct sockaddr_storage` was added along with `sockaddr_in6` as a \"catch-all\" opaque blob that is large enough to hold either one. The only field defined on the struct is the `ss_family` field (i.e. is this IPv4 or IPv6?). That field is guaranteed to map to the field in all the other versions so it's \"sort of\" castable.\r\n\r\nSo, in this PR here's the strategy:\r\n- On our side, if we need a socket address type that is protocol-independent, make it `sockaddr_storage` instead of `sockaddr`. Makes sure we have a big enough chunk of memory to work with, and it removes some internal casting.\r\n- For writing to out-variables of `sockaddr_storage*`, first we zero all the memory of the out-variable to get a clean slate, then create a protocol-specific local variable e.g. `sockaddr_in` and populate it, then memcpy the smaller subclass variable into the zero'd storage variable.\r\n- Replace downcasts of `sockaddr*` -> e.g. `sockaddr_in*` with creating a local variable of the appropriate type and memcpy'ing using the \"subclass\" length. This looks like a read out of bounds but it's no more out-of-bounds than casting the smaller struct pointer to the larger one was. It's the same thing really.",
      "created_at" : "2022-04-14T00:39:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24827#issuecomment-1098601226",
      "id" : 1098601226,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24827",
      "node_id" : "IC_kwDOABII585Be1MK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1098601226/reactions"
      },
      "updated_at" : "2022-04-14T00:39:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1098601226",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2466893?v=4",
         "events_url" : "https://api.github.com/users/Adlai-Holler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Adlai-Holler/followers",
         "following_url" : "https://api.github.com/users/Adlai-Holler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Adlai-Holler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Adlai-Holler",
         "id" : 2466893,
         "login" : "Adlai-Holler",
         "node_id" : "MDQ6VXNlcjI0NjY4OTM=",
         "organizations_url" : "https://api.github.com/users/Adlai-Holler/orgs",
         "received_events_url" : "https://api.github.com/users/Adlai-Holler/received_events",
         "repos_url" : "https://api.github.com/users/Adlai-Holler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Adlai-Holler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Adlai-Holler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Adlai-Holler"
      }
   }
]
