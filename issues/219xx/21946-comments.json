[
   {
      "author_association" : "MEMBER",
      "body" : "Also, I had a look on the rest of RBF functional test coverage (i.e feature_rbf.py, mempool_accept.py, p2p_invalid_tx.py). AFAICT, the latest check on incremental relay fee increase doesn't seem to have coverage ?",
      "created_at" : "2021-05-13T18:18:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21946#issuecomment-840741662",
      "id" : 840741662,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21946",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0MDc0MTY2Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-13T18:18:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/840741662",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK fb2047b",
      "created_at" : "2021-05-13T18:20:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21946#issuecomment-840742529",
      "id" : 840742529,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21946",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0MDc0MjUyOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-13T18:20:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/840742529",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21946#discussion_r632012684"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21946"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/632012684"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is a good place to refer to the CVE so it's clear the behaviour here is _not_ following BIP125.",
      "commit_id" : "fb2047b24183deb7f0cfca0c0249ad8f6ea52753",
      "created_at" : "2021-05-13T18:23:43Z",
      "diff_hunk" : "@@ -563,5 +566,68 @@ def test_rpc(self):\n         assert_equal(json0[\"vin\"][0][\"sequence\"], 4294967293)\n         assert_equal(json1[\"vin\"][0][\"sequence\"], 4294967294)\n \n+    def test_no_inherited_signaling(self):\n+        # Send tx from which to conflict outputs later\n+        base_txid = self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), Decimal(\"10\"))\n+        self.nodes[0].generate(1)\n+        self.sync_blocks()\n+\n+        # Create a explicitly opting parent transaction\n+        optin_parent_tx = self.nodes[0].createrawtransaction([{\n+            'txid': base_txid,\n+            'vout': 0,\n+            \"sequence\": 0xfffffffd,\n+        }], {self.nodes[0].getnewaddress(): Decimal(\"9.99998\")})\n+\n+        optin_parent_tx = self.nodes[0].signrawtransactionwithwallet(optin_parent_tx)\n+\n+        # Broadcast parent tx\n+        optin_parent_txid = self.nodes[0].sendrawtransaction(hexstring=optin_parent_tx[\"hex\"], maxfeerate=0)\n+        assert optin_parent_txid in self.nodes[0].getrawmempool()\n+\n+        replacement_parent_tx = self.nodes[0].createrawtransaction([{\n+            'txid': base_txid,\n+            'vout': 0,\n+            \"sequence\": 0xfffffffd,\n+        }], {self.nodes[0].getnewaddress(): Decimal(\"9.90000\")})\n+\n+        replacement_parent_tx = self.nodes[0].signrawtransactionwithwallet(replacement_parent_tx)\n+\n+        # Test if parent tx can be replaced.\n+        res = self.nodes[0].testmempoolaccept(rawtxs=[replacement_parent_tx['hex']], maxfeerate=0)[0]\n+\n+        # Parent can be replaced.\n+        assert_equal(res['allowed'], True)\n+\n+        # Create a optout child tx spending opting parent\n+        optout_child_tx = self.nodes[0].createrawtransaction([{\n+            'txid': optin_parent_txid,\n+            'vout': 0,\n+            \"sequence\": 0xffffffff,\n+        }], {self.nodes[0].getnewaddress(): Decimal(\"9.99990\")})\n+\n+        optout_child_tx = self.nodes[0].signrawtransactionwithwallet(optout_child_tx)\n+\n+        # Broadcast child tx\n+        optout_child_txid = self.nodes[0].sendrawtransaction(hexstring=optout_child_tx[\"hex\"], maxfeerate=0)\n+        assert optout_child_txid in self.nodes[0].getrawmempool()\n+\n+        replacement_child_tx = self.nodes[0].createrawtransaction([{\n+            'txid': optin_parent_txid,\n+            'vout': 0,\n+            \"sequence\": 0xffffffff,\n+        }], {self.nodes[0].getnewaddress(): Decimal(\"9.00000\")})\n+\n+        replacement_child_tx = self.nodes[0].signrawtransactionwithwallet(replacement_child_tx)\n+\n+        # Broadcast replacement child tx\n+        # BIP 125 :\n+        # 1. The original transactions signal replaceability explicitly or through inheritance as described in the above\n+        # Summary section.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21946#discussion_r632012684",
      "id" : 632012684,
      "line" : 626,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzMjAxMjY4NA==",
      "original_commit_id" : "fb2047b24183deb7f0cfca0c0249ad8f6ea52753",
      "original_line" : 626,
      "original_position" : 71,
      "original_start_line" : null,
      "path" : "test/functional/feature_rbf.py",
      "position" : 71,
      "pull_request_review_id" : 659178602,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21946",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-13T18:23:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/632012684",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   }
]
