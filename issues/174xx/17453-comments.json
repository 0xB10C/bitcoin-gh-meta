[
   {
      "author_association" : "MEMBER",
      "body" : "ping @ryanofsky @Sjors @promag ",
      "created_at" : "2019-11-12T15:27:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17453#issuecomment-552942554",
      "id" : 552942554,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17453",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1Mjk0MjU1NA==",
      "updated_at" : "2019-11-12T15:27:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/552942554",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17453#discussion_r345316090"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17453"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345316090"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"util: Add PruneMiBtoGB() function\" (eb498bd0980850f1b2de61cf6a4d5afc728a60d6)\r\n\r\nShould change `GB_BYTES / 2` to `GB_BYTES - 1` as previously suggested https://github.com/bitcoin/bitcoin/pull/17035#discussion_r337594268. The point of the suggestion was to always round **up** to the nearest number of GB, not sometimes round up and sometimes round down. This was for two reasons: 1) avoid misleading users and not show 2GB of disk usage when actually configured for 2.49GB, etc. 2) Always rounding down in PruneGBtoMiB (display -> settings) and always rounding up in PruneMiBtoGB (settings -> display) would be symmetric avoid roundtrip conversion bugs in #15936\r\n\r\nAlso this isn't following the suggestion to use signed types. PR is also changing existing code to use unsigned instead of signed types. This isn't great because ArgsManager, SettingsValue, etc use signed types so these changes can trigger spurious conversion warnings. Also just in general signed types work better for numbers and quantities (don't have crazy wrapping behavior at 0) and unsigned types work better for bit data.",
      "commit_id" : "4824eeb91e8ee7ed2e46519f56d860635e7c4818",
      "created_at" : "2019-11-12T16:39:58Z",
      "diff_hunk" : "@@ -16,6 +17,9 @@ class Node;\n extern const char *DEFAULT_GUI_PROXY_HOST;\n static constexpr unsigned short DEFAULT_GUI_PROXY_PORT = 9050;\n \n+static inline uint64_t PruneGBtoMiB(unsigned int gb) { return (gb * GB_BYTES) >> 20; }\n+static inline unsigned int PruneMiBtoGB(uint64_t mib) { return ((mib << 20) + GB_BYTES / 2) / GB_BYTES; }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17453#discussion_r345316090",
      "id" : 345316090,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTMxNjA5MA==",
      "original_commit_id" : "4824eeb91e8ee7ed2e46519f56d860635e7c4818",
      "original_position" : 13,
      "path" : "src/qt/optionsmodel.h",
      "position" : 13,
      "pull_request_review_id" : 315677146,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17453",
      "updated_at" : "2019-11-12T17:35:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345316090",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17453#discussion_r345331876"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17453"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345331876"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"gui: Fix prune settings after intro\" (5fd852990cd0e5c94e384fcf6c5fb22891534f4f)\r\n\r\nIt seems dangerous to give two functions that change different settings (\"bPrune\" vs \"nPruneSize\") the exact same name distinguished only by a `bool` `int` overload. Should give the functions different names. Might suggest `SetPruneSizeGB` and `SetPruneEnabled`.",
      "commit_id" : "4824eeb91e8ee7ed2e46519f56d860635e7c4818",
      "created_at" : "2019-11-12T17:07:43Z",
      "diff_hunk" : "@@ -74,6 +74,7 @@ class OptionsModel : public QAbstractListModel\n \n     /* Explicit setters */\n     void SetPrune(bool prune, bool force = false);\n+    void SetPrune(unsigned int prune_size_gb, bool force = false);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17453#discussion_r345331876",
      "id" : 345331876,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTMzMTg3Ng==",
      "original_commit_id" : "5fd852990cd0e5c94e384fcf6c5fb22891534f4f",
      "original_position" : 4,
      "path" : "src/qt/optionsmodel.h",
      "position" : 22,
      "pull_request_review_id" : 315677146,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17453",
      "updated_at" : "2019-11-12T17:35:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345331876",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17453#discussion_r345335127"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17453"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345335127"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"gui: Fix prune settings after intro\" (5fd852990cd0e5c94e384fcf6c5fb22891534f4f)\r\n\r\nI can't figure out what this commit is doing. What is being fixed? What was the behavior before this commit and what is the behavior after? Description just says \"If QSettings are set already, it is required to reset prune size option,\" which doesn't make sense to me, but I must be missing context that would make it understandable.",
      "commit_id" : "4824eeb91e8ee7ed2e46519f56d860635e7c4818",
      "created_at" : "2019-11-12T17:13:55Z",
      "diff_hunk" : "@@ -282,7 +282,7 @@ void BitcoinApplication::parameterSetup()\n }\n \n void BitcoinApplication::SetPrune(bool prune, bool force) {\n-     optionsModel->SetPrune(prune, force);\n+    optionsModel->SetPrune(prune ? DEFAULT_PRUNE_SIZE_GB : 0, force);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17453#discussion_r345335127",
      "id" : 345335127,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTMzNTEyNw==",
      "original_commit_id" : "5fd852990cd0e5c94e384fcf6c5fb22891534f4f",
      "original_position" : 5,
      "path" : "src/qt/bitcoin.cpp",
      "position" : 5,
      "pull_request_review_id" : 315677146,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17453",
      "updated_at" : "2019-11-12T17:35:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345335127",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17453#discussion_r345338851"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17453"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345338851"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"gui: Fix intro dialog when prune is toogled\" (4824eeb91e8ee7ed2e46519f56d860635e7c4818)\r\n\r\nI can't figure out what this commit is doing. Could use description of what behavior was before and how it is changed after. Just looking at code I see it is moving away from convention of using 0 pruning size to represent no pruning, but I don't actually see how behavior is changing.\r\n\r\nEDIT: Just noticed the new QCheckBox::toggled handler below. Maybe pull refactoring changes out of this commit to make each set of changes more obvious? Also s/toogled/toggled/",
      "commit_id" : "4824eeb91e8ee7ed2e46519f56d860635e7c4818",
      "created_at" : "2019-11-12T17:21:08Z",
      "diff_hunk" : "@@ -133,9 +133,9 @@ Intro::Intro(QWidget *parent, uint64_t blockchain_size, uint64_t chain_state_siz\n         ui->prune->setChecked(true);\n         ui->prune->setEnabled(false);\n     }\n-    const unsigned int prune_target_gb = PruneMiBtoGB(prune_target_mib);\n-    ui->prune->setText(tr(\"Discard blocks after verification, except most recent %1 GB (prune)\").arg(prune_target_gb ? prune_target_gb : DEFAULT_PRUNE_SIZE_GB));\n-    UpdatePruneLabels(prune_target_gb);\n+    m_prune_target_gb = prune_target_mib ? PruneMiBtoGB(prune_target_mib) : DEFAULT_PRUNE_SIZE_GB;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17453#discussion_r345338851",
      "id" : 345338851,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTMzODg1MQ==",
      "original_commit_id" : "4824eeb91e8ee7ed2e46519f56d860635e7c4818",
      "original_position" : 7,
      "path" : "src/qt/intro.cpp",
      "position" : 49,
      "pull_request_review_id" : 315677146,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17453",
      "updated_at" : "2019-11-12T17:35:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345338851",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17453#discussion_r345340075"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17453"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345340075"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"gui: Fix intro dialog when prune is toogled\" (4824eeb91e8ee7ed2e46519f56d860635e7c4818)\r\n\r\nSuggest not deleting this comment line assuming it is still applicable.",
      "commit_id" : "4824eeb91e8ee7ed2e46519f56d860635e7c4818",
      "created_at" : "2019-11-12T17:23:46Z",
      "diff_hunk" : "@@ -302,7 +302,10 @@ void Intro::startThread()\n \n     connect(executor, &FreespaceChecker::reply, this, &Intro::setStatus);\n     connect(this, &Intro::requestCheck, executor, &FreespaceChecker::check);\n-    /*  make sure executor object is deleted in its own thread */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17453#discussion_r345340075",
      "id" : 345340075,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTM0MDA3NQ==",
      "original_commit_id" : "4824eeb91e8ee7ed2e46519f56d860635e7c4818",
      "original_position" : 17,
      "path" : "src/qt/intro.cpp",
      "position" : 77,
      "pull_request_review_id" : 315677146,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17453",
      "updated_at" : "2019-11-12T17:35:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345340075",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17453#discussion_r345342340"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17453"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345342340"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Add Intro::UpdatePruneLabels()\" (27f716ebbadfefee8eac7e43374f080ff3dbc68a)\r\n\r\nWhy did this line change from `if (prune_target_gb)` if this commit is supposed to be move-only?",
      "commit_id" : "4824eeb91e8ee7ed2e46519f56d860635e7c4818",
      "created_at" : "2019-11-12T17:27:56Z",
      "diff_hunk" : "@@ -346,3 +329,25 @@ QString Intro::getPathToCheck()\n     mutex.unlock();\n     return retval;\n }\n+\n+void Intro::UpdatePruneLabels(uint64_t prune_target_gb)\n+{\n+    m_required_space_gb = m_blockchain_size;\n+    QString storageRequiresMsg = tr(\"At least %1 GB of data will be stored in this directory, and it will grow over time.\");\n+    if (ui->prune->isChecked()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17453#discussion_r345342340",
      "id" : 345342340,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTM0MjM0MA==",
      "original_commit_id" : "27f716ebbadfefee8eac7e43374f080ff3dbc68a",
      "original_position" : 35,
      "path" : "src/qt/intro.cpp",
      "position" : null,
      "pull_request_review_id" : 315677146,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17453",
      "updated_at" : "2019-11-12T17:35:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345342340",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
