[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17435#discussion_r344871839"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17435"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/344871839"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n        assert set(mempool1).issubset(set(mempool0))\r\n```",
      "commit_id" : "fce1f72f8eea4eb14d33b90ad2b81051402c16e7",
      "created_at" : "2019-11-11T19:27:59Z",
      "diff_hunk" : "@@ -188,7 +194,14 @@ def run_test(self):\n             assert_equal(mempool[x]['descendantfees'], descendant_fees * COIN + 2000)\n             assert_equal(mempool[x]['fees']['descendant'], descendant_fees+satoshi_round(0.00002))\n \n-        # TODO: check that node1's mempool is as expected\n+        # Check that node1's mempool is as expected (-> custom ancestor limit)\n+        mempool0 = self.nodes[0].getrawmempool(False)\n+        mempool1 = self.nodes[1].getrawmempool(False)\n+        assert_equal(len(mempool1), MAX_ANCESTORS_CUSTOM)\n+        assert(set(mempool1).issubset(set(mempool0)))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17435#discussion_r344871839",
      "id" : 344871839,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NDg3MTgzOQ==",
      "original_commit_id" : "fce1f72f8eea4eb14d33b90ad2b81051402c16e7",
      "original_position" : 30,
      "path" : "test/functional/mempool_packages.py",
      "position" : 30,
      "pull_request_review_id" : 315107696,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17435",
      "updated_at" : "2019-11-11T19:29:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/344871839",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17435#discussion_r344871915"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17435"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/344871915"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n            assert tx in mempool1\r\n```",
      "commit_id" : "fce1f72f8eea4eb14d33b90ad2b81051402c16e7",
      "created_at" : "2019-11-11T19:28:09Z",
      "diff_hunk" : "@@ -188,7 +194,14 @@ def run_test(self):\n             assert_equal(mempool[x]['descendantfees'], descendant_fees * COIN + 2000)\n             assert_equal(mempool[x]['fees']['descendant'], descendant_fees+satoshi_round(0.00002))\n \n-        # TODO: check that node1's mempool is as expected\n+        # Check that node1's mempool is as expected (-> custom ancestor limit)\n+        mempool0 = self.nodes[0].getrawmempool(False)\n+        mempool1 = self.nodes[1].getrawmempool(False)\n+        assert_equal(len(mempool1), MAX_ANCESTORS_CUSTOM)\n+        assert(set(mempool1).issubset(set(mempool0)))\n+        for tx in chain[:MAX_ANCESTORS_CUSTOM]:\n+            assert(tx in mempool1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17435#discussion_r344871915",
      "id" : 344871915,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NDg3MTkxNQ==",
      "original_commit_id" : "fce1f72f8eea4eb14d33b90ad2b81051402c16e7",
      "original_position" : 32,
      "path" : "test/functional/mempool_packages.py",
      "position" : 32,
      "pull_request_review_id" : 315107696,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17435",
      "updated_at" : "2019-11-11T19:29:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/344871915",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17435#discussion_r344871985"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17435"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/344871985"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n        # TODO: more  detailed check of node1's mempool (fees etc.)\r\n```",
      "commit_id" : "fce1f72f8eea4eb14d33b90ad2b81051402c16e7",
      "created_at" : "2019-11-11T19:28:18Z",
      "diff_hunk" : "@@ -188,7 +194,14 @@ def run_test(self):\n             assert_equal(mempool[x]['descendantfees'], descendant_fees * COIN + 2000)\n             assert_equal(mempool[x]['fees']['descendant'], descendant_fees+satoshi_round(0.00002))\n \n-        # TODO: check that node1's mempool is as expected\n+        # Check that node1's mempool is as expected (-> custom ancestor limit)\n+        mempool0 = self.nodes[0].getrawmempool(False)\n+        mempool1 = self.nodes[1].getrawmempool(False)\n+        assert_equal(len(mempool1), MAX_ANCESTORS_CUSTOM)\n+        assert(set(mempool1).issubset(set(mempool0)))\n+        for tx in chain[:MAX_ANCESTORS_CUSTOM]:\n+            assert(tx in mempool1)\n+        # TODO: more detailled check of node1's mempool (fees etc.)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17435#discussion_r344871985",
      "id" : 344871985,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NDg3MTk4NQ==",
      "original_commit_id" : "fce1f72f8eea4eb14d33b90ad2b81051402c16e7",
      "original_position" : 33,
      "path" : "test/functional/mempool_packages.py",
      "position" : 33,
      "pull_request_review_id" : 315107696,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17435",
      "updated_at" : "2019-11-11T19:29:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/344871985",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17435#discussion_r344872472"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17435"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/344872472"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n            [\"-maxorphantx=1000\", \"-limitancestorcount={}\".format(MAX_ANCESTORS_CUSTOM)],\r\n```",
      "commit_id" : "fce1f72f8eea4eb14d33b90ad2b81051402c16e7",
      "created_at" : "2019-11-11T19:29:29Z",
      "diff_hunk" : "@@ -14,13 +14,19 @@\n     satoshi_round,\n )\n \n+# default limits\n MAX_ANCESTORS = 25\n MAX_DESCENDANTS = 25\n+# custom limits for node1\n+MAX_ANCESTORS_CUSTOM = 5\n \n class MempoolPackagesTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.num_nodes = 2\n-        self.extra_args = [[\"-maxorphantx=1000\"], [\"-maxorphantx=1000\", \"-limitancestorcount=5\"]]\n+        self.extra_args = [\n+            [\"-maxorphantx=1000\"],\n+            [\"-maxorphantx=1000\", \"-limitancestorcount={}\".format(MAX_ANCESTORS_CUSTOM)]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17435#discussion_r344872472",
      "id" : 344872472,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NDg3MjQ3Mg==",
      "original_commit_id" : "fce1f72f8eea4eb14d33b90ad2b81051402c16e7",
      "original_position" : 16,
      "path" : "test/functional/mempool_packages.py",
      "position" : 16,
      "pull_request_review_id" : 315108557,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17435",
      "updated_at" : "2019-11-11T19:29:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/344872472",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "LGTM, sorry for nitpicking. Feel free to ignore those",
      "created_at" : "2019-11-11T19:29:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17435#issuecomment-552580965",
      "id" : 552580965,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17435",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MjU4MDk2NQ==",
      "updated_at" : "2019-11-11T19:29:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/552580965",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
