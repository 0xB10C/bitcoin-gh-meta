[
   {
      "author_association" : "MEMBER",
      "body" : "Rerunning on the same commit passes: https://travis-ci.org/bitcoin/bitcoin/jobs/562756024, so this is indeed intermittent.",
      "created_at" : "2019-07-23T20:12:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16444#issuecomment-514365872",
      "id" : 514365872,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16444",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxNDM2NTg3Mg==",
      "updated_at" : "2019-07-23T20:12:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/514365872",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "More of those assertions incoming: https://travis-ci.org/bitcoin/bitcoin/jobs/563191235#L4660\r\n\r\nSo this happened in a recent commit, it seems.",
      "created_at" : "2019-07-24T18:54:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16444#issuecomment-514756413",
      "id" : 514756413,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16444",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxNDc1NjQxMw==",
      "updated_at" : "2019-07-24T18:54:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/514756413",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Hypothesis: #15402 broke the consistency requirements of setBlockIndexCandidates in InvalidateBlock, because we let go of cs_main between disconnecting blocks and adding entries to setBlockIndexCandidates.  So CheckBlockIndex() could fail if invoked in-between those two things happening.  Then #16194 came along and added a CheckBlockIndex() call to a place it didnât exist before, namely when an invalid header is received from a peer.  This can happen in a race with InvalidateBlock() in the `rpc_invalidateblock` test, because we use connect_nodes_bi to connect node0 with node1, resulting in two block announcements for the same set of blocks from node1 to node0.\r\n\r\nIf that guess is correct, then I think we should either decide on some new relaxed consistency requirement, if someone can come up with a reasonable justification (I havenât tried yet), or re-work InvalidateBlock() to keep setBlockIndexCandidates in sync with the current chain tip at all times (perhaps by adding things that will eventually need to be added at the beginning, rather than at the end, but Iâd need to give that more thought as well).",
      "created_at" : "2019-07-24T21:11:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16444#issuecomment-514801708",
      "id" : 514801708,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16444",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUxNDgwMTcwOA==",
      "updated_at" : "2019-07-24T21:11:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/514801708",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I hit a different assertion recently while testing #16899 (utxo snapshots): `Assertion failed: (!setBlockIndexCandidates.empty()), function PruneBlockIndexCandidates, file validation.cpp, line 2658`. \r\n\r\nThis happened after I wound back the chain to block 570000, and then somehow the chain started moving forward to the tip, which I interrupted by calling invalidate again, etc. Not entirely sure what happened, I also got the timeout error described in #16979. But the end result was that `gettxoutsetinfo` returned when it reached the tip. And the next time I started the node I got this assertion.\r\n\r\nI'm not sure if this is related, so I created #16993.",
      "created_at" : "2019-09-30T10:12:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16444#issuecomment-536497156",
      "id" : 536497156,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16444",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNjQ5NzE1Ng==",
      "updated_at" : "2019-09-30T10:12:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/536497156",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I was hoping to test @sdaftuar's hypothesis in the wild by having a mainnet node with lots of peers run with `-checkblockindex=1` and then rewinding the chain. However this is non trivial. Peers get banned during the rollback (`whitelist=0.0.0.0/0` doesn't help) and `-checkblockindex=1` causes the node to freeze when I go back to tip, see #16998. ",
      "created_at" : "2019-09-30T14:48:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16444#issuecomment-536597036",
      "id" : 536597036,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16444",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNjU5NzAzNg==",
      "updated_at" : "2019-09-30T14:48:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/536597036",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   }
]
