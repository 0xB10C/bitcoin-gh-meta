[
   {
      "body" : "Automatic sanity-testing: FAILED BUILD/TEST, see http://jenkins.bluematt.me/pull-tester/1966c325a4e5e9de7c89f98869663272d33fab94 for binaries and test log.\n\nThis could happen for one of several reasons:\n1. It chanages paths in makefile.linux-mingw or otherwise changes build scripts in a way that made them incompatible with the automated testing scripts (you can find the patches applied at test-time at http://jenkins.bluematt.me/pull-tester/files/patches/)\n2. It adds/modifies tests which test network rules (thanks for doing that), which conflicts with a patch applied at test time\n3. It does not build on either Linux i386 or Win32 (via MinGW cross compile)\n4. The test suite fails on either Linux i386 or Win32\n5. The block test-cases failed (lookup the first bNN identifier which failed in https://github.com/TheBlueMatt/test-scripts/blob/master/FullBlockTestGenerator.java)\n\nIf you believe this to be in error, please ping BlueMatt on freenode or TheBlueMatt here.\n\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2013-04-07T06:39:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2479#issuecomment-16010497",
      "id" : 16010497,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2479",
      "updated_at" : "2013-04-07T06:39:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16010497",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "Build failure above appears to be a false-positive--the patch \"bitcoind-comparison.patch\" needs to be updated to be able to apply to commits after 8c222dca4f961ad13ec64d690134a40d09b20813.",
      "created_at" : "2013-04-07T06:52:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2479#issuecomment-16010605",
      "id" : 16010605,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2479",
      "updated_at" : "2013-04-07T06:52:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16010605",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1155895?v=3",
         "events_url" : "https://api.github.com/users/brandondahler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brandondahler/followers",
         "following_url" : "https://api.github.com/users/brandondahler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brandondahler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brandondahler",
         "id" : 1155895,
         "login" : "brandondahler",
         "organizations_url" : "https://api.github.com/users/brandondahler/orgs",
         "received_events_url" : "https://api.github.com/users/brandondahler/received_events",
         "repos_url" : "https://api.github.com/users/brandondahler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brandondahler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brandondahler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brandondahler"
      }
   },
   {
      "body" : "this is just fking awesome! thanks :)",
      "created_at" : "2013-04-07T07:22:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2479#issuecomment-16010890",
      "id" : 16010890,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2479",
      "updated_at" : "2013-04-07T07:22:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16010890",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/913817?v=3",
         "events_url" : "https://api.github.com/users/K1773R/events{/privacy}",
         "followers_url" : "https://api.github.com/users/K1773R/followers",
         "following_url" : "https://api.github.com/users/K1773R/following{/other_user}",
         "gists_url" : "https://api.github.com/users/K1773R/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/K1773R",
         "id" : 913817,
         "login" : "K1773R",
         "organizations_url" : "https://api.github.com/users/K1773R/orgs",
         "received_events_url" : "https://api.github.com/users/K1773R/received_events",
         "repos_url" : "https://api.github.com/users/K1773R/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/K1773R/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/K1773R/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/K1773R"
      }
   },
   {
      "body" : "Very cool that you're working on this.  But unless I'm reading this wrong, it looks like when it hits the limit it will just stop sending messages to peers.  This would break the network and its not something we can merge.\r\n\r\nAs you note in your spreadsheet, virtually all the bandwidth usage is relaying blocksÃ¢ÂÂ and I expect that if you instrumented for it you'd find it was from relaying historic ones. This is why I've been recommending to people that they make their nodes not listen to inbound connections when they want to limit their usage. (nodes don't accept inbound connections until they have most of the chain, so a node you connect out to will almost never pull any of the history from you)\r\n\r\nWhat I'd suggest here is that you instead close inbound peers and refuse non-localhost p2p connections once the limit is hit, and don't do addr broadcasts when the limit is anywhere close. \r\n\r\nThis won't help for the minute/hour timescales, howeverÃ¢ÂÂ but we can't take limiting on those timescales until the initial block download process is changed so that having limits on those scales won't break node initialization. (though that may happen soon)\r\n\r\nMake sense?\r\n\r\n",
      "created_at" : "2013-04-07T07:30:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2479#issuecomment-16010963",
      "id" : 16010963,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2479",
      "updated_at" : "2013-04-07T07:32:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16010963",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Yeah, you can't just not respond to getblocks requests, that will break things (today). Even just serving it very slowly won't work well (the peers won't switch to a faster node).\r\n\r\nLong term we need some better mechanisms for network load balancing. If a node is running out of resources, it'd be good if it could redirect peers to other nodes that have more capacity. For that we need an upgrade to the protocol though, so nodes can advertise their available capacity. It's a harder change. Just closing connections like gmaxwell suggests is a good start. Of course, if everyone uses this feature, then we run the risk of the network running out of upload bandwidth!",
      "created_at" : "2013-04-07T15:35:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2479#issuecomment-16017106",
      "id" : 16017106,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2479",
      "updated_at" : "2013-04-07T15:35:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16017106",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "You could also stop setting the version services bit indicating you can serve the chain. That way peers will think you're an SPV node and won't ask for the chain.",
      "created_at" : "2013-04-07T15:37:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2479#issuecomment-16017154",
      "id" : 16017154,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2479",
      "updated_at" : "2013-04-07T15:37:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16017154",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "@gmaxwell @mikehearn : Is there currently a proper way to refuse a getblocks request?  Right now there is a mechanism that will allow callers of the PushMessage functions to see if they failed to be sent or not, having them send a different response based on that is trivial.  \r\n\r\nIt sounds like closing all connections will be a good idea for nodes that have met their overall max bandwidth.  I will look in to getting that added in the next weeks.",
      "created_at" : "2013-04-07T18:11:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2479#issuecomment-16020079",
      "id" : 16020079,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2479",
      "updated_at" : "2013-04-07T18:11:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16020079",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1155895?v=3",
         "events_url" : "https://api.github.com/users/brandondahler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brandondahler/followers",
         "following_url" : "https://api.github.com/users/brandondahler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brandondahler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brandondahler",
         "id" : 1155895,
         "login" : "brandondahler",
         "organizations_url" : "https://api.github.com/users/brandondahler/orgs",
         "received_events_url" : "https://api.github.com/users/brandondahler/received_events",
         "repos_url" : "https://api.github.com/users/brandondahler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brandondahler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brandondahler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brandondahler"
      }
   },
   {
      "body" : "I think the only current way to not respond to getblocks (and getdata, which is the actual expensive part) is not advertizing that you do in the first place. Which indeed means disconnecting or not setting NODE_NETWORK, right now.\r\n\r\nThis discussion will probably be needed soon anyway, if we want to move forward with pruned nodes (which only store part of the block chain, and may only relay parts or nothing at all).",
      "created_at" : "2013-04-07T18:50:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2479#issuecomment-16020892",
      "id" : 16020892,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2479",
      "updated_at" : "2013-04-07T18:50:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16020892",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Bandwidth limits are a common P2P knob, well within reasonable user expectations.  It has been said for years, in the Linux kernel, that  it was awful to put bandwidth limits inside each application, when instead smarter, higher level layers such as cgroups and tc/qdisc would be far more appropriate.\r\n\r\nIn theory, that is true.  In practice, it is easier to deploy immediately in a user application.  In-app limits do not require modifying kernel or firewall configuration -- which the user may not have rights to access anyway.\r\n\r\nTherefore, I respectfully disagree with @gmaxwell.  Closing inbound peers is a very poor solution, and it is disappointing to see that as a recommendation -- when the alternative is to enable users with a limit commonly found in other P2P applications.\r\n\r\nRE @mikehearn:  *\"Even just serving it very slowly won't work well (the peers won't switch to a faster node).\"*   @sipa is already starting to address this, by scoring peers in #2461.  As such, serving slowly is preferred to serving nothing.  That enables 50% of the solution -- with the other 50% of the solution being better seeking/scoring of peers for getblocks requests.  That sets up a natural ecosystem:  peers do what they can, and other peers seek the best behaving peers.  At times when our popular peers are over-loaded, the less able peers automatically step in and provide some level of service.",
      "created_at" : "2013-04-08T05:19:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2479#issuecomment-16032987",
      "id" : 16032987,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2479",
      "updated_at" : "2013-04-08T05:19:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16032987",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "Also, bandwidth limits simply makes the local node's behavior more predictable.  You can guarantee that your VPS does not exceed its bandwidth budget.  You may guarantee that bitcoind will never burst sufficiently to disrupt your game of Star Wars: The Old Republic.  There is nothing wrong with users that want this accounting ability.\r\n\r\nSee Tor's torrc for one very flexible method of specifying bandwidth contributions.\r\n",
      "created_at" : "2013-04-08T05:22:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2479#issuecomment-16033046",
      "id" : 16033046,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2479",
      "updated_at" : "2013-04-08T05:22:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16033046",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "To be clear, NAK on anything that drops getblocks requests, or similar.  As @mikehearn said, \"you can't just not respond to getblocks requests, that will break things\"",
      "created_at" : "2013-04-08T05:28:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2479#issuecomment-16033183",
      "id" : 16033183,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2479",
      "updated_at" : "2013-04-08T05:28:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16033183",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "I am absolutely not opposed to having bandwidth limits (in whatever structure people want them inÃ¢ÂÂ Tor has both short timescale and long term accounting limits).  I have no idea how Jeff got the idea that I (or anyone else here) doesn't fully support having them.\r\n\r\nWe just cannot have them yet, as I said: \"but we can't take limiting on those timescales until the initial block download process is changed so that having limits on those scales won't break node initialization. (though that may happen soon)\".\r\n\r\nFor the monthly accounting limits switching out of listening/node-network state is a possible viable option. Though it only works for the long timescale limits (Similar to the AccountingMax setting in Tor), not the \"keep traffic down to avoid messing up my games\".  I don't see why Jeff would consider that disappointing, it's certainly not something completeÃ¢ÂÂ but its also something that could be deployed in today's network.  Any other limits will need to be at least two versions out (the version after IBD loadbalancing is fixed).\r\n",
      "created_at" : "2013-04-08T05:57:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2479#issuecomment-16033801",
      "id" : 16033801,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2479",
      "updated_at" : "2013-04-08T05:57:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16033801",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Even a simple kb/sec upload limit would be fine.  There is no need for that to be N versions out.\r\n\r\nBandwidth limiting occurs naturally on the Internet.  Therefore, it seems exaggerated to suggest that an optional limit, mimicing a found-in-nature condition, will *break* much of anything.\r\n",
      "created_at" : "2013-04-08T06:09:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2479#issuecomment-16034131",
      "id" : 16034131,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2479",
      "updated_at" : "2013-04-08T06:09:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16034131",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@jgarzik Right now \"bitcoin took two (or more) days to synchronize\" is _the_ most common complaint I hear about the software.  This is a direct result of fetching from low bandwidth peers. I do not think that we can afford to make that worse before we make it better.",
      "created_at" : "2013-04-08T06:11:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2479#issuecomment-16034175",
      "id" : 16034175,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2479",
      "updated_at" : "2013-04-08T06:11:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16034175",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "\"make that worse\" is a severely constrained point of view.  Blocking a user from better control over their own private property (by arguing against bandwidth limits commits) is the wrong way to achieve that goal.  The net result discourages people from running peers at all, because the default software is less predictable, more susceptible to the whims of remote peers.\r\n\r\n\"make that worse\" implies selection bias and ignores opportunity cost -- excluding the bandwidth contributed by discouraged peers, and focusing mainly on the *existing* set of peers on the network as if a static entity.\r\n",
      "created_at" : "2013-04-08T06:22:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2479#issuecomment-16034473",
      "id" : 16034473,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2479",
      "updated_at" : "2013-04-08T06:22:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16034473",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "@jgarzik I fully support people controlling their own systems. **[Edit: I've toned this down a bit. I know Jeff doesn't intend to insult me, and if I've some how left him thinking that I want to restrict choice then I've been doing a very poor job expressing myself, and thats my fault not his]**\r\n\r\nRight now users can stop the high bandwidth usage by simply disabling listening. _At the moment_, because of the way nodes select and use peers, this is preferable to having listening enabled but artificially rate limitedÃ¢ÂÂ\" don't advertise a capacity you don't have because your peers aren't smart enough to figure out that you don't and cope with it\". It's not ideal but it will prevent the IBD badness. A limiter that also turned off node-network when set under some value would likewise by completely fine.\r\n\r\nSince you used Tor as an exampleÃ¢ÂÂ it would be useful to consider all the work the Tor project has put into load-balancing:  Tor nodes report their configured/observed bandwidth to Tor directory authorities, the bandwidth authorities (https://gitweb.torproject.org/torflow.git/blob/HEAD:/NetworkScanners/BwAuthority/README.spec.txt) periodically test nodes to make sure their bandwidth claims are honest, and then only the top 7/8th's of nodes get the flagged (\"fast\") for primary use. There used to be a minimum bandwidth threshold under which nodes were ignored because they degraded the network, but that become superfluous to the 7/8ths test. Load balancing is then linear on bandwidth. But linear load-balancing doesn't actually achieve the best utilization, so they've experimented with things like using a PID controller (https://lists.torproject.org/pipermail/tor-relays/2011-December/001039.html) to weigh the bandwidth amounts to achieve better utilization, but it seems they've given up on this particular mechanismÃ¢ÂÂ I mention it as color for how complicated a problem this is, especially when you need to be attack resistant. \r\n\r\nFortunately, our application is not quite as sybil vulnerable as Tor... but unfortunately we don't get to have central authorities telling people validated bandwidths. It's also interesting to note that Tor has seen some parallel arguments to the ones made against my recommendation to turn off listeningÃ¢ÂÂ that its demotivating to people who want to contributeÃ¢ÂÂ see the last comment (By cyberpunks/paul) at https://trac.torproject.org/projects/tor/ticket/1854\r\n",
      "created_at" : "2013-04-08T06:28:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2479#issuecomment-16034613",
      "id" : 16034613,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2479",
      "updated_at" : "2013-04-08T07:37:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16034613",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@jgarzik @gmaxwell I think you're talking about different things.\r\n\r\nNobody is saying that bandwidth control in general is a bad idea. It's a common expectation from P2P software, and a very reasonable one.\r\n\r\nHowever, with the current software, effectively the first peer connected to is being used to fetch blocks from. I consider that a bug, and it needs fixing independently from this issue. Nonetheless, it means that even when (from what I can tell) more than enough fast upload capacity is available from the network, users face horribly slow block download because they randomly connect to a peer who probably doesn't even like the fact that he's serving the historic chain in the first place.\r\n\r\nRight now, with the state of the current software, and without changing the protocol, I do agree that simply dropping the connection is the best throttling mechanism we have, as that will result in the peer (eventually, but see #2461) finding a new peer instead of waiting days before every block is uploaded through - who knows - perhaps a GPRS connection. Dropping the connection results in a better experience for both parties.",
      "created_at" : "2013-04-08T08:46:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2479#issuecomment-16039010",
      "id" : 16039010,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2479",
      "updated_at" : "2013-04-08T08:51:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16039010",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Yeah, I'm all for a smarter networking protocol too - it's just that this patch doesn't do that, as is.\r\n\r\nAlso, bear in mind that if the networking protocol changes, everything that talks it has to be upgraded. Currently bitcoinj scores peers by ping time (amongst other things), because peers that are very slow/busy serving the chain to someone else/overloaded/bandwidth-saturated tend to have high ping times. If a peer has low ping times but still responds to getblocks slowly, then that's fine but I'll have to update that code and users need to be updated.\r\n",
      "created_at" : "2013-04-08T08:47:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2479#issuecomment-16039035",
      "id" : 16039035,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2479",
      "updated_at" : "2013-04-08T08:47:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16039035",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/971089?v=3",
         "events_url" : "https://api.github.com/users/mikehearn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikehearn/followers",
         "following_url" : "https://api.github.com/users/mikehearn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikehearn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikehearn",
         "id" : 971089,
         "login" : "mikehearn",
         "organizations_url" : "https://api.github.com/users/mikehearn/orgs",
         "received_events_url" : "https://api.github.com/users/mikehearn/received_events",
         "repos_url" : "https://api.github.com/users/mikehearn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikehearn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikehearn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikehearn"
      }
   },
   {
      "body" : "No consensus. Closing.\r\n",
      "created_at" : "2013-04-09T17:56:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/2479#issuecomment-16129105",
      "id" : 16129105,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/2479",
      "updated_at" : "2013-04-09T17:56:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/16129105",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   }
]
