[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#24149](https://github.com/bitcoin/bitcoin/pull/24149) (Signing support for Miniscript Descriptors by darosior)\n* [#23502](https://github.com/bitcoin/bitcoin/pull/23502) (wallet: Avoid underpaying transaction fees when signing taproot spends by achow101)\n* [#21283](https://github.com/bitcoin/bitcoin/pull/21283) (Implement BIP 370 PSBTv2 by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-07-27T12:28:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-887470431",
      "id" : 887470431,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII58405blf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887470431/reactions"
      },
      "updated_at" : "2022-03-20T16:03:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887470431",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept and Approach ACK. I was experimenting with a basic taproot n-of-m multisig using a single OP_CHECKSIGADD based script on top of this branch. Taproot fields in the PSBTs I was creating (and attempting to sign - although I haven't got that working yet) looked good when I inspected them. I did some very light testing of this, mostly sanity checks",
      "created_at" : "2021-09-01T14:24:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-910337349",
      "id" : 910337349,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII5842QqVF",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-01T14:24:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/910337349",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7217256?v=4",
         "events_url" : "https://api.github.com/users/mjdietzx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mjdietzx/followers",
         "following_url" : "https://api.github.com/users/mjdietzx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mjdietzx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mjdietzx",
         "id" : 7217256,
         "login" : "mjdietzx",
         "node_id" : "MDQ6VXNlcjcyMTcyNTY=",
         "organizations_url" : "https://api.github.com/users/mjdietzx/orgs",
         "received_events_url" : "https://api.github.com/users/mjdietzx/received_events",
         "repos_url" : "https://api.github.com/users/mjdietzx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mjdietzx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mjdietzx"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Needs rebase due to silent merge conflict in `descriptor.cpp`.",
      "created_at" : "2021-11-22T15:53:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-975665627",
      "id" : 975665627,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII5846J3nb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/975665627/reactions"
      },
      "updated_at" : "2021-11-22T15:53:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/975665627",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r762515005"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762515005"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`keypath` is ambiguous, maybe call this `m_tap_bip32_paths`?\r\n\r\nAlso, maybe add a comment above these new entries that refers to BIP 341.",
      "commit_id" : "58af8917bd80b0a918df1a5d38c4b63beae5306f",
      "created_at" : "2021-12-05T05:59:25Z",
      "diff_hunk" : "@@ -56,6 +65,12 @@ struct PSBTInput\n     CScriptWitness final_script_witness;\n     std::map<CPubKey, KeyOriginInfo> hd_keypaths;\n     std::map<CKeyID, SigPair> partial_sigs;\n+    std::vector<unsigned char> m_tap_key_sig;\n+    std::map<std::pair<XOnlyPubKey, uint256>, std::vector<unsigned char>> m_tap_script_sigs;\n+    std::map<std::pair<CScript, int>, std::set<std::vector<unsigned char>, ShortestVectorFirstComparator>> m_tap_scripts;\n+    std::map<XOnlyPubKey, std::pair<std::set<uint256>, KeyOriginInfo>> m_tap_keypaths;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r762515005",
      "id" : 762515005,
      "line" : 71,
      "node_id" : "PRRC_kwDOABII584tcw49",
      "original_commit_id" : "64dc0962d3644df0d6abf39ec4c8987eaef714e8",
      "original_line" : 71,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "src/psbt.h",
      "position" : 28,
      "pull_request_review_id" : 823352236,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762515005/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-05T06:54:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762515005",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r762516314"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762516314"
         }
      },
      "author_association" : "MEMBER",
      "body" : "57622204c81628f790a5355d2f7197d8ed23ebc1 : worth documenting that \"misc\" may include the inner key (with an empty set of hashes).",
      "commit_id" : "58af8917bd80b0a918df1a5d38c4b63beae5306f",
      "created_at" : "2021-12-05T06:17:02Z",
      "diff_hunk" : "@@ -74,6 +74,7 @@ struct SignatureData {\n     std::map<CKeyID, std::pair<CPubKey, KeyOriginInfo>> misc_pubkeys;\n     std::vector<unsigned char> taproot_key_path_sig; /// Schnorr signature for key path spending\n     std::map<std::pair<XOnlyPubKey, uint256>, std::vector<unsigned char>> taproot_script_sigs; ///< (Partial) schnorr signatures, indexed by XOnlyPubKey and leaf_hash.\n+    std::map<XOnlyPubKey, std::pair<std::set<uint256>, KeyOriginInfo>> taproot_misc_pubkeys;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r762516314",
      "id" : 762516314,
      "line" : 79,
      "node_id" : "PRRC_kwDOABII584tcxNa",
      "original_commit_id" : "57622204c81628f790a5355d2f7197d8ed23ebc1",
      "original_line" : 77,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/script/sign.h",
      "position" : 15,
      "pull_request_review_id" : 823352236,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762516314/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-05T06:54:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762516314",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r762517693"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762517693"
         }
      },
      "author_association" : "MEMBER",
      "body" : "48d5949aa94410b12263df9b7a3cbc4d7cd50b6f: having a fully decoded example in a functional test case would be handy ",
      "commit_id" : "58af8917bd80b0a918df1a5d38c4b63beae5306f",
      "created_at" : "2021-12-05T06:35:13Z",
      "diff_hunk" : "@@ -1081,6 +1081,43 @@ static RPCHelpMan decodepsbt()\n                                 {\n                                     {RPCResult::Type::STR_HEX, \"\", \"hex-encoded witness data (if any)\"},\n                                 }},\n+                                {RPCResult::Type::STR_HEX, \"taproot_key_path_sig\", /* optional */ true, \"hex-encoded signature for the Taproot key path spend\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r762517693",
      "id" : 762517693,
      "line" : 1084,
      "node_id" : "PRRC_kwDOABII584tcxi9",
      "original_commit_id" : "48d5949aa94410b12263df9b7a3cbc4d7cd50b6f",
      "original_line" : 1084,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 4,
      "pull_request_review_id" : 823352236,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762517693/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-05T06:54:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762517693",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r762518011"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762518011"
         }
      },
      "author_association" : "MEMBER",
      "body" : "833ecb8dec1a10e3bc1b8d5bcaf0b6839277f582 \"later\" -> \"in FillPSBT\"?",
      "commit_id" : "58af8917bd80b0a918df1a5d38c4b63beae5306f",
      "created_at" : "2021-12-05T06:39:29Z",
      "diff_hunk" : "@@ -357,10 +357,10 @@ bool SignPSBTInput(const SigningProvider& provider, PartiallySignedTransaction&\n     input.FromSignatureData(sigdata);\n \n     // If we have a witness signature, put a witness UTXO.\n-    // TODO: For segwit v1, we should remove the non_witness_utxo\n     if (sigdata.witness) {\n         input.witness_utxo = utxo;\n-        // input.non_witness_utxo = nullptr;\n+        // We can remove the non_witness_utxo if and only if there are no non-segwit or segwit v0\n+        // inputs in this transaction, so we can deal with this later.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r762518011",
      "id" : 762518011,
      "line" : 371,
      "node_id" : "PRRC_kwDOABII584tcxn7",
      "original_commit_id" : "833ecb8dec1a10e3bc1b8d5bcaf0b6839277f582",
      "original_line" : 363,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/psbt.cpp",
      "position" : 145,
      "pull_request_review_id" : 823352236,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762518011/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-05T06:54:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762518011",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r762518268"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762518268"
         }
      },
      "author_association" : "MEMBER",
      "body" : "833ecb8dec1a10e3bc1b8d5bcaf0b6839277f582: `non_witness_utxos` (also below)\r\n\r\nDon't do this for `SIGHASH_SINGLE` and `SIGNHASH_ANYONECANPAY`, since new non-taproot inputs might be added later? Or should whoever adds such an input just add them back in? Maybe add a functional test for this. ",
      "commit_id" : "58af8917bd80b0a918df1a5d38c4b63beae5306f",
      "created_at" : "2021-12-05T06:42:12Z",
      "diff_hunk" : "@@ -1894,6 +1894,30 @@ TransactionError CWallet::FillPSBT(PartiallySignedTransaction& psbtx, bool& comp\n         }\n     }\n \n+    // Figure out if any witness_utxos should be dropped",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r762518268",
      "id" : 762518268,
      "line" : 1897,
      "node_id" : "PRRC_kwDOABII584tcxr8",
      "original_commit_id" : "833ecb8dec1a10e3bc1b8d5bcaf0b6839277f582",
      "original_line" : 1897,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 22,
      "pull_request_review_id" : 823352236,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762518268/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-05T06:54:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762518268",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r762518840"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762518840"
         }
      },
      "author_association" : "MEMBER",
      "body" : "833ecb8dec1a10e3bc1b8d5bcaf0b6839277f582: maybe only do this if there actually _is_ a `non_witness_utxo`? Otherwise you might as well use a `go_drop` bool and loop over all inputs after this loop. Then you also wouldn't need to track the index.",
      "commit_id" : "58af8917bd80b0a918df1a5d38c4b63beae5306f",
      "created_at" : "2021-12-05T06:49:34Z",
      "diff_hunk" : "@@ -1894,6 +1894,30 @@ TransactionError CWallet::FillPSBT(PartiallySignedTransaction& psbtx, bool& comp\n         }\n     }\n \n+    // Figure out if any witness_utxos should be dropped\n+    std::vector<unsigned int> to_drop;\n+    for (unsigned int i = 0; i < psbtx.inputs.size(); ++i) {\n+        const auto& input = psbtx.inputs.at(i);\n+        int wit_ver;\n+        std::vector<unsigned char> wit_prog;\n+        if (input.witness_utxo.IsNull() || !input.witness_utxo.scriptPubKey.IsWitnessProgram(wit_ver, wit_prog)) {\n+            // There's a non-segwit input or Segwit v0, so we cannot drop any witness_utxos\n+            to_drop.clear();\n+            break;\n+        }\n+        if (wit_ver == 0) {\n+            // Segwit v0, so we cannot drop any witness_utxos\n+            to_drop.clear();\n+            break;\n+        }\n+        to_drop.push_back(i);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r762518840",
      "id" : 762518840,
      "line" : 1913,
      "node_id" : "PRRC_kwDOABII584tcx04",
      "original_commit_id" : "833ecb8dec1a10e3bc1b8d5bcaf0b6839277f582",
      "original_line" : 1913,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : 38,
      "pull_request_review_id" : 823352236,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762518840/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-05T06:54:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762518840",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r762519033"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762519033"
         }
      },
      "author_association" : "MEMBER",
      "body" : "9b86c58d95539056981c2a04a7345b992b1ce70c: this seems like a bug fix, is there a test you could add that demonstrates this?",
      "commit_id" : "58af8917bd80b0a918df1a5d38c4b63beae5306f",
      "created_at" : "2021-12-05T06:52:16Z",
      "diff_hunk" : "@@ -149,6 +149,7 @@ static bool CreateTaprootScriptSig(const BaseSignatureCreator& creator, Signatur\n     auto it = sigdata.taproot_script_sigs.find(lookup_key);\n     if (it != sigdata.taproot_script_sigs.end()) {\n         sig_out = it->second;\n+        return true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r762519033",
      "id" : 762519033,
      "line" : 152,
      "node_id" : "PRRC_kwDOABII584tcx35",
      "original_commit_id" : "9b86c58d95539056981c2a04a7345b992b1ce70c",
      "original_line" : 152,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/script/sign.cpp",
      "position" : 4,
      "pull_request_review_id" : 823352236,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762519033/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-05T06:54:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/762519033",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763325503"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763325503"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is there not? There are tests added which check for the presence of the taproot fields in psbts spending taproot inputs.",
      "commit_id" : "0d63ac5e89dc748d11dd37d69da3824ea66fa925",
      "created_at" : "2021-12-06T19:42:56Z",
      "diff_hunk" : "@@ -1081,6 +1081,43 @@ static RPCHelpMan decodepsbt()\n                                 {\n                                     {RPCResult::Type::STR_HEX, \"\", \"hex-encoded witness data (if any)\"},\n                                 }},\n+                                {RPCResult::Type::STR_HEX, \"taproot_key_path_sig\", /* optional */ true, \"hex-encoded signature for the Taproot key path spend\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763325503",
      "id" : 763325503,
      "in_reply_to_id" : 762517693,
      "line" : 1088,
      "node_id" : "PRRC_kwDOABII584tf2w_",
      "original_commit_id" : "48d5949aa94410b12263df9b7a3cbc4d7cd50b6f",
      "original_line" : 1088,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 13,
      "pull_request_review_id" : 824391405,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763325503/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-06T19:42:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763325503",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "In order to make this more testable, would it make sense to add support for OP_CHECKSIGADD-based multisig to descriptors first?",
      "created_at" : "2021-12-06T19:46:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-987125125",
      "id" : 987125125,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII58461lWF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/987125125/reactions"
      },
      "updated_at" : "2021-12-06T19:46:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/987125125",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> In order to make this more testable, would it make sense to add support for OP_CHECKSIGADD-based multisig to descriptors first?\r\n\r\nI think it is fine without those.",
      "created_at" : "2021-12-06T19:58:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-987138014",
      "id" : 987138014,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII58461ofe",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/987138014/reactions"
      },
      "updated_at" : "2021-12-06T19:58:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/987138014",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763341169"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763341169"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The existing tests already cover this case (try reverting this commit, the tests will fail).",
      "commit_id" : "0d63ac5e89dc748d11dd37d69da3824ea66fa925",
      "created_at" : "2021-12-06T19:59:46Z",
      "diff_hunk" : "@@ -149,6 +149,7 @@ static bool CreateTaprootScriptSig(const BaseSignatureCreator& creator, Signatur\n     auto it = sigdata.taproot_script_sigs.find(lookup_key);\n     if (it != sigdata.taproot_script_sigs.end()) {\n         sig_out = it->second;\n+        return true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763341169",
      "id" : 763341169,
      "in_reply_to_id" : 762519033,
      "line" : 152,
      "node_id" : "PRRC_kwDOABII584tf6lx",
      "original_commit_id" : "9b86c58d95539056981c2a04a7345b992b1ce70c",
      "original_line" : 152,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/script/sign.cpp",
      "position" : 4,
      "pull_request_review_id" : 824410937,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763341169/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-06T19:59:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763341169",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763373397"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763373397"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "0d63ac5e89dc748d11dd37d69da3824ea66fa925",
      "created_at" : "2021-12-06T20:40:35Z",
      "diff_hunk" : "@@ -56,6 +65,12 @@ struct PSBTInput\n     CScriptWitness final_script_witness;\n     std::map<CPubKey, KeyOriginInfo> hd_keypaths;\n     std::map<CKeyID, SigPair> partial_sigs;\n+    std::vector<unsigned char> m_tap_key_sig;\n+    std::map<std::pair<XOnlyPubKey, uint256>, std::vector<unsigned char>> m_tap_script_sigs;\n+    std::map<std::pair<CScript, int>, std::set<std::vector<unsigned char>, ShortestVectorFirstComparator>> m_tap_scripts;\n+    std::map<XOnlyPubKey, std::pair<std::set<uint256>, KeyOriginInfo>> m_tap_keypaths;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763373397",
      "id" : 763373397,
      "in_reply_to_id" : 762515005,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584tgCdV",
      "original_commit_id" : "64dc0962d3644df0d6abf39ec4c8987eaef714e8",
      "original_line" : 71,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "src/psbt.h",
      "position" : null,
      "pull_request_review_id" : 824452462,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763373397/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-06T20:40:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763373397",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763373485"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763373485"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Added some docs for this",
      "commit_id" : "0d63ac5e89dc748d11dd37d69da3824ea66fa925",
      "created_at" : "2021-12-06T20:40:43Z",
      "diff_hunk" : "@@ -74,6 +74,7 @@ struct SignatureData {\n     std::map<CKeyID, std::pair<CPubKey, KeyOriginInfo>> misc_pubkeys;\n     std::vector<unsigned char> taproot_key_path_sig; /// Schnorr signature for key path spending\n     std::map<std::pair<XOnlyPubKey, uint256>, std::vector<unsigned char>> taproot_script_sigs; ///< (Partial) schnorr signatures, indexed by XOnlyPubKey and leaf_hash.\n+    std::map<XOnlyPubKey, std::pair<std::set<uint256>, KeyOriginInfo>> taproot_misc_pubkeys;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763373485",
      "id" : 763373485,
      "in_reply_to_id" : 762516314,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584tgCet",
      "original_commit_id" : "57622204c81628f790a5355d2f7197d8ed23ebc1",
      "original_line" : 79,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/script/sign.h",
      "position" : null,
      "pull_request_review_id" : 824452583,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763373485/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-06T20:40:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763373485",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763373570"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763373570"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "0d63ac5e89dc748d11dd37d69da3824ea66fa925",
      "created_at" : "2021-12-06T20:40:51Z",
      "diff_hunk" : "@@ -357,10 +357,10 @@ bool SignPSBTInput(const SigningProvider& provider, PartiallySignedTransaction&\n     input.FromSignatureData(sigdata);\n \n     // If we have a witness signature, put a witness UTXO.\n-    // TODO: For segwit v1, we should remove the non_witness_utxo\n     if (sigdata.witness) {\n         input.witness_utxo = utxo;\n-        // input.non_witness_utxo = nullptr;\n+        // We can remove the non_witness_utxo if and only if there are no non-segwit or segwit v0\n+        // inputs in this transaction, so we can deal with this later.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763373570",
      "id" : 763373570,
      "in_reply_to_id" : 762518011,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584tgCgC",
      "original_commit_id" : "833ecb8dec1a10e3bc1b8d5bcaf0b6839277f582",
      "original_line" : 371,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/psbt.cpp",
      "position" : null,
      "pull_request_review_id" : 824452700,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763373570/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-06T20:40:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763373570",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763373756"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763373756"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It only matters for `SIGHASH_ANYONECANPAY`. I've added a check for that.",
      "commit_id" : "0d63ac5e89dc748d11dd37d69da3824ea66fa925",
      "created_at" : "2021-12-06T20:41:11Z",
      "diff_hunk" : "@@ -1894,6 +1894,30 @@ TransactionError CWallet::FillPSBT(PartiallySignedTransaction& psbtx, bool& comp\n         }\n     }\n \n+    // Figure out if any witness_utxos should be dropped",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763373756",
      "id" : 763373756,
      "in_reply_to_id" : 762518268,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584tgCi8",
      "original_commit_id" : "833ecb8dec1a10e3bc1b8d5bcaf0b6839277f582",
      "original_line" : 1911,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 824453005,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763373756/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-06T20:41:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763373756",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763373809"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763373809"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "0d63ac5e89dc748d11dd37d69da3824ea66fa925",
      "created_at" : "2021-12-06T20:41:17Z",
      "diff_hunk" : "@@ -1894,6 +1894,30 @@ TransactionError CWallet::FillPSBT(PartiallySignedTransaction& psbtx, bool& comp\n         }\n     }\n \n+    // Figure out if any witness_utxos should be dropped\n+    std::vector<unsigned int> to_drop;\n+    for (unsigned int i = 0; i < psbtx.inputs.size(); ++i) {\n+        const auto& input = psbtx.inputs.at(i);\n+        int wit_ver;\n+        std::vector<unsigned char> wit_prog;\n+        if (input.witness_utxo.IsNull() || !input.witness_utxo.scriptPubKey.IsWitnessProgram(wit_ver, wit_prog)) {\n+            // There's a non-segwit input or Segwit v0, so we cannot drop any witness_utxos\n+            to_drop.clear();\n+            break;\n+        }\n+        if (wit_ver == 0) {\n+            // Segwit v0, so we cannot drop any witness_utxos\n+            to_drop.clear();\n+            break;\n+        }\n+        to_drop.push_back(i);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763373809",
      "id" : 763373809,
      "in_reply_to_id" : 762518840,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584tgCjx",
      "original_commit_id" : "833ecb8dec1a10e3bc1b8d5bcaf0b6839277f582",
      "original_line" : 1927,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 824453077,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763373809/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-06T20:41:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763373809",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763593027"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763593027"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I noticed the presence checking tests, though perhaps checking against the fully decoded result could reveal more subtle issues.",
      "commit_id" : "f662b0c4713a286b8a8983b60d912c2bd291df92",
      "created_at" : "2021-12-07T03:04:25Z",
      "diff_hunk" : "@@ -1081,6 +1081,43 @@ static RPCHelpMan decodepsbt()\n                                 {\n                                     {RPCResult::Type::STR_HEX, \"\", \"hex-encoded witness data (if any)\"},\n                                 }},\n+                                {RPCResult::Type::STR_HEX, \"taproot_key_path_sig\", /* optional */ true, \"hex-encoded signature for the Taproot key path spend\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763593027",
      "id" : 763593027,
      "in_reply_to_id" : 762517693,
      "line" : 1088,
      "node_id" : "PRRC_kwDOABII584tg4FD",
      "original_commit_id" : "48d5949aa94410b12263df9b7a3cbc4d7cd50b6f",
      "original_line" : 1088,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/rpc/rawtransaction.cpp",
      "position" : 13,
      "pull_request_review_id" : 824725053,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763593027/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-07T03:04:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763593027",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763604873"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763604873"
         }
      },
      "author_association" : "MEMBER",
      "body" : "On your latest rebase f7b61d2, when I revert 9b86c58d95539056981c2a04a7345b992b1ce70c, then indeed `wallet_taproot.py` fails. Still, having the fix and test in the same commit would be much easier to folllow. Moving this bit from the test over to this commit does the trick:\r\n\r\n```patch\r\n-            res = self.psbt_offline.walletprocesspsbt(psbt)\r\n-            assert(res['complete'])\r\n+            res = self.psbt_offline.walletprocesspsbt(psbt=psbt, finalize=False)\r\n+\r\n+            // Check that pre-existing signatures in CreateTaprootScriptSig are actually used,\r\n+            // if a signature is found for the given key and leaf hash.\r\n+            decoded = self.psbt_offline.decodepsbt(res[\"psbt\"])\r\n```",
      "commit_id" : "f662b0c4713a286b8a8983b60d912c2bd291df92",
      "created_at" : "2021-12-07T03:41:56Z",
      "diff_hunk" : "@@ -149,6 +149,7 @@ static bool CreateTaprootScriptSig(const BaseSignatureCreator& creator, Signatur\n     auto it = sigdata.taproot_script_sigs.find(lookup_key);\n     if (it != sigdata.taproot_script_sigs.end()) {\n         sig_out = it->second;\n+        return true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763604873",
      "id" : 763604873,
      "in_reply_to_id" : 762519033,
      "line" : 152,
      "node_id" : "PRRC_kwDOABII584tg6-J",
      "original_commit_id" : "9b86c58d95539056981c2a04a7345b992b1ce70c",
      "original_line" : 152,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/script/sign.cpp",
      "position" : 4,
      "pull_request_review_id" : 824740257,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763604873/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-07T03:44:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763604873",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763610439"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763610439"
         }
      },
      "author_association" : "MEMBER",
      "body" : "11c1e17fd622e962d9d3987322a2b51b3181a1db : this is set, but otherwise unused.",
      "commit_id" : "f662b0c4713a286b8a8983b60d912c2bd291df92",
      "created_at" : "2021-12-07T03:59:51Z",
      "diff_hunk" : "@@ -65,6 +65,7 @@ typedef std::pair<CPubKey, std::vector<unsigned char>> SigPair;\n struct SignatureData {\n     bool complete = false; ///< Stores whether the scriptSig and scriptWitness are complete\n     bool witness = false; ///< Stores whether the input this SigData corresponds to is a witness input\n+    TxoutType spk_type = TxoutType::NONSTANDARD; ///< Stores the type of scriptPubKey the input spends",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763610439",
      "id" : 763610439,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584tg8VH",
      "original_commit_id" : "11c1e17fd622e962d9d3987322a2b51b3181a1db",
      "original_line" : 68,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/script/sign.h",
      "position" : null,
      "pull_request_review_id" : 824746913,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763610439/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-07T04:00:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763610439",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763622296"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763622296"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I've moved the change that causes the test failure into the previous commit.\r\n\r\nThe test isn't for this bug specifically, so I don't think it needs any special mention. The test was written first, and it just so happens that it triggered this bug.",
      "commit_id" : "f662b0c4713a286b8a8983b60d912c2bd291df92",
      "created_at" : "2021-12-07T04:38:35Z",
      "diff_hunk" : "@@ -149,6 +149,7 @@ static bool CreateTaprootScriptSig(const BaseSignatureCreator& creator, Signatur\n     auto it = sigdata.taproot_script_sigs.find(lookup_key);\n     if (it != sigdata.taproot_script_sigs.end()) {\n         sig_out = it->second;\n+        return true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763622296",
      "id" : 763622296,
      "in_reply_to_id" : 762519033,
      "line" : 152,
      "node_id" : "PRRC_kwDOABII584tg_OY",
      "original_commit_id" : "9b86c58d95539056981c2a04a7345b992b1ce70c",
      "original_line" : 152,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/script/sign.cpp",
      "position" : 4,
      "pull_request_review_id" : 824762233,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763622296/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-07T04:39:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763622296",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763622318"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763622318"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Removed",
      "commit_id" : "f662b0c4713a286b8a8983b60d912c2bd291df92",
      "created_at" : "2021-12-07T04:38:41Z",
      "diff_hunk" : "@@ -65,6 +65,7 @@ typedef std::pair<CPubKey, std::vector<unsigned char>> SigPair;\n struct SignatureData {\n     bool complete = false; ///< Stores whether the scriptSig and scriptWitness are complete\n     bool witness = false; ///< Stores whether the input this SigData corresponds to is a witness input\n+    TxoutType spk_type = TxoutType::NONSTANDARD; ///< Stores the type of scriptPubKey the input spends",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r763622318",
      "id" : 763622318,
      "in_reply_to_id" : 763610439,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584tg_Ou",
      "original_commit_id" : "11c1e17fd622e962d9d3987322a2b51b3181a1db",
      "original_line" : 68,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/script/sign.h",
      "position" : null,
      "pull_request_review_id" : 824762265,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763622318/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-12-07T04:38:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/763622318",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-utACK 57d354a0d7ba99478eab1afc4304202a07ef4bf7",
      "created_at" : "2021-12-09T03:10:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-989467053",
      "id" : 989467053,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII5846-hGt",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/989467053/reactions"
      },
      "updated_at" : "2021-12-09T03:10:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/989467053",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-12-10T22:25:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-991345371",
      "id" : 991345371,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII5847Frrb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/991345371/reactions"
      },
      "updated_at" : "2021-12-10T22:25:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/991345371",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-utACK 8a675a00053db4621f7f27cf22e8d65713dff03b",
      "created_at" : "2021-12-13T07:17:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-992175334",
      "id" : 992175334,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII5847I2Tm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992175334/reactions"
      },
      "updated_at" : "2021-12-13T07:17:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992175334",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-12-13T08:38:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-992228865",
      "id" : 992228865,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII5847JDYB",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992228865/reactions"
      },
      "updated_at" : "2021-12-13T08:38:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992228865",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK, Approach ACK.\r\n\r\nWill hopefully find the time to test with a hardware wallet, HWI (single sig PSBT as Taproot multisig descriptor [not yet merged](https://github.com/bitcoin/bitcoin/pull/24043)) and do a code review/comparison with the BIP.\r\n\r\nWould certainly be nice to get this in and PR author has added high priority label. [External projects](https://github.com/cryptoadvance/specter-desktop/issues/1506) are waiting on it.\r\n\r\nedit: What hardware wallets can I test this with? Testnet/Signet coins and new PSBT fields? Just Coldcard?",
      "created_at" : "2022-02-01T11:12:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1026730370",
      "id" : 1026730370,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII5849MqmC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026730370/reactions"
      },
      "updated_at" : "2022-02-01T11:25:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026730370",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> edit: What hardware wallets can I test this with?\r\n\r\n@michaelfolkson Trezor supports Taproot with HWI (master).",
      "created_at" : "2022-02-19T15:21:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1046041956",
      "id" : 1046041956,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII584-WVVk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046041956/reactions"
      },
      "updated_at" : "2022-02-19T15:21:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046041956",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Shall we try to merge this in time for 23.0? @achow101 @laanwj @MarcoFalke ",
      "created_at" : "2022-02-19T15:22:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1046041994",
      "id" : 1046041994,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII584-WVWK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046041994/reactions"
      },
      "updated_at" : "2022-02-19T15:22:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046041994",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This can't be merged because it needs rebase for several weeks due to a silent conflict",
      "created_at" : "2022-02-19T15:47:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1046046539",
      "id" : 1046046539,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII584-WWdL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046046539/reactions"
      },
      "updated_at" : "2022-02-19T15:47:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046046539",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Don't know anything about the silent conflict but we are past the [feature freeze](https://github.com/bitcoin/bitcoin/issues/22969) of February 15th too. Hopefully we can get a bunch of new Taproot stuff (e.g. https://github.com/bitcoin/bitcoin/pull/24043) in 24.0.",
      "created_at" : "2022-02-19T16:14:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1046052183",
      "id" : 1046052183,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII584-WX1X",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046052183/reactions"
      },
      "updated_at" : "2022-02-19T16:14:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046052183",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> we are past the [feature freeze](https://github.com/bitcoin/bitcoin/issues/22969) of February 15th too.\r\n\r\nACK",
      "created_at" : "2022-02-19T16:25:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1046054402",
      "id" : 1046054402,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII584-WYYC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046054402/reactions"
      },
      "updated_at" : "2022-02-19T16:25:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046054402",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This also needs review from more people (I'll re-ACK the rebase once those arrive).",
      "created_at" : "2022-02-21T14:59:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1046965850",
      "id" : 1046965850,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII584-Z25a",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046965850/reactions"
      },
      "updated_at" : "2022-02-21T14:59:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046965850",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Hopefully we can get a bunch of new Taproot stuff (e.g. #24043) in 24.0.\r\n\r\nLet's add this PR (#22558) and PR #24043 to the [`24.0` Milestone](https://github.com/bitcoin/bitcoin/milestone/54), so they receive enough eyes?",
      "created_at" : "2022-02-21T15:04:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1046970844",
      "id" : 1046970844,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII584-Z4Hc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046970844/reactions"
      },
      "updated_at" : "2022-02-21T15:05:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046970844",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Approach ACK",
      "created_at" : "2022-02-21T15:11:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1046978061",
      "id" : 1046978061,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII584-Z54N",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046978061/reactions"
      },
      "updated_at" : "2022-02-21T15:11:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1046978061",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/11212268?v=4",
         "events_url" : "https://api.github.com/users/gruve-p/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gruve-p/followers",
         "following_url" : "https://api.github.com/users/gruve-p/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gruve-p/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gruve-p",
         "id" : 11212268,
         "login" : "gruve-p",
         "node_id" : "MDQ6VXNlcjExMjEyMjY4",
         "organizations_url" : "https://api.github.com/users/gruve-p/orgs",
         "received_events_url" : "https://api.github.com/users/gruve-p/received_events",
         "repos_url" : "https://api.github.com/users/gruve-p/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gruve-p/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gruve-p/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gruve-p"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r817816205"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/817816205"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: would these sizes be useful extracted as constants?",
      "commit_id" : "b704884935766748cf533577c1babacfb6d4b5a5",
      "created_at" : "2022-03-02T15:37:42Z",
      "diff_hunk" : "@@ -489,6 +569,101 @@ struct PSBTInput\n                     hash256_preimages.emplace(hash, std::move(preimage));\n                     break;\n                 }\n+                case PSBT_IN_TAP_KEY_SIG:\n+                {\n+                    if (!key_lookup.emplace(key).second) {\n+                        throw std::ios_base::failure(\"Duplicate Key, input Taproot key signature already provided\");\n+                    } else if (key.size() != 1) {\n+                        throw std::ios_base::failure(\"Input Taproot key signature key is more than one byte type\");\n+                    }\n+                    s >> m_tap_key_sig;\n+                    if (m_tap_key_sig.size() < 64) {\n+                        throw std::ios_base::failure(\"Input Taproot key path signature is shorter than 64 bytes\");\n+                    } else if (m_tap_key_sig.size() > 65) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r817816205",
      "id" : 817816205,
      "line" : 582,
      "node_id" : "PRRC_kwDOABII584wvuKN",
      "original_commit_id" : "b704884935766748cf533577c1babacfb6d4b5a5",
      "original_line" : 582,
      "original_position" : 170,
      "original_start_line" : null,
      "path" : "src/psbt.h",
      "position" : 170,
      "pull_request_review_id" : 897753508,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/817816205/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-02T15:37:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/817816205",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r817817480"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/817817480"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: some of these blocks are not strictly necessary, e.g. in this case.",
      "commit_id" : "b704884935766748cf533577c1babacfb6d4b5a5",
      "created_at" : "2022-03-02T15:38:51Z",
      "diff_hunk" : "@@ -625,6 +837,55 @@ struct PSBTOutput\n                     DeserializeHDKeypaths(s, key, hd_keypaths);\n                     break;\n                 }\n+                case PSBT_OUT_TAP_INTERNAL_KEY:\n+                {\n+                    if (!key_lookup.emplace(key).second) {\n+                        throw std::ios_base::failure(\"Duplicate Key, output Taproot internal key already provided\");\n+                    } else if (key.size() != 1) {\n+                        throw std::ios_base::failure(\"Output Taproot internal key key is more than one byte type\");\n+                    }\n+                    UnserializeFromVector(s, m_tap_internal_key);\n+                    break;\n+                }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#discussion_r817817480",
      "id" : 817817480,
      "line" : 849,
      "node_id" : "PRRC_kwDOABII584wvueI",
      "original_commit_id" : "b704884935766748cf533577c1babacfb6d4b5a5",
      "original_line" : 849,
      "original_position" : 322,
      "original_start_line" : null,
      "path" : "src/psbt.h",
      "position" : 322,
      "pull_request_review_id" : 897755174,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22558",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/817817480/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-03-02T15:38:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/817817480",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK. Testing this now because HWI [isn't signing one of my taproot inputs](https://github.com/bitcoin-core/HWI/issues/585) :( ",
      "created_at" : "2022-03-03T19:33:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1058412608",
      "id" : 1058412608,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII584_FhhA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1058412608/reactions"
      },
      "updated_at" : "2022-03-03T19:33:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1058412608",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/45598?v=4",
         "events_url" : "https://api.github.com/users/jb55/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jb55/followers",
         "following_url" : "https://api.github.com/users/jb55/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jb55/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jb55",
         "id" : 45598,
         "login" : "jb55",
         "node_id" : "MDQ6VXNlcjQ1NTk4",
         "organizations_url" : "https://api.github.com/users/jb55/orgs",
         "received_events_url" : "https://api.github.com/users/jb55/received_events",
         "repos_url" : "https://api.github.com/users/jb55/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jb55/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jb55/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jb55"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@achow101 I wonder if you're still open to modifications of BIP371.\r\n\r\nThinking about later integration with MuSig(2), I think it's somewhat unfortunate that the currently suggested PSBT_IN_TAP_BIP32_DERIVATION field conveys both (a) which keys are participating in which leaves and (b) how those are derived. Post-MuSig2, I expect that often keys will be present that aren't directly BIP32-derived, but are a MuSig* aggregate of BIP32-derived keys. It's not impossible to integrate that on top here, but it'd involve some duplication.\r\n\r\nMy suggestion would be to have these fields:\r\n* PSBT_IN_TAP_KEY_SIG: unmodified\r\n* PSBT_IN_TAP_SCRIPT_SIG: unmodified\r\n* PSBT_IN_TAP_LEAF_SCRIPT: unmodified\r\n* PSBT_IN_TAP_KEY_TWEAK: concatenation of PSBT_IN_TAP_INTERNAL_KEY and PSBT_IN_TAP_MERKLE_ROOT; it conveys \"the output key is a tweak of this key with this Merkle root\".\r\n* PSBT_IN_TAP_KEY_IN_SCRIPT: like PSBT_IN_TAP_BIP32_DERIVATION now, but without the BIP32 path; it just conveys \"this key occurs in these leaves\".\r\n* PSBT_IN_TAP_BIP32_DERIVATION: like PSBT_IN_TAP_BIP32_DERIVATION, but without the list of leaf hashes. It can be used for (a) the output key directly (b) the internal key (provided in PSBT_IN_TAP_KEY_TWEAK) of (c) a key occurring in a leaf script (provided by PSBT_IN_TAP_KEY_IN_SCRIPT).\r\n\r\nI'm also happy to take this to the ML if you think this deserves more discussion.\r\n\r\nPing @sanket1729 @darosior @jonasnick.\r\n",
      "created_at" : "2022-03-03T19:52:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1058426300",
      "id" : 1058426300,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII584_Fk28",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1058426300/reactions"
      },
      "updated_at" : "2022-03-03T19:54:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1058426300",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I wonder if you're still open to modifications of BIP371.\n\nBIP 371 is already in use in production, notably by Ledger. So I think it might be too late for any modifications.\n\ncc @bigspider",
      "created_at" : "2022-03-03T20:01:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1058432968",
      "id" : 1058432968,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII584_FmfI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1058432968/reactions"
      },
      "updated_at" : "2022-03-03T20:01:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1058432968",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ok, no reason to change things in that case.",
      "created_at" : "2022-03-03T20:26:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1058452156",
      "id" : 1058452156,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII584_FrK8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1058452156/reactions"
      },
      "updated_at" : "2022-03-03T20:26:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1058452156",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "tACK b704884935766748cf533577c1babacfb6d4b5a5\r\n\r\nWas able to get a mixed taproot keypath + wpkh spend working on HWI with this PR\r\n\r\nHaven't looked through the code that much, only tested behavior and I was happy with the result.",
      "created_at" : "2022-03-03T21:39:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1058519857",
      "id" : 1058519857,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII584_F7sx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1058519857/reactions"
      },
      "updated_at" : "2022-03-03T21:44:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1058519857",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/45598?v=4",
         "events_url" : "https://api.github.com/users/jb55/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jb55/followers",
         "following_url" : "https://api.github.com/users/jb55/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jb55/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jb55",
         "id" : 45598,
         "login" : "jb55",
         "node_id" : "MDQ6VXNlcjQ1NTk4",
         "organizations_url" : "https://api.github.com/users/jb55/orgs",
         "received_events_url" : "https://api.github.com/users/jb55/received_events",
         "repos_url" : "https://api.github.com/users/jb55/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jb55/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jb55/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jb55"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Thanks @achow101 for the ping.\r\nAt this time, since we only support BIP-86 addresses, the only taproot field we rely on is PSBT_IN_TAP_BIP32_DERIVATION, where we assume that the list of hashes is indeed empty (so the expected value is a single byte 0x00, followed by 4 bytes for the fingerprint, followed by the derivation steps. ",
      "created_at" : "2022-03-04T00:20:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1058693418",
      "id" : 1058693418,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII584_GmEq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1058693418/reactions"
      },
      "updated_at" : "2022-03-04T00:20:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1058693418",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6681844?v=4",
         "events_url" : "https://api.github.com/users/bigspider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bigspider/followers",
         "following_url" : "https://api.github.com/users/bigspider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bigspider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bigspider",
         "id" : 6681844,
         "login" : "bigspider",
         "node_id" : "MDQ6VXNlcjY2ODE4NDQ=",
         "organizations_url" : "https://api.github.com/users/bigspider/orgs",
         "received_events_url" : "https://api.github.com/users/bigspider/received_events",
         "repos_url" : "https://api.github.com/users/bigspider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bigspider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bigspider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bigspider"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> where we assume that the list of hashes is indeed empty\r\n\r\nSo it seems that @sipa's suggestion can be implemented in a compatible way that does not break your usage of PSBT_IN_TAP_BIP32_DERIVATION",
      "created_at" : "2022-03-04T07:59:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1058925064",
      "id" : 1058925064,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII584_HeoI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1058925064/reactions"
      },
      "updated_at" : "2022-03-04T07:59:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1058925064",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-03-04T13:31:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1059164985",
      "id" : 1059164985,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII584_IZM5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1059164985/reactions"
      },
      "updated_at" : "2022-03-04T13:31:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1059164985",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Leaving the `0x00` would not break anything as I understand it.\r\nIf desired in order to have a clean standard, I suppose we can have a reasonable upgrade path by letting the next version of the app to skip the `0x00` if present and keeping this loose check for some time.",
      "created_at" : "2022-03-04T15:28:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1059262707",
      "id" : 1059262707,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII584_IxDz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1059262707/reactions"
      },
      "updated_at" : "2022-03-04T15:28:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1059262707",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6681844?v=4",
         "events_url" : "https://api.github.com/users/bigspider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bigspider/followers",
         "following_url" : "https://api.github.com/users/bigspider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bigspider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bigspider",
         "id" : 6681844,
         "login" : "bigspider",
         "node_id" : "MDQ6VXNlcjY2ODE4NDQ=",
         "organizations_url" : "https://api.github.com/users/bigspider/orgs",
         "received_events_url" : "https://api.github.com/users/bigspider/received_events",
         "repos_url" : "https://api.github.com/users/bigspider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bigspider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bigspider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bigspider"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> ... I expect that often keys will be present that aren't directly BIP32-derived, but are a MuSig* aggregate of BIP32-derived keys\r\n\r\nI was thinking most keys would be BIP32 derived keys of a Musig2 aggregate like `musig2(A,B,C)/*` or BIP32 derived keys of a Musig2 aggregate of BIP32-derived keys, like `musig2(A/*, B/*, C/*)/*`? The case you mention seems like `musgi2(A/*, B/*, C/*)` \r\n",
      "created_at" : "2022-03-07T12:24:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1060633560",
      "id" : 1060633560,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII584_N_vY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1060633560/reactions"
      },
      "updated_at" : "2022-03-07T12:24:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1060633560",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6881849?v=4",
         "events_url" : "https://api.github.com/users/sanket1729/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sanket1729/followers",
         "following_url" : "https://api.github.com/users/sanket1729/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sanket1729/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sanket1729",
         "id" : 6881849,
         "login" : "sanket1729",
         "node_id" : "MDQ6VXNlcjY4ODE4NDk=",
         "organizations_url" : "https://api.github.com/users/sanket1729/orgs",
         "received_events_url" : "https://api.github.com/users/sanket1729/received_events",
         "repos_url" : "https://api.github.com/users/sanket1729/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sanket1729/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sanket1729/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sanket1729"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @achow101 I wonder if you're still open to modifications of BIP371.\r\n\r\nSeems like we're in multi threaded conversation territory here with discussion of possible BIP 371 changes and review of this PR as is. I've opened an issue (#24492) to discuss possible BIP 371 changes in case that helps.\r\n\r\n> I'm also happy to take this to the ML if you think this deserves more discussion.\r\n\r\nOr alternatively I'll close the issue and possible BIP 371 changes can be taken to the mailing list. I definitely think an email to the mailing list is a good idea once those proposed changes have been solidified.",
      "created_at" : "2022-03-07T12:43:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1060647780",
      "id" : 1060647780,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII584_ODNk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1060647780/reactions"
      },
      "updated_at" : "2022-03-07T12:43:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1060647780",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Seems like we're in multi threaded conversation territory here with discussion of possible BIP 371 changes and review of this PR as is. I've opened an issue (https://github.com/bitcoin/bitcoin/issues/24492) to discuss possible BIP 371 changes in case that helps.\r\n\r\n@sipa's [proposed changes](https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1058426300) won't be made to BIP 371 due to uncertainty over whether other projects have already deployed. Closed the issue.",
      "created_at" : "2022-03-11T19:38:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1065430893",
      "id" : 1065430893,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII584_gS9t",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065430893/reactions"
      },
      "updated_at" : "2022-03-11T19:38:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065430893",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-utACK 28868805bbf263d75cbd02eb7d510f1e343b979f",
      "created_at" : "2022-03-16T10:10:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1068950962",
      "id" : 1068950962,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII584_tuWy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1068950962/reactions"
      },
      "updated_at" : "2022-03-16T10:10:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1068950962",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm currently testing this PR with/against our PSBT implementation in `lnd`.\r\nI was able to get a BIP86 key spend working :tada: \r\n\r\nBut I can't seem to get `bitcoind` to recognize and sign for a key spend path with a merkle root provided.\r\nPerhaps that's not the scope for this PR? If so then I apologize.\r\n\r\nAccording to my question and the answer I got [here](https://bitcoin.stackexchange.com/questions/113489/taproot-signing-with-psbt-how-to-determine-signing-method), it should be enough to set the following fields:\r\n\r\n```\r\n    {\r\n      \"witness_utxo\": {\r\n        \"amount\": 4.00000000,\r\n        \"scriptPubKey\": {\r\n          \"asm\": \"1 5a7730b9788468ac1b90baac80005da4965496e4d88bcbac95bd3c83cd906f3a\",\r\n          \"desc\": \"addr(bcrt1ptfmnpwtcs352cxush2kgqqza5jt9f9hymz9uhty4h57g8nvsduaq6s9ypp)#q562pd9u\",\r\n          \"hex\": \"51205a7730b9788468ac1b90baac80005da4965496e4d88bcbac95bd3c83cd906f3a\",\r\n          \"address\": \"bcrt1ptfmnpwtcs352cxush2kgqqza5jt9f9hymz9uhty4h57g8nvsduaq6s9ypp\",\r\n          \"type\": \"witness_v1_taproot\"\r\n        }\r\n      },\r\n      \"taproot_bip32_derivs\": [\r\n        {\r\n          \"pubkey\": \"63cc52f06e0a91e3e6456631aa070221d58ccd1ed8c5b6639d4f88786dcd500f\",\r\n          \"master_fingerprint\": \"00000000\",\r\n          \"path\": \"m/86'/0'/0'/0/0\",\r\n          \"leaf_hashes\": [\r\n          ]\r\n        }\r\n      ],\r\n      \"taproot_internal_key\": \"63cc52f06e0a91e3e6456631aa070221d58ccd1ed8c5b6639d4f88786dcd500f\",\r\n      \"taproot_merkle_root\": \"6c2e4bb01e316abaaee288d69c06cc608cedefd6e1a06813786c4ec51b6e1d38\"\r\n    }\r\n```\r\n\r\nFull PSBT:\r\n```\r\ncHNidP8BAHECAAAAAT/GF0O3okL4iQV80uYewSbhqa7qWoD2nG489WsPxw9xAAAAAAD/////AoCT3BQAAAAAFgAUKpx5R067Qv191nSkawzjIGJAQ+ri6PoCAAAAABYAFIyIwvqKctH/eWgjlieETO9w55xoAAAAAAABASsAhNcXAAAAACJRIFp3MLl4hGisG5C6rIAAXaSWVJbk2IvLrJW9PIPNkG86IRZjzFLwbgqR4+ZFZjGqBwIh1YzNHtjFtmOdT4h4bc1QDxkAAAAAAFYAAIAAAACAAAAAgAAAAAAAAAAAARcgY8xS8G4KkePmRWYxqgcCIdWMzR7YxbZjnU+IeG3NUA8BGCBsLkuwHjFquq7iiNacBsxgjO3v1uGgaBN4bE7FG24dOAAAIgICZ5Cr1jOOzCBlO+GZ+Y3VSYA26Z/kFrcSYqzM00TKPjQY1G/d61QAAIABAACAAAAAgAEAAAADAAAAAA==\r\n```\r\n\r\nBut when I use `bitcoin-cli walletprocesspsbt` with that PSBT (the private key is definitely in the wallet, it's the same key I used for the previous BIP86 key spend), then I just get the same PSBT and `\"complete\": false` back.\r\n\r\nIs this me doing something wrong or is this out of scope for this PR?",
      "created_at" : "2022-04-30T13:57:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1113993551",
      "id" : 1113993551,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII585CZjFP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113993551/reactions"
      },
      "updated_at" : "2022-04-30T13:57:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113993551",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008879?v=4",
         "events_url" : "https://api.github.com/users/guggero/events{/privacy}",
         "followers_url" : "https://api.github.com/users/guggero/followers",
         "following_url" : "https://api.github.com/users/guggero/following{/other_user}",
         "gists_url" : "https://api.github.com/users/guggero/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/guggero",
         "id" : 1008879,
         "login" : "guggero",
         "node_id" : "MDQ6VXNlcjEwMDg4Nzk=",
         "organizations_url" : "https://api.github.com/users/guggero/orgs",
         "received_events_url" : "https://api.github.com/users/guggero/received_events",
         "repos_url" : "https://api.github.com/users/guggero/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/guggero/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/guggero/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/guggero"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@guggero Are you using a legacy or a descriptor wallet? Is the taproot output script being watched by the wallet (i.e. you imported the descriptor for it)?",
      "created_at" : "2022-04-30T15:58:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1114010892",
      "id" : 1114010892,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII585CZnUM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114010892/reactions"
      },
      "updated_at" : "2022-04-30T15:58:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114010892",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "It's a descriptor wallet but I didn't add that specific output descriptor to it. It's the same internal key as was used in the BIP86 test, so the key is there. I assumed the PSBT would be sufficient as the \"assembly instruction\" for the signature, since the private key is known to the wallet. But I guess I have to learn more about how descriptor wallets work in this context.\r\nI'll try again with the correct descriptor imported and watched by the wallet, that will very likely resolve my issue. Thanks!",
      "created_at" : "2022-05-02T08:30:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1114618295",
      "id" : 1114618295,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII585Cb7m3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114618295/reactions"
      },
      "updated_at" : "2022-05-02T08:30:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114618295",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008879?v=4",
         "events_url" : "https://api.github.com/users/guggero/events{/privacy}",
         "followers_url" : "https://api.github.com/users/guggero/followers",
         "following_url" : "https://api.github.com/users/guggero/following{/other_user}",
         "gists_url" : "https://api.github.com/users/guggero/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/guggero",
         "id" : 1008879,
         "login" : "guggero",
         "node_id" : "MDQ6VXNlcjEwMDg4Nzk=",
         "organizations_url" : "https://api.github.com/users/guggero/orgs",
         "received_events_url" : "https://api.github.com/users/guggero/received_events",
         "repos_url" : "https://api.github.com/users/guggero/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/guggero/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/guggero/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/guggero"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">  since the private key is known to the wallet.\r\n\r\nAfaik we don't sign anything unless we explicitly watch the `scriptPubKey`, which (for descriptor wallets) is only the case if a descriptor has been imported. In addition, that descriptor must have the private key: a descriptor with just the xpub won't work even if we have the corresponding seed. See also #23417 and #23544.",
      "created_at" : "2022-05-02T11:02:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22558#issuecomment-1114725500",
      "id" : 1114725500,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22558",
      "node_id" : "IC_kwDOABII585CcVx8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114725500/reactions"
      },
      "updated_at" : "2022-05-02T11:03:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1114725500",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   }
]
