[
   {
      "body" : "Isn't this going a bit overboard for debugging tools? (OTOH, it's only about 150 LOC...)",
      "created_at" : "2016-04-01T18:34:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7783#issuecomment-204506292",
      "id" : 204506292,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7783",
      "updated_at" : "2016-04-01T18:34:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/204506292",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "I think this is useful. An alternative proposed was to use variables `a = getnewaddress` `sendtoaddress a 10`, but this pull is fine as well.",
      "created_at" : "2016-04-01T18:44:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7783#issuecomment-204513734",
      "id" : 204513734,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7783",
      "updated_at" : "2016-04-01T18:44:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/204513734",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "> Isn't this going a bit overboard for debugging tools? (OTOH, it's only about 150 LOC...)\r\n\r\nIt is a \"luxury extension\", right. But given the time some of us have spent in the console repeating and copy-pasting commands out- and input, I think it worth taking this in.\r\nAlso, I don't see critical risks for this.\r\n\r\nIMO we should also extend bitcoin-cli to support nested commands. It simply increases productivity with that tool.",
      "created_at" : "2016-04-01T18:53:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7783#issuecomment-204521501",
      "id" : 204521501,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7783",
      "updated_at" : "2016-04-01T18:53:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/204521501",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "I like this concept. I initially had @luke-jr 's concern as well. But only a bit of code added, and it's well-contained.\r\n\r\nIt's not just luxury: it's useful for cases like #7599 where someone wants to insert the output of a previous command into a new one, but it's too long for copy pasting.\r\n\r\n> IMO we should also extend bitcoin-cli to support nested commands. It simply increases productivity with that tool.\r\n\r\nNot sure there. `bitcoin-cli` is simply an entry point and you can use whatever scripting you want in the shell that calls it.\r\n\r\nFor the GUI debug console, which is essentially it's own `bash`, this makes more sense.\r\n\r\nI'm all for a fancy ncurses-based interactive client, but that should not be `bitcoin-cli`.\r\n",
      "created_at" : "2016-04-02T05:41:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7783#issuecomment-204650396",
      "id" : 204650396,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7783",
      "updated_at" : "2016-04-02T05:41:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/204650396",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "On the other hand, many advices read 'Run getsomething' and so. This will bring another \"fork\" - you have to also add that you have to run this in Debug console or via `bitcoin-cli`, because the syntax will \"fork\".\r\n\r\nConcept ACK (I'd also like to see this in `bitcoin-cli`)\r\n",
      "created_at" : "2016-04-02T10:52:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7783#issuecomment-204693463",
      "id" : 204693463,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7783",
      "updated_at" : "2016-04-02T10:52:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/204693463",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "Almost tempting to make it server-side, if we're using long output-inputs... but this seems fine (Concept ACK) as-is; further improvement can wait for another PR.",
      "created_at" : "2016-04-02T10:57:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7783#issuecomment-204694359",
      "id" : 204694359,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7783",
      "updated_at" : "2016-04-02T10:57:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/204694359",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Would it be possible to abstract out this functionality in a separate commit (including the existing RPC parsing logic from the Qt console) and move it to rpc/server.cpp, as an actual RPC call that just takes a string argument with a command to parse?\r\n\r\nThat would make it both more usable (by exposing it as RPC, bitcoin-cli and other tools can use it too), and more testable (we can have RPC tests for it), without complicating the change much.",
      "created_at" : "2016-06-02T14:10:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7783#issuecomment-223303447",
      "id" : 223303447,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7783",
      "updated_at" : "2016-06-02T14:10:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/223303447",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I have though about that but I wasn't sure if we should delegate the parsing/executing of nested command to the server. This PR would do the parsing \"client side\". We could also factor out the parsing and use it client-side (Qt / bitcoin-cli).\r\n\r\nBut I agree, it could be useful server-side.",
      "created_at" : "2016-06-02T14:14:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7783#issuecomment-223304571",
      "id" : 223304571,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7783",
      "updated_at" : "2016-06-02T14:14:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/223304571",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Yes, I agree having it client side is useful. My main reason for suggesting abstracting it out it because I don't think it's very hard, and would make the parsing logic much easier to test.",
      "created_at" : "2016-06-02T14:21:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7783#issuecomment-223306700",
      "id" : 223306700,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7783",
      "updated_at" : "2016-06-02T14:21:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/223306700",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "This would save a hell lot of time and copy/pasting ",
      "created_at" : "2016-07-19T05:08:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7783#issuecomment-233533678",
      "id" : 233533678,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7783",
      "updated_at" : "2016-07-19T05:08:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233533678",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/20367272?v=3",
         "events_url" : "https://api.github.com/users/UniQredit/events{/privacy}",
         "followers_url" : "https://api.github.com/users/UniQredit/followers",
         "following_url" : "https://api.github.com/users/UniQredit/following{/other_user}",
         "gists_url" : "https://api.github.com/users/UniQredit/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/UniQredit",
         "id" : 20367272,
         "login" : "UniQredit",
         "organizations_url" : "https://api.github.com/users/UniQredit/orgs",
         "received_events_url" : "https://api.github.com/users/UniQredit/received_events",
         "repos_url" : "https://api.github.com/users/UniQredit/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/UniQredit/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/UniQredit/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/UniQredit"
      }
   },
   {
      "body" : "* Finally rebased this great PR and refactored the parsing logic into `rpc/server.cpp`\r\n* Added some unit tests\r\n\r\nThis could now be simply extended to the RPC server, although, nested commands could be resource and time hungry.",
      "created_at" : "2016-07-19T15:22:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7783#issuecomment-233667907",
      "id" : 233667907,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7783",
      "updated_at" : "2016-07-19T15:22:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233667907",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7783#discussion_r71362237"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7783"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71362237"
         }
      },
      "body" : "There is no whitespace at the end?",
      "commit_id" : "05a958e32db2fe417304c1736cf9f6aaea07440d",
      "created_at" : "2016-07-19T15:29:35Z",
      "diff_hunk" : "@@ -332,4 +332,49 @@ BOOST_AUTO_TEST_CASE(rpc_convert_values_generatetoaddress)\n     BOOST_CHECK_EQUAL(result[2].get_int(), 9);\n }\n \n+BOOST_AUTO_TEST_CASE(rpc_nested_command_line)\n+{\n+    UniValue jsonRPCError;\n+\n+    SetRPCWarmupFinished();\n+    \n+    std::string result;\n+    std::string result2;\n+    RPCExecuteCommandLine(result, \"getblockchaininfo()[chain]\"); //simple result filtering with path\n+    BOOST_CHECK_EQUAL(result, \"main\");\n+\n+    BOOST_CHECK_NO_THROW(RPCExecuteCommandLine(result, \"getblock(getbestblockhash())\")); //simple 2 level nesting\n+    BOOST_CHECK_NO_THROW(RPCExecuteCommandLine(result, \"getblock(getblock(getbestblockhash())[hash], true)\"));\n+\n+    BOOST_CHECK_NO_THROW(RPCExecuteCommandLine(result, \"getblock( getblock( getblock(getbestblockhash())[hash] )[hash], true)\")); //4 level nesting with whitespace, filtering path and boolean parameter\n+\n+    BOOST_CHECK_NO_THROW(RPCExecuteCommandLine(result, \"getblockchaininfo\"));\n+    BOOST_CHECK_EQUAL(result.substr(0,1), \"{\");\n+\n+    BOOST_CHECK_NO_THROW(RPCExecuteCommandLine(result, \"getblockchaininfo()\"));\n+    BOOST_CHECK_EQUAL(result.substr(0,1), \"{\");\n+\n+    BOOST_CHECK_NO_THROW(RPCExecuteCommandLine(result, \"getblockchaininfo\")); //whitespace at the end will be tolerated",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7783#discussion_r71362237",
      "id" : 71362237,
      "original_commit_id" : "b5ba8fb2ed3e8d7e656608113f2a191694ead88d",
      "original_position" : 26,
      "path" : "src/test/rpc_tests.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7783",
      "updated_at" : "2016-07-20T13:26:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71362237",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7783#discussion_r71362470"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7783"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71362470"
         }
      },
      "body" : "`:%s/toller/toler/g`",
      "commit_id" : "05a958e32db2fe417304c1736cf9f6aaea07440d",
      "created_at" : "2016-07-19T15:30:53Z",
      "diff_hunk" : "@@ -332,4 +332,49 @@ BOOST_AUTO_TEST_CASE(rpc_convert_values_generatetoaddress)\n     BOOST_CHECK_EQUAL(result[2].get_int(), 9);\n }\n \n+BOOST_AUTO_TEST_CASE(rpc_nested_command_line)\n+{\n+    UniValue jsonRPCError;\n+\n+    SetRPCWarmupFinished();\n+    \n+    std::string result;\n+    std::string result2;\n+    RPCExecuteCommandLine(result, \"getblockchaininfo()[chain]\"); //simple result filtering with path\n+    BOOST_CHECK_EQUAL(result, \"main\");\n+\n+    BOOST_CHECK_NO_THROW(RPCExecuteCommandLine(result, \"getblock(getbestblockhash())\")); //simple 2 level nesting\n+    BOOST_CHECK_NO_THROW(RPCExecuteCommandLine(result, \"getblock(getblock(getbestblockhash())[hash], true)\"));\n+\n+    BOOST_CHECK_NO_THROW(RPCExecuteCommandLine(result, \"getblock( getblock( getblock(getbestblockhash())[hash] )[hash], true)\")); //4 level nesting with whitespace, filtering path and boolean parameter\n+\n+    BOOST_CHECK_NO_THROW(RPCExecuteCommandLine(result, \"getblockchaininfo\"));\n+    BOOST_CHECK_EQUAL(result.substr(0,1), \"{\");\n+\n+    BOOST_CHECK_NO_THROW(RPCExecuteCommandLine(result, \"getblockchaininfo()\"));\n+    BOOST_CHECK_EQUAL(result.substr(0,1), \"{\");\n+\n+    BOOST_CHECK_NO_THROW(RPCExecuteCommandLine(result, \"getblockchaininfo\")); //whitespace at the end will be tolerated\n+    BOOST_CHECK_EQUAL(result.substr(0,1), \"{\");\n+\n+    BOOST_CHECK_THROW(RPCExecuteCommandLine(result, \"getblockchaininfo() .\\n\"), runtime_error); //invalid syntax\n+    BOOST_CHECK_THROW(RPCExecuteCommandLine(result, \"getblockchaininfo() getblockchaininfo()\"), runtime_error); //invalid syntax\n+    BOOST_CHECK_NO_THROW(RPCExecuteCommandLine(result, \"getblockchaininfo(\")); //tollerate non closing brackets if we have no arguments",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7783#discussion_r71362470",
      "id" : 71362470,
      "original_commit_id" : "b5ba8fb2ed3e8d7e656608113f2a191694ead88d",
      "original_position" : 31,
      "path" : "src/test/rpc_tests.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7783",
      "updated_at" : "2016-07-20T13:26:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/71362470",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "Fixed nits. Had to add `client.cpp` to `libbitcoin_server_a`. Should that be a problem @theuni?",
      "created_at" : "2016-07-20T13:27:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7783#issuecomment-233948349",
      "id" : 233948349,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7783",
      "updated_at" : "2016-07-20T13:27:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233948349",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "> Would it be possible to abstract out this functionality in a separate commit (including the existing RPC parsing logic from the Qt console) and move it to rpc/server.cpp,\r\n\r\nSorry to be contrary, but IMO, functionality related to parsing and not dispatching should be in `rpc/client.cpp` instead of `rpc/server.cpp`. Note that bitcoin-cli links the client library, not the server one.\r\n\r\n(another reason that it doesn't belong server-side is that it doesn't act on univalue/JSON objects, but on command line strings. Wouldn't  want string parsing on the server side, as this makes the JSON-RPC API unclear, and introduces potential vulnerabilities and DoS possibilities etc)",
      "created_at" : "2016-08-12T13:00:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7783#issuecomment-239439614",
      "id" : 239439614,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7783",
      "updated_at" : "2016-08-12T13:07:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/239439614",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7783#discussion_r74586915"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7783"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/74586915"
         }
      },
      "body" : "client.cpp is part of `libbitcoin_cli`, which is \"cli: shared between bitcoin-cli and bitcoin-qt\" if you need access to that then link that library. Don't include the compilation unit in two libraries.",
      "commit_id" : "05a958e32db2fe417304c1736cf9f6aaea07440d",
      "created_at" : "2016-08-12T13:06:34Z",
      "diff_hunk" : "@@ -181,6 +181,7 @@ libbitcoin_server_a_SOURCES = \\\n   pow.cpp \\\n   rest.cpp \\\n   rpc/blockchain.cpp \\\n+  rpc/client.cpp \\",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7783#discussion_r74586915",
      "id" : 74586915,
      "original_commit_id" : "05a958e32db2fe417304c1736cf9f6aaea07440d",
      "original_position" : 4,
      "path" : "src/Makefile.am",
      "position" : 4,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7783",
      "updated_at" : "2016-08-12T13:06:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/74586915",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Having it in `rpc/client.cpp` instead of `server.cpp` would be good I guess. The only restriction would then be, that we cannot allow (later) server side nested commands (which would probably perform slightly faster). But I'm not sure if we really want server side nested commands with the current locking behavior.",
      "created_at" : "2016-08-12T13:08:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7783#issuecomment-239441380",
      "id" : 239441380,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7783",
      "updated_at" : "2016-08-12T13:08:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/239441380",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Server-side nested commands are not part of the JSON-RPC standard. It is an interesting thought but that would be a completely different proposal, and I don't think it would share any code with this. I'd imagine it would work something akin to batching (but w/ nested structures), not by parsing/formatting expression strings. Seeing how little even simple batching is used, I'm also not sure there is enough demand for that kind of advanced behavior, but that aside.\r\n\r\nEdit: Looked it up a bit,  'nested remote function call' in RPC protocols is commonly implemented in the form of 'promise pipelining', a strategy to reduce round-trips. A call can return a handle, which is essentially a temporary variable, which can be passed as argument to other calls before the result is known. This allows more versatile manipulation than just nesting (e.g. a DAG instead of a tree). In any case this is something to be found in the more advanced RPC frameworks, I couldn't find anyone having bolted it into JSON-RPC. As said, an issue for another time :)\r\n",
      "created_at" : "2016-08-12T13:12:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7783#issuecomment-239442267",
      "id" : 239442267,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7783",
      "updated_at" : "2016-08-12T13:47:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/239442267",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
