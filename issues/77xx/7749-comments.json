[
   {
      "body" : "Travis fail was unrelated (#7463), retriggering.",
      "created_at" : "2016-03-28T10:15:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7749#issuecomment-202332874",
      "id" : 202332874,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7749",
      "updated_at" : "2016-03-28T10:15:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/202332874",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2016-03-30T12:30:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7749#issuecomment-203408169",
      "id" : 203408169,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7749",
      "updated_at" : "2016-03-30T12:30:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/203408169",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "utACK d4b854dccfd6afef4a1daf056b15d4f3f0d52eaa",
      "created_at" : "2016-03-30T12:57:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7749#issuecomment-203419898",
      "id" : 203419898,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7749",
      "updated_at" : "2016-03-30T12:57:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/203419898",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "ACK https://github.com/bitcoin/bitcoin/pull/7749/commits/d4b854dccfd6afef4a1daf056b15d4f3f0d52eaa\r\n\r\n`btctest addnode 188.226.202.220 onetry` producing:\r\n\r\n```\r\n2016-03-30 13:17:37 trying connection 188.226.202.220 lastseen=0.0hrs\r\n2016-03-30 13:17:37 Added connection to 188.226.202.220 peer=12\r\n2016-03-30 13:17:37 send version message: version 70013, blocks=754598, us=0.0.0.0:18333, them=188.226.202.220:18333, peer=12\r\n2016-03-30 13:17:37 sending: version (103 bytes) peer=12\r\n2016-03-30 13:17:38 received: version (102 bytes) peer=12\r\n2016-03-30 13:17:38 peer=12 does not offer the expected services (00000004 offered, 00000001 expected); disconnecting\r\n2016-03-30 13:17:38 sending: reject (45 bytes) peer=12\r\n2016-03-30 13:17:38 sending: verack (0 bytes) peer=12\r\n2016-03-30 13:17:38 sending: getaddr (0 bytes) peer=12\r\n```\r\n\r\nMinor nit: remove 'the' before 'expected services' (I'm not native English speaker though)?\r\n",
      "created_at" : "2016-03-30T13:22:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7749#issuecomment-203429492",
      "id" : 203429492,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7749",
      "updated_at" : "2016-03-30T13:22:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/203429492",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "utACK.   @paveljanik \"the\" is appropriate there.",
      "created_at" : "2016-03-30T16:17:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7749#issuecomment-203509837",
      "id" : 203509837,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7749",
      "updated_at" : "2016-03-30T16:17:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/203509837",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7749#discussion_r59962426"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7749"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/59962426"
         }
      },
      "body" : "return here?",
      "commit_id" : "d4b854dccfd6afef4a1daf056b15d4f3f0d52eaa",
      "created_at" : "2016-04-16T04:42:46Z",
      "diff_hunk" : "@@ -4505,6 +4505,18 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n         CAddress addrFrom;\n         uint64_t nNonce = 1;\n         vRecv >> pfrom->nVersion >> pfrom->nServices >> nTime >> addrMe;\n+        if (!pfrom->fInbound)\n+        {\n+            addrman.SetServices(pfrom->addr, pfrom->nServices);\n+        }\n+        if (pfrom->nServicesExpected & ~pfrom->nServices)\n+        {\n+            LogPrint(\"net\", \"peer=%d does not offer the expected services (%08x offered, %08x expected); disconnecting\\n\", pfrom->id, pfrom->nServices, pfrom->nServicesExpected);\n+            pfrom->PushMessage(NetMsgType::REJECT, strCommand, REJECT_NONSTANDARD,\n+                               strprintf(\"Expected to offer services %08x\", pfrom->nServicesExpected));\n+            pfrom->fDisconnect = true;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7749#discussion_r59962426",
      "id" : 59962426,
      "original_commit_id" : "d4b854dccfd6afef4a1daf056b15d4f3f0d52eaa",
      "original_position" : 13,
      "path" : "src/main.cpp",
      "position" : 13,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7749",
      "updated_at" : "2016-04-16T04:42:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/59962426",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1047859?v=3",
         "events_url" : "https://api.github.com/users/kazcw/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kazcw/followers",
         "following_url" : "https://api.github.com/users/kazcw/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kazcw/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kazcw",
         "id" : 1047859,
         "login" : "kazcw",
         "organizations_url" : "https://api.github.com/users/kazcw/orgs",
         "received_events_url" : "https://api.github.com/users/kazcw/received_events",
         "repos_url" : "https://api.github.com/users/kazcw/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kazcw/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kazcw/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kazcw"
      }
   },
   {
      "body" : "Is the behavior that @paveljanik observed with his test the intended behavior?  I would have guessed that we'd want `addnode` (or `connect`) to bypass the expected services requirement.",
      "created_at" : "2016-04-22T14:58:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7749#issuecomment-213463898",
      "id" : 213463898,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7749",
      "updated_at" : "2016-04-22T14:58:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/213463898",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=3",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "body" : "Mental note: we should do an exact assignment (rather than or'ing) when directly connected to a peer and it tells us its nVersion.",
      "created_at" : "2016-05-17T07:19:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7749#issuecomment-219638549",
      "id" : 219638549,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7749",
      "updated_at" : "2016-05-17T07:19:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/219638549",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
