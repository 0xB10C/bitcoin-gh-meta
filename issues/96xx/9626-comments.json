[
   {
      "body" : "Concept ACK. Imo these are all fixes for 0.14.\r\n\r\nWill review in detail.",
      "created_at" : "2017-01-24T23:40:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9626#issuecomment-274975095",
      "id" : 274975095,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9626",
      "updated_at" : "2017-01-24T23:40:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/274975095",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9626#discussion_r97680107"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9626"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97680107"
         }
      },
      "body" : "I think it makes sense to log \"already connected\" here, otherwise it looks like the attempt fell into a black hole.",
      "commit_id" : "caa5487cb720c80f8e4a75e7cb77b8c4a1d34989",
      "created_at" : "2017-01-24T23:46:35Z",
      "diff_hunk" : "@@ -342,8 +342,7 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n         CNode* pnode = FindNode((CService)addrConnect);\n         if (pnode)\n         {\n-            pnode->AddRef();\n-            return pnode;\n+            return NULL;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9626#discussion_r97680107",
      "id" : 97680107,
      "original_commit_id" : "caa5487cb720c80f8e4a75e7cb77b8c4a1d34989",
      "original_position" : 6,
      "path" : "src/net.cpp",
      "position" : 6,
      "pull_request_review_id" : 18297464,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9626",
      "updated_at" : "2017-01-24T23:46:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97680107",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9626#discussion_r97680277"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9626"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97680277"
         }
      },
      "body" : "Same here",
      "commit_id" : "caa5487cb720c80f8e4a75e7cb77b8c4a1d34989",
      "created_at" : "2017-01-24T23:47:41Z",
      "diff_hunk" : "@@ -373,12 +372,11 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n             CNode* pnode = FindNode((CService)addrConnect);\n             if (pnode)\n             {\n-                pnode->AddRef();\n                 if (pnode->addrName.empty()) {\n                     pnode->addrName = std::string(pszDest);\n                 }\n                 CloseSocket(hSocket);\n-                return pnode;\n+                return NULL;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9626#discussion_r97680277",
      "id" : 97680277,
      "original_commit_id" : "caa5487cb720c80f8e4a75e7cb77b8c4a1d34989",
      "original_position" : 20,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 18297627,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9626",
      "updated_at" : "2017-01-24T23:47:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97680277",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/9626#discussion_r97681228"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9626"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97681228"
         }
      },
      "body" : "This isn't an issue for 0.14 because it's always been this way, but I really don't like that we pass this out through our signals before adding it locally.\r\n\r\nSo, no objection to this change, but I'd like to clean it up some post-0.14.",
      "commit_id" : "caa5487cb720c80f8e4a75e7cb77b8c4a1d34989",
      "created_at" : "2017-01-24T23:54:55Z",
      "diff_hunk" : "@@ -392,10 +390,6 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n         pnode->nTimeConnected = GetTime();\n         pnode->AddRef();\n         GetNodeSignals().InitializeNode(pnode, *this);\n-        {\n-            LOCK(cs_vNodes);\n-            vNodes.push_back(pnode);\n-        }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/9626#discussion_r97681228",
      "id" : 97681228,
      "original_commit_id" : "caa5487cb720c80f8e4a75e7cb77b8c4a1d34989",
      "original_position" : 31,
      "path" : "src/net.cpp",
      "position" : 40,
      "pull_request_review_id" : 18298604,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/9626",
      "updated_at" : "2017-01-24T23:54:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/97681228",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/417043?v=3",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   }
]
