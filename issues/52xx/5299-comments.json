[
   {
      "body" : "I'm not clear on what problem is being described here.  How is connecting via addnode different?",
      "created_at" : "2015-04-01T10:23:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/5299#issuecomment-88429353",
      "id" : 88429353,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5299",
      "updated_at" : "2015-04-01T10:23:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/88429353",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "Scenario 1:\r\n\r\nSet the appropriate \"addnode\" / \"connect\" args in bitcoin.conf for both nodes, pointing them at each other as described above. Fire them up. Observe the number of peers. Result incongruous (3).\r\n\r\nScenario 2:\r\n\r\nFire both nodes up, without setting the \"addnode\" / \"connect\" args in bitcoin.conf. Connect Node A to Node B, or vice versÃÂ, via the addnode CLI command. Observe the number of peers. Result as expected (1).",
      "created_at" : "2015-04-02T00:14:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/5299#issuecomment-88672490",
      "id" : 88672490,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5299",
      "updated_at" : "2015-04-02T00:14:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/88672490",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8286077?v=3",
         "events_url" : "https://api.github.com/users/21E14/events{/privacy}",
         "followers_url" : "https://api.github.com/users/21E14/followers",
         "following_url" : "https://api.github.com/users/21E14/following{/other_user}",
         "gists_url" : "https://api.github.com/users/21E14/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/21E14",
         "id" : 8286077,
         "login" : "21E14",
         "organizations_url" : "https://api.github.com/users/21E14/orgs",
         "received_events_url" : "https://api.github.com/users/21E14/received_events",
         "repos_url" : "https://api.github.com/users/21E14/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/21E14/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/21E14/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/21E14"
      }
   },
   {
      "body" : "Thanks. How can there be a non-even number of connections with two nodes?  Can you give me the (anonymized) getpeerinfo from each?",
      "created_at" : "2015-04-02T02:27:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/5299#issuecomment-88702468",
      "id" : 88702468,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5299",
      "updated_at" : "2015-04-02T02:27:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/88702468",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "That is the question of course. Haven't stepped through GDB yet.\r\n\r\nSummary: Regtest. NODEB fired up first, NODEC follows. Common IP, separate ports (PORTB, PORTC). Connections 3 on both. If one experiments with the settings, and the startup sequenece, a wide range of peer counts is observed (1,2,3).\r\n\r\nRequested (pseudo-cleaned up & _running off of the latest master_ 4/1/2015, leaving the timestamps untouched) info:\r\nNODE B\r\nbitcoin.conf\r\n\taddnode=IP1:PORTC\r\n\tconnect=IP1:PORTC\r\n\r\n$ ./bitcoin-cli getinfo\r\n{\r\n    \"version\" : 109900,\r\n    \"protocolversion\" : 70002,\r\n    \"walletversion\" : 60000,\r\n    \"balance\" : 1000.00000000,\r\n    \"blocks\" : 937,\r\n    \"timeoffset\" : 0,\r\n    \"connections\" : 3,\r\n    \"proxy\" : \"\",\r\n    \"difficulty\" : 0.00000000,\r\n    \"testnet\" : false,\r\n    \"keypoololdest\" : 1416286280,\r\n    \"keypoolsize\" : 101,\r\n    \"paytxfee\" : 0.00000000,\r\n    \"relayfee\" : 0.00001000,\r\n    \"errors\" : \"This is a pre-release test build - use at your own risk - do not use for mining or merchant applications\"\r\n}\r\n$ ./bitcoin-cli getpeerinfo\r\n[\r\n    {\r\n        \"id\" : 1,\r\n        \"addr\" : \"IP1:PORT1\",\r\n        \"services\" : \"0000000000000001\",\r\n        \"lastsend\" : 1427943077,\r\n        \"lastrecv\" : 1427943077,\r\n        \"bytessent\" : 1022,\r\n        \"bytesrecv\" : 1046,\r\n        \"conntime\" : 1427943077,\r\n        \"timeoffset\" : 0,\r\n        \"pingtime\" : 0.05142700,\r\n        \"version\" : 70002,\r\n        \"subver\" : \"/Satoshi:0.10.99/\",\r\n        \"inbound\" : true,\r\n        \"startingheight\" : 937,\r\n        \"banscore\" : 0,\r\n        \"synced_headers\" : 937,\r\n        \"synced_blocks\" : 937,\r\n        \"inflight\" : [\r\n        ],\r\n        \"whitelisted\" : false\r\n    },\r\n    {\r\n        \"id\" : 2,\r\n        \"addr\" : \"IP1:PORT1+1\",\r\n        \"services\" : \"0000000000000001\",\r\n        \"lastsend\" : 1427943077,\r\n        \"lastrecv\" : 1427943077,\r\n        \"bytessent\" : 215,\r\n        \"bytesrecv\" : 239,\r\n        \"conntime\" : 1427943077,\r\n        \"timeoffset\" : 0,\r\n        \"pingtime\" : 0.05049700,\r\n        \"version\" : 70002,\r\n        \"subver\" : \"/Satoshi:0.10.99/\",\r\n        \"inbound\" : true,\r\n        \"startingheight\" : 937,\r\n        \"banscore\" : 0,\r\n        \"synced_headers\" : -1,\r\n        \"synced_blocks\" : -1,\r\n        \"inflight\" : [\r\n        ],\r\n        \"whitelisted\" : false\r\n    },\r\n    {\r\n        \"id\" : 3,\r\n        \"addr\" : \"IP1:PORTC\",\r\n        \"services\" : \"0000000000000001\",\r\n        \"lastsend\" : 1427943077,\r\n        \"lastrecv\" : 1427943077,\r\n        \"bytessent\" : 239,\r\n        \"bytesrecv\" : 215,\r\n        \"conntime\" : 1427943077,\r\n        \"timeoffset\" : 0,\r\n        \"pingtime\" : 0.05015800,\r\n        \"version\" : 70002,\r\n        \"subver\" : \"/Satoshi:0.10.99/\",\r\n        \"inbound\" : false,\r\n        \"startingheight\" : 937,\r\n        \"banscore\" : 0,\r\n        \"synced_headers\" : -1,\r\n        \"synced_blocks\" : -1,\r\n        \"inflight\" : [\r\n        ],\r\n        \"whitelisted\" : false\r\n    }\r\n]\r\n\r\n\r\n\r\n************************\r\n\r\n\r\nNODE C\r\nbitcoin.conf:\r\n\taddnode=IP1:PORTB\r\n\tconnect=IP1:PORTB\r\n\r\n$ ./bitcoin-cli getinfo\r\n{\r\n    \"version\" : 109900,\r\n    \"protocolversion\" : 70002,\r\n    \"walletversion\" : 60000,\r\n    \"balance\" : 2000.00000000,\r\n    \"blocks\" : 937,\r\n    \"timeoffset\" : 0,\r\n    \"connections\" : 3,\r\n    \"proxy\" : \"\",\r\n    \"difficulty\" : 0.00000000,\r\n    \"testnet\" : false,\r\n    \"keypoololdest\" : 1416201679,\r\n    \"keypoolsize\" : 101,\r\n    \"paytxfee\" : 0.00000000,\r\n    \"relayfee\" : 0.00001000,\r\n    \"errors\" : \"This is a pre-release test build - use at your own risk - do not use for mining or merchant applications\"\r\n}\r\n$ ./bitcoin-cli getpeerinfo\r\n[\r\n    {\r\n        \"id\" : 1,\r\n        \"addr\" : \"IP1:PORTB\",\r\n        \"services\" : \"0000000000000001\",\r\n        \"lastsend\" : 1427943077,\r\n        \"lastrecv\" : 1427943077,\r\n        \"bytessent\" : 1046,\r\n        \"bytesrecv\" : 1022,\r\n        \"conntime\" : 1427943077,\r\n        \"timeoffset\" : 0,\r\n        \"pingtime\" : 0.05212700,\r\n        \"version\" : 70002,\r\n        \"subver\" : \"/Satoshi:0.10.99/\",\r\n        \"inbound\" : false,\r\n        \"startingheight\" : 937,\r\n        \"banscore\" : 0,\r\n        \"synced_headers\" : 937,\r\n        \"synced_blocks\" : 937,\r\n        \"inflight\" : [\r\n        ],\r\n        \"whitelisted\" : false\r\n    },\r\n    {\r\n        \"id\" : 2,\r\n        \"addr\" : \"IP1:PORTB\",\r\n        \"services\" : \"0000000000000001\",\r\n        \"lastsend\" : 1427943077,\r\n        \"lastrecv\" : 1427943077,\r\n        \"bytessent\" : 239,\r\n        \"bytesrecv\" : 215,\r\n        \"conntime\" : 1427943077,\r\n        \"timeoffset\" : 0,\r\n        \"pingtime\" : 0.05145200,\r\n        \"version\" : 70002,\r\n        \"subver\" : \"/Satoshi:0.10.99/\",\r\n        \"inbound\" : false,\r\n        \"startingheight\" : 937,\r\n        \"banscore\" : 0,\r\n        \"synced_headers\" : -1,\r\n        \"synced_blocks\" : -1,\r\n        \"inflight\" : [\r\n        ],\r\n        \"whitelisted\" : false\r\n    },\r\n    {\r\n        \"id\" : 3,\r\n        \"addr\" : \"IP1:PORT2\",\r\n        \"services\" : \"0000000000000001\",\r\n        \"lastsend\" : 1427943077,\r\n        \"lastrecv\" : 1427943077,\r\n        \"bytessent\" : 215,\r\n        \"bytesrecv\" : 239,\r\n        \"conntime\" : 1427943077,\r\n        \"timeoffset\" : 0,\r\n        \"pingtime\" : 0.05165500,\r\n        \"version\" : 70002,\r\n        \"subver\" : \"/Satoshi:0.10.99/\",\r\n        \"inbound\" : true,\r\n        \"startingheight\" : 937,\r\n        \"banscore\" : 0,\r\n        \"synced_headers\" : -1,\r\n        \"synced_blocks\" : -1,\r\n        \"inflight\" : [\r\n        ],\r\n        \"whitelisted\" : false\r\n    }\r\n]\r\n\r\n",
      "created_at" : "2015-04-02T03:17:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/5299#issuecomment-88712788",
      "id" : 88712788,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5299",
      "updated_at" : "2015-04-02T03:17:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/88712788",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8286077?v=3",
         "events_url" : "https://api.github.com/users/21E14/events{/privacy}",
         "followers_url" : "https://api.github.com/users/21E14/followers",
         "following_url" : "https://api.github.com/users/21E14/following{/other_user}",
         "gists_url" : "https://api.github.com/users/21E14/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/21E14",
         "id" : 8286077,
         "login" : "21E14",
         "organizations_url" : "https://api.github.com/users/21E14/orgs",
         "received_events_url" : "https://api.github.com/users/21E14/received_events",
         "repos_url" : "https://api.github.com/users/21E14/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/21E14/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/21E14/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/21E14"
      }
   }
]
