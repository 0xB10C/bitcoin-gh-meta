[
   {
      "author_association" : "NONE",
      "body" : "El mar., 26 de mayo de 2020 2:55 a. m., Michael <notifications@github.com>\nescribiÃ³:\n\n> Implements #18128 <https://github.com/bitcoin/bitcoin/issues/18128>\n> (mostly). From discussion on that issue we've got 3 ACKs (to move from\n> .dmg to .zip), 1 ~0 and 1 NACK. So I've opened this PR to give a better\n> overview of what the changes might actually look like.\n>\n> Gitian builds currently work, however I haven't tested the signer, and\n> that likely needs some additional changes. As mentioned we can drop quite a\n> few packages from depends. There's some commits here that can cleaned up,\n> squashed or dropped.\n>\n> If you're compiling macOS, make appbundle will (as before) build a\n> dynamically linked Bitcoin Core.app. make deploy will still build a\n> statically linked dist/Bitcoin Core.app and will now also create a\n> dist/Bitcoin-Core.zip.\n>\n> Compiling on Linux there has never been a make appbundle rule, and with\n> these changes, make deploy now behaves the same as on macOS. The make\n> deploydir rule has been removed.\n>\n> Initially I was unconvinced (of a swap from .dmg to .zip), however I have\n> come around after looking at these changes. If there is not agreement that\n> \"this is the way\", then I'll revive #18151\n> <https://github.com/bitcoin/bitcoin/pull/18151> and fix it up to include\n> xorriso in depends etc.\n> ------------------------------\n> You can view, comment on, or merge this pull request online at:\n>\n>   https://github.com/bitcoin/bitcoin/pull/19068\n> Commit Summary\n>\n>    - build: add -zip option to macdeployqtplus\n>    - build: remove native_libdmg-hfsplus from depends\n>    - build: remove native_cdrit from depends\n>    - build: remove macOS .dmg background image and generation\n>    - build: remove macOS .DS_Store and .plist generation\n>    - build: note why we set CFBundle*\n>    - build: update gitian descriptors to use zip method\n>    - build: remove -dmg and -fancy argument from macdeployqtplus\n>    - build: remove -sign argument from macdeployqtplus\n>    - build: merge -zip and -volname arguments in macdeployqtplus\n>    - build: move qt_conf to where it's actually used in macdeployqtplus\n>    - build: remove -add-resources argument from macdeployqtplus\n>    - docs: update macOS docs for new zip deployment method\n>\n> File Changes\n>\n>    - *M* Makefile.am\n>    <https://github.com/bitcoin/bitcoin/pull/19068/files#diff-c949f93d03f44a4217d7a138f9e2e54a>\n>    (65)\n>    - *M* ci/test/00_setup_env_mac.sh\n>    <https://github.com/bitcoin/bitcoin/pull/19068/files#diff-f8f760195adbee096a0a78c72242bce4>\n>    (2)\n>    - *M* configure.ac\n>    <https://github.com/bitcoin/bitcoin/pull/19068/files#diff-67e997bcfdac55191033d57a16d1408a>\n>    (6)\n>    - *M* contrib/gitian-descriptors/gitian-osx-signer.yml\n>    <https://github.com/bitcoin/bitcoin/pull/19068/files#diff-e93eadfeb0c10fed75cd1434371bb41c>\n>    (8)\n>    - *M* contrib/gitian-descriptors/gitian-osx.yml\n>    <https://github.com/bitcoin/bitcoin/pull/19068/files#diff-2bf50096db55445178e7238c402f2e5c>\n>    (19)\n>    - *M* contrib/macdeploy/README.md\n>    <https://github.com/bitcoin/bitcoin/pull/19068/files#diff-9de36befe13356841c2699ee0eff4a0a>\n>    (45)\n>    - *D* contrib/macdeploy/background.svg\n>    <https://github.com/bitcoin/bitcoin/pull/19068/files#diff-8552c751b30ae0c0bbb7a7994e13a986>\n>    (34)\n>    - *D* contrib/macdeploy/custom_dsstore.py\n>    <https://github.com/bitcoin/bitcoin/pull/19068/files#diff-b7d8f8738f97ba32c64050567a536ab4>\n>    (59)\n>    - *D* contrib/macdeploy/fancy.plist\n>    <https://github.com/bitcoin/bitcoin/pull/19068/files#diff-c5ee10fdc4e723d0e3bc04985a9b0a88>\n>    (32)\n>    - *M* contrib/macdeploy/macdeployqtplus\n>    <https://github.com/bitcoin/bitcoin/pull/19068/files#diff-e2c1caf49768933aa4719737154e63c8>\n>    (275)\n>    - *M* depends/README.md\n>    <https://github.com/bitcoin/bitcoin/pull/19068/files#diff-36bb097207a4bca436880cdc4cd3f66b>\n>    (2)\n>    - *D* depends/packages/native_biplist.mk\n>    <https://github.com/bitcoin/bitcoin/pull/19068/files#diff-1dd190bdf3a4e6a2d8035444e4517948>\n>    (15)\n>    - *D* depends/packages/native_cdrkit.mk\n>    <https://github.com/bitcoin/bitcoin/pull/19068/files#diff-84e75f47808eba6dd2903afee0156b54>\n>    (26)\n>    - *D* depends/packages/native_ds_store.mk\n>    <https://github.com/bitcoin/bitcoin/pull/19068/files#diff-6d3cefe7abc09f03958627a7c0e9256d>\n>    (16)\n>    - *D* depends/packages/native_libdmg-hfsplus.mk\n>    <https://github.com/bitcoin/bitcoin/pull/19068/files#diff-70c3d4e88ebfdac4940b759ec8d4e35f>\n>    (24)\n>    - *D* depends/packages/native_mac_alias.mk\n>    <https://github.com/bitcoin/bitcoin/pull/19068/files#diff-1fdc24ec38b3c7b6d35d21494e93a296>\n>    (15)\n>    - *M* depends/packages/packages.mk\n>    <https://github.com/bitcoin/bitcoin/pull/19068/files#diff-d7aa5d84559a1c436fb56a7def7f98c0>\n>    (4)\n>    - *D* depends/patches/native_cdrkit/cdrkit-deterministic.patch\n>    <https://github.com/bitcoin/bitcoin/pull/19068/files#diff-fc6091667acaa99f573220e16a7bc06b>\n>    (86)\n>    - *D*\n>    depends/patches/native_libdmg-hfsplus/remove-libcrypto-dependency.patch\n>    <https://github.com/bitcoin/bitcoin/pull/19068/files#diff-92b035867966adf9ac5dff978c7c4096>\n>    (45)\n>    - *M* doc/build-osx.md\n>    <https://github.com/bitcoin/bitcoin/pull/19068/files#diff-5c9db1d4619895b002078a3529a8dc72>\n>    (13)\n>    - *M* doc/dependencies.md\n>    <https://github.com/bitcoin/bitcoin/pull/19068/files#diff-0c8311709d11060c5156268e58f5f209>\n>    (4)\n>\n> Patch Links:\n>\n>    - https://github.com/bitcoin/bitcoin/pull/19068.patch\n>    - https://github.com/bitcoin/bitcoin/pull/19068.diff\n>\n> â\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/19068>, or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AO23BJAVI7UXVROZA2C5PHTRTNYYNANCNFSM4NKCADEQ>\n> .\n>\n",
      "created_at" : "2020-05-26T08:35:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19068#issuecomment-633888593",
      "id" : 633888593,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19068",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMzg4ODU5Mw==",
      "updated_at" : "2020-05-26T08:35:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/633888593",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/62238884?v=4",
         "events_url" : "https://api.github.com/users/ollitsac107/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ollitsac107/followers",
         "following_url" : "https://api.github.com/users/ollitsac107/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ollitsac107/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ollitsac107",
         "id" : 62238884,
         "login" : "ollitsac107",
         "node_id" : "MDQ6VXNlcjYyMjM4ODg0",
         "organizations_url" : "https://api.github.com/users/ollitsac107/orgs",
         "received_events_url" : "https://api.github.com/users/ollitsac107/received_events",
         "repos_url" : "https://api.github.com/users/ollitsac107/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ollitsac107/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ollitsac107/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ollitsac107"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Gitian Build seems to work: https://bitcoin.jonasschnelli.ch/gitian/build/142 \r\nMaybe the ZIP filename could still contain the phrase \"macOS\" or \"osx\".\r\n\r\nConceptual, I'm currently ~0 (I [commented](https://github.com/bitcoin/bitcoin/issues/18128#issuecomment-585323098) on the concept before).\r\nI think it is nice to simplify the build system (probably makes it much easier for guix). Though, I'm currently unsure if this slightly worsens the UX for macOS users. If it does, should we reduce the UX to simplify the build-system (is that an acceptable tradeoff)?\r\n\r\nHowever, if there is a difference in user experience between a zip and a dmg, it is probably marginal.",
      "created_at" : "2020-05-26T11:56:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19068#issuecomment-633979022",
      "id" : 633979022,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19068",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMzk3OTAyMg==",
      "updated_at" : "2020-05-26T11:56:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/633979022",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Is there any \"official\" mac documention or user surveys that suggest which one is the recommended or preferred way?",
      "created_at" : "2020-05-26T16:25:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19068#issuecomment-634131901",
      "id" : 634131901,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19068",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNDEzMTkwMQ==",
      "updated_at" : "2020-05-26T16:25:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/634131901",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK! Great to see the amount of code we can remove.\r\n\r\n-----\r\n\r\n> (probably makes it much easier for guix).\r\n\r\nJust to make myself clear, I am _**for**_ this change because it is a great simplification for a marginal difference in user experience and not because of anything specific to Guix (my current implementation of the Guix macOS build is already able to build the `dmg`). :relaxed: ",
      "created_at" : "2020-05-27T01:03:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19068#issuecomment-634362262",
      "id" : 634362262,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19068",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNDM2MjI2Mg==",
      "updated_at" : "2020-05-27T01:03:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/634362262",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\nYou can add a symlink to `/Applications` to the archive and call it \"Drag Here\" (so it appears on the right).\r\n<img width=\"351\" alt=\"Schermafbeelding 2020-05-27 om 18 29 17\" src=\"https://user-images.githubusercontent.com/10217/83046935-02020e00-a048-11ea-9d3a-1f0975cfed9c.png\">\r\n\r\nWith that it's close enough to what macOS users are used to, with a nice reduction in dependencies and complexity.\r\n\r\nYou could also keep the `.DS_Store` and `.background` folder around for full branding and a nicer layout, but that's pretty marginal.\r\n\r\nAnother nice thing about zip files is that Safari automatically unzips them after download.",
      "created_at" : "2020-05-27T16:40:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19068#issuecomment-634790260",
      "id" : 634790260,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19068",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNDc5MDI2MA==",
      "updated_at" : "2020-05-27T16:49:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/634790260",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18434 (tests: add a test-security target and run it in CI by fanquake)\n* #17311 (build: macOS fix background.svg by RandyMcMillan)\n* #14066 (gitian-linux: Build binaries for 64-bit POWER by luke-jr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-05-27T19:58:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19068#issuecomment-634907849",
      "id" : 634907849,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19068",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNDkwNzg0OQ==",
      "updated_at" : "2020-05-27T19:58:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/634907849",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
