[
   {
      "author_association" : "MEMBER",
      "body" : "Are there steps to test for people that are not me? Or, alternatively, is it possible to write a test for this?",
      "created_at" : "2020-05-22T17:48:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19054#issuecomment-632827065",
      "id" : 632827065,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19054",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMjgyNzA2NQ==",
      "updated_at" : "2020-05-22T17:48:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/632827065",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think this can be tested in `feature_backwards_compatibility.py`. I'll see if I can write a test.\r\n\r\nOtherwise we would need to directly modify the wallet.dat file.",
      "created_at" : "2020-05-22T17:54:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19054#issuecomment-632829467",
      "id" : 632829467,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19054",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMjgyOTQ2Nw==",
      "updated_at" : "2020-05-22T17:54:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/632829467",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "0.16 uses the old 'm' for the hd seed, so I've updated `feature_backwards_compatibility.py` to do an up/downgrade test with a 0.16 wallet. This test also checks that there is no warning when loading the wallet. It catches this error.",
      "created_at" : "2020-05-22T18:58:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19054#issuecomment-632860194",
      "id" : 632860194,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19054",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMjg2MDE5NA==",
      "updated_at" : "2020-05-22T18:58:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/632860194",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19054#discussion_r430638113"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19054"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430638113"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"Skip hdKeypath of 'm'\" (57acd1b27fb6cf46b919a05e3fe50a1c2947321f)\r\n\r\nWould be good to update \"Not applicable when...\" comment above",
      "commit_id" : "7a872702965755ce28f1f17a8d0e0eb93ae4c907",
      "created_at" : "2020-05-26T18:58:58Z",
      "diff_hunk" : "@@ -444,7 +444,7 @@ ReadKeyValue(CWallet* pwallet, CDataStream& ssKey, CDataStream& ssValue,\n                 // Not applicable when path is \"s\" as that indicates a seed\n                 bool internal = false;\n                 uint32_t index = 0;\n-                if (keyMeta.hdKeypath != \"s\") {\n+                if (keyMeta.hdKeypath != \"s\" && keyMeta.hdKeypath != \"m\") {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19054#discussion_r430638113",
      "id" : 430638113,
      "line" : 447,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDYzODExMw==",
      "original_commit_id" : "57acd1b27fb6cf46b919a05e3fe50a1c2947321f",
      "original_line" : 447,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/walletdb.cpp",
      "position" : 5,
      "pull_request_review_id" : 418588458,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19054",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-26T19:11:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430638113",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19054#discussion_r430642553"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19054"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430642553"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"tests: feature_backwards_compatibility.py test 0.16 up/downgrade\" (7a872702965755ce28f1f17a8d0e0eb93ae4c907)\r\n\r\nImplemention seems ideal for this PR, but for future cleanup it could be nice for someone to write some python helper functions and get rid of duplicate code in the 0.16, 0.17, and 0.19 test cases.",
      "commit_id" : "7a872702965755ce28f1f17a8d0e0eb93ae4c907",
      "created_at" : "2020-05-26T19:07:03Z",
      "diff_hunk" : "@@ -331,6 +340,29 @@ def run_test(self):\n         hdkeypath = v17_info[\"hdkeypath\"]\n         pubkey = v17_info[\"pubkey\"]\n \n+        # Copy the 0.16 wallet to the last Bitcoin Core version and open it:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19054#discussion_r430642553",
      "id" : 430642553,
      "line" : 343,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY0MjU1Mw==",
      "original_commit_id" : "7a872702965755ce28f1f17a8d0e0eb93ae4c907",
      "original_line" : 343,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/functional/feature_backwards_compatibility.py",
      "position" : 20,
      "pull_request_review_id" : 418588458,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19054",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-26T19:11:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430642553",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Does this mean that older hd wallets opened prior to this fix have been corrupted?\r\n\r\nAlso, post-fix does this mean that the #17681 functionality (following old hd chains forward) will silently not work for these wallets (since their hd keys just get skipped)?",
      "created_at" : "2020-05-30T22:38:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19054#issuecomment-636393925",
      "id" : 636393925,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19054",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNjM5MzkyNQ==",
      "updated_at" : "2020-05-30T22:38:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636393925",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Does this mean that older hd wallets opened prior to this fix have been corrupted?\r\n> \r\n> Also, post-fix does this mean that the #17681 functionality (following old hd chains forward) will silently not work for these wallets (since their hd keys just get skipped)?\r\n\r\nNo to both. #17681 functionality works regardless of this fix, regardless of age of the HD wallet. This fix is to merely remove an erroneous warning for those older HD wallets.\r\n\r\nThis fix does not skip any HD keys at all. It just skips the keymeta record for the HD seed when it is computing the inactive HD chain from those keymetadata records. The record for the HD seed is not used in that process, hence this patch to skip it.\r\n",
      "created_at" : "2020-05-30T22:55:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19054#issuecomment-636395342",
      "id" : 636395342,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19054",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNjM5NTM0Mg==",
      "updated_at" : "2020-05-30T22:56:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636395342",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
