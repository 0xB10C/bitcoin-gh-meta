[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19065#discussion_r430359949"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430359949"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why can't this be a testing setup with logging disabled, like in the other tests?",
      "commit_id" : "4e16f7674b4d581d6abbbc4f06ebf69aa5bbe67f",
      "created_at" : "2020-05-26T12:02:33Z",
      "diff_hunk" : "@@ -2,15 +2,27 @@\n // Distributed under the MIT software license, see the accompanying\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n+#include <addrdb.h>\n+#include <chainparams.h>\n+#include <net.h>\n+#include <outputtype.h>\n+#include <policy/fees.h>\n #include <rpc/util.h>\n #include <test/fuzz/FuzzedDataProvider.h>\n #include <test/fuzz/fuzz.h>\n #include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n #include <util/error.h>\n \n #include <cstdint>\n #include <vector>\n \n+void initialize()\n+{\n+    SelectParams(CBaseChainParams::REGTEST);\n+    StartMutedLogging();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19065#discussion_r430359949",
      "id" : 430359949,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDM1OTk0OQ==",
      "original_commit_id" : "403c5ad9ad3d9ebbcc7c6ceec0ce677760e0f3b6",
      "original_line" : 23,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/test/fuzz/kitchen_sink.cpp",
      "position" : null,
      "pull_request_review_id" : 418228841,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19065",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-26T18:21:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430359949",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19065#discussion_r430383126"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430383126"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Unfortunately `TestingSetup` introduces non-determinism which makes coverage vary between runs also when using the same set of inputs, see https://github.com/bitcoin/bitcoin/pull/19067#discussion_r429986672 :)",
      "commit_id" : "4e16f7674b4d581d6abbbc4f06ebf69aa5bbe67f",
      "created_at" : "2020-05-26T12:44:38Z",
      "diff_hunk" : "@@ -2,15 +2,27 @@\n // Distributed under the MIT software license, see the accompanying\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n+#include <addrdb.h>\n+#include <chainparams.h>\n+#include <net.h>\n+#include <outputtype.h>\n+#include <policy/fees.h>\n #include <rpc/util.h>\n #include <test/fuzz/FuzzedDataProvider.h>\n #include <test/fuzz/fuzz.h>\n #include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n #include <util/error.h>\n \n #include <cstdint>\n #include <vector>\n \n+void initialize()\n+{\n+    SelectParams(CBaseChainParams::REGTEST);\n+    StartMutedLogging();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19065#discussion_r430383126",
      "id" : 430383126,
      "in_reply_to_id" : 430359949,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDM4MzEyNg==",
      "original_commit_id" : "403c5ad9ad3d9ebbcc7c6ceec0ce677760e0f3b6",
      "original_line" : 23,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/test/fuzz/kitchen_sink.cpp",
      "position" : null,
      "pull_request_review_id" : 418259302,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19065",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-26T18:21:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430383126",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19065#discussion_r430386919"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430386919"
         }
      },
      "author_association" : "MEMBER",
      "body" : "What about BasicTestgingSetup then?",
      "commit_id" : "4e16f7674b4d581d6abbbc4f06ebf69aa5bbe67f",
      "created_at" : "2020-05-26T12:50:51Z",
      "diff_hunk" : "@@ -2,15 +2,27 @@\n // Distributed under the MIT software license, see the accompanying\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n+#include <addrdb.h>\n+#include <chainparams.h>\n+#include <net.h>\n+#include <outputtype.h>\n+#include <policy/fees.h>\n #include <rpc/util.h>\n #include <test/fuzz/FuzzedDataProvider.h>\n #include <test/fuzz/fuzz.h>\n #include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n #include <util/error.h>\n \n #include <cstdint>\n #include <vector>\n \n+void initialize()\n+{\n+    SelectParams(CBaseChainParams::REGTEST);\n+    StartMutedLogging();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19065#discussion_r430386919",
      "id" : 430386919,
      "in_reply_to_id" : 430359949,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDM4NjkxOQ==",
      "original_commit_id" : "403c5ad9ad3d9ebbcc7c6ceec0ce677760e0f3b6",
      "original_line" : 23,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/test/fuzz/kitchen_sink.cpp",
      "position" : null,
      "pull_request_review_id" : 418264174,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19065",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-26T18:21:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430386919",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-05-26T12:53:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19065#issuecomment-634005698",
      "id" : 634005698,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19065",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNDAwNTY5OA==",
      "updated_at" : "2020-05-26T12:53:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/634005698",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19065#discussion_r430395950"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430395950"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think it is the same problem there: I get more setup than I need and a subset of that setup work introduces coverage non-determinism :)\r\n\r\nI prefer opt-ing in to exactly the setup I need: it avoids the non-determinism problem and I also think that makes it easier to reason about the dependencies of each fuzzing harness.",
      "commit_id" : "4e16f7674b4d581d6abbbc4f06ebf69aa5bbe67f",
      "created_at" : "2020-05-26T13:05:00Z",
      "diff_hunk" : "@@ -2,15 +2,27 @@\n // Distributed under the MIT software license, see the accompanying\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n+#include <addrdb.h>\n+#include <chainparams.h>\n+#include <net.h>\n+#include <outputtype.h>\n+#include <policy/fees.h>\n #include <rpc/util.h>\n #include <test/fuzz/FuzzedDataProvider.h>\n #include <test/fuzz/fuzz.h>\n #include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n #include <util/error.h>\n \n #include <cstdint>\n #include <vector>\n \n+void initialize()\n+{\n+    SelectParams(CBaseChainParams::REGTEST);\n+    StartMutedLogging();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19065#discussion_r430395950",
      "id" : 430395950,
      "in_reply_to_id" : 430359949,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDM5NTk1MA==",
      "original_commit_id" : "403c5ad9ad3d9ebbcc7c6ceec0ce677760e0f3b6",
      "original_line" : 23,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/test/fuzz/kitchen_sink.cpp",
      "position" : null,
      "pull_request_review_id" : 418276058,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19065",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-26T18:21:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430395950",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19065#discussion_r430403885"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430403885"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If non-determinism is an issue for fuzz tests, it is also an issue for unit tests etc. Instead of solving it fresh in every single test case, I'd rather fix it once and for all.\r\n\r\nUsing hacks that don't clean up after themselves, depend on global state and leave global state dirty is asking for mishaps. Currently the fuzz datadir is set to the default location of the datadir. I don't think I need to repeat why this is bad.\r\n\r\nIf the basic testing setup is still too bloated, then please add one that is stripped down, so that unit and bench tests can use it as well.",
      "commit_id" : "4e16f7674b4d581d6abbbc4f06ebf69aa5bbe67f",
      "created_at" : "2020-05-26T13:17:11Z",
      "diff_hunk" : "@@ -2,15 +2,27 @@\n // Distributed under the MIT software license, see the accompanying\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n+#include <addrdb.h>\n+#include <chainparams.h>\n+#include <net.h>\n+#include <outputtype.h>\n+#include <policy/fees.h>\n #include <rpc/util.h>\n #include <test/fuzz/FuzzedDataProvider.h>\n #include <test/fuzz/fuzz.h>\n #include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n #include <util/error.h>\n \n #include <cstdint>\n #include <vector>\n \n+void initialize()\n+{\n+    SelectParams(CBaseChainParams::REGTEST);\n+    StartMutedLogging();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19065#discussion_r430403885",
      "id" : 430403885,
      "in_reply_to_id" : 430359949,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQwMzg4NQ==",
      "original_commit_id" : "403c5ad9ad3d9ebbcc7c6ceec0ce677760e0f3b6",
      "original_line" : 23,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/test/fuzz/kitchen_sink.cpp",
      "position" : null,
      "pull_request_review_id" : 418286682,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19065",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-26T18:21:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430403885",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19065#discussion_r430586406"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430586406"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I was wrong about `BasicTestingSetup`: it seems like only `TestingSetup` introduces coverage non-determinism.\r\n\r\nThis shows the issue with `TestingSetup`:\r\n\r\n```\r\n# With TestingSetup:\r\n$ src/test/fuzz/kitchen_sink corpus/\r\nâ¦\r\n#20425  NEW    cov: 3867 ft: 12141 corp: 248/49Kb lim: 607 exec/s: 464 rss: 357Mb L: 605/607 MS: 5 InsertRepeatedBytes-CopyPart-InsertByte-ChangeBinInt-CopyPart-\r\n        NEW_FUNC[1/68]: 0x56533ed75c60 in std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::c_str() const /usr/lib/gcc/x86_64-linux-gnu/8/../../../../include/c++/8/bits/basic_string.h:2291\r\n        NEW_FUNC[2/68]: 0x56533f03dfc0 in std::function<void ()>::function(std::function<void ()> const&) /usr/lib/gcc/x86_64-linux-gnu/8/../../../../include/c++/8/bits/std_function.h:655\r\n#20441  NEW    cov: 4384 ft: 12690 corp: 249/49Kb lim: 607 exec/s: 454 rss: 358Mb L: 326/607 MS: 1 CopyPart-\r\nâ¦\r\n#28628        NEW    cov: 4384 ft: 12731 corp: 258/54Kb lim: 652 exec/s: 454 rss: 452Mb L: 652/652 MS: 1 CrossOver-\r\n==6668== libFuzzer: run interrupted; exiting\r\n\r\n$ src/test/fuzz/kitchen_sink corpus/\r\n#423    INITED cov: 3867 ft: 12182 corp: 245/48Kb exec/s: 423 rss: 148Mb\r\n```\r\n\r\nNotice the non-deterministic coverage increase from 3867 to 4384 which drops back to 3867 when the fuzzer is restarted.\r\n\r\nI'll go with `BasicTestingSetup` :)\r\n\r\n",
      "commit_id" : "4e16f7674b4d581d6abbbc4f06ebf69aa5bbe67f",
      "created_at" : "2020-05-26T17:32:12Z",
      "diff_hunk" : "@@ -2,15 +2,27 @@\n // Distributed under the MIT software license, see the accompanying\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n+#include <addrdb.h>\n+#include <chainparams.h>\n+#include <net.h>\n+#include <outputtype.h>\n+#include <policy/fees.h>\n #include <rpc/util.h>\n #include <test/fuzz/FuzzedDataProvider.h>\n #include <test/fuzz/fuzz.h>\n #include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n #include <util/error.h>\n \n #include <cstdint>\n #include <vector>\n \n+void initialize()\n+{\n+    SelectParams(CBaseChainParams::REGTEST);\n+    StartMutedLogging();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19065#discussion_r430586406",
      "id" : 430586406,
      "in_reply_to_id" : 430359949,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDU4NjQwNg==",
      "original_commit_id" : "403c5ad9ad3d9ebbcc7c6ceec0ce677760e0f3b6",
      "original_line" : 23,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/test/fuzz/kitchen_sink.cpp",
      "position" : null,
      "pull_request_review_id" : 418523525,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19065",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-26T18:21:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430586406",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19065#discussion_r430599736"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19065"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430599736"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Coverage stability with `BasicTestingSetup` vs `TestingSetup`:\r\n\r\nFuzzer with an empty `test_one_input` function, and an `initialize` function containing `static const BasicTestingSetup basic_testing_setup`:\r\n\r\n```\r\nINFO: A corpus is not provided, starting from an empty corpus\r\n#2      INITED cov: 58 ft: 59 corp: 1/1b exec/s: 0 rss: 125Mb\r\n#65536  pulse  cov: 58 ft: 59 corp: 1/1b lim: 652 exec/s: 21845 rss: 145Mb\r\n#131072 pulse  cov: 58 ft: 59 corp: 1/1b lim: 1300 exec/s: 21845 rss: 188Mb\r\n#262144 pulse  cov: 58 ft: 59 corp: 1/1b lim: 2611 exec/s: 21845 rss: 339Mb\r\n#524288 pulse  cov: 58 ft: 59 corp: 1/1b lim: 4096 exec/s: 20164 rss: 715Mb\r\n#1048576        pulse  cov: 58 ft: 59 corp: 1/1b lim: 4096 exec/s: 20560 rss: 716Mb\r\n#2097152        pulse  cov: 58 ft: 59 corp: 1/1b lim: 4096 exec/s: 20560 rss: 716Mb\r\n```\r\n\r\nFuzzer with an empty `test_one_input` function, and an `initialize` function containing `static const TestingSetup testing_setup`:\r\n\r\n```\r\nINFO: A corpus is not provided, starting from an empty corpus\r\n#2      INITED cov: 58 ft: 59 corp: 1/1b exec/s: 0 rss: 134Mb\r\n#65536  pulse  cov: 58 ft: 59 corp: 1/1b lim: 652 exec/s: 21845 rss: 155Mb\r\n#131072 pulse  cov: 58 ft: 59 corp: 1/1b lim: 1300 exec/s: 21845 rss: 198Mb\r\n#262144 pulse  cov: 58 ft: 59 corp: 1/1b lim: 2611 exec/s: 21845 rss: 348Mb\r\n#524288 pulse  cov: 58 ft: 59 corp: 1/1b lim: 4096 exec/s: 20164 rss: 715Mb\r\n        NEW_FUNC[1/85]: 0x55e526ad96c0 in std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string<std::allocator<char> >(char const*, std::allocator<char> const&) /usr/lib/gcc/x86_64-linux-gnu/8/../../../../include/c++/8/bits/basic_string.h:516\r\n        NEW_FUNC[2/85]: 0x55e526adc5a0 in std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_local_data() /usr/lib/gcc/x86_64-linux-gnu/8/../../../../include/c++/8/bits/basic_string.h:180\r\n#910854 NEW    cov: 663 ft: 143 corp: 2/3b lim: 4096 exec/s: 20241 rss: 717Mb L: 2/2 MS: 2 InsertByte-CopyPart-\r\n#1048576        pulse  cov: 663 ft: 143 corp: 2/3b lim: 4096 exec/s: 20560 rss: 717Mb\r\n        NEW_FUNC[1/10]: 0x55e526ad95c0 in std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::c_str() const /usr/lib/gcc/x86_64-linux-gnu/8/../../../../include/c++/8/bits/basic_string.h:2291\r\n        NEW_FUNC[2/10]: 0x55e526adc140 in std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >::_M_dispose() /usr/lib/gcc/x86_64-linux-gnu/8/../../../../include/c++/8/bits/basic_string.h:219\r\n#1830962        NEW    cov: 711 ft: 335 corp: 3/4099b lim: 4096 exec/s: 20572 rss: 717Mb L: 4096/4096 MS: 3 ChangeBinInt-CrossOver-ChangeASCIIInt-\r\n#2097152        pulse  cov: 711 ft: 335 corp: 3/4099b lim: 4096 exec/s: 20360 rss: 717Mb\r\n```\r\n",
      "commit_id" : "4e16f7674b4d581d6abbbc4f06ebf69aa5bbe67f",
      "created_at" : "2020-05-26T17:54:55Z",
      "diff_hunk" : "@@ -2,15 +2,27 @@\n // Distributed under the MIT software license, see the accompanying\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n+#include <addrdb.h>\n+#include <chainparams.h>\n+#include <net.h>\n+#include <outputtype.h>\n+#include <policy/fees.h>\n #include <rpc/util.h>\n #include <test/fuzz/FuzzedDataProvider.h>\n #include <test/fuzz/fuzz.h>\n #include <test/fuzz/util.h>\n+#include <test/util/setup_common.h>\n #include <util/error.h>\n \n #include <cstdint>\n #include <vector>\n \n+void initialize()\n+{\n+    SelectParams(CBaseChainParams::REGTEST);\n+    StartMutedLogging();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19065#discussion_r430599736",
      "id" : 430599736,
      "in_reply_to_id" : 430359949,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDU5OTczNg==",
      "original_commit_id" : "403c5ad9ad3d9ebbcc7c6ceec0ce677760e0f3b6",
      "original_line" : 23,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/test/fuzz/kitchen_sink.cpp",
      "position" : null,
      "pull_request_review_id" : 418540251,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19065",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-26T18:21:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430599736",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Anything left to do here? :)  The changes are limited to `src/test/fuzz/` and should hopefully be trivial to review.",
      "created_at" : "2020-06-28T19:20:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19065#issuecomment-650809846",
      "id" : 650809846,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19065",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1MDgwOTg0Ng==",
      "updated_at" : "2020-06-28T19:20:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/650809846",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I cannot build this branch with either `clang/clang++` or `afl-gcc/afl-g++`:\r\n\r\nclang version: `6.0.0-1ubuntu2 (tags/RELEASE_600/final)`\r\nafl-gcc/afl-g++ built from afl master\r\n\r\nMake output:\r\n```\r\nMaking all in src\r\n  2 make[1]: Entering directory '/root/bitcoin/src'\r\n  3 make[2]: Entering directory '/root/bitcoin/src'\r\n  4   CXX      test/fuzz/test_fuzz_addition_overflow-addition_overflow.o\r\n  5 In file included from test/fuzz/addition_overflow.cpp:7:\r\n  6 ./test/fuzz/util.h:62:18: error: no template named 'optional' in namespace 'std'; did you mean 'Optional'?\r\n  7 NODISCARD inline std::optional<T> ConsumeDeserializable(FuzzedDataProvider& fuzzed_data_provider, const si    ze_t max_length = 4096) noexcept\r\n  8                  ^~~~~~~~~~~~~\r\n  9                  Optional\r\n 10 ./optional.h:14:1: note: 'Optional' declared here\r\n 11 using Optional = boost::optional<T>;\r\n 12 ^\r\n 13 In file included from test/fuzz/addition_overflow.cpp:7:\r\n 14 ./test/fuzz/util.h:70:16: error: no member named 'nullopt' in namespace 'std'; did you mean simply 'nullop    t'?\r\n 15         return std::nullopt;\r\n 16                ^~~~~~~~~~~~\r\n 17                nullopt\r\n 18 ./optional.h:24:14: note: 'nullopt' declared here\r\n 19 static auto& nullopt = boost::none;\r\n 20              ^\r\n 21 2 errors generated.\r\n 22 Makefile:14081: recipe for target 'test/fuzz/test_fuzz_addition_overflow-addition_overflow.o' failed\r\n 23 make[2]: *** [test/fuzz/test_fuzz_addition_overflow-addition_overflow.o] Error 1\r\n 24 make[2]: Leaving directory '/root/bitcoin/src'\r\n 25 Makefile:17268: recipe for target 'all-recursive' failed\r\n 26 make[1]: *** [all-recursive] Error 1\r\n 27 make[1]: Leaving directory '/root/bitcoin/src'\r\n 28 Makefile:785: recipe for target 'all-recursive' failed\r\n 29 make: *** [all-recursive] Error 1\r\n```\r\n\r\nAm I doing something wrong? I have C++17 features and can build on master.",
      "created_at" : "2020-07-13T17:47:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19065#issuecomment-657699951",
      "id" : 657699951,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19065",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1NzY5OTk1MQ==",
      "updated_at" : "2020-07-13T17:58:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/657699951",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Crypt-iQ So to clarify, you can build current `master`, but not this pull request merged into current `master`?",
      "created_at" : "2020-07-13T17:54:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19065#issuecomment-657703107",
      "id" : 657703107,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19065",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1NzcwMzEwNw==",
      "updated_at" : "2020-07-13T17:54:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/657703107",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke I can build the current `master` branch, but not this branch as it is. I checkout this branch via:\r\n\r\n```\r\ngit fetch origin pull/19065/head:addrmanfuzz\r\n```",
      "created_at" : "2020-07-13T17:57:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19065#issuecomment-657704505",
      "id" : 657704505,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19065",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1NzcwNDUwNQ==",
      "updated_at" : "2020-07-13T17:57:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/657704505",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Crypt-iQ Oh, that's weird! Thanks for reporting. I've now rebased this PR on current `master`. Would you mind testing again? :)",
      "created_at" : "2020-07-13T22:37:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19065#issuecomment-657828502",
      "id" : 657828502,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19065",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1NzgyODUwMg==",
      "updated_at" : "2020-07-13T22:37:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/657828502",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@practicalswift I think you may have forgotten to push it up :) And will test once it's up",
      "created_at" : "2020-07-14T01:20:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19065#issuecomment-657911100",
      "id" : 657911100,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19065",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1NzkxMTEwMA==",
      "updated_at" : "2020-07-14T01:20:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/657911100",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   }
]
