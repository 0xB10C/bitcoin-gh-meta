[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19031#discussion_r428140123"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19031"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/428140123"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The signalling is done using a service flag because the service flags are gossiped and thus a node can choose to connect to `ADDRv2`-supporting nodes in the hopes of learning more e.g. Tor v3 addresses. For sure it is not going to learn any Tor v3, I2P or CJDNS addresses from nodes that do not support `ADDRv2`.\r\n\r\nHowever, [BIP155](https://github.com/bitcoin/bips/blob/master/bip-0155.mediawiki#compatibility) mentions support should be signalled by protocol version bump. And [pull#16748 [WIP] Add support for addrv2 (BIP155)](https://github.com/bitcoin/bitcoin/pull/16748) implemented this via a dedicated new type of messages `sendaddrv2`.\r\n\r\nI think that signalling via a service flag gives the most flexibility and thus I took the liberty to implement it that way, but I do not insist on it. I can change it to \"protocol version bump\", \"dedicated new message type\" or something else.\r\n",
      "commit_id" : "89d346a488141d028ed460de51164d4a367e36e7",
      "created_at" : "2020-05-20T16:18:09Z",
      "diff_hunk" : "@@ -263,6 +269,8 @@ enum ServiceFlags : uint64_t {\n     // NODE_WITNESS indicates that a node can be asked for blocks and transactions including\n     // witness data.\n     NODE_WITNESS = (1 << 3),\n+    // NODE_ADDRv2 indicates send and receive support for ADDRv2 messages (BIP155).\n+    NODE_ADDRv2 = (1 << 4),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19031#discussion_r428140123",
      "id" : 428140123,
      "line" : 273,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE0MDEyMw==",
      "original_commit_id" : "89d346a488141d028ed460de51164d4a367e36e7",
      "original_line" : 273,
      "original_position" : 18,
      "original_start_line" : 272,
      "path" : "src/protocol.h",
      "position" : 18,
      "pull_request_review_id" : 415501821,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19031",
      "side" : "RIGHT",
      "start_line" : 272,
      "start_side" : "RIGHT",
      "updated_at" : "2020-05-20T16:18:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/428140123",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   }
]
