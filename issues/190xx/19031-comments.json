[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19031#discussion_r428140123"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19031"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/428140123"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The signalling is done using a service flag because the service flags are gossiped and thus a node can choose to connect to `ADDRv2`-supporting nodes in the hopes of learning more e.g. Tor v3 addresses. For sure it is not going to learn any Tor v3, I2P or CJDNS addresses from nodes that do not support `ADDRv2`.\r\n\r\nHowever, [BIP155](https://github.com/bitcoin/bips/blob/master/bip-0155.mediawiki#compatibility) mentions support should be signalled by protocol version bump. And [pull#16748 [WIP] Add support for addrv2 (BIP155)](https://github.com/bitcoin/bitcoin/pull/16748) implemented this via a dedicated new type of messages `sendaddrv2`.\r\n\r\nI think that signalling via a service flag gives the most flexibility and thus I took the liberty to implement it that way, but I do not insist on it. I can change it to \"protocol version bump\", \"dedicated new message type\" or something else.\r\n",
      "commit_id" : "89d346a488141d028ed460de51164d4a367e36e7",
      "created_at" : "2020-05-20T16:18:09Z",
      "diff_hunk" : "@@ -263,6 +269,8 @@ enum ServiceFlags : uint64_t {\n     // NODE_WITNESS indicates that a node can be asked for blocks and transactions including\n     // witness data.\n     NODE_WITNESS = (1 << 3),\n+    // NODE_ADDRv2 indicates send and receive support for ADDRv2 messages (BIP155).\n+    NODE_ADDRv2 = (1 << 4),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19031#discussion_r428140123",
      "id" : 428140123,
      "line" : 273,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE0MDEyMw==",
      "original_commit_id" : "89d346a488141d028ed460de51164d4a367e36e7",
      "original_line" : 273,
      "original_position" : 18,
      "original_start_line" : 272,
      "path" : "src/protocol.h",
      "position" : 18,
      "pull_request_review_id" : 415501821,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19031",
      "side" : "RIGHT",
      "start_line" : 272,
      "start_side" : "RIGHT",
      "updated_at" : "2020-05-20T16:18:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/428140123",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK :smile: \r\n\r\nAm I correct in saying that you've replaced `NetworkID` in my implementation with `Bip155NetworkId`? (totally fine btw, just wanted to make sure)",
      "created_at" : "2020-05-20T16:55:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19031#issuecomment-631599290",
      "id" : 631599290,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19031",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMTU5OTI5MA==",
      "updated_at" : "2020-05-20T16:55:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/631599290",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK!",
      "created_at" : "2020-05-20T17:03:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19031#issuecomment-631603514",
      "id" : 631603514,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19031",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMTYwMzUxNA==",
      "updated_at" : "2020-05-20T17:03:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/631603514",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Am I correct in saying that you've replaced `NetworkID` in my implementation with `Bip155NetworkId`? (totally fine btw, just wanted to make sure)\r\n\r\nYes, thanks for asking!\r\n\r\nIdeally we would have just one `enum` for network types, not two. That would contain the network ids from BIP155 + the other ones we have now - unroutable, internal/name, etc. But the problem is that lots of code relies on the values being sequential - there are loops from `0` to `NET_MAX`. I did not wanted to plant e.g. \"unroutable\" as `0x07` just after `CJDNS` or to change those loops and assumptions because it would bloat this PR too much.\r\n\r\nSo I introduced a second `enum` but made it private inside `CNetAddr` and named it `BIP155...` to denote that it contains just the networks mentioned in BIP155 and nothing else.",
      "created_at" : "2020-05-20T18:17:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19031#issuecomment-631641564",
      "id" : 631641564,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19031",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMTY0MTU2NA==",
      "updated_at" : "2020-05-20T18:17:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/631641564",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19070 (p2p: Signal support for compact block filters with NODE_COMPACT_FILTERS by jnewbery)\n* #18937 (refactor: s/command/msg_type/ in CNetMsgMaker and CSerializedNetMsg by theStack)\n* #18849 (The Zero Allocations project by jb55)\n* #18722 (addrman: improve performance by using more suitable containers by vasild)\n* #18450 (util: Use locale independent ToString(â¦) instead of locale dependent strprintf(â¦) for low-level string formatting by practicalswift)\n* #18165 (Consolidate service flag bit-to-name conversion to a shared serviceFlagToStr function by luke-jr)\n* #17944 (netaddress: Simplify reachability logic by dongcarl)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-05-20T18:57:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19031#issuecomment-631662338",
      "id" : 631662338,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19031",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMTY2MjMzOA==",
      "updated_at" : "2020-05-27T20:17:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/631662338",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-05-20T19:31:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19031#issuecomment-631679778",
      "id" : 631679778,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19031",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMTY3OTc3OA==",
      "updated_at" : "2020-05-20T19:31:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/631679778",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. WIll do a good review later.",
      "created_at" : "2020-05-20T22:13:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19031#issuecomment-631755683",
      "id" : 631755683,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19031",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMTc1NTY4Mw==",
      "updated_at" : "2020-05-20T22:13:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/631755683",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-05-29T09:49:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19031#issuecomment-635882617",
      "id" : 635882617,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19031",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNTg4MjYxNw==",
      "updated_at" : "2020-05-29T09:49:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/635882617",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
