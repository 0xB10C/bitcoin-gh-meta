[
   {
      "author_association" : "MEMBER",
      "body" : "What does this change? Why?",
      "created_at" : "2020-05-21T16:52:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19041#issuecomment-632220567",
      "id" : 632220567,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19041",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMjIyMDU2Nw==",
      "updated_at" : "2020-05-21T16:52:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/632220567",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@sipa Looks like it extends tsan checks to include checks on `std::thread` handling etc.\r\n\r\nAdding `libc++-dev` seems to be a way to fix the build: https://packages.ubuntu.com/xenial/amd64/libc++-dev/filelist\r\n\r\nHow about running both the clang-9 wallet+qt version and the clang-10 libc++? Or is there not meaningful threading to justify it?",
      "created_at" : "2020-05-26T21:04:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19041#issuecomment-634278436",
      "id" : 634278436,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19041",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNDI3ODQzNg==",
      "updated_at" : "2020-05-26T21:04:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/634278436",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18077 (net: Add NAT-PMP port forwarding support by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-05-27T20:14:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19041#issuecomment-634915248",
      "id" : 634915248,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19041",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNDkxNTI0OA==",
      "updated_at" : "2020-06-02T15:46:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/634915248",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This fails because the suppressions can not be applied:\r\n\r\n```\r\n==8563==WARNING: invalid path to external symbolizer!\r\n\r\n==8563==WARNING: Failed to use and restart external symbolizer!\r\n\r\n==================\r\n\r\nWARNING: ThreadSanitizer: double lock of a mutex (pid=8563)\r\n\r\n    #0 <null> <null> (bitcoind+0x7e8d6)\r\n\r\n    #1 <null> <null> (libc++.so.1+0x83505)\r\n\r\n    #2 <null> <null> (bitcoind+0x13458a)\r\n\r\n    #3 <null> <null> (bitcoind+0x360bdc)\r\n\r\n    #4 <null> <null> (bitcoind+0x36b491)\r\n\r\n    #5 <null> <null> (bitcoind+0x36af3e)\r\n\r\n    #6 <null> <null> (bitcoind+0x3334e0)\r\n\r\n    #7 <null> <null> (bitcoind+0x38568a)\r\n\r\n    #8 <null> <null> (bitcoind+0x11a65a)\r\n\r\n    #9 <null> <null> (bitcoind+0x600b6e)\r\n\r\n  Location is global '<null>' at 0x000000000000 (bitcoind+0x000001347f30)\r\n\r\n  Mutex M131381 (0x55c3485def30) created at:\r\n\r\n    #0 <null> <null> (bitcoind+0x7e8d6)\r\n\r\n    #1 <null> <null> (libc++.so.1+0x83505)\r\n\r\n    #2 <null> <null> (bitcoind+0xf136c)\r\n\r\n    #3 <null> <null> (libc.so.6+0x270b2)\r\n\r\nSUMMARY: ThreadSanitizer: double lock of a mutex (/home/travis/build/bitcoin/bitcoin/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/bitcoind+0x7e8d6) \r\n\r\n==================\r\n```\r\n\r\nAnyone knows how to fix this? @practicalswift maybe?\r\n\r\nI already tried setting PATH to `$PATH:/usr/lib/llvm-10/bin/` to add llvm-symbolizer directory to PATH, but that didn't help",
      "created_at" : "2020-05-30T13:19:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19041#issuecomment-636330032",
      "id" : 636330032,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19041",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNjMzMDAzMg==",
      "updated_at" : "2020-05-30T13:19:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636330032",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Fixed all issues. Travis green on the tsan run. This is ready for review. The changes are split out into separate micro-commits, so should be easier to review.",
      "created_at" : "2020-05-31T23:05:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19041#issuecomment-636544216",
      "id" : 636544216,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19041",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNjU0NDIxNg==",
      "updated_at" : "2020-05-31T23:05:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636544216",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK faf62e6ed0ca45db44c370844c3515eb5a8cda12\r\n\r\nGiven the number of new suppressions I suggest also opening an issue for tackling them :)",
      "created_at" : "2020-06-01T07:39:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19041#issuecomment-636669801",
      "id" : 636669801,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19041",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNjY2OTgwMQ==",
      "updated_at" : "2020-06-01T07:39:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636669801",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.\r\n\r\nCould removing `llvm` path in faf62e6ed0ca45db44c370844c3515eb5a8cda12 affect other builds with sanitizers?\r\n\r\nI still not fully understand what is (potentially) wrong with code which emits \"double locks\" warnings about _recursive_ mutexes. I can easy reproduce such warning but it does not give answers though.\r\n\r\nCould someone point me to resources to get knowledge?",
      "created_at" : "2020-06-01T08:48:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19041#issuecomment-636707654",
      "id" : 636707654,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19041",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNjcwNzY1NA==",
      "updated_at" : "2020-06-01T08:48:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636707654",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@hebasto Recursive mutexes are generally considered to be a bad idea. They work, and do what they're designed for - reentering a mutex you already hold is perfectly legal with them. However, they're generally a sign of badly structured code. In well-designed systems, you have code running inside the mutex, and code outside, and there is a clean barrier between the two. The fact that you need a recursive mutex means you have code that's trying to be useful in both, only making the boundary unclear.",
      "created_at" : "2020-06-01T09:00:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19041#issuecomment-636715576",
      "id" : 636715576,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19041",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNjcxNTU3Ng==",
      "updated_at" : "2020-06-01T09:00:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636715576",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Could removing llvm path in faf62e6 affect other builds with sanitizers?\r\n\r\nNo, because the PATH is never passed into the ci container (docker) anyway and is therefore unset either way.",
      "created_at" : "2020-06-01T10:41:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19041#issuecomment-636776369",
      "id" : 636776369,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19041",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNjc3NjM2OQ==",
      "updated_at" : "2020-06-01T10:41:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636776369",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I still not fully understand what is (potentially) wrong with code which emits \"double locks\" warnings about recursive mutexes. I can easy reproduce such warning but it does not give answers though.\r\n\r\nI checked the first warning and it is about a plain mutex, not recursive one:\r\n\r\n```\r\nsrc/init.cpp:static Mutex g_genesis_wait_mutex;\r\n```\r\n\r\nI suggest we simply accept the suppressions file for now and then work our way out of this by \r\n* removing one line in the suppressions file\r\n* observing the warning again\r\n* fixing the bug\r\n* observing that the warning is gone and create a pull request",
      "created_at" : "2020-06-01T10:44:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19041#issuecomment-636777944",
      "id" : 636777944,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19041",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNjc3Nzk0NA==",
      "updated_at" : "2020-06-01T10:44:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636777944",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> maybe re-organize commits to modify suppressions in a single one?\r\n\r\nI have a slight preference to keep it as is:\r\n\r\n* The commits don't mention that, but the first one is a result of running tsan in Fedora, the second commit is the result of running tsan in Focal\r\n* Not invalidate reviews :)",
      "created_at" : "2020-06-02T22:51:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19041#issuecomment-637848322",
      "id" : 637848322,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19041",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNzg0ODMyMg==",
      "updated_at" : "2020-06-02T22:51:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/637848322",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
