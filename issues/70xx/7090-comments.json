[
   {
      "body" : "Concept ACK, but I'm not sure setting onion proxy to 127.0.0.1:9051 by default is a good idea. \r\nEven if no tor is present it will try and try and keep trying to connect to onions.\r\n\r\nMaybe a better approach would be to have torcontrol set -onion proxy automatically, when it manages to negotiate with tor?\r\n(possibly it could even ask tor what its port it)\r\n",
      "created_at" : "2015-11-24T14:54:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7090#issuecomment-159292023",
      "id" : 159292023,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7090",
      "updated_at" : "2015-11-24T14:58:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/159292023",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "So, the disadvantage with that idea is support for the HS control thing is actually pretty recent, while connecting to 127.0.0.1:9050 works with any Tor version. OTOH, come to think of it there's a valid argument that we want the # of nodes connecting to HS's to grow in line with the number of nodes making them available.",
      "created_at" : "2015-11-24T14:59:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7090#issuecomment-159293195",
      "id" : 159293195,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7090",
      "updated_at" : "2015-11-24T14:59:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/159293195",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "In principle the tor control port authentication/communication works with older versions. It's just the HS creation itself that is recent. If the control connection is also used for other things it could tolerate that failing.",
      "created_at" : "2015-11-24T15:09:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7090#issuecomment-159296547",
      "id" : 159296547,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7090",
      "updated_at" : "2015-11-24T15:09:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/159296547",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj How about this?\r\n\r\nI looked into getting the proxy info automatically; doesn't look to be trivial as you have to use the GETCONF command on the control port to read the config file values yourself, and what they actually mean for you is non-trivial. I'm inclined to just use the hardcoded default - pretty rare for that to be setup differently.",
      "created_at" : "2015-11-24T15:30:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7090#issuecomment-159304963",
      "id" : 159304963,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7090",
      "updated_at" : "2015-11-24T15:30:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/159304963",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "(and yeah, the duplication of code is kinda ugly; open to suggestions)",
      "created_at" : "2015-11-24T15:33:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7090#issuecomment-159305729",
      "id" : 159305729,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7090",
      "updated_at" : "2015-11-24T15:33:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/159305729",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   }
]
