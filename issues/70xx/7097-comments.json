[
   {
      "body" : "If `CheckDiskSpace()` detects low disk space (IIRC <50MB), it results in a shutdown (not a crash).\r\nA solution could be to stop all network traffic and ask the user to increase available disk space or prune the blockchain.\r\nBut another state (disk-full-no-net-activity-state) is always a burden and should be avoided.",
      "created_at" : "2015-11-26T10:34:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7097#issuecomment-159872056",
      "id" : 159872056,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7097",
      "updated_at" : "2015-11-26T10:34:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/159872056",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@jonasschnelli The problem is that I can't use the CLI if the daemon is not running. My point is, I can make use of the actual downloaded data or the available features. So why shut it down? Or maybe there is a technical limitation that I'm not aware of.",
      "created_at" : "2015-11-26T19:35:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7097#issuecomment-159983205",
      "id" : 159983205,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7097",
      "updated_at" : "2015-11-26T19:35:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/159983205",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/909237?v=3",
         "events_url" : "https://api.github.com/users/omarabid/events{/privacy}",
         "followers_url" : "https://api.github.com/users/omarabid/followers",
         "following_url" : "https://api.github.com/users/omarabid/following{/other_user}",
         "gists_url" : "https://api.github.com/users/omarabid/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/omarabid",
         "id" : 909237,
         "login" : "omarabid",
         "organizations_url" : "https://api.github.com/users/omarabid/orgs",
         "received_events_url" : "https://api.github.com/users/omarabid/received_events",
         "repos_url" : "https://api.github.com/users/omarabid/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/omarabid/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/omarabid/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/omarabid"
      }
   },
   {
      "body" : "@omarabid: In case of a full disk, did you try to prune? Start the bitcoind (or bitcoin-qt) with `-prune=550`. Would be nice to hear if that work in a such full-disk-case.",
      "created_at" : "2015-11-26T19:45:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7097#issuecomment-159985114",
      "id" : 159985114,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7097",
      "updated_at" : "2015-11-26T19:45:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/159985114",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "That worked (and freed my AWS disk space). I wonder why this should be GUI only feature, especially that I'm using the CLI. Maybe have both? Anyway, there should be a taker for this issue first :)",
      "created_at" : "2015-11-26T19:58:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7097#issuecomment-159986426",
      "id" : 159986426,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7097",
      "updated_at" : "2015-11-26T19:58:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/159986426",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/909237?v=3",
         "events_url" : "https://api.github.com/users/omarabid/events{/privacy}",
         "followers_url" : "https://api.github.com/users/omarabid/followers",
         "following_url" : "https://api.github.com/users/omarabid/following{/other_user}",
         "gists_url" : "https://api.github.com/users/omarabid/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/omarabid",
         "id" : 909237,
         "login" : "omarabid",
         "organizations_url" : "https://api.github.com/users/omarabid/orgs",
         "received_events_url" : "https://api.github.com/users/omarabid/received_events",
         "repos_url" : "https://api.github.com/users/omarabid/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/omarabid/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/omarabid/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/omarabid"
      }
   },
   {
      "body" : "Possibly relevant factor: if the disk is in fact completely full, Core *will* destroy the wallet irrepairably, and require restoring it from backup. So, it is a critical problem to be avoided at any cost; it may make sense to unconditionally begin pruning slowly to ensure the disk is never full.",
      "created_at" : "2015-11-27T02:13:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7097#issuecomment-160024447",
      "id" : 160024447,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7097",
      "updated_at" : "2015-11-27T02:13:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/160024447",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=3",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "It makes sense for the daemon to shutdown.\r\nIt doesn't make sense for Qt to close (IMHO).",
      "created_at" : "2015-11-27T03:02:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7097#issuecomment-160032594",
      "id" : 160032594,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7097",
      "updated_at" : "2015-11-27T03:02:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/160032594",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "> That worked (and freed my AWS disk space). I wonder why this should be GUI only feature\r\n\r\nThe GUI can ask the user what to do. The daemon can't. \r\n\r\nI'm definitely against automatically starting pruning in the daemon, remember that you need to re-download everything to go from pruning back to full archive. That's not what you want to happen if for some reason disk space (which, on a server, you should be monitoring anyway!) is temporarily low. \"Shutdown and let the operator decide\" is the only thing that makes sense here.\r\n",
      "created_at" : "2015-11-27T08:27:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7097#issuecomment-160067577",
      "id" : 160067577,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7097",
      "updated_at" : "2015-11-27T08:28:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/160067577",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Possibly also related to #7111 (in terms of 'notifying the operator')",
      "created_at" : "2015-11-27T08:49:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7097#issuecomment-160074282",
      "id" : 160074282,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7097",
      "updated_at" : "2015-11-27T08:49:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/160074282",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/413395?v=3",
         "events_url" : "https://api.github.com/users/dcousens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dcousens/followers",
         "following_url" : "https://api.github.com/users/dcousens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dcousens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dcousens",
         "id" : 413395,
         "login" : "dcousens",
         "organizations_url" : "https://api.github.com/users/dcousens/orgs",
         "received_events_url" : "https://api.github.com/users/dcousens/received_events",
         "repos_url" : "https://api.github.com/users/dcousens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dcousens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dcousens"
      }
   },
   {
      "body" : "> Possibly relevant factor: if the disk is in fact completely full, Core will destroy the wallet irrepairably, and require restoring it from backup. So, it is a critical problem to be avoided at any cost; it may make sense to unconditionally begin pruning slowly to ensure the disk is never full.\r\n\r\n@luke-jr Is there a security concern to destroy the wallet?\r\n",
      "created_at" : "2015-11-27T19:41:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7097#issuecomment-160194764",
      "id" : 160194764,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7097",
      "updated_at" : "2015-11-27T19:41:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/160194764",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/909237?v=3",
         "events_url" : "https://api.github.com/users/omarabid/events{/privacy}",
         "followers_url" : "https://api.github.com/users/omarabid/followers",
         "following_url" : "https://api.github.com/users/omarabid/following{/other_user}",
         "gists_url" : "https://api.github.com/users/omarabid/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/omarabid",
         "id" : 909237,
         "login" : "omarabid",
         "organizations_url" : "https://api.github.com/users/omarabid/orgs",
         "received_events_url" : "https://api.github.com/users/omarabid/received_events",
         "repos_url" : "https://api.github.com/users/omarabid/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/omarabid/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/omarabid/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/omarabid"
      }
   },
   {
      "body" : "> I'm definitely against automatically starting pruning in the daemon, remember that you need to re-download everything to go from pruning back to full archive\r\n\r\nJust getting there means OS-issued \"Low space\" warnings have been ignored for days if not longer.\r\nI'm not aware of any application that changes its setting because the OS is not properly maintained.\r\nIs it so difficult to empty one's Recycle Bin, uninstall Firefox or delete the last 51 blocks? To enable pruning could turn out to be more \"expensive\" than any other workaround.\r\n",
      "created_at" : "2015-11-30T18:17:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7097#issuecomment-160712030",
      "id" : 160712030,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7097",
      "updated_at" : "2015-11-30T18:18:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/160712030",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13134193?v=3",
         "events_url" : "https://api.github.com/users/unsystemizer/events{/privacy}",
         "followers_url" : "https://api.github.com/users/unsystemizer/followers",
         "following_url" : "https://api.github.com/users/unsystemizer/following{/other_user}",
         "gists_url" : "https://api.github.com/users/unsystemizer/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/unsystemizer",
         "id" : 13134193,
         "login" : "unsystemizer",
         "organizations_url" : "https://api.github.com/users/unsystemizer/orgs",
         "received_events_url" : "https://api.github.com/users/unsystemizer/received_events",
         "repos_url" : "https://api.github.com/users/unsystemizer/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/unsystemizer/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/unsystemizer/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/unsystemizer"
      }
   },
   {
      "body" : "There could be multiple thresholds. E.g. diskspace < 1GB it gives a warning in GetWarnings() (returned in `getinfo` and shown in the status bar), whereas the current 'hard emergency shutdown' threshold is kept to avoid @Luke-Jr's wallet munging concerns.\r\n\r\nI think it would be more useful to ask whether to prune on first run of the application, at the same time the data directory is chosen. This question could be re-triggered on the next start after the application was shut down due to disk space concerns.\r\n",
      "created_at" : "2015-12-01T09:20:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/7097#issuecomment-160905114",
      "id" : 160905114,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7097",
      "updated_at" : "2015-12-01T09:20:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/160905114",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
