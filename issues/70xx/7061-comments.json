[
   {
      "body" : "I'd rather have it that the API is such that an explicit rescan is never needed. Wasn't there some work on a multi-import w/ timestamps?",
      "created_at" : "2015-11-19T15:14:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-158085542",
      "id" : 158085542,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2015-11-19T15:14:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/158085542",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Yes. There is a PR (see PR description). I agree that it would be better to avoid rescans at all, although it might be complicated to catch all edge-cases and a manual trigger can help in situations where someone needs to deal with multiple/complex imports (you only want to do one rescan).\r\n\r\nAnd I think some people will cancel a rescan because they want to do other stuff and/or had not considered that a rescan can take a long time. Afterward calling `-rescan` (from genesis) is a time consuming option.",
      "created_at" : "2015-11-19T15:19:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-158087136",
      "id" : 158087136,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2015-11-19T15:19:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/158087136",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "But manually specifying a block # to rescan from is extremely fragile... it's very easy to get this wrong.\r\n\r\nAlso, rescanning doesn't interact with pruning which will be more and more common in the future.\r\n",
      "created_at" : "2015-11-19T15:35:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-158091775",
      "id" : 158091775,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2015-11-19T15:35:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/158091775",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@lannwj I thought thats part of what  the height parameter here was for-- addressing pruning comparability? ",
      "created_at" : "2015-11-19T20:29:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-158188617",
      "id" : 158188617,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2015-11-19T20:29:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/158188617",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "How about we call this rescanfromheight instead, to make it possible to add a rescanfromtime later if users demand? Equally, some kind of RPC call that finds the first block with a nTime after a specific time might be useful here.\r\n\r\nDo we have a way of querying what block # is the oldest non-pruned block?",
      "created_at" : "2015-11-20T22:03:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-158538274",
      "id" : 158538274,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2015-11-20T22:03:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/158538274",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "It also occurs to me that for this usecase we might instead want to have pruning not happen automatically, but rather be an  on-demand thing where the user specifies the oldest time they're interested in.",
      "created_at" : "2015-11-20T22:04:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-158538629",
      "id" : 158538629,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2015-11-20T22:04:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/158538629",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "So the biggest negative I personally see here is that it furthers this misunderstanding that rescan is some thing users generally need to be doing.  Until we added these non-rescan imports a user initiated rescan is something that never should have been needed (and indicated a serious bug we'd like to know about if it was).  As a result of the -rescan argument there is now this whole cargo cult of people that rescan every time they're scarred by a shadow. I hate to further that.\r\n\r\nBut I can't deny how really useful this will be.\r\n\r\n",
      "created_at" : "2015-11-20T22:44:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-158546941",
      "id" : 158546941,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2015-11-20T22:44:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/158546941",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "body" : "@gmaxwell A possible way around that would be to make the rescan check if you have any addresses that haven't yet been scanned in that range and error out if not. (basically make it say \"no rescan needed\")",
      "created_at" : "2015-11-21T00:07:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-158563727",
      "id" : 158563727,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2015-11-21T00:07:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/158563727",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7042?v=3",
         "events_url" : "https://api.github.com/users/petertodd/events{/privacy}",
         "followers_url" : "https://api.github.com/users/petertodd/followers",
         "following_url" : "https://api.github.com/users/petertodd/following{/other_user}",
         "gists_url" : "https://api.github.com/users/petertodd/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/petertodd",
         "id" : 7042,
         "login" : "petertodd",
         "organizations_url" : "https://api.github.com/users/petertodd/orgs",
         "received_events_url" : "https://api.github.com/users/petertodd/received_events",
         "repos_url" : "https://api.github.com/users/petertodd/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/petertodd/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/petertodd"
      }
   },
   {
      "body" : "Hm. this could also take a stop argument, allowing you to scan single blocks or avoid rescan overlap.  Also, I think all the wallet re-scanning should traverse its interval backwards-- for more instant gratification;  though this would dork with the wallet transaction ordering... actually import at all breaks that, I should go talk to luke-jr about that.",
      "created_at" : "2015-11-22T22:13:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-158808001",
      "id" : 158808001,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2015-11-22T22:13:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/158808001",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r45569311"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/45569311"
         }
      },
      "body" : "Remove?\n",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2015-11-23T02:07:37Z",
      "diff_hunk" : "@@ -510,3 +510,48 @@ UniValue dumpwallet(const UniValue& params, bool fHelp)\n     file.close();\n     return NullUniValue;\n }\n+\n+UniValue rescanblockchain(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() > 1)\n+        throw runtime_error(\n+                            \"rescanblockchain \\\"height\\\"\\n\"\n+                            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+                            \"\\nArguments:\\n\"\n+                            \"1. \\\"height\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+                            \"\\nExamples:\\n\"\n+                            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000\\\"\")\n+                            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000\\\"\")\n+                            );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    CBlockIndex *pIndexRescan = NULL;\n+    if (params.size() > 0 && params[0].isNum())\n+        pIndexRescan = chainActive[params[0].get_int()];\n+\n+    if (!pIndexRescan)\n+         pIndexRescan = chainActive.Genesis();\n+\n+    //We can't rescan beyond non-pruned blocks, stop and throw an error\n+    if (fPruneMode)\n+    {\n+        if (fPruneMode)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r45569311",
      "id" : 45569311,
      "original_commit_id" : "8017237b5b34ff8a7293dedd1fa7ec611d80fa1e",
      "original_position" : 33,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/45569311",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r45726881"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/45726881"
         }
      },
      "body" : "Oops. A rebase issue. Thanks for point out. Fixed.\n",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2015-11-24T12:07:33Z",
      "diff_hunk" : "@@ -510,3 +510,48 @@ UniValue dumpwallet(const UniValue& params, bool fHelp)\n     file.close();\n     return NullUniValue;\n }\n+\n+UniValue rescanblockchain(const UniValue& params, bool fHelp)\n+{\n+    if (!EnsureWalletIsAvailable(fHelp))\n+        return NullUniValue;\n+\n+    if (fHelp || params.size() > 1)\n+        throw runtime_error(\n+                            \"rescanblockchain \\\"height\\\"\\n\"\n+                            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+                            \"\\nArguments:\\n\"\n+                            \"1. \\\"height\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+                            \"\\nExamples:\\n\"\n+                            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000\\\"\")\n+                            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000\\\"\")\n+                            );\n+\n+    LOCK2(cs_main, pwalletMain->cs_wallet);\n+\n+    CBlockIndex *pIndexRescan = NULL;\n+    if (params.size() > 0 && params[0].isNum())\n+        pIndexRescan = chainActive[params[0].get_int()];\n+\n+    if (!pIndexRescan)\n+         pIndexRescan = chainActive.Genesis();\n+\n+    //We can't rescan beyond non-pruned blocks, stop and throw an error\n+    if (fPruneMode)\n+    {\n+        if (fPruneMode)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r45726881",
      "id" : 45726881,
      "original_commit_id" : "8017237b5b34ff8a7293dedd1fa7ec611d80fa1e",
      "original_position" : 33,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/45726881",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "agree with gmaxwell that this should scan a range of blocks",
      "created_at" : "2015-11-24T12:17:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-159250450",
      "id" : 159250450,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2015-11-24T12:17:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/159250450",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/620611?v=3",
         "events_url" : "https://api.github.com/users/pstratem/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pstratem/followers",
         "following_url" : "https://api.github.com/users/pstratem/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pstratem/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pstratem",
         "id" : 620611,
         "login" : "pstratem",
         "organizations_url" : "https://api.github.com/users/pstratem/orgs",
         "received_events_url" : "https://api.github.com/users/pstratem/received_events",
         "repos_url" : "https://api.github.com/users/pstratem/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pstratem/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pstratem"
      }
   },
   {
      "body" : "Agree with the stop parameter. Working on a implementation....",
      "created_at" : "2015-11-24T12:22:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-159251479",
      "id" : 159251479,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2015-11-24T12:22:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/159251479",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "I would still prefer an approach that imports with birthdate instead of explicit rescanning.",
      "created_at" : "2015-11-24T12:29:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-159253995",
      "id" : 159253995,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2015-11-24T12:31:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/159253995",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Added a commit that allows providing a optional parameter with a height where the rescan should stop.\r\n\r\n@sipa: I agree that rescan height over a key/address birthday would be nice to have (see #6570). But a explicit rescan RPC call can be useful IMO. It's trivial to maintain and it can save lots of rescan-time on the user side. But agree, it has to be considered as \"experts\" feature.\r\n\r\nWhat about implementing a threshold for autodetecting wether the parameter is a blockheight or timestamp (similar to `LOCKTIME_THRESHOLD`)?",
      "created_at" : "2015-11-24T15:42:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-159308400",
      "id" : 159308400,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2015-11-24T15:42:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/159308400",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "@jonasschnelli see https://github.com/bitcoin/bitcoin/pull/6570#issuecomment-132261388 regarding your last comment.",
      "created_at" : "2015-11-24T15:57:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-159312575",
      "id" : 159312575,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2015-11-24T16:20:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/159312575",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=3",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "ACK",
      "created_at" : "2015-12-07T06:49:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-162427791",
      "id" : 162427791,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2015-12-07T06:49:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/162427791",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/16140350?v=3",
         "events_url" : "https://api.github.com/users/GIJensen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/GIJensen/followers",
         "following_url" : "https://api.github.com/users/GIJensen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/GIJensen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/GIJensen",
         "id" : 16140350,
         "login" : "GIJensen",
         "organizations_url" : "https://api.github.com/users/GIJensen/orgs",
         "received_events_url" : "https://api.github.com/users/GIJensen/received_events",
         "repos_url" : "https://api.github.com/users/GIJensen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/GIJensen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/GIJensen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/GIJensen"
      }
   },
   {
      "body" : "If this is still moving forward - I tested it a bit (including pruned mode) and it looks fine to me.  One suggestion is to make the start-height a required parameter so that the user specifies \"rescanblockchain 1\" to scan from genesis.  If the start-height is < 1 or higher than current height, throw an error. \r\nOtherwise, ACK. \r\n",
      "created_at" : "2016-03-14T17:59:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-196442879",
      "id" : 196442879,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2016-03-14T17:59:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/196442879",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7504522?v=3",
         "events_url" : "https://api.github.com/users/mrbandrews/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mrbandrews/followers",
         "following_url" : "https://api.github.com/users/mrbandrews/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mrbandrews/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mrbandrews",
         "id" : 7504522,
         "login" : "mrbandrews",
         "organizations_url" : "https://api.github.com/users/mrbandrews/orgs",
         "received_events_url" : "https://api.github.com/users/mrbandrews/received_events",
         "repos_url" : "https://api.github.com/users/mrbandrews/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mrbandrews/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mrbandrews/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mrbandrews"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r61736620"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/61736620"
         }
      },
      "body" : "Move to while condition?\n",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2016-05-02T13:17:54Z",
      "diff_hunk" : "@@ -1084,6 +1087,8 @@ int CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool fUpdate)\n                 if (AddToWalletIfInvolvingMe(tx, &block, fUpdate))\n                     ret++;\n             }\n+            if (pindex == pindexStop)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r61736620",
      "id" : 61736620,
      "original_commit_id" : "5279c98202d8584bd8cbe440f35444c229b87bef",
      "original_position" : 21,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/61736620",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r61736772"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/61736772"
         }
      },
      "body" : "Because it's inclusive?\n",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2016-05-02T13:19:21Z",
      "diff_hunk" : "@@ -1084,6 +1087,8 @@ int CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool fUpdate)\n                 if (AddToWalletIfInvolvingMe(tx, &block, fUpdate))\n                     ret++;\n             }\n+            if (pindex == pindexStop)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r61736772",
      "id" : 61736772,
      "original_commit_id" : "5279c98202d8584bd8cbe440f35444c229b87bef",
      "original_position" : 21,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/61736772",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Can one of the admins verify this patch?",
      "created_at" : "2016-05-25T08:45:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-221510825",
      "id" : 221510825,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2016-05-25T08:45:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/221510825",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/541066?v=3",
         "events_url" : "https://api.github.com/users/arowser/events{/privacy}",
         "followers_url" : "https://api.github.com/users/arowser/followers",
         "following_url" : "https://api.github.com/users/arowser/following{/other_user}",
         "gists_url" : "https://api.github.com/users/arowser/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/arowser",
         "id" : 541066,
         "login" : "arowser",
         "organizations_url" : "https://api.github.com/users/arowser/orgs",
         "received_events_url" : "https://api.github.com/users/arowser/received_events",
         "repos_url" : "https://api.github.com/users/arowser/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/arowser/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/arowser/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/arowser"
      }
   },
   {
      "body" : "Rebased. \r\nI think there are still reasons to consider that PR. At the moment, it would really be useful. Even once we have https://github.com/bitcoin/bitcoin/pull/7551 (`importmulti`) it could see use cases for `rescanblockchain`.",
      "created_at" : "2016-07-20T12:58:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-233941291",
      "id" : 233941291,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2016-07-20T12:58:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/233941291",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "This seems better #7984, but I still prefer not furthering the usage of various rescans. We need APIs that don't require users to keep track of the concept of rescanning IMHO.",
      "created_at" : "2016-08-25T12:53:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-242374874",
      "id" : 242374874,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2016-08-25T12:53:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242374874",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "I agree. Ideally, there will be no need to rescan. But in practice, rescans are sometimes required (I guess everyone who gave some users support has encountered that). IMO a rpc rescan commend with an optional hight is much more flexible then `-rescan` as a startup argument.",
      "created_at" : "2016-08-25T12:58:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-242376180",
      "id" : 242376180,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2016-08-25T12:58:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242376180",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "I think we should work on `importmulti` instead (or at least an importprivkey that takes a key birthdate as parameter), not on more ways to rescan.",
      "created_at" : "2016-08-25T12:59:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-242376669",
      "id" : 242376669,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2016-08-25T12:59:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242376669",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "> I think we should work on importmulti instead (or at least an importprivkey that takes a key birthdate as parameter), not on more ways to rescan.\r\n\r\nYes. I can agree with that.",
      "created_at" : "2016-08-25T13:00:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-242376919",
      "id" : 242376919,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2016-08-25T13:00:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242376919",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Another thing where this could be useful is restoring hd wallets",
      "created_at" : "2016-09-14T09:29:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-246957074",
      "id" : 246957074,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2016-09-14T09:29:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/246957074",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Since importmulti  #7551  is merged, some use cases are covered by that.",
      "created_at" : "2016-10-29T23:53:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-257122914",
      "id" : 257122914,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2016-10-29T23:53:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/257122914",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=3",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "body" : "> I think we should work on importmulti instead (or at least an importprivkey that takes a key birthdate as parameter), not on more ways to rescan.\r\n\r\nTend to agree. Closing this for now.",
      "created_at" : "2016-11-02T14:14:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-257876663",
      "id" : 257876663,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2016-11-02T14:14:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/257876663",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "IMO something like that would be very handy if you rescan a HD wallet (old backup).\r\n-rescan does not allow direct user feedback\r\nIMO rescanning an old HD backup should by default start at the height where we introduces HD (optional down to genesis).",
      "created_at" : "2016-12-22T20:11:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-268880725",
      "id" : 268880725,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2016-12-22T20:11:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/268880725",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "Reopened and overhauled.\r\nThis now does replace the `-rescan` startup argument with a new RPC call `rescanblockchain`. The reasons for that are:\r\n* You can define the start and end-height\r\n* It can be called during runtime\r\n* It can work in multiwallet environment\r\n\r\nUsing `-rescan` will cancel the startup with an error referring to the new RPC call.",
      "created_at" : "2017-05-24T12:40:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-303711520",
      "id" : 303711520,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2017-05-24T12:47:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/303711520",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118263426"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118263426"
         }
      },
      "body" : "Maybe still worth mentioning that pruning can get in the way of successfully importing wallet keys & rescanning.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-24T14:12:36Z",
      "diff_hunk" : "@@ -367,7 +367,7 @@ std::string HelpMessage(HelpMessageMode mode)\n #ifndef WIN32\n     strUsage += HelpMessageOpt(\"-pid=<file>\", strprintf(_(\"Specify pid file (default: %s)\"), BITCOIN_PID_FILENAME));\n #endif\n-    strUsage += HelpMessageOpt(\"-prune=<n>\", strprintf(_(\"Reduce storage requirements by enabling pruning (deleting) of old blocks. This allows the pruneblockchain RPC to be called to delete specific blocks, and enables automatic pruning of old blocks if a target size in MiB is provided. This mode is incompatible with -txindex and -rescan. \"\n+    strUsage += HelpMessageOpt(\"-prune=<n>\", strprintf(_(\"Reduce storage requirements by enabling pruning (deleting) of old blocks. This allows the pruneblockchain RPC to be called to delete specific blocks, and enables automatic pruning of old blocks if a target size in MiB is provided. This mode is incompatible with -txindex\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118263426",
      "id" : 118263426,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 5,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 40037634,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118263426",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118265136"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118265136"
         }
      },
      "body" : "Maybe this should take either times or heights like the pruneblockchain RPC: https://github.com/bitcoin/bitcoin/blob/46771514fa86b9a5a0e0af34c1abfa1da22212f7/src/rpc/blockchain.cpp#L838",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-24T14:19:00Z",
      "diff_hunk" : "@@ -1149,3 +1149,51 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp))\n+        return NullUniValue;\n+\n+    if (request.fHelp || request.params.size() > 2)\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"start-height\\\") (\\\"stop-height\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"start-height\\\"    (number, optional) blockheight where the rescan should start\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118265136",
      "id" : 118265136,
      "original_commit_id" : "24ee9c835192ad854f79f30937e3e1c14c095e55",
      "original_position" : 52,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 40037634,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118265136",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118266399"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118266399"
         }
      },
      "body" : "Might be helpful if error message could mention getblockchaininfo RPC for getting pruned height.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-24T14:23:07Z",
      "diff_hunk" : "@@ -1149,3 +1149,51 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp))\n+        return NullUniValue;\n+\n+    if (request.fHelp || request.params.size() > 2)\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"start-height\\\") (\\\"stop-height\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"start-height\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stop-height\\\"     (number, optional) blockheight where the rescan should stop\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBlockIndex *pIndexStart = NULL;\n+    CBlockIndex *pIndexStop = NULL;\n+    if (request.params.size() > 0 && request.params[0].isNum())\n+        pIndexStart = chainActive[request.params[0].get_int()];\n+\n+    if (request.params.size() > 1 && request.params[1].isNum())\n+        pIndexStop = chainActive[request.params[1].get_int()];\n+\n+    if (!pIndexStart)\n+         pIndexStart = chainActive.Genesis();\n+\n+    //We can't rescan beyond non-pruned blocks, stop and throw an error\n+    if (fPruneMode)\n+    {\n+        CBlockIndex *block = chainActive.Tip();\n+        while (block && block->pprev && (block->pprev->nStatus & BLOCK_HAVE_DATA))\n+            block = block->pprev;\n+\n+        if (pIndexStart->nHeight < block->nHeight)\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Can't rescan beyond pruned data.\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118266399",
      "id" : 118266399,
      "original_commit_id" : "24ee9c835192ad854f79f30937e3e1c14c095e55",
      "original_position" : 80,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 40037634,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118266399",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118267108"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118267108"
         }
      },
      "body" : "Style might need to be updated for this code (moving opening brace to same line here, adding missing braces other lines)",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-24T14:25:38Z",
      "diff_hunk" : "@@ -1149,3 +1149,51 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp))\n+        return NullUniValue;\n+\n+    if (request.fHelp || request.params.size() > 2)\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"start-height\\\") (\\\"stop-height\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"start-height\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stop-height\\\"     (number, optional) blockheight where the rescan should stop\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBlockIndex *pIndexStart = NULL;\n+    CBlockIndex *pIndexStop = NULL;\n+    if (request.params.size() > 0 && request.params[0].isNum())\n+        pIndexStart = chainActive[request.params[0].get_int()];\n+\n+    if (request.params.size() > 1 && request.params[1].isNum())\n+        pIndexStop = chainActive[request.params[1].get_int()];\n+\n+    if (!pIndexStart)\n+         pIndexStart = chainActive.Genesis();\n+\n+    //We can't rescan beyond non-pruned blocks, stop and throw an error\n+    if (fPruneMode)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118267108",
      "id" : 118267108,
      "original_commit_id" : "24ee9c835192ad854f79f30937e3e1c14c095e55",
      "original_position" : 73,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 40037634,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118267108",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118267466"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118267466"
         }
      },
      "body" : "I think these files are automatically generated from -help output and could be reverted in the PR.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-24T14:26:54Z",
      "diff_hunk" : "@@ -90,7 +90,7 @@ Reduce storage requirements by enabling pruning (deleting) of old\n blocks. This allows the pruneblockchain RPC to be called to\n delete specific blocks, and enables automatic pruning of old\n blocks if a target size in MiB is provided. This mode is\n-incompatible with \\fB\\-txindex\\fR and \\fB\\-rescan\\fR. Warning: Reverting this\n+incompatible with \\fB\\-txindex\\fR. Warning: Reverting this",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118267466",
      "id" : 118267466,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 5,
      "path" : "doc/man/bitcoind.1",
      "position" : null,
      "pull_request_review_id" : 40037634,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118267466",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118268885"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118268885"
         }
      },
      "body" : "Is there any advantage to getting rid of the -rescan option if we still have keep all the rescan logic below? Is there a future cleanup or new feature that will be easier to implement with the option gone?",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-24T14:31:53Z",
      "diff_hunk" : "@@ -3865,7 +3871,7 @@ CWallet* CWallet::CreateWalletFromFile(const std::string walletFile)\n     RegisterValidationInterface(walletInstance);\n \n     CBlockIndex *pindexRescan = chainActive.Genesis();\n-    if (!GetBoolArg(\"-rescan\", false))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118268885",
      "id" : 118268885,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 50,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 40037634,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118268885",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118271553"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118271553"
         }
      },
      "body" : "I don't understand what the use-case is for the stop argument. Can you describe a scenario where you would want to provide it? I can see how it might have been desirable before there was an abortrescan RPC to break a big scan up into little scans, but I don't see why you'd want it now.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-24T14:41:21Z",
      "diff_hunk" : "@@ -1508,6 +1512,9 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n             } else {\n                 ret = nullptr;\n             }\n+            if (pindex == pindexStop) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118271553",
      "id" : 118271553,
      "original_commit_id" : "24ee9c835192ad854f79f30937e3e1c14c095e55",
      "original_position" : 21,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 40037634,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118271553",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118277276"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118277276"
         }
      },
      "body" : "See the discussion about the stop argument: https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-158808001",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-24T15:00:52Z",
      "diff_hunk" : "@@ -1508,6 +1512,9 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n             } else {\n                 ret = nullptr;\n             }\n+            if (pindex == pindexStop) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118277276",
      "id" : 118277276,
      "original_commit_id" : "24ee9c835192ad854f79f30937e3e1c14c095e55",
      "original_position" : 21,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 40053192,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118277276",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118277881"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118277881"
         }
      },
      "body" : "The `-rescan` option is global while this PR changes it (partially) to per-wallet. Still, -zapwallettx, etc. need to also be moved to per-wallet basis (I don't know how right now).\r\n\r\nBut removing the global -rescan option has to be done sooner or later if we want proper multiwallet.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-24T15:02:58Z",
      "diff_hunk" : "@@ -3865,7 +3871,7 @@ CWallet* CWallet::CreateWalletFromFile(const std::string walletFile)\n     RegisterValidationInterface(walletInstance);\n \n     CBlockIndex *pindexRescan = chainActive.Genesis();\n-    if (!GetBoolArg(\"-rescan\", false))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118277881",
      "id" : 118277881,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 50,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 40053842,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118277881",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118282309"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118282309"
         }
      },
      "body" : "> But removing the global -rescan option has to be done sooner or later if we want proper multiwallet.\r\n\r\nDo -zapwallettx, etc also need to be removed to support proper multiwallet?",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-24T15:18:06Z",
      "diff_hunk" : "@@ -3865,7 +3871,7 @@ CWallet* CWallet::CreateWalletFromFile(const std::string walletFile)\n     RegisterValidationInterface(walletInstance);\n \n     CBlockIndex *pindexRescan = chainActive.Genesis();\n-    if (!GetBoolArg(\"-rescan\", false))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118282309",
      "id" : 118282309,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 50,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 40058845,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118282309",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118288711"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118288711"
         }
      },
      "body" : "IMO Yes. It's pure db utility. Either we move it to RPC or to a new wallet/db tool.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-24T15:40:34Z",
      "diff_hunk" : "@@ -3865,7 +3871,7 @@ CWallet* CWallet::CreateWalletFromFile(const std::string walletFile)\n     RegisterValidationInterface(walletInstance);\n \n     CBlockIndex *pindexRescan = chainActive.Genesis();\n-    if (!GetBoolArg(\"-rescan\", false))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118288711",
      "id" : 118288711,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 50,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 40065979,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118288711",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118303362"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118303362"
         }
      },
      "body" : "nit: update function comment to say that the rescan is up to pindexStop if it is non-null",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-24T16:39:17Z",
      "diff_hunk" : "@@ -1468,11 +1468,15 @@ void CWalletTx::GetAmounts(std::list<COutputEntry>& listReceived,\n  * before CWallet::nTimeFirstKey). Returns null if there is no such range, or",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118303362",
      "id" : 118303362,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 1,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 40082483,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118303362",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118303554"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118303554"
         }
      },
      "body" : "Need to remove more of this comment, so that it just reads:\r\n\r\n`// show rescan progress in GUI as dialog`",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-24T16:40:05Z",
      "diff_hunk" : "@@ -1485,7 +1489,7 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n         while (pindex && nTimeFirstKey && (pindex->GetBlockTime() < (nTimeFirstKey - TIMESTAMP_WINDOW)))\n             pindex = chainActive.Next(pindex);\n \n-        ShowProgress(_(\"Rescanning...\"), 0); // show rescan progress in GUI as dialog or on splashscreen, if -rescan on startup\n+        ShowProgress(_(\"Rescanning...\"), 0); // show rescan progress in GUI as dialog or on splashscreen",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118303554",
      "id" : 118303554,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 22,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 40082483,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118303554",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118304972"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118304972"
         }
      },
      "body" : "This is confusing: the if statement requires `!needsRescan`. Shouldn't that be the other way around? If `needsRescan` is true, we should rescan. I think the if statement should be:\r\n\r\n```\r\nif (needsRescan || GetBoolArg(\"-salvagewallet\", true) || GetBoolArg(\"-zapwallettxes\", true))\r\n```\r\n\r\nre: zapwallet and salvagewallet. I agree that they should be changed to RPCs for multiwallet.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-24T16:46:10Z",
      "diff_hunk" : "@@ -3865,7 +3871,7 @@ CWallet* CWallet::CreateWalletFromFile(const std::string walletFile)\n     RegisterValidationInterface(walletInstance);\n \n     CBlockIndex *pindexRescan = chainActive.Genesis();\n-    if (!GetBoolArg(\"-rescan\", false))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118304972",
      "id" : 118304972,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 50,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 40082483,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118304972",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118305625"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118305625"
         }
      },
      "body" : "suggest you change the argument names to `startheight` and `stopheight`. No other rpcs use `-` as word delimiter.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-24T16:48:53Z",
      "diff_hunk" : "@@ -1149,3 +1149,51 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp))\n+        return NullUniValue;\n+\n+    if (request.fHelp || request.params.size() > 2)\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"start-height\\\") (\\\"stop-height\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"start-height\\\"    (number, optional) blockheight where the rescan should start\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118305625",
      "id" : 118305625,
      "original_commit_id" : "24ee9c835192ad854f79f30937e3e1c14c095e55",
      "original_position" : 52,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 40082483,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118305625",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118306126"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118306126"
         }
      },
      "body" : "This should throw an error if the argument isn't a number, rather than continue. It should allow the argument to be Null. I think the if test you need is:\r\n\r\n```\r\nif (request.params.size() > 0 && !request.params[0].isNull()) {\r\n```",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-24T16:51:00Z",
      "diff_hunk" : "@@ -1149,3 +1149,51 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp))\n+        return NullUniValue;\n+\n+    if (request.fHelp || request.params.size() > 2)\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"start-height\\\") (\\\"stop-height\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"start-height\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stop-height\\\"     (number, optional) blockheight where the rescan should stop\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBlockIndex *pIndexStart = NULL;\n+    CBlockIndex *pIndexStop = NULL;\n+    if (request.params.size() > 0 && request.params[0].isNum())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118306126",
      "id" : 118306126,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 63,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 40082483,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118306126",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118321612"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118321612"
         }
      },
      "body" : "This RPC should return a message to the user if it is successful, eg \"Blockchain rescanned from block `<hash>` height `<height>` to block `<hash>` height `<height>`. `<numtx>` transactions added to wallet\". Otherwise it's impossible for the user to know whether the call was successful or not.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-24T17:52:44Z",
      "diff_hunk" : "@@ -1149,3 +1149,51 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp))\n+        return NullUniValue;\n+\n+    if (request.fHelp || request.params.size() > 2)\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"start-height\\\") (\\\"stop-height\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"start-height\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stop-height\\\"     (number, optional) blockheight where the rescan should stop\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBlockIndex *pIndexStart = NULL;\n+    CBlockIndex *pIndexStop = NULL;\n+    if (request.params.size() > 0 && request.params[0].isNum())\n+        pIndexStart = chainActive[request.params[0].get_int()];\n+\n+    if (request.params.size() > 1 && request.params[1].isNum())\n+        pIndexStop = chainActive[request.params[1].get_int()];\n+\n+    if (!pIndexStart)\n+         pIndexStart = chainActive.Genesis();\n+\n+    //We can't rescan beyond non-pruned blocks, stop and throw an error\n+    if (fPruneMode)\n+    {\n+        CBlockIndex *block = chainActive.Tip();\n+        while (block && block->pprev && (block->pprev->nStatus & BLOCK_HAVE_DATA))\n+            block = block->pprev;\n+\n+        if (pIndexStart->nHeight < block->nHeight)\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Can't rescan beyond pruned data.\");\n+    }\n+\n+    if (pwallet)\n+        pwallet->ScanForWalletTransactions(pIndexStart, pIndexStop, true);\n+\n+    return NullUniValue;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118321612",
      "id" : 118321612,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 86,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 40082483,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118321612",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118321814"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118321814"
         }
      },
      "body" : "should this return an error if heightstop is lower than heightstart? If heightstop is higher than the tip height?",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-24T17:53:21Z",
      "diff_hunk" : "@@ -1149,3 +1149,51 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp))\n+        return NullUniValue;\n+\n+    if (request.fHelp || request.params.size() > 2)\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"start-height\\\") (\\\"stop-height\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"start-height\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stop-height\\\"     (number, optional) blockheight where the rescan should stop\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBlockIndex *pIndexStart = NULL;\n+    CBlockIndex *pIndexStop = NULL;\n+    if (request.params.size() > 0 && request.params[0].isNum())\n+        pIndexStart = chainActive[request.params[0].get_int()];\n+\n+    if (request.params.size() > 1 && request.params[1].isNum())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118321814",
      "id" : 118321814,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 66,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 40082483,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118321814",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118338421"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118338421"
         }
      },
      "body" : "I can't see where `rescanblockchain()` is being called. Am I missing something?",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-24T19:02:09Z",
      "diff_hunk" : "@@ -167,8 +167,8 @@ bool CDB::Recover(const std::string& filename, void *callbackDataIn, bool (*reco\n     // Call Salvage with fAggressive=true to\n     // get as much data as possible.\n     // Rewrite salvaged data to fresh wallet file\n-    // Set -rescan so any missing transactions will be\n-    // found.\n+    // call rescanblockchain (RPC) so any missing",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118338421",
      "id" : 118338421,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 6,
      "path" : "src/wallet/db.cpp",
      "position" : null,
      "pull_request_review_id" : 40082483,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118338421",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118428024"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118428024"
         }
      },
      "body" : "It happens outside of this call (somewhere in wallet.cpp). But the comment doesn't say \"It\" calls `rescanblockchain`, it either says \"you\" can call `rescanblockchain()`.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-25T06:44:44Z",
      "diff_hunk" : "@@ -167,8 +167,8 @@ bool CDB::Recover(const std::string& filename, void *callbackDataIn, bool (*reco\n     // Call Salvage with fAggressive=true to\n     // get as much data as possible.\n     // Rewrite salvaged data to fresh wallet file\n-    // Set -rescan so any missing transactions will be\n-    // found.\n+    // call rescanblockchain (RPC) so any missing",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118428024",
      "id" : 118428024,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 6,
      "path" : "src/wallet/db.cpp",
      "position" : null,
      "pull_request_review_id" : 40217898,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118428024",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118429609"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118429609"
         }
      },
      "body" : "No. I don't think so.\r\nIf that if statement is true, we load the wallet best block which prevents a complete rescan (so it's the opposite).\r\nSo we only load the wallet best block (== no rescan) if `needsRescan` is false and `-salvagewallet` and `-`-zapwallettxes` have not been set.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-25T06:59:07Z",
      "diff_hunk" : "@@ -3865,7 +3871,7 @@ CWallet* CWallet::CreateWalletFromFile(const std::string walletFile)\n     RegisterValidationInterface(walletInstance);\n \n     CBlockIndex *pindexRescan = chainActive.Genesis();\n-    if (!GetBoolArg(\"-rescan\", false))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118429609",
      "id" : 118429609,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 50,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 40219647,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118429609",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118429802"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118429802"
         }
      },
      "body" : "But can't it also happens during startup when the GUI will show the progress only in the splash-screen and not in a dialog?",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-25T07:00:44Z",
      "diff_hunk" : "@@ -1485,7 +1489,7 @@ CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool f\n         while (pindex && nTimeFirstKey && (pindex->GetBlockTime() < (nTimeFirstKey - TIMESTAMP_WINDOW)))\n             pindex = chainActive.Next(pindex);\n \n-        ShowProgress(_(\"Rescanning...\"), 0); // show rescan progress in GUI as dialog or on splashscreen, if -rescan on startup\n+        ShowProgress(_(\"Rescanning...\"), 0); // show rescan progress in GUI as dialog or on splashscreen",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118429802",
      "id" : 118429802,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 22,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 40219858,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118429802",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118431166"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118431166"
         }
      },
      "body" : "Indeed. Fixed.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-25T07:12:30Z",
      "diff_hunk" : "@@ -1149,3 +1149,51 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp))\n+        return NullUniValue;\n+\n+    if (request.fHelp || request.params.size() > 2)\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"start-height\\\") (\\\"stop-height\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"start-height\\\"    (number, optional) blockheight where the rescan should start\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118431166",
      "id" : 118431166,
      "original_commit_id" : "24ee9c835192ad854f79f30937e3e1c14c095e55",
      "original_position" : 52,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 40221308,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118431166",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118431175"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118431175"
         }
      },
      "body" : "Fixed.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-25T07:12:36Z",
      "diff_hunk" : "@@ -1149,3 +1149,51 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp))\n+        return NullUniValue;\n+\n+    if (request.fHelp || request.params.size() > 2)\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"start-height\\\") (\\\"stop-height\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"start-height\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stop-height\\\"     (number, optional) blockheight where the rescan should stop\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBlockIndex *pIndexStart = NULL;\n+    CBlockIndex *pIndexStop = NULL;\n+    if (request.params.size() > 0 && request.params[0].isNum())\n+        pIndexStart = chainActive[request.params[0].get_int()];\n+\n+    if (request.params.size() > 1 && request.params[1].isNum())\n+        pIndexStop = chainActive[request.params[1].get_int()];\n+\n+    if (!pIndexStart)\n+         pIndexStart = chainActive.Genesis();\n+\n+    //We can't rescan beyond non-pruned blocks, stop and throw an error\n+    if (fPruneMode)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118431175",
      "id" : 118431175,
      "original_commit_id" : "24ee9c835192ad854f79f30937e3e1c14c095e55",
      "original_position" : 73,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 40221320,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118431175",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118431186"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118431186"
         }
      },
      "body" : "Fixed.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-25T07:12:40Z",
      "diff_hunk" : "@@ -1149,3 +1149,51 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp))\n+        return NullUniValue;\n+\n+    if (request.fHelp || request.params.size() > 2)\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"start-height\\\") (\\\"stop-height\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"start-height\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stop-height\\\"     (number, optional) blockheight where the rescan should stop\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBlockIndex *pIndexStart = NULL;\n+    CBlockIndex *pIndexStop = NULL;\n+    if (request.params.size() > 0 && request.params[0].isNum())\n+        pIndexStart = chainActive[request.params[0].get_int()];\n+\n+    if (request.params.size() > 1 && request.params[1].isNum())\n+        pIndexStop = chainActive[request.params[1].get_int()];\n+\n+    if (!pIndexStart)\n+         pIndexStart = chainActive.Genesis();\n+\n+    //We can't rescan beyond non-pruned blocks, stop and throw an error\n+    if (fPruneMode)\n+    {\n+        CBlockIndex *block = chainActive.Tip();\n+        while (block && block->pprev && (block->pprev->nStatus & BLOCK_HAVE_DATA))\n+            block = block->pprev;\n+\n+        if (pIndexStart->nHeight < block->nHeight)\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Can't rescan beyond pruned data.\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118431186",
      "id" : 118431186,
      "original_commit_id" : "24ee9c835192ad854f79f30937e3e1c14c095e55",
      "original_position" : 80,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 40221329,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118431186",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118431193"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118431193"
         }
      },
      "body" : "Fixed.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-25T07:12:44Z",
      "diff_hunk" : "@@ -90,7 +90,7 @@ Reduce storage requirements by enabling pruning (deleting) of old\n blocks. This allows the pruneblockchain RPC to be called to\n delete specific blocks, and enables automatic pruning of old\n blocks if a target size in MiB is provided. This mode is\n-incompatible with \\fB\\-txindex\\fR and \\fB\\-rescan\\fR. Warning: Reverting this\n+incompatible with \\fB\\-txindex\\fR. Warning: Reverting this",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118431193",
      "id" : 118431193,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 5,
      "path" : "doc/man/bitcoind.1",
      "position" : null,
      "pull_request_review_id" : 40221337,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118431193",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118431249"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118431249"
         }
      },
      "body" : "Fixed.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-25T07:13:16Z",
      "diff_hunk" : "@@ -1468,11 +1468,15 @@ void CWalletTx::GetAmounts(std::list<COutputEntry>& listReceived,\n  * before CWallet::nTimeFirstKey). Returns null if there is no such range, or",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118431249",
      "id" : 118431249,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 1,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 40221399,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118431249",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118555508"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118555508"
         }
      },
      "body" : "Yes, you're right.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-25T18:42:27Z",
      "diff_hunk" : "@@ -3865,7 +3871,7 @@ CWallet* CWallet::CreateWalletFromFile(const std::string walletFile)\n     RegisterValidationInterface(walletInstance);\n \n     CBlockIndex *pindexRescan = chainActive.Genesis();\n-    if (!GetBoolArg(\"-rescan\", false))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118555508",
      "id" : 118555508,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 50,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 40359387,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118555508",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118558012"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118558012"
         }
      },
      "body" : "I don't understand. The comment is:\r\n\r\n```\r\n    // Recovery procedure:\r\n    // move wallet file to wallet.timestamp.bak\r\n    // Call Salvage with fAggressive=true to\r\n    // get as much data as possible.\r\n    // Rewrite salvaged data to fresh wallet file\r\n    // call rescanblockchain (RPC) so any missing\r\n    // transactions will be found.\r\n```\r\n\r\nThis function does:\r\n- move wallet file to wallet.timestamp.bak\r\n- Call Salvage with fAggressive=true to get as much data as possible.\r\n- Rewrite salvaged data to fresh wallet file\r\n\r\nbut it doesn't call rescanblockchain, and I can't see rescanblockchain being called by the callers.\r\n",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-25T18:53:01Z",
      "diff_hunk" : "@@ -167,8 +167,8 @@ bool CDB::Recover(const std::string& filename, void *callbackDataIn, bool (*reco\n     // Call Salvage with fAggressive=true to\n     // get as much data as possible.\n     // Rewrite salvaged data to fresh wallet file\n-    // Set -rescan so any missing transactions will be\n-    // found.\n+    // call rescanblockchain (RPC) so any missing",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118558012",
      "id" : 118558012,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 6,
      "path" : "src/wallet/db.cpp",
      "position" : null,
      "pull_request_review_id" : 40362092,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118558012",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118564429"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118564429"
         }
      },
      "body" : "Yes. You right. The rescan is not part of the call. But the part that calls CDB::Recover does always call a rescan. But now I got your point. We should refer to `ScanForWalletTransactions()` instead to `rescanblockchain (RPC)`. Right?",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-25T19:24:56Z",
      "diff_hunk" : "@@ -167,8 +167,8 @@ bool CDB::Recover(const std::string& filename, void *callbackDataIn, bool (*reco\n     // Call Salvage with fAggressive=true to\n     // get as much data as possible.\n     // Rewrite salvaged data to fresh wallet file\n-    // Set -rescan so any missing transactions will be\n-    // found.\n+    // call rescanblockchain (RPC) so any missing",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118564429",
      "id" : 118564429,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 6,
      "path" : "src/wallet/db.cpp",
      "position" : null,
      "pull_request_review_id" : 40369279,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118564429",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118566164"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118566164"
         }
      },
      "body" : "sorry, I'm still not seeing it. You say \"the part that calls CDB::Recover does always call a rescan\". Where?",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-25T19:33:17Z",
      "diff_hunk" : "@@ -167,8 +167,8 @@ bool CDB::Recover(const std::string& filename, void *callbackDataIn, bool (*reco\n     // Call Salvage with fAggressive=true to\n     // get as much data as possible.\n     // Rewrite salvaged data to fresh wallet file\n-    // Set -rescan so any missing transactions will be\n-    // found.\n+    // call rescanblockchain (RPC) so any missing",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118566164",
      "id" : 118566164,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 6,
      "path" : "src/wallet/db.cpp",
      "position" : null,
      "pull_request_review_id" : 40371152,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118566164",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118566785"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118566785"
         }
      },
      "body" : "It's confusing. But CDB::Recover only gets calls by setting `-salvagewallet` which does set `-rescan`. Maybe I should remove that comment part... I don't know what's best because `-rescan` is currently mentioned there.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-25T19:36:24Z",
      "diff_hunk" : "@@ -167,8 +167,8 @@ bool CDB::Recover(const std::string& filename, void *callbackDataIn, bool (*reco\n     // Call Salvage with fAggressive=true to\n     // get as much data as possible.\n     // Rewrite salvaged data to fresh wallet file\n-    // Set -rescan so any missing transactions will be\n-    // found.\n+    // call rescanblockchain (RPC) so any missing",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118566785",
      "id" : 118566785,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 6,
      "path" : "src/wallet/db.cpp",
      "position" : null,
      "pull_request_review_id" : 40371807,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118566785",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118579994"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118579994"
         }
      },
      "body" : "ah, makes sense now. Thank you. I wasn't looking in init.cpp, but now I think I see how this fits together. CWallet::Verify() is called first, which calls CWalletDB::Recover() if `-salvagewallet` is set. Later in AppInitMain(), we call CWallet::AppInitMain(), which is where the rescan happens if `-salvagewallet` is set.\r\n\r\nPerhaps change the comment to something like:\r\n\r\n```\r\n    // Try to recover the wallet:\r\n    // - move wallet file to wallet.timestamp.bak\r\n    // - call Salvage with fAggressive=true to get as much data as possible.\r\n    // - rewrite salvaged data to fresh wallet file\r\n    //\r\n    // CWallet::AppInitMain() will later run a full blockchain rescan to find\r\n    // any missing transactions.\r\n```",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-05-25T20:42:00Z",
      "diff_hunk" : "@@ -167,8 +167,8 @@ bool CDB::Recover(const std::string& filename, void *callbackDataIn, bool (*reco\n     // Call Salvage with fAggressive=true to\n     // get as much data as possible.\n     // Rewrite salvaged data to fresh wallet file\n-    // Set -rescan so any missing transactions will be\n-    // found.\n+    // call rescanblockchain (RPC) so any missing",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r118579994",
      "id" : 118579994,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 6,
      "path" : "src/wallet/db.cpp",
      "position" : null,
      "pull_request_review_id" : 40386873,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/118579994",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "body" : "This needs rebase (probably just wait till after 15 at this point). I think outstanding objections to the idea have all largely been removed, Concept ACK from me, at least.",
      "created_at" : "2017-07-11T17:41:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-314519092",
      "id" : 314519092,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2017-07-11T17:41:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/314519092",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/649246?v=3",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "body" : "Rebased.",
      "created_at" : "2017-07-21T07:54:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-316931853",
      "id" : 316931853,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2017-07-21T07:54:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/316931853",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r129338768"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129338768"
         }
      },
      "body" : "Size checks can be dropped here and below. params[0] will return a null value if the param is missing.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-07-25T15:24:31Z",
      "diff_hunk" : "@@ -1160,3 +1160,58 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 2) {\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"startheight\\\") (\\\"stopheight\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"startHeight\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stopHeight\\\"     (number, optional) blockheight where the rescan should stop\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            );\n+    }\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBlockIndex *pIndexStart = NULL;\n+    CBlockIndex *pIndexStop = NULL;\n+    if (request.params.size() > 0 && request.params[0].isNum()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r129338768",
      "id" : 129338768,
      "original_commit_id" : "76e98222cd1d6587fdcb8000a8bff5d1e431ff5a",
      "original_position" : 29,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 52101375,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129338768",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r129340626"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129340626"
         }
      },
      "body" : "This should check against pIndexStop too, so error won't trigger unnecessarily in cases where missing blocks are noncontinuous (which can happen with manual pruning). ",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-07-25T15:31:09Z",
      "diff_hunk" : "@@ -1160,3 +1160,58 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 2) {\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"startheight\\\") (\\\"stopheight\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"startHeight\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stopHeight\\\"     (number, optional) blockheight where the rescan should stop\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            );\n+    }\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBlockIndex *pIndexStart = NULL;\n+    CBlockIndex *pIndexStop = NULL;\n+    if (request.params.size() > 0 && request.params[0].isNum()) {\n+        pIndexStart = chainActive[request.params[0].get_int()];\n+    }\n+\n+    if (request.params.size() > 1 && request.params[1].isNum()) {\n+        pIndexStop = chainActive[request.params[1].get_int()];\n+    }\n+\n+    if (!pIndexStart) {\n+         pIndexStart = chainActive.Genesis();\n+    }\n+\n+    //We can't rescan beyond non-pruned blocks, stop and throw an error\n+    if (fPruneMode) {\n+        CBlockIndex *block = chainActive.Tip();\n+        while (block && block->pprev && (block->pprev->nStatus & BLOCK_HAVE_DATA)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r129340626",
      "id" : 129340626,
      "original_commit_id" : "76e98222cd1d6587fdcb8000a8bff5d1e431ff5a",
      "original_position" : 44,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 52101375,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129340626",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r129342672"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129342672"
         }
      },
      "body" : "Should at least throw an error this isn't successful (the ScanForWalletTransactions call will return null on success, otherwise a pointer to the last failing block, so this should be pretty easy).",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-07-25T15:38:05Z",
      "diff_hunk" : "@@ -1149,3 +1149,51 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp))\n+        return NullUniValue;\n+\n+    if (request.fHelp || request.params.size() > 2)\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"start-height\\\") (\\\"stop-height\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"start-height\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stop-height\\\"     (number, optional) blockheight where the rescan should stop\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            );\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBlockIndex *pIndexStart = NULL;\n+    CBlockIndex *pIndexStop = NULL;\n+    if (request.params.size() > 0 && request.params[0].isNum())\n+        pIndexStart = chainActive[request.params[0].get_int()];\n+\n+    if (request.params.size() > 1 && request.params[1].isNum())\n+        pIndexStop = chainActive[request.params[1].get_int()];\n+\n+    if (!pIndexStart)\n+         pIndexStart = chainActive.Genesis();\n+\n+    //We can't rescan beyond non-pruned blocks, stop and throw an error\n+    if (fPruneMode)\n+    {\n+        CBlockIndex *block = chainActive.Tip();\n+        while (block && block->pprev && (block->pprev->nStatus & BLOCK_HAVE_DATA))\n+            block = block->pprev;\n+\n+        if (pIndexStart->nHeight < block->nHeight)\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Can't rescan beyond pruned data.\");\n+    }\n+\n+    if (pwallet)\n+        pwallet->ScanForWalletTransactions(pIndexStart, pIndexStop, true);\n+\n+    return NullUniValue;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r129342672",
      "id" : 129342672,
      "original_commit_id" : "6217140cfe35a209359e1d70d38397c5f0a7ba73",
      "original_position" : 86,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 52101375,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129342672",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r129343268"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129343268"
         }
      },
      "body" : "Capitalization of height doesn't match actual param name.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-07-25T15:40:07Z",
      "diff_hunk" : "@@ -1160,3 +1160,58 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 2) {\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"startheight\\\") (\\\"stopheight\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"startHeight\\\"    (number, optional) blockheight where the rescan should start\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r129343268",
      "id" : 129343268,
      "original_commit_id" : "76e98222cd1d6587fdcb8000a8bff5d1e431ff5a",
      "original_position" : 17,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 52101375,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129343268",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r129344411"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129344411"
         }
      },
      "body" : "Could do what `pruneblockchain` does and allow height to be specified either as a physical height or a time: https://github.com/bitcoin/bitcoin/blob/1caafa6cde3b88d926611771f9b4c06fcc6e0007/src/rpc/blockchain.cpp#L855",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-07-25T15:44:10Z",
      "diff_hunk" : "@@ -1160,3 +1160,58 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 2) {\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"startheight\\\") (\\\"stopheight\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"startHeight\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stopHeight\\\"     (number, optional) blockheight where the rescan should stop\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r129344411",
      "id" : 129344411,
      "original_commit_id" : "76e98222cd1d6587fdcb8000a8bff5d1e431ff5a",
      "original_position" : 18,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 52101375,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-11T19:12:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129344411",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "body" : "If #10941 goes first then the test can be extended to do a `rescanblockchain` and assert the notified blocks.",
      "created_at" : "2017-07-27T21:37:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-318493700",
      "id" : 318493700,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2017-07-27T21:37:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/318493700",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "body" : "Rebased and addressed @ryanofsky 's comments on my `rpc_rescan` branch.",
      "created_at" : "2017-08-11T18:52:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-321891792",
      "id" : 321891792,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2017-08-11T18:52:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321891792",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "body" : "Cherry picked @luke-jr rebased / overhauled version.\r\nStill needs an RPC test.",
      "created_at" : "2017-08-11T19:14:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#issuecomment-321896323",
      "id" : 321896323,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/7061",
      "updated_at" : "2017-08-11T19:14:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/321896323",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132807511"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132807511"
         }
      },
      "body" : "Remove inner `) (`.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-08-12T02:07:30Z",
      "diff_hunk" : "@@ -1160,3 +1160,66 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 2) {\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"startheight\\\") (\\\"stopheight\\\")\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132807511",
      "id" : 132807511,
      "original_commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "original_position" : 14,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 14,
      "pull_request_review_id" : 55933557,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-12T02:33:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132807511",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132807587"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132807587"
         }
      },
      "body" : "Just `start`?\r\n\r\nAlso, if positive then height, if negative then depth relative to tip. Same for `stop`.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-08-12T02:11:49Z",
      "diff_hunk" : "@@ -1160,3 +1160,66 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 2) {\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"startheight\\\") (\\\"stopheight\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"startheight\\\"    (number, optional) blockheight where the rescan should start\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132807587",
      "id" : 132807587,
      "original_commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "original_position" : 17,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 17,
      "pull_request_review_id" : 55933557,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-12T02:33:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132807587",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132807622"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132807622"
         }
      },
      "body" : "IMO `if (!request.params[0].isNull())` so that `get_int` throws if invalid value is supplied.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-08-12T02:14:32Z",
      "diff_hunk" : "@@ -1160,3 +1160,66 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 2) {\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"startheight\\\") (\\\"stopheight\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"startheight\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stopheight\\\"     (number, optional) blockheight where the rescan should stop\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            );\n+    }\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBlockIndex *pindexStart = NULL;\n+    CBlockIndex *pindexStop = NULL;\n+    if (request.params[0].isNum()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132807622",
      "id" : 132807622,
      "original_commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "original_position" : 29,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 29,
      "pull_request_review_id" : 55933557,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-12T02:33:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132807622",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132807623"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132807623"
         }
      },
      "body" : "Same as above.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-08-12T02:14:39Z",
      "diff_hunk" : "@@ -1160,3 +1160,66 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 2) {\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"startheight\\\") (\\\"stopheight\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"startheight\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stopheight\\\"     (number, optional) blockheight where the rescan should stop\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            );\n+    }\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBlockIndex *pindexStart = NULL;\n+    CBlockIndex *pindexStop = NULL;\n+    if (request.params[0].isNum()) {\n+        pindexStart = chainActive[request.params[0].get_int()];\n+    }\n+    if (!pindexStart) {\n+        pindexStart = chainActive.Genesis();\n+    }\n+\n+    if (request.params[1].isNum()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132807623",
      "id" : 132807623,
      "original_commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "original_position" : 36,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 36,
      "pull_request_review_id" : 55933557,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-12T02:33:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132807623",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132807639"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132807639"
         }
      },
      "body" : "Use `std::swap`?",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-08-12T02:15:30Z",
      "diff_hunk" : "@@ -1160,3 +1160,66 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 2) {\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"startheight\\\") (\\\"stopheight\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"startheight\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stopheight\\\"     (number, optional) blockheight where the rescan should stop\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            );\n+    }\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBlockIndex *pindexStart = NULL;\n+    CBlockIndex *pindexStop = NULL;\n+    if (request.params[0].isNum()) {\n+        pindexStart = chainActive[request.params[0].get_int()];\n+    }\n+    if (!pindexStart) {\n+        pindexStart = chainActive.Genesis();\n+    }\n+\n+    if (request.params[1].isNum()) {\n+        pindexStop = chainActive[request.params[1].get_int()];\n+    }\n+\n+    if (pindexStop && pindexStop->nHeight < pindexStart->nHeight) {\n+        // Flip the parameters to the expected order\n+        CBlockIndex * const tmp = pindexStart;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132807639",
      "id" : 132807639,
      "original_commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "original_position" : 42,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 42,
      "pull_request_review_id" : 55933557,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-12T02:33:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132807639",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132807647"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132807647"
         }
      },
      "body" : "Should be an error instead?",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-08-12T02:16:08Z",
      "diff_hunk" : "@@ -1160,3 +1160,66 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 2) {\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"startheight\\\") (\\\"stopheight\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"startheight\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stopheight\\\"     (number, optional) blockheight where the rescan should stop\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            );\n+    }\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBlockIndex *pindexStart = NULL;\n+    CBlockIndex *pindexStop = NULL;\n+    if (request.params[0].isNum()) {\n+        pindexStart = chainActive[request.params[0].get_int()];\n+    }\n+    if (!pindexStart) {\n+        pindexStart = chainActive.Genesis();\n+    }\n+\n+    if (request.params[1].isNum()) {\n+        pindexStop = chainActive[request.params[1].get_int()];\n+    }\n+\n+    if (pindexStop && pindexStop->nHeight < pindexStart->nHeight) {\n+        // Flip the parameters to the expected order",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132807647",
      "id" : 132807647,
      "original_commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "original_position" : 41,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 41,
      "pull_request_review_id" : 55933557,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-12T02:33:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132807647",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132807700"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132807700"
         }
      },
      "body" : "Should not happen, assert instead?",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-08-12T02:19:21Z",
      "diff_hunk" : "@@ -1545,12 +1545,19 @@ int64_t CWallet::RescanFromTime(int64_t startTime, bool update)\n  * Returns null if scan was successful. Otherwise, if a complete rescan was not\n  * possible (due to pruning or corruption), returns pointer to the most recent\n  * block that could not be scanned.\n+ *\n+ * If pindexStop is not a nullptr, the scan will stop at the block-index\n+ * defined by pindexStop\n  */\n-CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool fUpdate)\n+CBlockIndex* CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, CBlockIndex* pindexStop, bool fUpdate)\n {\n     int64_t nNow = GetTime();\n     const CChainParams& chainParams = Params();\n \n+    if (pindexStop && pindexStop->nHeight < pindexStart->nHeight) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132807700",
      "id" : 132807700,
      "original_commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "original_position" : 23,
      "path" : "src/wallet/wallet.cpp",
      "position" : 23,
      "pull_request_review_id" : 55933557,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-12T02:33:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132807700",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132807816"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132807816"
         }
      },
      "body" : "Correct me if I'm wrong, but if start has `BLOCK_HAVE_DATA` then the remaining blocks also have, therefore no need to loop?",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-08-12T02:25:36Z",
      "diff_hunk" : "@@ -1160,3 +1160,66 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 2) {\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"startheight\\\") (\\\"stopheight\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"startheight\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stopheight\\\"     (number, optional) blockheight where the rescan should stop\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            );\n+    }\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBlockIndex *pindexStart = NULL;\n+    CBlockIndex *pindexStop = NULL;\n+    if (request.params[0].isNum()) {\n+        pindexStart = chainActive[request.params[0].get_int()];\n+    }\n+    if (!pindexStart) {\n+        pindexStart = chainActive.Genesis();\n+    }\n+\n+    if (request.params[1].isNum()) {\n+        pindexStop = chainActive[request.params[1].get_int()];\n+    }\n+\n+    if (pindexStop && pindexStop->nHeight < pindexStart->nHeight) {\n+        // Flip the parameters to the expected order\n+        CBlockIndex * const tmp = pindexStart;\n+        pindexStart = pindexStop;\n+        pindexStop = tmp;\n+    }\n+\n+    // We can't rescan beyond non-pruned blocks, stop and throw an error\n+    if (fPruneMode) {\n+        int nHeight = pindexStart->nHeight;\n+        while ((!pindexStop) || nHeight <= pindexStop->nHeight) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132807816",
      "id" : 132807816,
      "original_commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "original_position" : 50,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 50,
      "pull_request_review_id" : 55933557,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-12T02:33:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132807816",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132807841"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132807841"
         }
      },
      "body" : "`pindex_start`?",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-08-12T02:27:01Z",
      "diff_hunk" : "@@ -1160,3 +1160,66 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 2) {\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"startheight\\\") (\\\"stopheight\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"startheight\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stopheight\\\"     (number, optional) blockheight where the rescan should stop\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            );\n+    }\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBlockIndex *pindexStart = NULL;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132807841",
      "id" : 132807841,
      "original_commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "original_position" : 27,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 27,
      "pull_request_review_id" : 55933557,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-12T02:33:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132807841",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132807866"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132807866"
         }
      },
      "body" : "Maybe we should `} else { pindex_stop = chainActive.Tip(); }`?",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-08-12T02:28:25Z",
      "diff_hunk" : "@@ -1160,3 +1160,66 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 2) {\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"startheight\\\") (\\\"stopheight\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"startheight\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stopheight\\\"     (number, optional) blockheight where the rescan should stop\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            );\n+    }\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBlockIndex *pindexStart = NULL;\n+    CBlockIndex *pindexStop = NULL;\n+    if (request.params[0].isNum()) {\n+        pindexStart = chainActive[request.params[0].get_int()];\n+    }\n+    if (!pindexStart) {\n+        pindexStart = chainActive.Genesis();\n+    }\n+\n+    if (request.params[1].isNum()) {\n+        pindexStop = chainActive[request.params[1].get_int()];\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132807866",
      "id" : 132807866,
      "original_commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "original_position" : 38,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 38,
      "pull_request_review_id" : 55933557,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-12T02:33:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132807866",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132807938"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132807938"
         }
      },
      "body" : "Note that it's inclusive?",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-08-12T02:30:41Z",
      "diff_hunk" : "@@ -1160,3 +1160,66 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 2) {\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"startheight\\\") (\\\"stopheight\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"startheight\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stopheight\\\"     (number, optional) blockheight where the rescan should stop\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132807938",
      "id" : 132807938,
      "original_commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "original_position" : 18,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 18,
      "pull_request_review_id" : 55933557,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-12T02:33:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132807938",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132815641"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132815641"
         }
      },
      "body" : "No... they're both independently optional.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-08-12T10:52:31Z",
      "diff_hunk" : "@@ -1160,3 +1160,66 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 2) {\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"startheight\\\") (\\\"stopheight\\\")\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132815641",
      "id" : 132815641,
      "original_commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "original_position" : 14,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 14,
      "pull_request_review_id" : 55941516,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-12T10:52:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132815641",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132815669"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132815669"
         }
      },
      "body" : "Why?",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-08-12T10:55:21Z",
      "diff_hunk" : "@@ -1160,3 +1160,66 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 2) {\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"startheight\\\") (\\\"stopheight\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"startheight\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stopheight\\\"     (number, optional) blockheight where the rescan should stop\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            );\n+    }\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBlockIndex *pindexStart = NULL;\n+    CBlockIndex *pindexStop = NULL;\n+    if (request.params[0].isNum()) {\n+        pindexStart = chainActive[request.params[0].get_int()];\n+    }\n+    if (!pindexStart) {\n+        pindexStart = chainActive.Genesis();\n+    }\n+\n+    if (request.params[1].isNum()) {\n+        pindexStop = chainActive[request.params[1].get_int()];\n+    }\n+\n+    if (pindexStop && pindexStop->nHeight < pindexStart->nHeight) {\n+        // Flip the parameters to the expected order",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132815669",
      "id" : 132815669,
      "original_commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "original_position" : 41,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 41,
      "pull_request_review_id" : 55941550,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-12T10:55:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132815669",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132815673"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132815673"
         }
      },
      "body" : "But without named args that's not possible.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-08-12T10:55:32Z",
      "diff_hunk" : "@@ -1160,3 +1160,66 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 2) {\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"startheight\\\") (\\\"stopheight\\\")\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132815673",
      "id" : 132815673,
      "original_commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "original_position" : 14,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 14,
      "pull_request_review_id" : 55941555,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-12T10:55:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132815673",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132815681"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132815681"
         }
      },
      "body" : "I think this may be currently true, but perhaps not safe to assume for the future. Unsure.",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-08-12T10:55:59Z",
      "diff_hunk" : "@@ -1160,3 +1160,66 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 2) {\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"startheight\\\") (\\\"stopheight\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"startheight\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stopheight\\\"     (number, optional) blockheight where the rescan should stop\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            );\n+    }\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBlockIndex *pindexStart = NULL;\n+    CBlockIndex *pindexStop = NULL;\n+    if (request.params[0].isNum()) {\n+        pindexStart = chainActive[request.params[0].get_int()];\n+    }\n+    if (!pindexStart) {\n+        pindexStart = chainActive.Genesis();\n+    }\n+\n+    if (request.params[1].isNum()) {\n+        pindexStop = chainActive[request.params[1].get_int()];\n+    }\n+\n+    if (pindexStop && pindexStop->nHeight < pindexStart->nHeight) {\n+        // Flip the parameters to the expected order\n+        CBlockIndex * const tmp = pindexStart;\n+        pindexStart = pindexStop;\n+        pindexStop = tmp;\n+    }\n+\n+    // We can't rescan beyond non-pruned blocks, stop and throw an error\n+    if (fPruneMode) {\n+        int nHeight = pindexStart->nHeight;\n+        while ((!pindexStop) || nHeight <= pindexStop->nHeight) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132815681",
      "id" : 132815681,
      "original_commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "original_position" : 50,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 50,
      "pull_request_review_id" : 55941562,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-12T10:55:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132815681",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132815713"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132815713"
         }
      },
      "body" : "Why would start be greater than stop? Seems to be a bad call?",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-08-12T10:58:06Z",
      "diff_hunk" : "@@ -1160,3 +1160,66 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 2) {\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"startheight\\\") (\\\"stopheight\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"startheight\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stopheight\\\"     (number, optional) blockheight where the rescan should stop\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            );\n+    }\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBlockIndex *pindexStart = NULL;\n+    CBlockIndex *pindexStop = NULL;\n+    if (request.params[0].isNum()) {\n+        pindexStart = chainActive[request.params[0].get_int()];\n+    }\n+    if (!pindexStart) {\n+        pindexStart = chainActive.Genesis();\n+    }\n+\n+    if (request.params[1].isNum()) {\n+        pindexStop = chainActive[request.params[1].get_int()];\n+    }\n+\n+    if (pindexStop && pindexStop->nHeight < pindexStart->nHeight) {\n+        // Flip the parameters to the expected order",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132815713",
      "id" : 132815713,
      "original_commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "original_position" : 41,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 41,
      "pull_request_review_id" : 55941595,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-12T10:58:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132815713",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132815753"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132815753"
         }
      },
      "body" : "Maybe factor out to a CChain function so in the future it's more contained and for now remove the loop?",
      "commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "created_at" : "2017-08-12T11:00:54Z",
      "diff_hunk" : "@@ -1160,3 +1160,66 @@ UniValue importmulti(const JSONRPCRequest& mainRequest)\n \n     return response;\n }\n+\n+UniValue rescanblockchain(const JSONRPCRequest& request)\n+{\n+    CWallet * const pwallet = GetWalletForJSONRPCRequest(request);\n+    if (!EnsureWalletIsAvailable(pwallet, request.fHelp)) {\n+        return NullUniValue;\n+    }\n+\n+    if (request.fHelp || request.params.size() > 2) {\n+        throw std::runtime_error(\n+            \"rescanblockchain (\\\"startheight\\\") (\\\"stopheight\\\")\\n\"\n+            \"\\nRescan the local blockchain for wallet related transactions.\\n\"\n+            \"\\nArguments:\\n\"\n+            \"1. \\\"startheight\\\"    (number, optional) blockheight where the rescan should start\\n\"\n+            \"2. \\\"stopheight\\\"     (number, optional) blockheight where the rescan should stop\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            + HelpExampleRpc(\"rescanblockchain\", \"\\\"100000 120000\\\"\")\n+            );\n+    }\n+\n+    LOCK2(cs_main, pwallet->cs_wallet);\n+\n+    CBlockIndex *pindexStart = NULL;\n+    CBlockIndex *pindexStop = NULL;\n+    if (request.params[0].isNum()) {\n+        pindexStart = chainActive[request.params[0].get_int()];\n+    }\n+    if (!pindexStart) {\n+        pindexStart = chainActive.Genesis();\n+    }\n+\n+    if (request.params[1].isNum()) {\n+        pindexStop = chainActive[request.params[1].get_int()];\n+    }\n+\n+    if (pindexStop && pindexStop->nHeight < pindexStart->nHeight) {\n+        // Flip the parameters to the expected order\n+        CBlockIndex * const tmp = pindexStart;\n+        pindexStart = pindexStop;\n+        pindexStop = tmp;\n+    }\n+\n+    // We can't rescan beyond non-pruned blocks, stop and throw an error\n+    if (fPruneMode) {\n+        int nHeight = pindexStart->nHeight;\n+        while ((!pindexStop) || nHeight <= pindexStop->nHeight) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/7061#discussion_r132815753",
      "id" : 132815753,
      "original_commit_id" : "79a11731f398127543ef85ee7f8a1470da5046d1",
      "original_position" : 50,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 50,
      "pull_request_review_id" : 55941633,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/7061",
      "updated_at" : "2017-08-12T11:00:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/132815753",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
