[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK on ASN-based bucketing, no preference at the moment for how updates should work.",
      "created_at" : "2019-08-15T17:51:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16599#issuecomment-521733745",
      "id" : 521733745,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16599",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMTczMzc0NQ==",
      "updated_at" : "2019-08-15T17:51:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/521733745",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK on ASN-based bucketing in addition to legacy /16 bucketing.\r\n\r\nMaking sure peers are diverse both across a.) the AS-number axis (ASN-based bucketing) and b.) the prefix axis (legacy `/16` bucketing) should maximise overall network robustness.\r\n\r\nIn addition to this: given that we'll have a prefix-to-ASN map -- has the wild idea of opening a connection to one peer from within the **same** AS-number as oneself been discussed?",
      "created_at" : "2019-08-15T19:31:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16599#issuecomment-521767364",
      "id" : 521767364,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16599",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMTc2NzM2NA==",
      "updated_at" : "2019-08-15T19:31:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/521767364",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift I believe so, see IRC discussion from a few days ago: http://www.erisian.com.au/bitcoin-core-dev/log-2019-08-09.html#l-266\r\n\r\nSuch a nearby node can be useful for fetching blocks quickly, but at the same time e.g. creates a privacy risk for transaction broadcast. I believe that's why @TheBlueMatt suggested to connect to them in `blocksonly` mode.",
      "created_at" : "2019-08-15T19:46:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16599#issuecomment-521772042",
      "id" : 521772042,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16599",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMTc3MjA0Mg==",
      "updated_at" : "2019-08-15T19:46:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/521772042",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Definitely Concept ACK\r\n\r\n> mapping file should be distributed along with the release, instead of becoming part of the binary.\r\n\r\nThere's [GeoLite2 ASN database](https://dev.maxmind.com/geoip/geoip2/geolite2/), which could be updated by the user independently (e.g. from the cron script) from Bitcoin Core updates. Actually, I'm not even sure it should be bundled with Bitcoin Core. If database is unavailable - fallback to old legacy /16 bucketing.\r\n\r\nAnybody planning to actually work on this?",
      "created_at" : "2019-08-15T21:38:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16599#issuecomment-521806882",
      "id" : 521806882,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16599",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMTgwNjg4Mg==",
      "updated_at" : "2019-08-15T21:38:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/521806882",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Sjors The \"connect-to-own-ASN\" idea has another drawback if implemented naÃ¯vely without considering the node's total connectivity in terms of ASN distribution:\r\n\r\nConsider an organisation disallowing Bitcoin traffic at the edge router level. A newly launched `bitcoind` would only be able to connect to ASN-local nodes. The node would risk becoming part of an ASN-local \"Bitcoin network\" which may not be connected to the global network.\r\n\r\nPerhaps we should require `N` connections to prefixes announced by external ASN:s before considering opening connections within our own ASN :-)",
      "created_at" : "2019-08-16T12:14:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16599#issuecomment-521988842",
      "id" : 521988842,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16599",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMTk4ODg0Mg==",
      "updated_at" : "2019-08-16T12:14:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/521988842",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : ">Anybody planning to actually work on this?\r\n\r\n@kristapsk I am sketching an implementation.",
      "created_at" : "2019-08-16T12:47:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16599#issuecomment-521997299",
      "id" : 521997299,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16599",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMTk5NzI5OQ==",
      "updated_at" : "2019-08-16T15:16:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/521997299",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift alternatively \"blocks only\" in this case would mean only downloading blocks for which you already have the headers (unlike `-blocksonly`). ",
      "created_at" : "2019-08-16T14:03:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16599#issuecomment-522020110",
      "id" : 522020110,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16599",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMjAyMDExMA==",
      "updated_at" : "2019-08-16T14:03:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/522020110",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@kristapsk @naumenkogs and I are working on a way to load a compressed IP-to-ASN map into bitcoind and use it for grouping IPs. The compressed scheme currently needs slightly less than 1 MB for a full map of the Internet.\n\nIt's an open question I think how this map will come to be. Initially I guess it'll just be optional and available for people to experiment with (using a command line flag and a file). Eventually we may want to bundle a map with Bitcoin Core or even make it part of the binary if this approach turns out to be useful.\n\nI wasn't aware of that publicly available GeoLite2 database; that looks useful to experiment with. So far I've been using a BGP router dump I got from somewhere.",
      "created_at" : "2019-08-17T06:06:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16599#issuecomment-522208698",
      "id" : 522208698,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16599",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMjIwODY5OA==",
      "updated_at" : "2019-08-17T06:06:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/522208698",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Relevant background reading: https://erebus-attack.comp.nus.edu.sg\r\n\r\nOne thing this attack leverages is that it can fake ASes \"behind\" it, from the victim node perspective. In light of that, for nodes that know their own IP address, would it make sense to divide AS buckets from an indivudal node perspective rather than from a global perspective?\r\n\r\nFor example if our node is in AS 1 and AS 1 has routes to AS 2 and 3, then for each new peer we check if it will route through AS 2 or AS 3 and spread equally over buckets. When AS 2 connects to AS 5 and 6, we again split the AS2 \"bucket\" between those two. No idea how much number crunching that involves (could wait until after IBD), or if there's even a reasonable algorithm.",
      "created_at" : "2019-08-17T11:04:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16599#issuecomment-522227679",
      "id" : 522227679,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16599",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMjIyNzY3OQ==",
      "updated_at" : "2019-08-17T11:04:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/522227679",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   }
]
