[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I can confirm the same thing. Also with Windows 10 and VS 2017. In my case x64.\r\n\r\n````\r\nc:\\Dev\\github\\sipsorcery_bitcoin\\src>test_bitcoin.exe\r\nRunning 358 test cases...\r\nunknown location(0): fatal error: in \"net_tests/caddrdb_read_corrupted\": stack overflow\r\nc:\\dev\\github\\sipsorcery_bitcoin\\src\\test\\net_tests.cpp(165): last checkpoint\r\n\r\n*** 1 failure is detected in the test module \"Bitcoin Core Test Suite\"\r\nDetected memory leaks!\r\nDumping objects ->\r\n{13151881} normal block at 0x000001CF3C63FA60, 16 bytes long.\r\n Data: < \\              > A8 5C 05 97 C3 00 00 00 00 00 00 00 00 00 00 00\r\n....\r\n````\r\n\r\nWill do some digging.",
      "created_at" : "2019-08-17T10:24:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16575#issuecomment-522225276",
      "id" : 522225276,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16575",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMjIyNTI3Ng==",
      "updated_at" : "2019-08-17T10:24:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/522225276",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Stack trace below for the failing `net_tests/caddrdb_read_corrupted` unit test.\r\n\r\nThe strange thing is the tests are passing correctly in the appveyor msbuild job (update: the appveyor job does a release build so that could be the reason).\r\n\r\n````\r\nsrc\\test_bitcoin.exe -k stdout -e stdout 2> NUL\r\nRunning 358 test cases...\r\n*** No errors detected\r\n````\r\n\r\n I've looked over commit history but didn't spot a smoking gun. Will step back a few commits and to try and track down where the test starts failing.\r\n\r\n````\r\n \ttest_bitcoin.exe!common_vsprintf<__crt_stdio_output::format_validation_base,char>(const unsigned __int64 options, char * const buffer, const unsigned __int64 buffer_count, const char * const format, __crt_locale_pointers * const locale, char * const arglist) Line 141\tC++\r\n \ttest_bitcoin.exe!common_vsprintf_s<char>(const unsigned __int64 options, char * const buffer, const unsigned __int64 buffer_count, const char * const format, __crt_locale_pointers * const locale, char * const arglist) Line 268\tC++\r\n \ttest_bitcoin.exe!__stdio_common_vsprintf_s(unsigned __int64 options, char * buffer, unsigned __int64 buffer_count, const char * format, __crt_locale_pointers * locale, char * arglist) Line 297\tC++\r\n \t[External Code]\t\r\n \ttest_bitcoin.exe!tinyformat::formatValue<int>(std::basic_ostream<char,std::char_traits<char> > & out, const char * __formal, const char * fmtEnd, int ntrunc, const int & value) Line 346\tC++\r\n \ttest_bitcoin.exe!tinyformat::detail::FormatArg::formatImpl<int>(std::basic_ostream<char,std::char_traits<char> > & out, const char * fmtBegin, const char * fmtEnd, int ntrunc, const void * value) Line 532\tC++\r\n \ttest_bitcoin.exe!tinyformat::detail::FormatArg::format(std::basic_ostream<char,std::char_traits<char> > & out, const char * fmtBegin, const char * fmtEnd, int ntrunc) Line 517\tC++\r\n \ttest_bitcoin.exe!tinyformat::detail::formatImpl(std::basic_ostream<char,std::char_traits<char> > & out, const char * fmt, const tinyformat::detail::FormatArg * formatters, int numFormatters) Line 816\tC++\r\n \ttest_bitcoin.exe!tinyformat::vformat(std::basic_ostream<char,std::char_traits<char> > & out, const char * fmt, const tinyformat::FormatList & list) Line 960\tC++\r\n \ttest_bitcoin.exe!tinyformat::format<int,int,int,int,int,int>(std::basic_ostream<char,std::char_traits<char> > & out, const char * fmt, const int & <args_0>, const int & <args_1>, const int & <args_2>, const int & <args_3>, const int & <args_4>, const int & <args_5>) Line 970\tC++\r\n \ttest_bitcoin.exe!tinyformat::format<int,int,int,int,int,int>(const char * fmt, const int & <args_0>, const int & <args_1>, const int & <args_2>, const int & <args_3>, const int & <args_4>, const int & <args_5>) Line 979\tC++\r\n \ttest_bitcoin.exe!FormatISO8601DateTime(__int64 nTime) Line 101\tC++\r\n \ttest_bitcoin.exe!BCLog::Logger::LogTimestampStr(const std::basic_string<char,std::char_traits<char>,std::allocator<char> > & str) Line 211\tC++\r\n \ttest_bitcoin.exe!BCLog::Logger::LogPrintStr(const std::basic_string<char,std::char_traits<char>,std::allocator<char> > & str) Line 236\tC++\r\n \ttest_bitcoin.exe!LogPrintf<std::basic_string<char,std::char_traits<char>,std::allocator<char> > >(const char * fmt, const std::basic_string<char,std::char_traits<char>,std::allocator<char> > & <args_0>) Line 154\tC++\r\n \ttest_bitcoin.exe!error<char [14],char const *>(const char * fmt, const char[14] & <args_0>, const char * const & <args_1>) Line 49\tC++\r\n \ttest_bitcoin.exe!``anonymous namespace'::DeserializeDB<CDataStream,CAddrMan>'::`1'::catch$0() Line 100\tC++\r\n \t[External Code]\t\r\n \ttest_bitcoin.exe!`anonymous namespace'::DeserializeDB<CDataStream,CAddrMan>(CDataStream & stream, CAddrMan & data, bool fCheckSum) Line 91\tC++\r\n \ttest_bitcoin.exe!CAddrDB::Read(CAddrMan & addr, CDataStream & ssPeers) Line 151\tC++\r\n>\ttest_bitcoin.exe!net_tests::caddrdb_read_corrupted::test_method() Line 165\tC++\r\n \ttest_bitcoin.exe!net_tests::caddrdb_read_corrupted_invoker() Line 138\tC++\r\n \ttest_bitcoin.exe!boost::detail::function::void_function_invoker0<void (__cdecl*)(void),void>::invoke(boost::detail::function::function_buffer & function_ptr) Line 118\tC++\r\n \ttest_bitcoin.exe!boost::function0<void>::operator()() Line 765\tC++\r\n \ttest_bitcoin.exe!boost::detail::forward::operator()() Line 1368\tC++\r\n \ttest_bitcoin.exe!boost::detail::function::function_obj_invoker0<boost::detail::forward,int>::invoke(boost::detail::function::function_buffer & function_obj_ptr) Line 138\tC++\r\n \ttest_bitcoin.exe!boost::function0<int>::operator()() Line 765\tC++\r\n \ttest_bitcoin.exe!boost::detail::do_invoke<boost::shared_ptr<boost::detail::translator_holder_base>,boost::function<int __cdecl(void)> >(const boost::shared_ptr<boost::detail::translator_holder_base> & tr, const boost::function<int __cdecl(void)> & F) Line 290\tC++\r\n \ttest_bitcoin.exe!boost::execution_monitor::catch_signals(const boost::function<int __cdecl(void)> & F) Line 1195\tC++\r\n \ttest_bitcoin.exe!boost::execution_monitor::execute(const boost::function<int __cdecl(void)> & F) Line 1277\tC++\r\n \ttest_bitcoin.exe!boost::execution_monitor::vexecute(const boost::function<void __cdecl(void)> & F) Line 1377\tC++\r\n \ttest_bitcoin.exe!boost::unit_test::unit_test_monitor_t::execute_and_translate(const boost::function<void __cdecl(void)> & func, unsigned long timeout_microseconds) Line 49\tC++\r\n \ttest_bitcoin.exe!boost::unit_test::framework::state::execute_test_tree(unsigned long tu_id, unsigned long timeout_microseconds, const boost::unit_test::framework::state::random_generator_helper * const p_random_generator) Line 823\tC++\r\n \ttest_bitcoin.exe!boost::unit_test::framework::state::execute_test_tree(unsigned long tu_id, unsigned long timeout_microseconds, const boost::unit_test::framework::state::random_generator_helper * const p_random_generator) Line 744\tC++\r\n \ttest_bitcoin.exe!boost::unit_test::framework::state::execute_test_tree(unsigned long tu_id, unsigned long timeout_microseconds, const boost::unit_test::framework::state::random_generator_helper * const p_random_generator) Line 744\tC++\r\n \ttest_bitcoin.exe!boost::unit_test::framework::run(unsigned long id, bool continue_test) Line 1688\tC++\r\n \ttest_bitcoin.exe!boost::unit_test::unit_test_main(boost::unit_test::test_suite *(*)(int, char * *) init_func, int argc, char * * argv) Line 250\tC++\r\n \ttest_bitcoin.exe!main(int argc, char * * argv) Line 305\tC++\r\n \t[External Code]\t\r\n````",
      "created_at" : "2019-08-17T14:12:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/16575#issuecomment-522240833",
      "id" : 522240833,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16575",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMjI0MDgzMw==",
      "updated_at" : "2019-08-17T14:16:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/522240833",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   }
]
