[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I like it but I NACK about the change in the header file.\r\nWhy do you remove this comment?",
      "created_at" : "2019-08-12T19:22:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16587#issuecomment-520560376",
      "id" : 520560376,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16587",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMDU2MDM3Ng==",
      "updated_at" : "2019-08-12T19:22:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/520560376",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/12272949?v=4",
         "events_url" : "https://api.github.com/users/emilengler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/emilengler/followers",
         "following_url" : "https://api.github.com/users/emilengler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/emilengler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/emilengler",
         "id" : 12272949,
         "login" : "emilengler",
         "node_id" : "MDQ6VXNlcjEyMjcyOTQ5",
         "organizations_url" : "https://api.github.com/users/emilengler/orgs",
         "received_events_url" : "https://api.github.com/users/emilengler/received_events",
         "repos_url" : "https://api.github.com/users/emilengler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/emilengler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/emilengler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/emilengler"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@emilengler \"Note that the functions below take a pindexPrev as input: they compute information for block B based on its parent.\" you mean this one ? I've tried to incorporate it in both `GetStateFor` and `GetStateSinceHeightFor` ones but should I make it clearer?",
      "created_at" : "2019-08-12T21:57:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16587#issuecomment-520610767",
      "id" : 520610767,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16587",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMDYxMDc2Nw==",
      "updated_at" : "2019-08-12T21:57:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/520610767",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16587#discussion_r313740555"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16587"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/313740555"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should be \"in-progress\" :-)",
      "commit_id" : "bcc2a0f45c1c2cb77cad24eb7f4c5a26dc185d91",
      "created_at" : "2019-08-14T07:36:48Z",
      "diff_hunk" : "@@ -50,12 +62,17 @@ class AbstractThresholdConditionChecker {\n     virtual int Threshold(const Consensus::Params& params) const =0;\n \n public:\n+    /** Returns the numerical statistics of an in-progess BIP9 softfork in the current period */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16587#discussion_r313740555",
      "id" : 313740555,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMzc0MDU1NQ==",
      "original_commit_id" : "bcc2a0f45c1c2cb77cad24eb7f4c5a26dc185d91",
      "original_position" : 46,
      "path" : "src/versionbits.h",
      "position" : 46,
      "pull_request_review_id" : 274712913,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16587",
      "updated_at" : "2019-08-14T07:36:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/313740555",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16587#discussion_r313769702"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16587"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/313769702"
         }
      },
      "author_association" : "MEMBER",
      "body" : "These match the `States` definitions in [BIP9](https://github.com/bitcoin/bips/blob/master/bip-0009.mediawiki#states) ð ",
      "commit_id" : "bcc2a0f45c1c2cb77cad24eb7f4c5a26dc185d91",
      "created_at" : "2019-08-14T08:52:54Z",
      "diff_hunk" : "@@ -17,24 +17,36 @@ static const int32_t VERSIONBITS_TOP_MASK = 0xE0000000UL;\n /** Total bits available for versionbits */\n static const int32_t VERSIONBITS_NUM_BITS = 29;\n \n+/** BIP 9 defines a finite-state-machine to deploy a softfork in multiple stages.\n+ *  It relies on the chain being a monotonic clock to start or timeout the\n+ *  deployment. State transitions happen during retarget period if conditions\n+ *  are met. In case of reorg, transitions can go backward. Without transition,\n+ *  state is inherited between periods. All blocks of a period share the same state.\n+ */\n enum class ThresholdState {\n-    DEFINED,\n-    STARTED,\n-    LOCKED_IN,\n-    ACTIVE,\n-    FAILED,\n+    DEFINED,   // First state that each softfork starts out as. The genesis block is by definition in this state for each deployment.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16587#discussion_r313769702",
      "id" : 313769702,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMzc2OTcwMg==",
      "original_commit_id" : "bcc2a0f45c1c2cb77cad24eb7f4c5a26dc185d91",
      "original_position" : 16,
      "path" : "src/versionbits.h",
      "position" : 16,
      "pull_request_review_id" : 274750061,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16587",
      "updated_at" : "2019-08-14T08:55:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/313769702",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16587#discussion_r313770172"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16587"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/313770172"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n/** BIP 9 allows multiple softforks to be deployed in parallel. We cache per-period state for every one of them\r\n```",
      "commit_id" : "bcc2a0f45c1c2cb77cad24eb7f4c5a26dc185d91",
      "created_at" : "2019-08-14T08:53:57Z",
      "diff_hunk" : "@@ -50,12 +62,17 @@ class AbstractThresholdConditionChecker {\n     virtual int Threshold(const Consensus::Params& params) const =0;\n \n public:\n+    /** Returns the numerical statistics of an in-progess BIP9 softfork in the current period */\n     BIP9Stats GetStateStatisticsFor(const CBlockIndex* pindex, const Consensus::Params& params) const;\n-    // Note that the functions below take a pindexPrev as input: they compute information for block B based on its parent.\n+    /** Returns the state for pindex A based on parent pindexPrev B. Applies any state transition if conditions are present.\n+     *  Caches state for first block of period. */\n     ThresholdState GetStateFor(const CBlockIndex* pindexPrev, const Consensus::Params& params, ThresholdConditionCache& cache) const;\n+    /** Returns the height since when the ThresholdState has started for pindex A based on parent pindexPrev B, all blocks of a period share the same */\n     int GetStateSinceHeightFor(const CBlockIndex* pindexPrev, const Consensus::Params& params, ThresholdConditionCache& cache) const;\n };\n \n+/** BIP 9 allows multiple softforks being deployed in parallel. We cache per-period state for every one of them",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16587#discussion_r313770172",
      "id" : 313770172,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMzc3MDE3Mg==",
      "original_commit_id" : "bcc2a0f45c1c2cb77cad24eb7f4c5a26dc185d91",
      "original_position" : 56,
      "path" : "src/versionbits.h",
      "position" : 56,
      "pull_request_review_id" : 274750061,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16587",
      "updated_at" : "2019-08-14T08:55:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/313770172",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK, thanks for adding documentation\r\n\r\n> Why do you remove this comment?\r\n\r\nThe comment is moved from the cpp to the header file, where it should be. Public functions should be documented at declaration and not at the implementation as this keeps the API documentation better together.",
      "created_at" : "2019-08-14T12:48:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16587#issuecomment-521231858",
      "id" : 521231858,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16587",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUyMTIzMTg1OA==",
      "updated_at" : "2019-08-14T12:53:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/521231858",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
