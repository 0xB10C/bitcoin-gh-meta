[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25297](https://github.com/bitcoin/bitcoin/pull/25297) (wallet: group independent db writes on single batched db transaction by furszy)\n* [#19602](https://github.com/bitcoin/bitcoin/pull/19602) (wallet: Migrate legacy wallets to descriptor wallets by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-08-29T23:11:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25957#issuecomment-1230961273",
      "id" : 1230961273,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25957",
      "node_id" : "IC_kwDOABII585JXvp5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1230961273/reactions"
      },
      "updated_at" : "2022-08-29T23:11:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1230961273",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\nLimiting the functionality to descriptor wallets is fine. We could add an argument to `loadwallet` that prevents a rescan, so a user can migrate (#19602) to a descriptor wallet and then rescan.\r\n\r\nIs there anything in @jamesob's #23549 you can reuse here?\r\n\r\nThe `rescanwallet` RPC help should mention that having `-blockfilterindex=1` dramatically speeds things up. It might also be good to have log message somewhere that it's using the block filter.\r\n\r\nI tried a rescan from genesis on a simple mainnet wallet. It was blazing fast (in comparison) and it found all transactions. It's  also slightly faster than the little helper script I wrote for [#23549](https://github.com/bitcoin/bitcoin/pull/23549#issuecomment-1149904391).\r\n\r\nBonus feature for a followup: fetch any matching pruned blocks.",
      "created_at" : "2022-08-31T12:12:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25957#issuecomment-1232855764",
      "id" : 1232855764,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25957",
      "node_id" : "IC_kwDOABII585Je-LU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232855764/reactions"
      },
      "updated_at" : "2022-08-31T12:38:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1232855764",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-09-01T21:15:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25957#issuecomment-1234790738",
      "id" : 1234790738,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25957",
      "node_id" : "IC_kwDOABII585JmWlS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1234790738/reactions"
      },
      "updated_at" : "2022-09-01T21:15:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1234790738",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased on master, with a few changes and an extra commit (see below).\r\n\r\n@Sjors:\r\n\r\nThanks for your initial feedback, much appreciated!\r\n\r\n> Limiting the functionality to descriptor wallets is fine. We could add an argument to `loadwallet` that prevents a rescan, so a user can migrate (#19602) to a descriptor wallet and then rescan.\r\n\r\nAgree, I think this sounds like a useful follow-up idea.\r\n\r\n> Is there anything in @jamesob's #23549 you can reuse here?\r\n\r\nNot that I could see; on contrast to scanblocks, the filter set is created from wallet-internal source rather than external user input and also has to be updated continuously.\r\n\r\n> The `rescanwallet` RPC help should mention that having `-blockfilterindex=1` dramatically speeds things up. It might also be good to have log message somewhere that it's using the block filter.\r\n\r\nDone, added [an extra commit](https://github.com/bitcoin/bitcoin/pull/25957/commits/d0114e02cddd9bf1cc8760ebe95941f80609259b) that documents the speedup possibilty for all RPCs that work on descriptor wallet and (possibly) involve a rescan (`rescanblockchain`, `importdescriptors`, `restorewallet` and `loadwallet`; did I miss any?). Also extended the \"Rescan started from block...\" debug message, showing if the fast or slow variant is used.\r\n\r\n> \r\n> I tried a rescan from genesis on a simple mainnet wallet. It was blazing fast (in comparison) and it found all transactions. It's also slightly faster than the little helper script I wrote for [#23549](https://github.com/bitcoin/bitcoin/pull/23549#issuecomment-1149904391).\r\n\r\nð ð ð \r\n\r\n> \r\n> Bonus feature for a followup: fetch any matching pruned blocks.\r\n\r\nSounds like a charming idea ð \r\n\r\nNote that this PR is covered in the [PR review club for next wednesday](https://bitcoincore.reviews/25957), hosted by LarryRuane.",
      "created_at" : "2022-09-02T16:23:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25957#issuecomment-1235691177",
      "id" : 1235691177,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25957",
      "node_id" : "IC_kwDOABII585Jpyap",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1235691177/reactions"
      },
      "updated_at" : "2022-09-02T16:23:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1235691177",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   }
]
