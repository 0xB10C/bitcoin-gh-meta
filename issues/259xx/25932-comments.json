[
   {
      "author_association" : "NONE",
      "body" : "Concept ACK, Approach ACK",
      "created_at" : "2022-08-27T01:22:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25932#issuecomment-1229088887",
      "id" : 1229088887,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25932",
      "node_id" : "IC_kwDOABII585JQmh3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1229088887/reactions"
      },
      "updated_at" : "2022-08-27T01:22:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1229088887",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8263430?v=4",
         "events_url" : "https://api.github.com/users/AryanJ-NYC/events{/privacy}",
         "followers_url" : "https://api.github.com/users/AryanJ-NYC/followers",
         "following_url" : "https://api.github.com/users/AryanJ-NYC/following{/other_user}",
         "gists_url" : "https://api.github.com/users/AryanJ-NYC/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/AryanJ-NYC",
         "id" : 8263430,
         "login" : "AryanJ-NYC",
         "node_id" : "MDQ6VXNlcjgyNjM0MzA=",
         "organizations_url" : "https://api.github.com/users/AryanJ-NYC/orgs",
         "received_events_url" : "https://api.github.com/users/AryanJ-NYC/received_events",
         "repos_url" : "https://api.github.com/users/AryanJ-NYC/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/AryanJ-NYC/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/AryanJ-NYC/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/AryanJ-NYC"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#26061](https://github.com/bitcoin/bitcoin/pull/26061) (wallet: Remove redundant waste calculation by yancyribbens)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-09-13T15:43:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25932#issuecomment-1245598163",
      "id" : 1245598163,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25932",
      "node_id" : "IC_kwDOABII585KPlHT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1245598163/reactions"
      },
      "updated_at" : "2022-09-13T15:43:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1245598163",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25932#discussion_r972373694"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25932"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972373694"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK 1a2d94ac586e2ecb55994205fceec14322a949fd\r\n\r\nSince the feerate is loop invariant, that boolean will always evaluate the same across one coin selection attempt, and it would be even better to just pull it out of the loop:\r\n\r\n```suggestion\r\n    [before loop]\r\n    bool is_high_feerate = utxo_pool.at(0).fee > utxo_pool.at(0).long_term_fee;\r\n    [â¦]\r\n            (is_high_feerate && curr_waste > best_waste)) { // Don't select things which we know will be more wasteful if the waste is increasing\r\n```",
      "commit_id" : "8ada8bb313eb95d55e9e1ac121bc6143a569e896",
      "created_at" : "2022-09-15T20:01:15Z",
      "diff_hunk" : "@@ -93,7 +93,7 @@ std::optional<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_poo\n         bool backtrack = false;\n         if (curr_value + curr_available_value < selection_target || // Cannot possibly reach target with the amount remaining in the curr_available_value.\n             curr_value > selection_target + cost_of_change || // Selected value is out of range, go back and try other branch\n-            (curr_waste > best_waste && (utxo_pool.at(0).fee - utxo_pool.at(0).long_term_fee) > 0)) { // Don't select things which we know will be more wasteful if the waste is increasing\n+            (curr_waste > best_waste && (utxo_pool.at(0).fee > utxo_pool.at(0).long_term_fee))) { // Don't select things which we know will be more wasteful if the waste is increasing",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25932#discussion_r972373694",
      "id" : 972373694,
      "line" : null,
      "node_id" : "PRRC_kwDOABII58459T6-",
      "original_commit_id" : "1a2d94ac586e2ecb55994205fceec14322a949fd",
      "original_line" : 96,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 1109768232,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25932",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972373694/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-15T20:01:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972373694",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
         "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Xekyo/followers",
         "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Xekyo",
         "id" : 4060799,
         "login" : "Xekyo",
         "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
         "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
         "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
         "repos_url" : "https://api.github.com/users/Xekyo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Xekyo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25932#discussion_r972861519"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25932"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972861519"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I considered this as well.  To my surprise moving the comparison outside of the loop didn't make any benchmark difference.  My guess is the compiler must be smart enough to do some optimization, or the benchmark tests aren't sensitive enough to detect a change.\r\n\r\nThat bieng said, I do think it's more readable outside of the for loop (and doesn't need to be compared every iteration).  @Xekyo does this look better https://github.com/bitcoin/bitcoin/pull/25932/commits/8ada8bb313eb95d55e9e1ac121bc6143a569e896?",
      "commit_id" : "8ada8bb313eb95d55e9e1ac121bc6143a569e896",
      "created_at" : "2022-09-16T10:02:44Z",
      "diff_hunk" : "@@ -93,7 +93,7 @@ std::optional<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_poo\n         bool backtrack = false;\n         if (curr_value + curr_available_value < selection_target || // Cannot possibly reach target with the amount remaining in the curr_available_value.\n             curr_value > selection_target + cost_of_change || // Selected value is out of range, go back and try other branch\n-            (curr_waste > best_waste && (utxo_pool.at(0).fee - utxo_pool.at(0).long_term_fee) > 0)) { // Don't select things which we know will be more wasteful if the waste is increasing\n+            (curr_waste > best_waste && (utxo_pool.at(0).fee > utxo_pool.at(0).long_term_fee))) { // Don't select things which we know will be more wasteful if the waste is increasing",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25932#discussion_r972861519",
      "id" : 972861519,
      "in_reply_to_id" : 972373694,
      "line" : null,
      "node_id" : "PRRC_kwDOABII5845_LBP",
      "original_commit_id" : "1a2d94ac586e2ecb55994205fceec14322a949fd",
      "original_line" : 96,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.cpp",
      "position" : null,
      "pull_request_review_id" : 1110445321,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25932",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972861519/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-09-16T10:36:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/972861519",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/817736?v=4",
         "events_url" : "https://api.github.com/users/yancyribbens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/yancyribbens/followers",
         "following_url" : "https://api.github.com/users/yancyribbens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/yancyribbens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/yancyribbens",
         "id" : 817736,
         "login" : "yancyribbens",
         "node_id" : "MDQ6VXNlcjgxNzczNg==",
         "organizations_url" : "https://api.github.com/users/yancyribbens/orgs",
         "received_events_url" : "https://api.github.com/users/yancyribbens/received_events",
         "repos_url" : "https://api.github.com/users/yancyribbens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/yancyribbens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/yancyribbens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/yancyribbens"
      }
   }
]
