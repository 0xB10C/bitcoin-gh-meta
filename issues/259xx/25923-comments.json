[
   {
      "author_association" : "MEMBER",
      "body" : "Can you explain why this is a \"bugfix\", considering that the API break was done on purpose at that time?",
      "created_at" : "2022-08-25T06:58:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25923#issuecomment-1226855039",
      "id" : 1226855039,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25923",
      "node_id" : "IC_kwDOABII585JIFJ_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1226855039/reactions"
      },
      "updated_at" : "2022-08-25T06:58:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1226855039",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\n@MarcoFalke, a bug is a bug, even if it was done on purpose. @jnewbery can clarify here, but I do not think this was even purposeful. My guess is that this breakage was unwanted, but acceptable in order to get the refactor from #21160 done. It later required fixup attempts like https://github.com/bitcoin/bitcoin/pull/24691 and https://github.com/bitcoin/bitcoin/pull/25176.\r\n\r\nSo, what happened? The `relaytxes` and `minfeefilter` fields were always present, and documented as such, in the output of the `getpeerinfo` RPC. #21160 changed it so that they could sometimes be missing. I guess the issues (both for GUI and RPC) were neglected during the review with a comment like [will almost always be true, so this isn't a big issue](https://github.com/bitcoin/bitcoin/pull/21160#discussion_r598567395). Well, it turned out our own tool `bitcoin-cli` broke due to the missing but expected fields. Some user apps will break too (if we don't fix it in 24.0).\r\n\r\nhttps://github.com/bitcoin/bitcoin/pull/24691 documented the fields as optional, but that is not appropriate because in the previous version they were not-optional. When users wrote their apps they assumed the fields will always be present. I think the \"optional\" flag should only be added when a field is initially introduced. Adding it later is the same as dropping the field - it breaks the \"contract\" with the user that the field will be present.\r\n\r\nOn this PR: I think it is ok to display the values `relaytxes=false` and `minfeefilter=0` in those corner cases. This is what the code did before #21160. If this is stripped to the bare minimum needed for the fix, I think it will have higher chance of making it to 24.0",
      "created_at" : "2022-08-25T13:06:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25923#issuecomment-1227233657",
      "id" : 1227233657,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25923",
      "node_id" : "IC_kwDOABII585JJhl5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1227233657/reactions"
      },
      "updated_at" : "2022-08-25T13:06:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1227233657",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> So, what happened? The relaytxes and minfeefilter fields were always present, and documented as such, in the output of the getpeerinfo RPC.\r\n\r\nThis isn't true. **None** of the fields in `getpeerinfo` were documented as always present until the 'optional' fields were explicitly documented in #22798. Prior to that PR, there was no explicit guarantee that any of the fields would be present.\r\n\r\nPR 22798 was opened _after_ #21160, then merged, and resulted in the silent conflict where the fields were not marked as optional. That could be caught by better testing of optional fields.\r\n\r\n> with a comment like \"will almost always be true, so this isn't a big issue\"\r\n\r\nStop misrepresenting other people's words. This was in response to a review comment about the GUI, not the RPC. You've also clipped the quote to misrepresent it further. Here's the full sentence: \"will almost always be true, so this isn't a big issue (if it was, then the other stats in nodeStateStats not being available would also be an issue).\" I stand by that - if it's a problem that one of the fields is not visible in the GUI for a very short window during peer connection, then it'd be a problem that the other fields like \"startingheight\" or \"minping\" are not present. It's clearly not a problem, since that's always been the case.\r\n\r\nAt the time of the comment, it was also totally consistent with the other fields that were optional but not marked as such, since #22798 had not yet been opened.\r\n\r\n> in the previous version they were not-optional. When users wrote their apps they assumed the fields will always be present. I think the \"optional\" flag should only be added when a field is initially introduced. Adding it later is the same as dropping the field - it breaks the \"contract\" with the user that the field will be present.\r\n\r\nAgain, this is false. The 'optional' documentation was added in #22798, which was only included in v0.23. Until then, there were many fields could be considered optional but not documented as such. Users writing apps that interacted with the field (including the bitcoin-cli netinfo app) should have made those apps tolerant to the fields not being present.\r\n\r\nAs can be seen in #22798, there were 10s of fields across many different RPCs that were 'optional' before being explicitly documented as such. Both the PR description and @vasild's comment make it sound like this was some nefarious intentional API break, or some egregious bug. It's neither.\r\n\r\nFrankly, it's utterly tedious to have to spend time rebutting false statements and misrepresentations made about PRs that were merged months ago. Unfortunately, this 'gotcha' attitude of trying to shame code authors seems to be becoming more common in this project. It's extremely harmful for productive collaboration, and is certainly not something I'd expect to see from someone putting themselves forward as a potential project maintainer.",
      "created_at" : "2022-08-25T14:49:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25923#issuecomment-1227366243",
      "id" : 1227366243,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25923",
      "node_id" : "IC_kwDOABII585JKB9j",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1227366243/reactions"
      },
      "updated_at" : "2022-08-25T14:49:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1227366243",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "My goodness, that's saddening to read. The only goal should be to improve Bitcoin. Let's please remember to assume good intentions, focus on the code and improving Bitcoin and leave the other stuff behind. Thank you!",
      "created_at" : "2022-08-25T16:15:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25923#issuecomment-1227486023",
      "id" : 1227486023,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25923",
      "node_id" : "IC_kwDOABII585JKfNH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1227486023/reactions"
      },
      "updated_at" : "2022-08-25T16:15:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1227486023",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > So, what happened? The relaytxes and minfeefilter fields were always present, and documented as such, in the output of the getpeerinfo RPC.\r\n> \r\n> This isn't true. **None** of the fields in `getpeerinfo` were documented as always present until the 'optional' fields were explicitly documented in #22798. Prior to that PR, there was no explicit guarantee that any of the fields would be present.\r\n\r\nAlright, by \"documented\" I meant that since it is not documented as optional, then it must be mandatory, but I was not aware that optional fields were introduced later (#22798). Thanks for bringing it up. This changes the perspective here.\r\n\r\n> This was in response to a review comment about the GUI, not the RPC.\r\n\r\nIn the RPC case you referred to the GUI comment: [As above for the gui peer console](https://github.com/bitcoin/bitcoin/pull/21160#discussion_r598567367).\r\n\r\nAnyway, I was just trying to clarify the situation here, not misinterpret, gotcha or shame. I am having coronavirus and should probably not be at the computer today at all, upsetting people. Will be more careful with my wording in the future.\r\n\r\nThank you!",
      "created_at" : "2022-08-25T16:17:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25923#issuecomment-1227488547",
      "id" : 1227488547,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25923",
      "node_id" : "IC_kwDOABII585JKf0j",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1227488547/reactions"
      },
      "updated_at" : "2022-08-25T16:17:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1227488547",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK ",
      "created_at" : "2022-08-25T16:37:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25923#issuecomment-1227509247",
      "id" : 1227509247,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25923",
      "node_id" : "IC_kwDOABII585JKk3_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1227509247/reactions"
      },
      "updated_at" : "2022-08-25T16:37:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1227509247",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94559964?v=4",
         "events_url" : "https://api.github.com/users/1440000bytes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/1440000bytes/followers",
         "following_url" : "https://api.github.com/users/1440000bytes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/1440000bytes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/1440000bytes",
         "id" : 94559964,
         "login" : "1440000bytes",
         "node_id" : "U_kgDOBaLe3A",
         "organizations_url" : "https://api.github.com/users/1440000bytes/orgs",
         "received_events_url" : "https://api.github.com/users/1440000bytes/received_events",
         "repos_url" : "https://api.github.com/users/1440000bytes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/1440000bytes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/1440000bytes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/1440000bytes"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "(Am considering closing this draft and opening a new one. If there are any helpful, friendly suggestions in the interim to improve the change, that would be great âºï¸)",
      "created_at" : "2022-08-25T16:43:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25923#issuecomment-1227514730",
      "id" : 1227514730,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25923",
      "node_id" : "IC_kwDOABII585JKmNq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1227514730/reactions"
      },
      "updated_at" : "2022-08-25T16:43:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1227514730",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25725](https://github.com/bitcoin/bitcoin/pull/25725) (consensus: Remove mainnet checkpoints by sdaftuar)\n* [#25717](https://github.com/bitcoin/bitcoin/pull/25717) (p2p: Implement anti-DoS headers sync by sdaftuar)\n* [#24170](https://github.com/bitcoin/bitcoin/pull/24170) (p2p, rpc: Manual block-relay-only connections with addnode by mzumsande)\n* [#10102](https://github.com/bitcoin/bitcoin/pull/10102) (Multiprocess bitcoin by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-08-26T05:25:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25923#issuecomment-1228067478",
      "id" : 1228067478,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25923",
      "node_id" : "IC_kwDOABII585JMtKW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1228067478/reactions"
      },
      "updated_at" : "2022-08-26T05:25:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1228067478",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25923#discussion_r955740987"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25923"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/955740987"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think this change is more accurate. `relaytxes` is false only when either a peer explicitly requests tx relay to be disabled (via setting the `fRelay` flag added in BIP 37 to false), or when we decide that an outgoing connection should be block-relay-only, in which case we ignore any request from it to relay transactions. Saying \"whether we will relay txs with this peer\" might be more accurate though.",
      "commit_id" : "7ee6f766530129a79aba2b0738db2c9e4ae64e56",
      "created_at" : "2022-08-26T07:25:41Z",
      "diff_hunk" : "@@ -642,7 +642,7 @@ class NetinfoRequestHandler : public BaseRequestHandler\n         \"  send     Time since last message sent to the peer, in seconds\\n\"\n         \"  recv     Time since last message received from the peer, in seconds\\n\"\n         \"  txn      Time since last novel transaction received from the peer and accepted into our mempool, in minutes\\n\"\n-        \"           \\\"*\\\" - the peer requested we not relay transactions to it (relaytxes is false)\\n\"\n+        \"           \\\"*\\\" - the peer did not request that we relay transactions to it (relaytxes is false)\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25923#discussion_r955740987",
      "id" : 955740987,
      "line" : 645,
      "node_id" : "PRRC_kwDOABII584493M7",
      "original_commit_id" : "7ee6f766530129a79aba2b0738db2c9e4ae64e56",
      "original_line" : 645,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/bitcoin-cli.cpp",
      "position" : 5,
      "pull_request_review_id" : 1086526152,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25923",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/955740987/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-26T07:47:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/955740987",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25923#discussion_r955744792"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25923"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/955744792"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`bitcoin-cli` could be being used with an older version of `bitcoind`, no? I think `get_bool` treats null as `false`, but I think `getInt` will throw. Probably not an issue if only unreleased versions of `bitcoind` treated these values as optional though.",
      "commit_id" : "7ee6f766530129a79aba2b0738db2c9e4ae64e56",
      "created_at" : "2022-08-26T07:30:00Z",
      "diff_hunk" : "@@ -478,7 +478,7 @@ class NetinfoRequestHandler : public BaseRequestHandler\n             const int8_t network_id{NetworkStringToId(network)};\n             if (network_id == UNKNOWN_NETWORK) continue;\n             const bool is_outbound{!peer[\"inbound\"].get_bool()};\n-            const bool is_tx_relay{peer[\"relaytxes\"].isNull() ? true : peer[\"relaytxes\"].get_bool()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25923#discussion_r955744792",
      "id" : 955744792,
      "line" : 481,
      "node_id" : "PRRC_kwDOABII584494IY",
      "original_commit_id" : "068cd21e9242f2231a21c2394184207ce2da293a",
      "original_line" : 481,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/bitcoin-cli.cpp",
      "position" : 4,
      "pull_request_review_id" : 1086526152,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25923",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/955744792/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-26T07:47:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/955744792",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25923#discussion_r955763613"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25923"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/955763613"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think we support arbitrary version combinations of bitcoin-cli and the rpc server? The only official supported combination is the one where both are built from the exact same commit hash.",
      "commit_id" : "7ee6f766530129a79aba2b0738db2c9e4ae64e56",
      "created_at" : "2022-08-26T07:53:00Z",
      "diff_hunk" : "@@ -478,7 +478,7 @@ class NetinfoRequestHandler : public BaseRequestHandler\n             const int8_t network_id{NetworkStringToId(network)};\n             if (network_id == UNKNOWN_NETWORK) continue;\n             const bool is_outbound{!peer[\"inbound\"].get_bool()};\n-            const bool is_tx_relay{peer[\"relaytxes\"].isNull() ? true : peer[\"relaytxes\"].get_bool()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25923#discussion_r955763613",
      "id" : 955763613,
      "in_reply_to_id" : 955744792,
      "line" : 481,
      "node_id" : "PRRC_kwDOABII584498ud",
      "original_commit_id" : "068cd21e9242f2231a21c2394184207ce2da293a",
      "original_line" : 481,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/bitcoin-cli.cpp",
      "position" : 4,
      "pull_request_review_id" : 1086558339,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25923",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/955763613/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-26T07:53:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/955763613",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25923#discussion_r956495113"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25923"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/956495113"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Concept ACK to returning partial data rather than none at all.",
      "commit_id" : "7ee6f766530129a79aba2b0738db2c9e4ae64e56",
      "created_at" : "2022-08-26T23:21:07Z",
      "diff_hunk" : "@@ -1459,50 +1459,52 @@ PeerRef PeerManagerImpl::RemovePeer(NodeId id)\n     return ret;\n }\n \n-bool PeerManagerImpl::GetNodeStateStats(NodeId nodeid, CNodeStateStats& stats) const\n+CNodeStateStats PeerManagerImpl::GetNodeStateStats(NodeId nodeid) const\n {\n+    CNodeStateStats stats;\n     {\n         LOCK(cs_main);\n         const CNodeState* state = State(nodeid);\n-        if (state == nullptr)\n-            return false;\n-        stats.nSyncHeight = state->pindexBestKnownBlock ? state->pindexBestKnownBlock->nHeight : -1;\n-        stats.nCommonHeight = state->pindexLastCommonBlock ? state->pindexLastCommonBlock->nHeight : -1;\n+        if (state == nullptr) {\n+            return stats;\n+        }\n+        if (state->pindexBestKnownBlock) {\n+            stats.m_sync_height = state->pindexBestKnownBlock->nHeight;\n+        }\n+        if (state->pindexLastCommonBlock) {\n+            stats.m_common_height = state->pindexLastCommonBlock->nHeight;\n+        }\n         for (const QueuedBlock& queue : state->vBlocksInFlight) {\n-            if (queue.pindex)\n-                stats.vHeightInFlight.push_back(queue.pindex->nHeight);\n+            if (queue.pindex) {\n+                stats.m_height_in_flight.push_back(queue.pindex->nHeight);\n+            }\n         }\n     }\n-\n-    PeerRef peer = GetPeerRef(nodeid);\n-    if (peer == nullptr) return false;\n-    stats.their_services = peer->m_their_services;\n-    stats.m_starting_height = peer->m_starting_height;\n+    const PeerRef peer = GetPeerRef(nodeid);\n+    if (peer == nullptr) {\n+        return stats;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25923#discussion_r956495113",
      "id" : 956495113,
      "line" : 1485,
      "node_id" : "PRRC_kwDOABII5845AvUJ",
      "original_commit_id" : "7ee6f766530129a79aba2b0738db2c9e4ae64e56",
      "original_line" : 1485,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 48,
      "pull_request_review_id" : 1087585618,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25923",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/956495113/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-26T23:22:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/956495113",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25923#discussion_r956495436"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25923"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/956495436"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Concept NACK to displaying incorrect data when data is not available.",
      "commit_id" : "7ee6f766530129a79aba2b0738db2c9e4ae64e56",
      "created_at" : "2022-08-26T23:22:33Z",
      "diff_hunk" : "@@ -1192,31 +1193,15 @@ void RPCConsole::updateDetailWidget()\n         ui->peerPermissions->setText(permissions.join(\" & \"));\n     }\n     ui->peerMappedAS->setText(stats->nodeStats.m_mapped_as != 0 ? QString::number(stats->nodeStats.m_mapped_as) : ts.na);\n-\n-    // This check fails for example if the lock was busy and\n-    // nodeStateStats couldn't be fetched.\n-    if (stats->fNodeStateStatsAvailable) {\n-        ui->peerServices->setText(GUIUtil::formatServicesStr(stats->nodeStateStats.their_services));\n-        // Sync height is init to -1\n-        if (stats->nodeStateStats.nSyncHeight > -1) {\n-            ui->peerSyncHeight->setText(QString(\"%1\").arg(stats->nodeStateStats.nSyncHeight));\n-        } else {\n-            ui->peerSyncHeight->setText(ts.unknown);\n-        }\n-        // Common height is init to -1\n-        if (stats->nodeStateStats.nCommonHeight > -1) {\n-            ui->peerCommonHeight->setText(QString(\"%1\").arg(stats->nodeStateStats.nCommonHeight));\n-        } else {\n-            ui->peerCommonHeight->setText(ts.unknown);\n-        }\n-        ui->peerHeight->setText(QString::number(stats->nodeStateStats.m_starting_height));\n-        ui->peerPingWait->setText(GUIUtil::formatPingTime(stats->nodeStateStats.m_ping_wait));\n-        ui->peerAddrRelayEnabled->setText(stats->nodeStateStats.m_addr_relay_enabled ? ts.yes : ts.no);\n-        ui->peerAddrProcessed->setText(QString::number(stats->nodeStateStats.m_addr_processed));\n-        ui->peerAddrRateLimited->setText(QString::number(stats->nodeStateStats.m_addr_rate_limited));\n-        ui->peerRelayTxes->setText(stats->nodeStateStats.m_relay_txs ? ts.yes : ts.no);\n-    }\n-\n+    ui->peerServices->setText(GUIUtil::formatServicesStr(stats->nodeStateStats.m_services));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25923#discussion_r956495436",
      "id" : 956495436,
      "line" : 1196,
      "node_id" : "PRRC_kwDOABII5845AvZM",
      "original_commit_id" : "7ee6f766530129a79aba2b0738db2c9e4ae64e56",
      "original_line" : 1196,
      "original_position" : 37,
      "original_start_line" : null,
      "path" : "src/qt/rpcconsole.cpp",
      "position" : 37,
      "pull_request_review_id" : 1087585618,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25923",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/956495436/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-08-26T23:22:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/956495436",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   }
]
