[
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/f38e39df7f009d9d229b14447a2644db65c3d183 for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2013-10-07T05:20:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3061#issuecomment-25785533",
      "id" : 25785533,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3061",
      "updated_at" : "2013-10-07T05:20:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/25785533",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3061#discussion_r6791867"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/6791867"
         }
      },
      "body" : "Is this special case needed? Or can it simply be handled by the if (n>=0) case?\r\n\r\n",
      "commit_id" : "f38e39df7f009d9d229b14447a2644db65c3d183",
      "created_at" : "2013-10-07T08:30:07Z",
      "diff_hunk" : "@@ -389,22 +389,36 @@ string FormatMoney(int64 n, bool fPlus)\n {\n     // Note: not using straight sprintf here because we do NOT want\n     // localized number formatting.\n-    int64 n_abs = (n > 0 ? n : -n);\n+    if (!n)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3061#discussion_r6791867",
      "id" : 6791867,
      "original_commit_id" : "f38e39df7f009d9d229b14447a2644db65c3d183",
      "original_position" : 5,
      "path" : "src/util.cpp",
      "position" : 5,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3061",
      "updated_at" : "2013-10-07T08:30:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/6791867",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "My main gripe here is that you're making the code longer instead of shorter. Have you benchmarked the improvement in any way?",
      "created_at" : "2013-10-07T08:30:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3061#issuecomment-25792037",
      "id" : 25792037,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3061",
      "updated_at" : "2013-10-07T08:30:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/25792037",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "That is really the sort of code I don't like to read, before AND after ^^.",
      "created_at" : "2013-10-07T08:41:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3061#issuecomment-25792589",
      "id" : 25792589,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3061",
      "updated_at" : "2013-10-07T08:41:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/25792589",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1419649?v=3",
         "events_url" : "https://api.github.com/users/Diapolo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Diapolo/followers",
         "following_url" : "https://api.github.com/users/Diapolo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Diapolo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Diapolo",
         "id" : 1419649,
         "login" : "Diapolo",
         "organizations_url" : "https://api.github.com/users/Diapolo/orgs",
         "received_events_url" : "https://api.github.com/users/Diapolo/received_events",
         "repos_url" : "https://api.github.com/users/Diapolo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Diapolo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Diapolo"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3061#discussion_r6816400"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/6816400"
         }
      },
      "body" : "not needed. It could be removed if desired and and this case be treated generically by the rest of the code.\r\nThat being said, it must be discriminated anyway when handling the sign. Cannot prefix '+' or '-' to it. So why not leverage this to skip the whole processing.\r\n",
      "commit_id" : "f38e39df7f009d9d229b14447a2644db65c3d183",
      "created_at" : "2013-10-08T03:33:37Z",
      "diff_hunk" : "@@ -389,22 +389,36 @@ string FormatMoney(int64 n, bool fPlus)\n {\n     // Note: not using straight sprintf here because we do NOT want\n     // localized number formatting.\n-    int64 n_abs = (n > 0 ? n : -n);\n+    if (!n)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3061#discussion_r6816400",
      "id" : 6816400,
      "original_commit_id" : "f38e39df7f009d9d229b14447a2644db65c3d183",
      "original_position" : 5,
      "path" : "src/util.cpp",
      "position" : 5,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3061",
      "updated_at" : "2013-10-08T03:33:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/6816400",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4829131?v=3",
         "events_url" : "https://api.github.com/users/lano1106/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lano1106/followers",
         "following_url" : "https://api.github.com/users/lano1106/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lano1106/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lano1106",
         "id" : 4829131,
         "login" : "lano1106",
         "organizations_url" : "https://api.github.com/users/lano1106/orgs",
         "received_events_url" : "https://api.github.com/users/lano1106/received_events",
         "repos_url" : "https://api.github.com/users/lano1106/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lano1106/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lano1106/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lano1106"
      }
   },
   {
      "body" : "laanwj,\r\n\r\nwhat metric are you using to make the statement that the code is longer?\r\n\r\nLine code count may be misleading. Out of the 26 new lines, 9 are empty lines or lines only having brackets. Also consider that previous statement:\r\n\r\nint64 n_abs = (n > 0 ? n : -n); \r\n\r\nis in fact a packed if else block.\r\n\r\nfair enough. I'll produce a small benchmark program and report back the result here.",
      "created_at" : "2013-10-08T03:45:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3061#issuecomment-25863055",
      "id" : 25863055,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3061",
      "updated_at" : "2013-10-08T03:45:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/25863055",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4829131?v=3",
         "events_url" : "https://api.github.com/users/lano1106/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lano1106/followers",
         "following_url" : "https://api.github.com/users/lano1106/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lano1106/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lano1106",
         "id" : 4829131,
         "login" : "lano1106",
         "organizations_url" : "https://api.github.com/users/lano1106/orgs",
         "received_events_url" : "https://api.github.com/users/lano1106/received_events",
         "repos_url" : "https://api.github.com/users/lano1106/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lano1106/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lano1106/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lano1106"
      }
   },
   {
      "body" : "I find the old code easier to read, and ease of reading is more important than performance. Especially for a routine like this, which I strongly doubt is on any critical code paths.\r\n ",
      "created_at" : "2013-10-08T04:01:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3061#issuecomment-25863484",
      "id" : 25863484,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3061",
      "updated_at" : "2013-10-08T04:01:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/25863484",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/331997?v=3",
         "events_url" : "https://api.github.com/users/gavinandresen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gavinandresen/followers",
         "following_url" : "https://api.github.com/users/gavinandresen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gavinandresen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gavinandresen",
         "id" : 331997,
         "login" : "gavinandresen",
         "organizations_url" : "https://api.github.com/users/gavinandresen/orgs",
         "received_events_url" : "https://api.github.com/users/gavinandresen/received_events",
         "repos_url" : "https://api.github.com/users/gavinandresen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gavinandresen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gavinandresen"
      }
   },
   {
      "body" : "Ok. it is not a good pull request. Hell is paved with good intentions.\r\n\r\nI have benchmarked my modifs and the results are almost identical between old code and proposal.\r\n\r\nAny memcpy avoided by new code is offseted possibly by the fact it has now 2 string object. local str and strprintf return value whereas the old code benefit from RVO (Return Value Optimization).\r\n\r\nThanks for your time guys. I'm learning and improving myself. I'll eventually come up with a good pull request!\r\n",
      "created_at" : "2013-10-08T04:42:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3061#issuecomment-25864581",
      "id" : 25864581,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3061",
      "updated_at" : "2013-10-08T04:42:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/25864581",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4829131?v=3",
         "events_url" : "https://api.github.com/users/lano1106/events{/privacy}",
         "followers_url" : "https://api.github.com/users/lano1106/followers",
         "following_url" : "https://api.github.com/users/lano1106/following{/other_user}",
         "gists_url" : "https://api.github.com/users/lano1106/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/lano1106",
         "id" : 4829131,
         "login" : "lano1106",
         "organizations_url" : "https://api.github.com/users/lano1106/orgs",
         "received_events_url" : "https://api.github.com/users/lano1106/received_events",
         "repos_url" : "https://api.github.com/users/lano1106/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/lano1106/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/lano1106/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/lano1106"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3061#discussion_r6822232"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3061"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/6822232"
         }
      },
      "body" : "Yes, the sign must be discriminated anyway, but for readability and flexibility it's best to have as little special cases as possible.",
      "commit_id" : "f38e39df7f009d9d229b14447a2644db65c3d183",
      "created_at" : "2013-10-08T10:51:23Z",
      "diff_hunk" : "@@ -389,22 +389,36 @@ string FormatMoney(int64 n, bool fPlus)\n {\n     // Note: not using straight sprintf here because we do NOT want\n     // localized number formatting.\n-    int64 n_abs = (n > 0 ? n : -n);\n+    if (!n)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3061#discussion_r6822232",
      "id" : 6822232,
      "original_commit_id" : "f38e39df7f009d9d229b14447a2644db65c3d183",
      "original_position" : 5,
      "path" : "src/util.cpp",
      "position" : 5,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3061",
      "updated_at" : "2013-10-08T10:51:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/6822232",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@lano1106 thanks for trying to help anyway!\r\n",
      "created_at" : "2013-10-08T10:51:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3061#issuecomment-25880294",
      "id" : 25880294,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3061",
      "updated_at" : "2013-10-08T10:51:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/25880294",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
