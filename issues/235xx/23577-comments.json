[
   {
      "author_association" : "MEMBER",
      "body" : "@ryanofsky and @sipa, this addresses most of your review comments in #16807 so you may like to take a look, thanks!",
      "created_at" : "2021-11-23T04:08:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23577#issuecomment-976153462",
      "id" : 976153462,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23577",
      "node_id" : "IC_kwDOABII5846Lut2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/976153462/reactions"
      },
      "updated_at" : "2021-11-23T04:08:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/976153462",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Notably, this removes the hardcoded GF1024 tables in favour of constexpr table generation.\r\n\r\nWow, this makes the compiler generate the table? Agree this is better for understandability, just wonder, does this have any noticeable impact on compilation time?",
      "created_at" : "2021-11-24T10:15:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23577#issuecomment-977731383",
      "id" : 977731383,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23577",
      "node_id" : "IC_kwDOABII5846Rv83",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/977731383/reactions"
      },
      "updated_at" : "2021-11-24T10:15:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/977731383",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> @laanwj Wow, this makes the compiler generate the table? Agree this is better for understandability, just wonder, does this have any noticeable impact on compilation time?\r\n\r\nIt shouldn't do, each element of the table only takes a few bitwise operations on 16 bit integers and the table is only 1024 elements.\r\n\r\n\r\nEDIT: a quick test compiling that file using clang takes 0.24 on master and 0.28 with this PR so it is pretty negligible overall.",
      "created_at" : "2021-11-24T21:26:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23577#issuecomment-978244288",
      "id" : 978244288,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23577",
      "node_id" : "IC_kwDOABII5846TtLA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/978244288/reactions"
      },
      "updated_at" : "2021-11-25T02:43:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/978244288",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I checked the assembly output from clang 13.0.0 and gcc 9.3.0 that the tables are indeed a) generated constants in `.rodata` and b) different from before (as expected and mentioned in the commit description) c) match between compilers.\r\n```\r\n\t.type\t_ZN6bech3212_GLOBAL__N_110GF1024_LOGE,@object # @_ZN6bech3212_GLOBAL__N_110GF1024_LOGE\r\n\t.section\t.rodata,\"a\",@progbits\r\n\t.p2align\t1\r\n_ZN6bech3212_GLOBAL__N_110GF1024_LOGE:\r\n\t.short\t65535                           # 0xffff\r\n\t.short\t0                               # 0x0\r\n\t.short\t99                              # 0x63\r\n\t.short\t363                             # 0x16b\r\n\t.short\t198                             # 0xc6\r\nâ®\r\n\t.type\t_ZN6bech3212_GLOBAL__N_110GF1024_EXPE,@object # @_ZN6bech3212_GLOBAL__N_110GF1024_EXPE\r\n\t.p2align\t1\r\n_ZN6bech3212_GLOBAL__N_110GF1024_EXPE:\r\n\t.short\t1                               # 0x1\r\n\t.short\t32                              # 0x20\r\n\t.short\t311                             # 0x137\r\n\t.short\t139                             # 0x8b\r\n\t.short\t206                             # 0xce\r\nâ®\r\n```\r\nFull values for both tables can be found here: https://0bin.net/paste/Lp6hKmVD#EwTuc1KFIDzy57g0g3EvtQiLIj3HWD4e+OGPWUJTwQ+ (I did not have anything to check them against).",
      "created_at" : "2021-11-29T13:42:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23577#issuecomment-981645627",
      "id" : 981645627,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23577",
      "node_id" : "IC_kwDOABII5846grk7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/981645627/reactions"
      },
      "updated_at" : "2021-11-29T13:42:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/981645627",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> (I did not have anything to check them against).\r\n\r\nLooks like the `GF1024_EXP` you posted differs from the one that is removed in this pull?",
      "created_at" : "2021-11-29T13:46:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23577#issuecomment-981648812",
      "id" : 981648812,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23577",
      "node_id" : "IC_kwDOABII5846gsWs",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/981648812/reactions"
      },
      "updated_at" : "2021-11-29T13:46:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/981648812",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I will review in detail shortly, but I suspect that @meshcollider perhaps included the table changes corresponding to https://github.com/sipa/bech32/pull/64 here? There is Sage code there that generates the tables too, if someone wants something to compare against.",
      "created_at" : "2021-11-29T13:55:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23577#issuecomment-981656156",
      "id" : 981656156,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23577",
      "node_id" : "IC_kwDOABII5846guJc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/981656156/reactions"
      },
      "updated_at" : "2021-11-29T13:55:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/981656156",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Looks like the GF1024_EXP you posted differs from the one that is removed in this pull?\r\n\r\nBoth tables are. From the commit:\r\n\r\n> Note that the tables generated by this code are different to the previous\r\nhardcoded tables, because we simplify to encoding (e) as 1 || 0 rather\r\nthan 9 || 15 (as was done in PR 64 of the bech32 repo).\r\n\r\nI began this test with the intent to compare if they were the same, then noticed they were not. But it's expected (they use a different encoding).\r\n\r\nEdit: I'll check against @sipa's sage output.\r\nEdit2: All values match. The only difference is that the size of  GF1024_EXP printed by the Sage script is 1024, while the structure here is 1023 long.",
      "created_at" : "2021-11-29T13:56:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23577#issuecomment-981656959",
      "id" : 981656959,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23577",
      "node_id" : "IC_kwDOABII5846guV_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/981656959/reactions"
      },
      "updated_at" : "2021-11-29T14:47:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/981656959",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm happy to split that commit into two, the first deriving the existing table and then the second modifying to the new table, if that would help review?\r\n\r\nThe length difference (1024 vs 1023) is just because the sage code also includes (a)^1023 = 1 = (a)^0.",
      "created_at" : "2021-11-29T20:52:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23577#issuecomment-982012078",
      "id" : 982012078,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23577",
      "node_id" : "IC_kwDOABII5846iFCu",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/982012078/reactions"
      },
      "updated_at" : "2021-11-29T20:57:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/982012078",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   }
]
