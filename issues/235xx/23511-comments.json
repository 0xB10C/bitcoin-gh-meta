[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23152](https://github.com/bitcoin/bitcoin/pull/23152) (build: add `--enable-lto` configuration option by fanquake)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-11-15T04:31:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23511#issuecomment-968529942",
      "id" : 968529942,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23511",
      "node_id" : "IC_kwDOABII5845upgW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/968529942/reactions"
      },
      "updated_at" : "2021-11-15T04:31:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/968529942",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Changing the minimum required glibc version is a two-fold task.\r\n\r\nFirstly, we drop support for systems with glibc 2.17. Effectively, one won't be able to run Bitcoin Core v23.0 on CentOS 7 in 2022. That looks completely reasonable to me.\r\n\r\nSecondly, we are choosing a new minimum required glibc version. And I believe we should stick to one which is actually available on a real system, to be able to test release binaries on it. My suggestion is to bump glibc up to 2.24 which is available on Debian 9.\r\n\r\nSo, Concept ACK on moving from 2.17, and ~Approach NACK on choosing 2.18 as a new one.~, see https://github.com/bitcoin/bitcoin/pull/23511#issuecomment-968823379.",
      "created_at" : "2021-11-15T09:06:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23511#issuecomment-968677150",
      "id" : 968677150,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23511",
      "node_id" : "IC_kwDOABII5845vNce",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/968677150/reactions"
      },
      "updated_at" : "2021-11-15T11:38:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/968677150",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> My suggestion is to bump glibc up to 2.24 which is available on Debian 9.\r\n\r\nUnless you're planning on taking advantage of features available in newer glibcs, or making the binaries actually fail to run against older glibcs, there's not really any point in bumping our minimum glibc requirement any further here.\r\n\r\nThe symbol-checker is just a sanity check that the release binaries only contain calls to functions available in a glibc <= version X. iirc the \"newest\" symbol we use in master is currently [`getauxval`](https://linux.die.net/man/3/getauxval), which was introduced in glibc 2.16, so our current release binaries should run on a machine with glibc 2.16. The minimum in the symbol-checker was just made 2.17, as it aligned with what was available on CentOS 7.\r\n\r\nWith this PR, the \"newest\" symbols will be some calls to `thread_local` related functions, introduced in glibc 2.18, and the minimum required version in the symbol-checker will align with function usage in the release binaries. You could increase the minimum required glibc version further, but that wouldn't change the release binaries, and they would still run on systems with glibc 2.18+. Either until someone introduces some new functionality, or we remove backwards compatibility related work arounds.",
      "created_at" : "2021-11-15T09:53:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23511#issuecomment-968717957",
      "id" : 968717957,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23511",
      "node_id" : "IC_kwDOABII5845vXaF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/968717957/reactions"
      },
      "updated_at" : "2021-11-15T09:53:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/968717957",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I mean that this PR changes approach from \"align with a glibc available on XXX\" to \"align glibc version to the newest symbol we actual use\", right?\r\n",
      "created_at" : "2021-11-15T10:00:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23511#issuecomment-968723350",
      "id" : 968723350,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23511",
      "node_id" : "IC_kwDOABII5845vYuW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/968723350/reactions"
      },
      "updated_at" : "2021-11-15T10:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/968723350",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Does it practically matter if the minimum is set to 2.23 or 2.24 or 2.18? If you want to check that it works on Debian 9, you can test that regardless of the what the minimum is set to?",
      "created_at" : "2021-11-15T10:12:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23511#issuecomment-968735638",
      "id" : 968735638,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23511",
      "node_id" : "IC_kwDOABII5845vbuW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/968735638/reactions"
      },
      "updated_at" : "2021-11-15T10:12:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/968735638",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Does it practically matter if the minimum is set to 2.23 or 2.24 or 2.18? If you want to check that it works on Debian 9, you can test that regardless of the what the minimum is set to?\r\n\r\nCorrect. But I mean a bit different notion. If we provide users a \"guarantee\" that our release binaries can be run on any system with glibc 2.18+ then we must be able to test them on an actual system with glibc 2.18. If symbol checking is just a \"sanity\" measure then no such testing is required.",
      "created_at" : "2021-11-15T10:21:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23511#issuecomment-968743191",
      "id" : 968743191,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23511",
      "node_id" : "IC_kwDOABII5845vdkX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/968743191/reactions"
      },
      "updated_at" : "2021-11-15T10:21:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/968743191",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I mean that this PR changes approach from \"align with a glibc available on XXX\" to \"align glibc version to the newest symbol we actual use\", right?\r\n\r\nYes.\r\n\r\n> Does it practically matter if the minimum is set to 2.23 or 2.24 or 2.18? \r\n\r\nI might be misunderstanding you, but, yes? If our minimum requirement was 2.24, then we'd change our code to align with that, i.e by removing back compat work arounds like [`--no-tls-get-addr-optimize`](https://github.com/bitcoin/bitcoin/blob/41a1b5f58ca59d2177dcadf834efd187fa3fba52/contrib/guix/libexec/build.sh#L266). Having code that was trying to achieve one thing, while actually claiming to support something else in our release checks, would be confusing.\r\n\r\nI don't think I've seen a good rationale for setting the minimum glibc requirement to anything other than what is actually used by our code. I'm not sure why choosing a glibc version shipped with the LTS of an arbitrary distro is better than that. Having the minimum requirement set to the actual minimum also means we also get immediate notification (via Guix build) when dependencies or requirements change with newly introduced code.",
      "created_at" : "2021-11-15T11:22:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23511#issuecomment-968808441",
      "id" : 968808441,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23511",
      "node_id" : "IC_kwDOABII5845vtf5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/968808441/reactions"
      },
      "updated_at" : "2021-11-15T11:22:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/968808441",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. Bumping to 2.18 seems fine for now. It can always be increased further, if needed.",
      "created_at" : "2021-11-15T11:26:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23511#issuecomment-968814528",
      "id" : 968814528,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23511",
      "node_id" : "IC_kwDOABII5845vu_A",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/968814528/reactions"
      },
      "updated_at" : "2021-11-15T11:26:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/968814528",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> > I mean that this PR changes approach from \"align with a glibc available on XXX\" to \"align glibc version to the newest symbol we actual use\", right?\r\n> \r\n> Yes.\r\n\r\nOk. Approach ACK.",
      "created_at" : "2021-11-15T11:38:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23511#issuecomment-968823379",
      "id" : 968823379,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23511",
      "node_id" : "IC_kwDOABII5845vxJT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/968823379/reactions"
      },
      "updated_at" : "2021-11-15T11:38:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/968823379",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   }
]
