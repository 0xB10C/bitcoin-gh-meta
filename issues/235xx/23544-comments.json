[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23497](https://github.com/bitcoin/bitcoin/pull/23497) (Add `src/node/` and `src/wallet/` code to `node::` and `wallet::` namespaces by ryanofsky)\n* [#23417](https://github.com/bitcoin/bitcoin/pull/23417) (wallet, spkm: Move key management from DescriptorScriptPubKeyMan to wallet level KeyManager by achow101)\n* [#23308](https://github.com/bitcoin/bitcoin/pull/23308) (Update basic multisig test/docs to use multipath descriptor by mjdietzx)\n* [#22838](https://github.com/bitcoin/bitcoin/pull/22838) (descriptors: Be able to specify change and receiving in a single descriptor string by achow101)\n* [#22689](https://github.com/bitcoin/bitcoin/pull/22689) (rpc: deprecate top-level fee fields in getmempool RPCs by josibake)\n* [#22364](https://github.com/bitcoin/bitcoin/pull/22364) (wallet: Make a tr() descriptor by default by achow101)\n* [#20205](https://github.com/bitcoin/bitcoin/pull/20205) (wallet: Properly support a wallet id by achow101)\n* [#19602](https://github.com/bitcoin/bitcoin/pull/19602) (wallet: Migrate legacy wallets to descriptor wallets by achow101)\n* [#15719](https://github.com/bitcoin/bitcoin/pull/15719) (Wallet passive startup by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-11-18T23:20:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23544#issuecomment-973409642",
      "id" : 973409642,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23544",
      "node_id" : "IC_kwDOABII5846BQ1q",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/973409642/reactions"
      },
      "updated_at" : "2021-11-18T23:20:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/973409642",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Concept ACK! Thanks for continuing this work",
      "created_at" : "2021-11-25T20:15:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23544#issuecomment-979451832",
      "id" : 979451832,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23544",
      "node_id" : "IC_kwDOABII5846YT-4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/979451832/reactions"
      },
      "updated_at" : "2021-11-25T20:15:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/979451832",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/24482484?v=4",
         "events_url" : "https://api.github.com/users/Rspigler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Rspigler/followers",
         "following_url" : "https://api.github.com/users/Rspigler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Rspigler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Rspigler",
         "id" : 24482484,
         "login" : "Rspigler",
         "node_id" : "MDQ6VXNlcjI0NDgyNDg0",
         "organizations_url" : "https://api.github.com/users/Rspigler/orgs",
         "received_events_url" : "https://api.github.com/users/Rspigler/received_events",
         "repos_url" : "https://api.github.com/users/Rspigler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Rspigler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Rspigler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Rspigler"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-12-13T23:17:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23544#issuecomment-992999546",
      "id" : 992999546,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23544",
      "node_id" : "IC_kwDOABII5847L_h6",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992999546/reactions"
      },
      "updated_at" : "2021-12-13T23:17:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/992999546",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "So cool! :rocket: \r\n\r\nI tried testing this as far as I could.\r\n\r\nFirst Node:\r\n\r\nCreated an empty wallet.\r\n\r\n`listdescriptors`:\r\n\r\n> {\r\n>   \"wallet_name\": \"1\",\r\n>   \"descriptors\": [\r\n>   ]\r\n> }\r\n\r\n:heavy_check_mark: \r\n\r\n`addhdseed`:\r\n\r\n> {\r\n>   \"fingerprint\": \"2aba6847\"\r\n> }\r\n\r\n`getxpub \"m/87'/0'/0'\"`:\r\n\r\n> \r\n> {\r\n>   \"xpub\": \"xpub6Bp9vBsEbMipghoCm7fnWbSvXc9gVyZS5Duzfc8WgrEEbCC8mDeg8YGHAtihrLg1XdjJT1qKYgM4Q7REz8B7zgoH6mWEHdMPDwMCihsbSgK\",\r\n>   \"fingerprint\": \"2aba6847\",\r\n>   \"origin\": \"[2aba6847/87'/0'/0']\"\r\n> }\r\n\r\nNow on to second node, since I don't have any HWW:\r\n\r\nCreated an empty wallet:\r\n\r\n`listdescriptors`:\r\n\r\n> {\r\n>   \"wallet_name\": \"2\",\r\n>   \"descriptors\": [\r\n>   ]\r\n> }\r\n\r\n:heavy_check_mark: \r\n\r\n`addhdseed`:\r\n\r\n> {\r\n>   \"fingerprint\": \"ad8a04e6\"\r\n> }\r\n\r\n`getxpub \"m/87'/0'/0'\"`:\r\n\r\n> {\r\n>   \"xpub\": \"xpub6DR65ocDPDwTphuxNogrNSWWsmUnFEpBWjhZABGxupZ65st8kaSWVmFripasF8in6JELXPNPbjwyqE8s7dqiGSYyrE9k5UGDF4XQCSALkqi\",\r\n>   \"fingerprint\": \"ad8a04e6\",\r\n>   \"origin\": \"[ad8a04e6/87'/0'/0']\"\r\n> }\r\n\r\n\r\nNow back to first node, to combine into descriptor:\r\n\r\n`wsh(sorted_multi(2,[2aba6847/87'/0'/0']xpub6Bp9vBsEbMipghoCm7fnWbSvXc9gVyZS5Duzfc8WgrEEbCC8mDeg8YGHAtihrLg1XdjJT1qKYgM4Q7REz8B7zgoH6mWEHdMPDwMCihsbSgK,[ad8a04e6/87'/0'/0']xpub6DR65ocDPDwTphuxNogrNSWWsmUnFEpBWjhZABGxupZ65st8kaSWVmFripasF8in6JELXPNPbjwyqE8s7dqiGSYyrE9k5UGDF4XQCSALkqi))`\r\n\r\nI tried various formats/syntax for `importdescriptors`, but all failed.  I'm sure it is something I did on my end.  Can you help? For example:\r\n\r\n`importdescriptors '[{ \"desc\": \"wsh(sorted_multi(2,[2aba6847/87'/0'/0']xpub6Bp9vBsEbMipghoCm7fnWbSvXc9gVyZS5Duzfc8WgrEEbCC8mDeg8YGHAtihrLg1XdjJT1qKYgM4Q7REz8B7zgoH6mWEHdMPDwMCihsbSgK,[ad8a04e6/87'/0'/0']xpub6DR65ocDPDwTphuxNogrNSWWsmUnFEpBWjhZABGxupZ65st8kaSWVmFripasF8in6JELXPNPbjwyqE8s7dqiGSYyrE9k5UGDF4XQCSALkqi))>\", \"timestamp\":now, \"internal\": true }`\r\n\r\n",
      "created_at" : "2021-12-22T15:08:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23544#issuecomment-999645472",
      "id" : 999645472,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23544",
      "node_id" : "IC_kwDOABII5847lWEg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/999645472/reactions"
      },
      "updated_at" : "2021-12-22T15:08:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/999645472",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/24482484?v=4",
         "events_url" : "https://api.github.com/users/Rspigler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Rspigler/followers",
         "following_url" : "https://api.github.com/users/Rspigler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Rspigler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Rspigler",
         "id" : 24482484,
         "login" : "Rspigler",
         "node_id" : "MDQ6VXNlcjI0NDgyNDg0",
         "organizations_url" : "https://api.github.com/users/Rspigler/orgs",
         "received_events_url" : "https://api.github.com/users/Rspigler/received_events",
         "repos_url" : "https://api.github.com/users/Rspigler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Rspigler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Rspigler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Rspigler"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Rspigler in your examples the descriptors you importing are missing a derivation rule after the xpub, e.g. `xpub.../0/*` and they're missing a checksum (add a wrong one and it will tell you the right answers, e.g. `#00000000`). Also the `>` seems out of place.\r\n\r\nBtw, you could try running the Trezor or ColdCard emulator, it'll work with HWI. ",
      "created_at" : "2021-12-23T02:41:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23544#issuecomment-1000001378",
      "id" : 1000001378,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23544",
      "node_id" : "IC_kwDOABII5847ms9i",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1000001378/reactions"
      },
      "updated_at" : "2021-12-23T02:43:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1000001378",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Those were silly mistakes, sorry.\r\n\r\nTried this:\r\n\r\n`importdescriptors '[{ \"desc\": \"wsh(sorted_multi(2,[3c9567fe/87'/0'/0'/0/*]xpub6DJT4N7LcSaLhKPSRkczg1nfD5z2wy1Kw48LAZHGTKDdWcjCc95wdRwQogYUX7M4fyzcXo3wQUrTH86RJ5w8cZ6T6nYdWe6guBN8SEBkPyD,[ad8a04e6/87'/0'/0'/0/*]xpub6DR65ocDPDwTphuxNogrNSWWsmUnFEpBWjhZABGxupZ65st8kaSWVmFripasF8in6JELXPNPbjwyqE8s7dqiGSYyrE9k5UGDF4XQCSALkqi))#00000000\", \"timestamp\": now, \"internal\": \"true\" }]'`\r\n\r\nBut still received `Error: Error parsing JSON` error code.\r\n\r\n(The first descriptor is different because I re-compiled on Node 1)",
      "created_at" : "2021-12-26T18:53:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23544#issuecomment-1001227432",
      "id" : 1001227432,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23544",
      "node_id" : "IC_kwDOABII5847rYSo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1001227432/reactions"
      },
      "updated_at" : "2021-12-26T18:53:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1001227432",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/24482484?v=4",
         "events_url" : "https://api.github.com/users/Rspigler/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Rspigler/followers",
         "following_url" : "https://api.github.com/users/Rspigler/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Rspigler/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Rspigler",
         "id" : 24482484,
         "login" : "Rspigler",
         "node_id" : "MDQ6VXNlcjI0NDgyNDg0",
         "organizations_url" : "https://api.github.com/users/Rspigler/orgs",
         "received_events_url" : "https://api.github.com/users/Rspigler/received_events",
         "repos_url" : "https://api.github.com/users/Rspigler/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Rspigler/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Rspigler/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Rspigler"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "That's still the wrong format. The final `/0/*` needs to be _after_ the xpub. And \"now\" is missing quotes, whereas `true` should not be in quotes, which is probably what triggers the JSON parsing error. (I know it's tedious). You probably also want to set `internal` to `false` if you want to generate receive addresses (`true` is used for change addresses)",
      "created_at" : "2021-12-28T13:47:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/23544#issuecomment-1002113800",
      "id" : 1002113800,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23544",
      "node_id" : "IC_kwDOABII5847uwsI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1002113800/reactions"
      },
      "updated_at" : "2021-12-28T13:48:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1002113800",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   }
]
