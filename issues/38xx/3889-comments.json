[
   {
      "body" : "I think there is more than one change here, since you're also changing the default from 500 to 200. How about a separate pull for that? (although, rather than change the default to a fixed number, I think it would make more sense that this adapts based upon the block sizes - for example, the earlier blocks were very small, and so 500 was a suitable number to request in one go).",
      "created_at" : "2014-03-17T06:50:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3889#issuecomment-37788829",
      "id" : 37788829,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3889",
      "updated_at" : "2014-03-17T06:50:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/37788829",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "I'm fine with adding an option but don't change the default.\r\n",
      "created_at" : "2014-03-17T07:38:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3889#issuecomment-37790710",
      "id" : 37790710,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3889",
      "updated_at" : "2014-03-17T07:38:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/37790710",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/3889#discussion_r10647476"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3889"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/10647476"
         }
      },
      "body" : "Please document the new option in init.cpp as well.",
      "commit_id" : "73d18bcb46c10323405faafedf3420ebeb5d9316",
      "created_at" : "2014-03-17T07:39:48Z",
      "diff_hunk" : "@@ -474,6 +475,9 @@ bool AppInit2(boost::thread_group& threadGroup)\n     if (nFD - MIN_CORE_FILEDESCRIPTORS < nMaxConnections)\n         nMaxConnections = nFD - MIN_CORE_FILEDESCRIPTORS;\n \n+    // Limit number of blocks that may be requested in one go.\n+    nMaxGetBlock = GetArg(\"-limitgetblock\", 200);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3889#discussion_r10647476",
      "id" : 10647476,
      "original_commit_id" : "a0270102666d0591504a63311aa553a102f605c2",
      "original_position" : 13,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/3889",
      "updated_at" : "2014-03-21T01:53:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/10647476",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "It was not my intention to change default in this pull request.",
      "created_at" : "2014-03-21T01:20:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3889#issuecomment-38239716",
      "id" : 38239716,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3889",
      "updated_at" : "2014-03-21T01:20:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/38239716",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/350735?v=3",
         "events_url" : "https://api.github.com/users/hno/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hno/followers",
         "following_url" : "https://api.github.com/users/hno/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hno/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hno",
         "id" : 350735,
         "login" : "hno",
         "organizations_url" : "https://api.github.com/users/hno/orgs",
         "received_events_url" : "https://api.github.com/users/hno/received_events",
         "repos_url" : "https://api.github.com/users/hno/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hno/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hno/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hno"
      }
   },
   {
      "body" : "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/73d18bcb46c10323405faafedf3420ebeb5d9316 for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.",
      "created_at" : "2014-03-21T02:34:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3889#issuecomment-38244147",
      "id" : 38244147,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3889",
      "updated_at" : "2014-03-21T02:34:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/38244147",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2110907?v=3",
         "events_url" : "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BitcoinPullTester/followers",
         "following_url" : "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BitcoinPullTester",
         "id" : 2110907,
         "login" : "BitcoinPullTester",
         "organizations_url" : "https://api.github.com/users/BitcoinPullTester/orgs",
         "received_events_url" : "https://api.github.com/users/BitcoinPullTester/received_events",
         "repos_url" : "https://api.github.com/users/BitcoinPullTester/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BitcoinPullTester/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BitcoinPullTester"
      }
   },
   {
      "body" : "~~ACK~~",
      "created_at" : "2014-03-31T08:58:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3889#issuecomment-39066829",
      "id" : 39066829,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3889",
      "updated_at" : "2014-03-31T09:39:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/39066829",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Unsure about this.\r\n\r\nRight now, any throttling solution will just hurt the one downloading from you, and I doubt you'll notice the difference (that's a guess; I would like to hear evidence otherwise). We already break during the actual sending of block data when the output buffer is full.\r\n\r\nOnce we have actual parallel downloading and smarter selection of peers, throttling won't hurt peers as much anymore, as they can switch to faster ones. When that is the case, an actual -throttleupload option or something seems fine to me, and far superior to this.\r\n\r\nAlso, this option will lose its meaning when headers-first is implemented, as it will use getheaders instead of getblocks.",
      "created_at" : "2014-03-31T09:24:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3889#issuecomment-39069000",
      "id" : 39069000,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3889",
      "updated_at" : "2014-03-31T09:24:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/39069000",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "body" : "Good point @sipa. I was somehow under the wrong impression that this limited the number of blocks in outgoing requests, but as it affects incoming requests I have to take back my ACK as well.",
      "created_at" : "2014-03-31T09:39:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3889#issuecomment-39070163",
      "id" : 39070163,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3889",
      "updated_at" : "2014-03-31T09:39:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/39070163",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "The purpose of this was to throttle the ones downloading from you.\r\n\r\nIt was tested successfully on a slow Internet connection. Without limiting to a smaller size the peers requesting chain download easily overloaded the connection. With limiting the bandwidth usage was under control and it could continue to service both bitcoin and other uses.\r\n",
      "created_at" : "2014-04-15T09:02:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3889#issuecomment-40459833",
      "id" : 40459833,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3889",
      "updated_at" : "2014-04-15T09:02:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/40459833",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/350735?v=3",
         "events_url" : "https://api.github.com/users/hno/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hno/followers",
         "following_url" : "https://api.github.com/users/hno/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hno/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hno",
         "id" : 350735,
         "login" : "hno",
         "organizations_url" : "https://api.github.com/users/hno/orgs",
         "received_events_url" : "https://api.github.com/users/hno/received_events",
         "repos_url" : "https://api.github.com/users/hno/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hno/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hno/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hno"
      }
   },
   {
      "body" : "@sipa, understood. Will propose a entirely different patch shortly, using the TCP buffer instead.",
      "created_at" : "2014-04-15T09:24:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3889#issuecomment-40461554",
      "id" : 40461554,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3889",
      "updated_at" : "2014-04-15T09:24:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/40461554",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/350735?v=3",
         "events_url" : "https://api.github.com/users/hno/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hno/followers",
         "following_url" : "https://api.github.com/users/hno/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hno/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hno",
         "id" : 350735,
         "login" : "hno",
         "organizations_url" : "https://api.github.com/users/hno/orgs",
         "received_events_url" : "https://api.github.com/users/hno/received_events",
         "repos_url" : "https://api.github.com/users/hno/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hno/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hno/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hno"
      }
   },
   {
      "body" : "@hno You may have misunderstood me. As long as we don't have parallel block downloading, I think that any throttling of peers downloading from you hurts both more than it helps.\r\n\r\nAs it's unclear when we'll have parallel downloading, maybe a temporarily solution is detecting when you're over some user-configurable limit, and after that stop serving blocks to new peers (i.e., just disconnect them, so you lose the bandwidth, and they can go find a better peer to download from).",
      "created_at" : "2014-04-15T10:09:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/3889#issuecomment-40465271",
      "id" : 40465271,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/3889",
      "updated_at" : "2014-04-15T10:09:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/40465271",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=3",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
