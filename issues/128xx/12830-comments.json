[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12830#discussion_r178146805"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/178146805"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Would it be possible (or desirable) to include the label of the address that can't be added along with the raw address string in these error messages? Seems like this would provide more context.",
      "commit_id" : "2d15e9ce7d2ca4cc48ce0010e3c1c227a81f3b78",
      "created_at" : "2018-03-29T18:39:32Z",
      "diff_hunk" : "@@ -129,6 +129,18 @@ void EditAddressDialog::accept()\n     QDialog::accept();\n }\n \n+QString EditAddressDialog::getDuplicateAddressWarning() const\n+{\n+    QString bad_addr_purpose = model->purposeForAddress(ui->addressEdit->text());\n+    std::string fmt_str = \"The entered address \\\"%1\\\" is already in the address book.\";\n+\n+    if (bad_addr_purpose == \"receive\" &&\n+            (mode == NewSendingAddress || mode == EditSendingAddress)) {\n+        fmt_str = \"Receiving address \\\"%1\\\" cannot be added as a sending address.\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12830#discussion_r178146805",
      "id" : 178146805,
      "original_commit_id" : "9af990a05c752d1acb4b5d608cac9e3b12376049",
      "original_position" : 20,
      "path" : "src/qt/editaddressdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 108160451,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12830",
      "updated_at" : "2018-04-02T15:27:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/178146805",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12830#discussion_r178147974"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/178147974"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yeah, that's a good idea. Will add.",
      "commit_id" : "2d15e9ce7d2ca4cc48ce0010e3c1c227a81f3b78",
      "created_at" : "2018-03-29T18:44:06Z",
      "diff_hunk" : "@@ -129,6 +129,18 @@ void EditAddressDialog::accept()\n     QDialog::accept();\n }\n \n+QString EditAddressDialog::getDuplicateAddressWarning() const\n+{\n+    QString bad_addr_purpose = model->purposeForAddress(ui->addressEdit->text());\n+    std::string fmt_str = \"The entered address \\\"%1\\\" is already in the address book.\";\n+\n+    if (bad_addr_purpose == \"receive\" &&\n+            (mode == NewSendingAddress || mode == EditSendingAddress)) {\n+        fmt_str = \"Receiving address \\\"%1\\\" cannot be added as a sending address.\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12830#discussion_r178147974",
      "id" : 178147974,
      "in_reply_to_id" : 178146805,
      "original_commit_id" : "9af990a05c752d1acb4b5d608cac9e3b12376049",
      "original_position" : 20,
      "path" : "src/qt/editaddressdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 108161943,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12830",
      "updated_at" : "2018-04-02T15:27:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/178147974",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Incorporated @ryanofsky's feedback and rebased ([diff](https://gist.github.com/jamesob/6bd9721e11431d636fd2b9f6399a45ef)).",
      "created_at" : "2018-03-30T14:19:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12830#issuecomment-377534198",
      "id" : 377534198,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12830",
      "updated_at" : "2018-03-30T14:19:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/377534198",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK. Will review later.",
      "created_at" : "2018-04-01T18:40:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12830#issuecomment-377807437",
      "id" : 377807437,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12830",
      "updated_at" : "2018-04-01T18:40:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/377807437",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed Travis failures (unchecked `db_cxx.h` include, whitespace) and rebased.",
      "created_at" : "2018-04-02T13:46:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12830#issuecomment-377932270",
      "id" : 377932270,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12830",
      "updated_at" : "2018-04-02T13:46:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/377932270",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12830#discussion_r178564553"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/178564553"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`would should`",
      "commit_id" : "2d15e9ce7d2ca4cc48ce0010e3c1c227a81f3b78",
      "created_at" : "2018-04-02T15:12:20Z",
      "diff_hunk" : "@@ -0,0 +1,140 @@\n+#include <qt/test/addressbooktests.h>\n+#include <qt/test/util.h>\n+#include <test/test_bitcoin.h>\n+\n+#include <qt/addressbookpage.h>\n+#include <qt/addresstablemodel.h>\n+#include <qt/editaddressdialog.h>\n+#include <qt/callback.h>\n+#include <qt/optionsmodel.h>\n+#include <qt/platformstyle.h>\n+#include <qt/qvalidatedlineedit.h>\n+#include <qt/walletmodel.h>\n+\n+#include <key.h>\n+#include <pubkey.h>\n+#include <key_io.h>\n+#include <wallet/wallet.h>\n+\n+#include <QTimer>\n+#include <QMessageBox>\n+\n+namespace\n+{\n+\n+/**\n+ * Fill the edit address dialog box with data, submit it, and ensure that\n+ * the resulting message meets expectations.\n+ */\n+void EditAddressAndSubmit(\n+        EditAddressDialog* dialog,\n+        const QString& label, const QString& address, QString expected_msg)\n+{\n+    QString warning_text;\n+\n+    dialog->findChild<QLineEdit*>(\"labelEdit\")->setText(label);\n+    dialog->findChild<QValidatedLineEdit*>(\"addressEdit\")->setText(address);\n+\n+    ConfirmMessage(&warning_text, 5);\n+    dialog->accept();\n+    QCOMPARE(warning_text, expected_msg);\n+}\n+\n+/**\n+ * Test adding various send addresses to the address book.\n+ *\n+ * There are three cases tested:\n+ *\n+ *   - new_address: a new address would should add as a send address successfully.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12830#discussion_r178564553",
      "id" : 178564553,
      "original_commit_id" : "a5406962daa18a20e21eda8b578bccfad1630fd4",
      "original_position" : 48,
      "path" : "src/qt/test/addressbooktests.cpp",
      "position" : null,
      "pull_request_review_id" : 108640161,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12830",
      "updated_at" : "2018-04-02T15:27:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/178564553",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/12830#discussion_r178568186"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12830"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/178568186"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Oops, fixed.",
      "commit_id" : "2d15e9ce7d2ca4cc48ce0010e3c1c227a81f3b78",
      "created_at" : "2018-04-02T15:27:48Z",
      "diff_hunk" : "@@ -0,0 +1,140 @@\n+#include <qt/test/addressbooktests.h>\n+#include <qt/test/util.h>\n+#include <test/test_bitcoin.h>\n+\n+#include <qt/addressbookpage.h>\n+#include <qt/addresstablemodel.h>\n+#include <qt/editaddressdialog.h>\n+#include <qt/callback.h>\n+#include <qt/optionsmodel.h>\n+#include <qt/platformstyle.h>\n+#include <qt/qvalidatedlineedit.h>\n+#include <qt/walletmodel.h>\n+\n+#include <key.h>\n+#include <pubkey.h>\n+#include <key_io.h>\n+#include <wallet/wallet.h>\n+\n+#include <QTimer>\n+#include <QMessageBox>\n+\n+namespace\n+{\n+\n+/**\n+ * Fill the edit address dialog box with data, submit it, and ensure that\n+ * the resulting message meets expectations.\n+ */\n+void EditAddressAndSubmit(\n+        EditAddressDialog* dialog,\n+        const QString& label, const QString& address, QString expected_msg)\n+{\n+    QString warning_text;\n+\n+    dialog->findChild<QLineEdit*>(\"labelEdit\")->setText(label);\n+    dialog->findChild<QValidatedLineEdit*>(\"addressEdit\")->setText(address);\n+\n+    ConfirmMessage(&warning_text, 5);\n+    dialog->accept();\n+    QCOMPARE(warning_text, expected_msg);\n+}\n+\n+/**\n+ * Test adding various send addresses to the address book.\n+ *\n+ * There are three cases tested:\n+ *\n+ *   - new_address: a new address would should add as a send address successfully.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12830#discussion_r178568186",
      "id" : 178568186,
      "in_reply_to_id" : 178564553,
      "original_commit_id" : "a5406962daa18a20e21eda8b578bccfad1630fd4",
      "original_position" : 48,
      "path" : "src/qt/test/addressbooktests.cpp",
      "position" : null,
      "pull_request_review_id" : 108644491,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/12830",
      "updated_at" : "2018-04-02T15:27:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/178568186",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the review, @jnewbery. Typo fixed and rebased.\r\n```diff\r\n $ diff -u <(git diff master...a540696) <(git diff master...2d15e9c)\r\n\r\n--- /proc/self/fd/11    2018-04-02 11:30:04.855218939 -0400\r\n+++ /proc/self/fd/12    2018-04-02 11:30:04.855218939 -0400\r\n@@ -192,7 +192,7 @@\r\n      Mode mode;\r\n diff --git a/src/qt/test/addressbooktests.cpp b/src/qt/test/addressbooktests.cpp\r\n new file mode 100644\r\n-index 0000000000..bc9ace14d7\r\n+index 0000000000..84c765e48a\r\n --- /dev/null\r\n +++ b/src/qt/test/addressbooktests.cpp\r\n @@ -0,0 +1,140 @@\r\n@@ -243,7 +243,7 @@\r\n + *\r\n + * There are three cases tested:\r\n + *\r\n-+ *   - new_address: a new address would should add as a send address successfully.\r\n++ *   - new_address: a new address which should add as a send address successfully.\r\n + *   - existing_s_address: an existing sending address which won't add successfully.\r\n + *   - existing_r_address: an existing receiving address which won't add successfully.\r\n + *\r\n```",
      "created_at" : "2018-04-02T15:30:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12830#issuecomment-377956112",
      "id" : 377956112,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12830",
      "updated_at" : "2018-04-02T15:30:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/377956112",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "reACK 2d15e9ce7d2ca4cc48ce0010e3c1c227a81f3b78",
      "created_at" : "2018-04-02T15:52:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/12830#issuecomment-377961388",
      "id" : 377961388,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12830",
      "updated_at" : "2018-04-02T15:52:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/377961388",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
