[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "There is some overlap here with the descriptor wallet project: https://github.com/bitcoin/bitcoin/projects/12, particularly 32f73f57450d4bab188d73c9d6a9e8060b75a7c7 from #17261 which starts to lock `CWallet::cs_wallet` and `FillableSigningProvider::cs_KeyStore` mutexes in different place.\r\n\r\nOverall, I'm not so enthusiastic about adding more fine-grained mutexes to the wallet. I think you could probably get better performance and fewer bugs using a small number of mutexes (maybe even just one), but just being more careful to keep the mutex locked as briefly as possible, and doing blocking operations like database writes with the mutex unlocked.\r\n\r\nThat's just an overall inclination, though. There may be different wallet functions which don't need to interact with each other and really should break off and do their own synchronization.",
      "created_at" : "2019-12-04T20:21:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17667#issuecomment-561822421",
      "id" : 561822421,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17667",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2MTgyMjQyMQ==",
      "updated_at" : "2019-12-04T20:21:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/561822421",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes don't have spent that much time thinking on it, so don't have any strong inclination, just wanted to raise the awareness than if `cs_main` get removed it's now worthy to do work to improve performance, either way with more fine-grained locks or short-lived, just-in-time mutex holding",
      "created_at" : "2019-12-04T21:25:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17667#issuecomment-561845181",
      "id" : 561845181,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17667",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2MTg0NTE4MQ==",
      "updated_at" : "2019-12-04T21:25:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/561845181",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   }
]
